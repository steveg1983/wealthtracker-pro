<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Wealth Tracker Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            background: #e0e0e0;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Wealth Tracker - Basic Test</h1>
    <div id="status"></div>
    <div id="root"></div>

    <script>
        const status = document.getElementById('status');
        
        // Force clear any service workers
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                registrations.forEach(reg => reg.unregister());
                status.innerHTML += '<div class="status success">✓ Service workers cleared</div>';
            });
        }
        
        // Clear caches
        if ('caches' in window) {
            caches.keys().then(names => {
                names.forEach(name => caches.delete(name));
                status.innerHTML += '<div class="status success">✓ Caches cleared</div>';
            });
        }
        
        // Test if React app can load
        status.innerHTML += '<div class="status">Loading React app...</div>';
        
        // Create a basic React root
        const script = document.createElement('script');
        script.type = 'module';
        script.innerHTML = `
            import React from '/node_modules/react/index.js';
            import ReactDOM from '/node_modules/react-dom/client/index.js';
            
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(React.createElement('div', {}, 'React is working! The app should load here.'));
            
            document.getElementById('status').innerHTML += '<div class="status success">✓ React loaded successfully!</div>';
            
            // Now try to load the actual app
            setTimeout(() => {
                window.location.href = '/';
            }, 2000);
        `;
        
        script.onerror = (e) => {
            status.innerHTML += '<div class="status error">✗ Failed to load React: ' + e.message + '</div>';
            status.innerHTML += '<div class="status">Redirecting to app anyway...</div>';
            setTimeout(() => {
                window.location.href = '/';
            }, 2000);
        };
        
        document.body.appendChild(script);
    </script>
</body>
</html>