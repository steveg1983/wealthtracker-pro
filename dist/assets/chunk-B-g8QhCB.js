function e(e,o){const t=n.useCallback(()=>{if("undefined"==typeof window)return o instanceof Function?o():o;try{const n=window.localStorage.getItem(e);return null==n?o instanceof Function?o():o:JSON.parse(n)}catch(n){return console.error(`Error reading localStorage key "${e}":`,n),o instanceof Function?o():o}},[o,e]),[r,a]=n.useState(()=>t()),i=n.useCallback(n=>{try{const o=n instanceof Function?n(r):n;a(o),"undefined"!=typeof window&&(void 0===o?window.localStorage.removeItem(e):window.localStorage.setItem(e,JSON.stringify(o)),window.dispatchEvent(new Event("local-storage")))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]);return n.useEffect(()=>{const n=n=>{n.key===e&&a(t())},o=()=>{a(t())};return window.addEventListener("storage",n),window.addEventListener("local-storage",o),()=>{window.removeEventListener("storage",n),window.removeEventListener("local-storage",o)}},[e]),[r,i]}import{r as n}from"./chunk-DowOIOga.js";export{e as u};
