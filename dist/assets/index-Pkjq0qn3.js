const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-CS0tP5ym.js","assets/chunk-BWx9oMeS.js","assets/chunk-BN8kgYrt.js","assets/chunk-Drd-K-oK.js","assets/Welcome-J0Cz1Hz9.js","assets/Dashboard-fv6ISrcV.js","assets/chunk-BnYLBI7x.js","assets/Accounts-vNbSvxMW.js","assets/chunk-B2-J6WC6.js","assets/chunk-BYFRQ0Wn.js","assets/chunk-Cr6lPFsU.js","assets/chunk-CwTNb39n.js","assets/chunk-BxklXyU5.js","assets/TransactionsComparison-ddDY8s8t.js","assets/VirtualizedTransactionList-Deul3CEL.js","assets/chunk-B4Yu4FH1.js","assets/EditTransactionModal-CeBGvOeN.js","assets/chunk-B7HJJKUW.js","assets/chunk-ybZz33tU.js","assets/chunk-qYdZW6fT.js","assets/Reconciliation-Dlpti28O.js","assets/Investments-Bfpfj-gr.js","assets/chunk-CpxUZIWP.js","assets/chunk-DpoEFI3w.js","assets/Budget-M7gd6Ig8.js","assets/chunk-S7gbZ2pr.js","assets/Goals-BllHWBWo.js","assets/Analytics-IJdWsQnf.js","assets/chunk-DyhMGJi1.js","assets/chunk-B_sbv61Y.js","assets/chunk-DLIzqRsk.js","assets/Analytics-G2uhCccw.css","assets/AdvancedAnalytics-CXt5nlIA.js","assets/chunk-CnkfrpEp.js","assets/AIFeatures-BkqqwVF6.js","assets/SmartCategorizationSettings-BkP6s5G7.js","assets/chunk-CkYa08k9.js","assets/chunk-CGkNpBL1.js","assets/CustomReports-AzxPZ2lg.js","assets/chunk-Crl7AYUu.js","assets/TaxPlanning-CzQI_rA2.js","assets/Settings-rkNCBXYm.js","assets/chunk-DFeebpVN.js","assets/AppSettings-DD42wg-8.js","assets/DataManagement-BAEXqEq1.js","assets/Categories-CAUWcp4k.js","assets/Tags-DKCC5JaJ.js","assets/DeletedAccounts-CBZdE89G.js","assets/SecuritySettings-BCNrHQlE.js","assets/chunk-Cvxg0-1j.js","assets/AuditLogs-BVYvGkiA.js","assets/chunk-CMYn1uit.js","assets/Notifications-Bp7MuSCI.js","assets/AccessibilitySettings-B9xjS6Wx.js","assets/AccessibilityDashboard-DEddIfFm.js","assets/AccountTransactions-CFZOzeI_.js","assets/FinancialSummaries-CWuu0UKN.js","assets/EnhancedInvestments-C2rzSeWA.js","assets/HouseholdManagement-DqyBq6AY.js","assets/MobileFeatures-_hz1GwSb.js","assets/BusinessFeatures-BPYa8uDH.js","assets/FinancialPlanning-CCNJ0Xif.js","assets/DataIntelligence-jxrdhkaK.js","assets/ExportManager-CWRys4Ms.js","assets/Advanced-I0h-J_In.js","assets/EnhancedImport-AmHEF398.js","assets/chunk-BUNwFMNM.js","assets/chunk-5nUEduVz.js","assets/chunk-BfKHasoP.js","assets/chunk-tZvAe11p.js","assets/ImportRulesManager-DWD6Nbh-.js","assets/BatchImportModal-pdRTqqMb.js","assets/Documents-CflftXI9.js","assets/OCRTest-DZe7xI91.js","assets/OpenBanking-Sutevx6M.js","assets/Performance-DrFbHZrV.js","assets/Subscription-BfPZ06wu.js","assets/csrf-protection-5A9EuiUo.js"])))=>i.map(i=>d[i]);
function e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function t(){function e(e,t,r){var o,c={},l=null,u=null;for(o in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===c[o]&&(c[o]=t[o]);return{$$typeof:n,type:e,key:l,ref:u,props:c,_owner:s.current}}if(go)return vo;go=1;var t=Wi(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};return vo.Fragment=r,vo.jsx=e,vo.jsxs=e,vo}function n(){return mo||(mo=1,yo.exports=t()),yo.exports}function r(){if(fo)return wo;fo=1;var e=qi();return wo.createRoot=e.createRoot,wo.hydrateRoot=e.hydrateRoot,wo}function a({packageName:e,customMessages:t}){function n(e,t){if(!t)return`${r}: ${e}`;let n=e;const a=e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const r of a){const e=(t[r[1]]||"").toString();n=n.replace(`{{${r[1]}}}`,e)}return`${r}: ${n}`}let r=e;const a={..._o,...t};return{setPackageName({packageName:e}){return"string"==typeof e&&(r=e),this},setMessages({customMessages:e}){return Object.assign(a,e||{}),this},throwInvalidPublishableKeyError(e){throw new Error(n(a.InvalidPublishableKeyErrorMessage,e))},throwInvalidProxyUrl(e){throw new Error(n(a.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw new Error(n(a.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(a.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(e){throw new Error(n(a.MissingClerkProvider,e))},throw(e){throw new Error(n(e))}}}function s(e){if(!e.endsWith("$"))return!1;const t=e.slice(0,-1);return!t.includes("$")&&t.includes(".")}function i(e,t={}){if(!(e=e||"")||!o(e)){if(t.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(t.fatal&&!o(e))throw new Error("Publishable key not valid.");return null}const n=e.startsWith(Ro)?"production":"development";let r;try{r=Mo(e.split("_")[2])}catch{if(t.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!s(r)){if(t.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let a=r.slice(0,-1);return t.proxyUrl?a=t.proxyUrl:"development"!==n&&t.domain&&t.isSatellite&&(a=`clerk.${t.domain}`),{instanceType:n,frontendApi:a}}function o(e=""){try{if(!e.startsWith(Ro)&&!e.startsWith("pk_test_"))return!1;const t=e.split("_");if(3!==t.length)return!1;const n=t[2];return!!n&&s(Mo(n))}catch{return!1}}function c(e,t){return{event:"METHOD_CALLED",eventSamplingRate:.1,payload:{method:e,...t}}}async function l(...e){async function t(t){const[r]=mc(t);if(!r)return;const[s,d]=ec(n,r),[h,p,g,m]=$o.get(n),f=()=>{const e=h[r];return(Go(i.revalidate)?i.revalidate(s().data,t):!1!==i.revalidate)&&(delete g[r],delete m[r],e&&e[0])?e[0](2).then(()=>s().data):s().data};if(e.length<3)return f();let y,v=a,b=!1;const w=yc();p[r]=[w,0];const x=!qo(l),k=s(),_=k.data,S=k._c,j=qo(S)?_:S;if(x&&(l=Go(l)?l(j,_):l,d({data:l,_c:j})),Go(v))try{v=v(j)}catch(I){y=I,b=!0}if(v&&Ho(v)){if(v=await v.catch(e=>{y=e,b=!0}),w!==p[r][0]){if(b)throw y;return v}b&&x&&(e=>"function"==typeof c?c(e):!1!==c)(y)&&(o=!0,d({data:j,_c:Fo}))}if(o&&!b)if(Go(o)){const e=o(v,j);d({data:e,error:Fo,_c:Fo})}else d({data:v,error:Fo,_c:Fo});if(p[r][1]=yc(),Promise.resolve(f()).then(()=>{d({_c:Fo})}),!b)return v;if(u)throw y}const[n,r,a,s]=e,i=Vo({populateCache:!0,throwOnError:!0},"boolean"==typeof s?{revalidate:s}:s||{});let o=i.populateCache;const c=i.rollbackOnError;let l=i.optimisticData;const u=i.throwOnError;if(Go(r)){const e=r,a=[],s=n.keys();for(const t of s)!/^\$(inf|sub)\$/.test(t)&&e(n.get(t)._k)&&a.push(t);return Promise.all(a.map(t))}return t(r)}function u(e,t,n){for(n of e.keys())if(d(n,t))return n}function d(e,t){var n,r,a;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&d(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((a=r)&&"object"==typeof a&&!(a=u(t,a)))return!1;if(!t.has(a))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((a=r[0])&&"object"==typeof a&&!(a=u(t,a)))return!1;if(!d(r[1],t.get(a)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"==typeof e){for(n in r=0,e){if(rl.call(e,n)&&++r&&!rl.call(t,n))return!1;if(!(n in t)||!d(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!=e&&t!=t}function h(e,t){if(!e)throw"string"==typeof t?new Error(t):new Error(`${t.displayName} not found`)}function p(e){if(!Vi.useContext(il)){if("function"==typeof e)return void e();throw new Error(`${e} can only be used within the <ClerkProvider /> component.\n\nPossible fixes:\n1. Ensure that the <ClerkProvider /> is correctly wrapping your application where this component is used.\n2. Check for multiple versions of the \`@clerk/shared\` package in your project. Use a tool like \`npm ls @clerk/shared\` to identify multiple versions, and update your dependencies to only rely on one.\n\nLearn more: https://clerk.com/docs/components/clerk-provider`.trim())}}function g(){p(bl);const e=ll(),t=ol();return t.telemetry?.record(c(bl)),void 0===e?{isLoaded:!1,isSignedIn:void 0,user:void 0}:null===e?{isLoaded:!0,isSignedIn:!1,user:null}:{isLoaded:!0,isSignedIn:!0,user:e}}function m(e,t,n){return"function"==typeof e?e(t):void 0!==e?e:void 0!==n?n:void 0}function f(e,t){const n=Gi.useRef(),[r,a]=Gi.useState("rendering");return Gi.useEffect(()=>{if(!e)throw new Error("Clerk: no component name provided, unable to detect mount.");if("undefined"!=typeof window&&!n.current){const r=`[data-clerk-component="${e}"]`,s=null==t?void 0:t.selector;n.current=ru({selector:s?r+s:r}).then(()=>{a("rendered")}).catch(()=>{a("error")})}},[e,null==t?void 0:t.selector]),r}function y({children:e}){return zl("<UserProfile.Page /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`."),Vi.createElement(Vi.Fragment,null,e)}function v({children:e}){return zl("<UserProfile.Link /> component needs to be a direct child of `<UserProfile />` or `<UserButton />`."),Vi.createElement(Vi.Fragment,null,e)}function b({children:e}){return zl("<UserButton.MenuItems /> component needs to be a direct child of `<UserButton />`."),Vi.createElement(Vi.Fragment,null,e)}function w({children:e}){return zl("<UserButton.Action /> component needs to be a direct child of `<UserButton.MenuItems />`."),Vi.createElement(Vi.Fragment,null,e)}function x({children:e}){return zl("<UserButton.Link /> component needs to be a direct child of `<UserButton.MenuItems />`."),Vi.createElement(Vi.Fragment,null,e)}function k({children:e}){return zl("<OrganizationProfile.Page /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`."),Vi.createElement(Vi.Fragment,null,e)}function _({children:e}){return zl("<OrganizationProfile.Link /> component needs to be a direct child of `<OrganizationProfile />` or `<OrganizationSwitcher />`."),Vi.createElement(Vi.Fragment,null,e)}function S(e){return e.startsWith("/")}async function j(e="",t){const{async:n,defer:r,beforeLoad:a,crossOrigin:s,nonce:i}=t||{};return(async(e,t={})=>{let n=0;const{shouldRetry:r,initialDelay:a,maxDelayBetweenRetries:s,factor:i,retryImmediately:o,jitter:c,onBeforeRetry:l}={...ku,...t},u=(e=>{let t=0;return async()=>{await _u((()=>{const n=e.factor;let r=e.initialDelay*Math.pow(n,t);return r=Su(r,e.jitter),Math.min(e.maxDelayBetweenRetries||r,r)})()),t++}})({initialDelay:a,maxDelayBetweenRetries:s,factor:i,jitter:c});for(;;)try{return await e()}catch(d){if(n++,!r(d,n))throw d;l&&await l(n),o&&1===n?await _u(Su(100,c)):await u()}})(()=>new Promise((t,o)=>{e||o(new Error("loadScript cannot be called without a src")),document&&document.body||o(new Error("loadScript cannot be called when document does not exist"));const c=document.createElement("script");s&&c.setAttribute("crossorigin",s),c.async=n||!1,c.defer=r||!1,c.addEventListener("load",()=>{c.remove(),t(c)}),c.addEventListener("error",t=>{c.remove(),o(t.error??new Error(`failed to load script: ${e}`))}),c.src=e,c.nonce=i,a?.(c),document.body.appendChild(c)}),{shouldRetry:(e,t)=>t<=5})}function I(){if("undefined"==typeof window||!window.Clerk)return!1;const e=window.Clerk;return"object"==typeof e&&"function"==typeof e.load}function C(e){return new Promise((t,n)=>{let r=!1;const a=(e,t)=>{clearTimeout(e),clearInterval(t)},s=()=>{r||I()&&(r=!0,a(i,o),t(null))},i=setTimeout(()=>{r||(r=!0,a(i,o),I()?t(null):n(new So(ju,{code:"failed_to_load_clerk_js_timeout"})))},e);s();const o=setInterval(()=>{r?clearInterval(o):s()},100)})}function E(){return"undefined"!=typeof window}function T(e){const{isomorphicClerkOptions:t,initialState:n,children:r}=e,{isomorphicClerk:a,clerkStatus:s}=Ju(t),[i,o]=Vi.useState({client:a.client,session:a.session,user:a.user,organization:a.organization});Vi.useEffect(()=>a.addListener(e=>o({...e})),[]);const c=((e,t,n)=>!e&&n?Tu(n):Nu(t))(a.loaded,i,n),l=Vi.useMemo(()=>({value:a}),[s]),u=Vi.useMemo(()=>({value:i.client}),[i.client]),{sessionId:d,sessionStatus:h,sessionClaims:p,session:g,userId:m,user:f,orgId:y,actor:v,organization:b,orgRole:w,orgSlug:x,orgPermissions:k,factorVerificationAge:_}=c,S=Vi.useMemo(()=>({value:{sessionId:d,sessionStatus:h,sessionClaims:p,userId:m,actor:v,orgId:y,orgRole:w,orgSlug:x,orgPermissions:k,factorVerificationAge:_}}),[d,h,m,v,y,w,x,_,null==p?void 0:p.__raw]),j=Vi.useMemo(()=>({value:g}),[d,g]),I=Vi.useMemo(()=>({value:f}),[m,f]),C=Vi.useMemo(()=>({value:{organization:b}}),[y,b]);return Vi.createElement(Nl.Provider,{value:l},Vi.createElement(ul.Provider,{value:u},Vi.createElement(dl.Provider,{value:j},Vi.createElement(fl,{...C.value},Vi.createElement(El.Provider,{value:S},Vi.createElement(cl.Provider,{value:I},Vi.createElement(gl,{value:void 0},r)))))))}function N(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function A(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function O(e,t,n,r){var a,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,n,i):a(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}function D(e,t){return function(n,r){t(n,r,e)}}function P(e,t,n,r,a,s){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=r.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h=!1,p=n.length-1;p>=0;p--){var g={};for(var m in r)g[m]="access"===m?{}:r[m];for(var m in r.access)g.access[m]=r.access[m];g.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(e||null))};var f=(0,n[p])("accessor"===c?{get:d.get,set:d.set}:d[l],g);if("accessor"===c){if(void 0===f)continue;if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=i(f.get))&&(d.get=o),(o=i(f.set))&&(d.set=o),(o=i(f.init))&&a.unshift(o)}else(o=i(f))&&("field"===c?a.unshift(o):d[l]=o)}u&&Object.defineProperty(u,r.name,d),h=!0}function M(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0}function L(e){return"symbol"==typeof e?e:"".concat(e)}function R(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function U(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function z(e,t,n,r){return new(n||(n=Promise))(function(a,s){function i(e){try{c(r.next(e))}catch(t){s(t)}}function o(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}c((r=r.apply(e,t||[])).next())})}function $(e,t){function n(n){return function(c){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,n[0]&&(i=0)),i;)try{if(r=1,a&&(s=2&n[0]?a.return:n[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,n[1])).done)return s;switch(a=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,a=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){i.label=n[1];break}if(6===n[0]&&i.label<s[1]){i.label=s[1],s=n;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(n);break}s[2]&&i.ops.pop(),i.trys.pop();continue}n=t.call(e,i)}catch(c){n=[6,c],a=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,c])}}var r,a,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=n(0),o.throw=n(1),o.return=n(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}function B(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||Ld(t,e,n)}function F(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)i.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return i}function q(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}function G(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var s=arguments[t],i=0,o=s.length;i<o;i++,a++)r[a]=s[i];return r}function V(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function H(e){return this instanceof H?(this.v=e,this):new H(e)}function Y(e,t,n){function r(e,t){l[e]&&(c[e]=function(t){return new Promise(function(n,r){u.push([e,t,n,r])>1||a(e,t)})},t&&(c[e]=t(c[e])))}function a(e,t){try{(n=l[e](t)).value instanceof H?Promise.resolve(n.value.v).then(s,i):o(u[0][2],n)}catch(r){o(u[0][3],r)}var n}function s(e){a("next",e)}function i(e){a("throw",e)}function o(e,t){e(t),u.shift(),u.length&&a(u[0][0],u[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=n.apply(e,t||[]),u=[];return c=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),r("next"),r("throw"),r("return",function(e){return function(t){return Promise.resolve(t).then(e,i)}}),c[Symbol.asyncIterator]=function(){return this},c}function K(e){function t(t,a){n[t]=e[t]?function(n){return(r=!r)?{value:H(e[t](n)),done:!1}:a?a(n):n}:a}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function Z(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,a,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=F(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function J(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Q(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=Ud(e),r=0;r<n.length;r++)"default"!==n[r]&&Ld(t,e,n[r]);return Rd(t,e),t}function X(e){return e&&e.__esModule?e:{default:e}}function ee(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function te(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n}function ne(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function re(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}function ae(e){function t(t){e.error=e.hasError?new zd(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function a(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(a);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(a,function(e){return t(e),a()})}else r|=1}catch(i){t(i)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function se(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,a,s){return n?t?".jsx":".js":!r||a&&s?r+a+"."+s.toLowerCase()+"js":e}):e}function ie(){if(uh)return yh;uh=1,Object.defineProperty(yh,"__esModule",{value:!0});let e=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};return yh.default=e,yh}function oe(){if(dh)return th;dh=1,Object.defineProperty(th,"__esModule",{value:!0});const e=Zd,t=e.__importDefault(lh),n=e.__importDefault(ie());return th.default=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(n=e.shouldThrowOnError)&&void 0!==n&&n,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,a,s;let i=null,o=null,c=null,l=e.status,u=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const n=null===(r=this.headers.get("Prefer"))||void 0===r?void 0:r.match(/count=(exact|planned|estimated)/),s=null===(a=e.headers.get("content-range"))||void 0===a?void 0:a.split("/");n&&s&&s.length>1&&(c=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,c=null,l=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,l=200,u="OK")}catch(d){404===e.status&&""===t?(l=204,u="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(s=null==i?void 0:i.details)||void 0===s?void 0:s.includes("0 rows"))&&(i=null,l=200,u="OK"),i&&this.shouldThrowOnError)throw new n.default(i)}return{error:i,data:o,count:c,status:l,statusText:u}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},th}function ce(){if(hh)return eh;hh=1,Object.defineProperty(eh,"__esModule",{value:!0});const e=Zd.__importDefault(oe());let t=class extends e.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const s=a?`${a}.order`:"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const a=void 0===r?"offset":`${r}.offset`,s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:s="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${c}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};return eh.default=t,eh}function le(){if(ph)return Xd;ph=1,Object.defineProperty(Xd,"__esModule",{value:!0});const e=Zd.__importDefault(ce()),t=new RegExp("[,()]");let n=class extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,n){const r=Array.from(new Set(n)).map(e=>"string"==typeof e&&t.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const s=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};return Xd.default=n,Xd}function ue(){if(gh)return Qd;gh=1,Object.defineProperty(Qd,"__esModule",{value:!0});const e=Zd.__importDefault(le());return Qd.default=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(t,n){const{head:r=!1,count:a}=null!=n?n:{},s=r?"HEAD":"GET";let i=!1;const o=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var a;if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==n&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(t,{count:n}={}){var r;return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}delete({count:t}={}){var n;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}},Qd}function de(){if(mh)return Jd;mh=1,Object.defineProperty(Jd,"__esModule",{value:!0});const e=Zd,t=e.__importDefault(ue()),n=e.__importDefault(le());class r{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new t.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new r(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:a=!1,count:s}={}){var i;let o;const c=new URL(`${this.url}/rpc/${e}`);let l;r||a?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{c.searchParams.append(e,t)})):(o="POST",l=t);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new n.default({method:o,url:c,headers:u,schema:this.schemaName,body:l,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return Jd.default=r,Jd}function he(){if(fh)return Kd;fh=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.PostgrestError=Kd.PostgrestBuilder=Kd.PostgrestTransformBuilder=Kd.PostgrestFilterBuilder=Kd.PostgrestQueryBuilder=Kd.PostgrestClient=void 0;const e=Zd,t=e.__importDefault(de());Kd.PostgrestClient=t.default;const n=e.__importDefault(ue());Kd.PostgrestQueryBuilder=n.default;const r=e.__importDefault(le());Kd.PostgrestFilterBuilder=r.default;const a=e.__importDefault(ce());Kd.PostgrestTransformBuilder=a.default;const s=e.__importDefault(oe());Kd.PostgrestBuilder=s.default;const i=e.__importDefault(ie());return Kd.PostgrestError=i.default,Kd.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:s.default,PostgrestError:i.default},Kd}function pe(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}function ge(e,t,n,r,a,s){return z(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,((e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n)):a})(t,r,a,s)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>((e,t,n)=>z(void 0,void 0,void 0,function*(){const r=yield z(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield po(()=>Promise.resolve().then(()=>ch),void 0)).Response:Response});e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{const r=e.status||500,a=(null==n?void 0:n.statusCode)||r+"";t(new op(dp(n),r,a))}).catch(e=>{t(new cp(dp(e),e))}):t(new cp(dp(e),e))}))(e,o,r))})})}function me(e,t,n,r){return z(this,void 0,void 0,function*(){return ge(e,"GET",t,n,r)})}function fe(e,t,n,r,a){return z(this,void 0,void 0,function*(){return ge(e,"POST",t,r,a,n)})}function ye(e,t,n,r,a){return z(this,void 0,void 0,function*(){return ge(e,"PUT",t,r,a,n)})}function ve(e,t,n,r,a){return z(this,void 0,void 0,function*(){return ge(e,"DELETE",t,r,a,n)})}function be(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}function we(e,t,n,r,a){return z(this,void 0,void 0,function*(){return function(e,t,n,r,a,s){return z(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,((e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),n)):a})(t,r,a,s)).then(e=>{if(!e.ok)throw e;if(null==r?void 0:r.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,n)=>z(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==n?void 0:n.noResolveJson)){const n=e.status||500,r=e;if("function"==typeof r.json)r.json().then(e=>{const r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||n+"";t(new Sp(Tp(e),n,r))}).catch(()=>{const e=n+"",a=r.statusText||`HTTP ${n} error`;t(new Sp(a,n,e))});else{const e=n+"",a=r.statusText||`HTTP ${n} error`;t(new Sp(a,n,e))}}else t(new jp(Tp(e),e))}))(e,o,r))})})}(e,"POST",t,r,a,n)})}function xe(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}function ke(e){return xe(e)&&"AuthRetryableFetchError"===e.name}function _e(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(ig[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(ig[e]),t.queuedBits-=6}}function Se(e,t,n){const r=cg[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function je(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let i=0;i<e.length;i+=1)Se(e.charCodeAt(i),a,s);return t.join("")}function Ie(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Ce(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)Se(e.charCodeAt(a),n,r);return new Uint8Array(t)}function Ee(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>_e(e,n,r)),_e(null,n,r),t.join("")}function Te(e){const t=e.split(".");if(3!==t.length)throw new sg("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Hp.test(t[n]))throw new sg("JWT not in base64url format");return{header:JSON.parse(je(t[0])),payload:JSON.parse(je(t[1])),signature:Ce(t[2]),raw:{header:t[0],payload:t[1]}}}function Ne(e){return("0"+e.toString(16)).substr(-2)}async function Ae(e,t,n=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Ne).join("")}();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await pg(e,`${t}-code-verifier`,a);const s=await async function(e){if("undefined"==typeof crypto||void 0===crypto.subtle||"undefined"==typeof TextEncoder)return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(r);return[s,r===s?"plain":"s256"]}function Oe(e){if(!vg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function De(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Pe(e){return JSON.parse(JSON.stringify(e))}async function Me(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new rg(bg(e),0);if(wg.includes(e.status))throw new rg(bg(e),e.status);let r,a;try{r=await e.json()}catch(i){throw new Zp(bg(i),i)}const s=function(e){const t=e.headers.get(Gp);if(!t)return null;if(!t.match(yg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(s&&s.getTime()>=Vp.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new ag(bg(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Qp}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new ag(bg(r),e.status,r.weak_password.reasons);throw new Kp(bg(r),e.status||500,a)}async function Le(e,t,n,r){var a;const s=Object.assign({},null==r?void 0:r.headers);s[Gp]||(s[Gp]=Vp.name),(null==r?void 0:r.jwt)&&(s.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await async function(e,t,n,r,a,s){const i=((e,t,n,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))})(t,r,{},s);let o;try{o=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new rg(bg(c),0)}if(o.ok||await Me(o),null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(c){await Me(c)}}(e,t,n+o,{headers:s,noResolveJson:null==r?void 0:r.noResolveJson},0,null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(c):{data:Object.assign({},c),error:null}}function Re(e){var t;let n=null;var r;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r))),{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Ue(e){const t=Re(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ze(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function $e(e){return{data:e,error:null}}function Be(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,i=A(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},user:Object.assign({},i)},error:null}}function Fe(e){return e}function We(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}async function qe(e,t,n){const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw new jg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_g)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){}return await n()}try{return await n()}finally{}}))}function Ge(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Ve(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}function He({error:e,options:t}){var n,r,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Ig({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(n=s.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new Ig({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=s.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new Ig({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(a=s.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new Ig({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Ig({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Ig({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name)return 0===s.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Ig({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ig({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Xe(t))return new Ig({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(s.rp.id!==t)return new Ig({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Ig({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Ig({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ig({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ye({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Ig({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Ig({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Xe(t))return new Ig({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rpId!==t)return new Ig({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Ig({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ig({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ke(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=A(e,["challenge","user","excludeCredentials"]),s=Ce(t).buffer,i=Object.assign(Object.assign({},n),{id:Ce(n.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:s,user:i});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Ce(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function Ze(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=A(e,["challenge","allowCredentials"]),a=Ce(t).buffer,s=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Ce(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function Je(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ee(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ee(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Qe(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ee(new Uint8Array(a.authenticatorData)),clientDataJSON:Ee(new Uint8Array(a.clientDataJSON)),signature:Ee(new Uint8Array(a.signature)),userHandle:a.userHandle?Ee(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=n.authenticatorAttachment)&&void 0!==t?t:void 0}}function Xe(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function et(){var e,t;return!!(lg()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}function tt(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),n=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const a of e)if(a)for(const e in a){const s=a[e];if(void 0!==s)if(Array.isArray(s))r[e]=s;else if(n(s))r[e]=s;else if(t(s)){const n=r[e];t(n)?r[e]=tt(n,s):r[e]=tt(s)}else r[e]=s}return r}async function nt(e,t,n){return await n()}function rt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function at(){return qg||(qg=1,Fg.exports=function(){var e=e||function(e){var t;if("undefined"!=typeof window&&window.crypto&&(t=window.crypto),"undefined"!=typeof self&&self.crypto&&(t=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(t=globalThis.crypto),!t&&"undefined"!=typeof window&&window.msCrypto&&(t=window.msCrypto),!t&&void 0!==Zi&&Zi.crypto&&(t=Zi.crypto),!t)try{t=Wg}catch(g){}var n=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},s=a.lib={},i=s.Base=function(){return{extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=s.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var s=0;s<a;s++){var i=n[s>>>2]>>>24-s%4*8&255;t[r+s>>>2]|=i<<24-(r+s)%4*8}else for(var o=0;o<a;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(n());return new o.init(t,e)}}),c=a.enc={},l=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var s=t[a>>>2]>>>24-a%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},u=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var s=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},d=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=s.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,a=r.words,s=r.sigBytes,i=this.blockSize,c=s/(4*i),l=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*i,u=e.min(4*l,s);if(l){for(var d=0;d<l;d+=i)this._doProcessBlock(a,d);n=a.splice(0,l),r.sigBytes-=u}return new o.init(n,u)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=h.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=a.algo={};return a}(Math);return e}()),Fg.exports}function st(){return Gg?Bg.exports:(Gg=1,Bg.exports=at())}async function it(e,t,n){try{const r=localStorage.getItem(e);if(!r)return;const a=JSON.parse(r),s=Array.isArray(a)?a:[a];for(const e of s){const r=n?n(e):e;await Hg.put(t,r)}console.log(`Migrated ${s.length} items from localStorage to IndexedDB`)}catch(r){console.error(`Failed to migrate ${e}:`,r)}}async function ot(){const e=im.getCurrentDatabaseUserId();if(e)return e;let t=null;if("undefined"!=typeof window&&window.Clerk){const e=window.Clerk.user;t=e?.id||null}return t||"undefined"==typeof window||(t=sessionStorage.getItem("current_user_id")||null),t?await im.getDatabaseUserId(t):null}function ct(){return lt(Tw),Tw}function lt(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Nw,t[Nw]=t[Nw]||{}}function ut(e,t,n=Tw){const r=n.__SENTRY__=n.__SENTRY__||{},a=r[Nw]=r[Nw]||{};return a[e]||(a[e]=t())}function dt(e){if(!("console"in Tw))return e();const t=Tw.console,n={},r=Object.keys(Aw);r.forEach(e=>{const r=Aw[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}function ht(){return gt().enabled}function pt(e,...t){Ew&&ht()&&dt(()=>{Tw.console[e](`Sentry Logger [${e}]:`,...t)})}function gt(){return Ew?ut("loggerSettings",()=>({enabled:!1})):{enabled:!1}}function mt(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function ft(e=function(){const e=Tw;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch{}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function yt(){return Date.now()/1e3}function vt(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=vt(r[a],t[a],n-1));return r}function bt(){return ft()}function wt(e,t){t?function(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Ew&&Ow.log(`Failed to add non-enumerable property "${t}" to object`,e)}}(e,Mw,t):delete e[Mw]}function xt(e){return e[Mw]}function kt(){const e=lt(ct());return e.stack=e.stack||new Rw(ut("defaultCurrentScope",()=>new Lw),ut("defaultIsolationScope",()=>new Lw))}function _t(e){return kt().withScope(e)}function St(e,t){const n=kt();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function jt(e){return kt().withScope(()=>e(kt().getIsolationScope()))}function It(e){const t=lt(e);return t.acs?t.acs:{withIsolationScope:jt,withScope:_t,withSetScope:St,withSetIsolationScope:(e,t)=>jt(t),getCurrentScope:()=>kt().getScope(),getIsolationScope:()=>kt().getIsolationScope()}}function Ct(){return It(ct()).getCurrentScope()}function Et(...e){const t=It(ct());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function Tt(){return Ct().getClient()}function Nt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function At(e={}){const t=$w.document,n=t?.head||t?.body;if(!n)return void(Bw&&Ow.error("[showReportDialog] Global document not defined"));const r=Ct(),a=Tt(),s=a?.getDsn();if(!s)return void(Bw&&Ow.error("[showReportDialog] DSN not configured"));const i={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||It(ct()).getIsolationScope().lastEventId()},o=$w.document.createElement("script");o.async=!0,o.crossOrigin="anonymous",o.src=function(e,t){const n=function(e){const t="string"==typeof e?function(e){const t=Uw.exec(e);if(!t)return void dt(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[n,r,a="",s="",i="",o=""]=t.slice(1);let c="",l=o;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return Nt({host:s,pass:a,path:c,projectId:l,port:i,protocol:n,publicKey:r})}(e):Nt(e);if(t&&function(e){if(!Ew)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(Ow.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(Ow.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Ow.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(Ow.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}(e);if(!n)return"";const r=`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(n)}embed/error-page/`;let a=`dsn=${function(e,t=!1){const{host:n,path:r,pass:a,port:s,projectId:i,protocol:o,publicKey:c}=e;return`${o}://${c}${t&&a?`:${a}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}(n)}`;for(const s in t)if("dsn"!==s&&"onClose"!==s)if("user"===s){const e=t.user;if(!e)continue;e.name&&(a+=`&name=${encodeURIComponent(e.name)}`),e.email&&(a+=`&email=${encodeURIComponent(e.email)}`)}else a+=`&${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`;return`${r}?${a}`}(s,i);const{onLoad:c,onClose:l}=i;if(c&&(o.onload=c),l){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{l()}finally{$w.removeEventListener("message",e)}};$w.addEventListener("message",e)}n.appendChild(o)}function Ot(e,{componentStack:t},n){if(function(){const e=Gi.version.match(/^([^.]+)/);return null!==e&&parseInt(e[0])>=17}()&&function(e){switch(Dw.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return function(e,t){try{return e instanceof t}catch{return!1}}(e,Error)}}(e)&&t){const n=new Error(e.message);n.name=`React ErrorBoundary ${e.name}`,n.stack=t,function(e,t){const n=new WeakSet;!function e(t,r){if(!n.has(t))return t.cause?(n.add(t),e(t.cause,r)):void(t.cause=r)}(e,t)}(e,n)}return Et(r=>(r.setContext("react",{componentStack:t}),function(e,t){return Ct().captureException(e,function(e){if(e)return function(e){return e instanceof Lw||"function"==typeof e}(e)||function(e){return Object.keys(e).some(e=>zw.includes(e))}(e)?{captureContext:e}:e}(t))}(e,n)))}function Dt({error:e,resetError:t}){return bo.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:bo.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[bo.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:bo.jsx(cd,{className:"w-6 h-6 text-red-600"})}),bo.jsx("h3",{className:"mt-4 text-lg font-semibold text-center text-gray-900",children:"Something went wrong"}),bo.jsx("p",{className:"mt-2 text-sm text-center text-gray-600",children:e.message||"An unexpected error occurred"}),bo.jsxs("div",{className:"mt-6 flex gap-3",children:[bo.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Try again"}),bo.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Reload page"})]})]})})}function Pt(e,t,n){if(Zw.randomUUID&&!e)return Zw.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!Yw){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yw=crypto.getRandomValues.bind(crypto)}return Yw(Kw)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return(Hw[e[t+0]]+Hw[e[t+1]]+Hw[e[t+2]]+Hw[e[t+3]]+"-"+Hw[e[t+4]]+Hw[e[t+5]]+"-"+Hw[e[t+6]]+Hw[e[t+7]]+"-"+Hw[e[t+8]]+Hw[e[t+9]]+"-"+Hw[e[t+10]]+Hw[e[t+11]]+Hw[e[t+12]]+Hw[e[t+13]]+Hw[e[t+14]]+Hw[e[t+15]]).toLowerCase()}(r)}function Mt({children:e,initialAccounts:t=[]}){const[n,r]=Gi.useState(()=>{const e=localStorage.getItem("money_management_accounts");if(e)try{return JSON.parse(e).map(e=>({...e,lastUpdated:new Date(e.lastUpdated),openingBalanceDate:e.openingBalanceDate?new Date(e.openingBalanceDate):void 0}))}catch(n){return console.error("Error parsing saved accounts:",n),t}return t});return Gi.useEffect(()=>{localStorage.setItem("money_management_accounts",JSON.stringify(n))},[n]),bo.jsx(Jw.Provider,{value:{accounts:n,addAccount:e=>{const t={...e,id:Pt(),lastUpdated:new Date};r(e=>[...e,t])},updateAccount:(e,t)=>{r(n=>n.map(n=>n.id===e?{...n,...t,lastUpdated:new Date}:n))},deleteAccount:e=>{r(t=>t.filter(t=>t.id!==e))},getAccount:e=>n.find(t=>t.id===e)},children:e})}function Lt({children:e,initialTransactions:t=[],initialRecurringTransactions:n=[]}){const[r,a]=Gi.useState(()=>{const e=localStorage.getItem("money_management_transactions");if(e)try{return JSON.parse(e).map(e=>({...e,date:new Date(e.date),reconciledDate:e.reconciledDate?new Date(e.reconciledDate):void 0}))}catch(n){return console.error("Error parsing saved transactions:",n),t}return t}),[s,i]=Gi.useState(()=>{const e=localStorage.getItem("money_management_recurring_transactions");if(e)try{return JSON.parse(e)}catch(t){return console.error("Error parsing saved recurring transactions:",t),n}return n});Gi.useEffect(()=>{localStorage.setItem("money_management_transactions",JSON.stringify(r))},[r]),Gi.useEffect(()=>{localStorage.setItem("money_management_recurring_transactions",JSON.stringify(s))},[s]);const o=Gi.useMemo(()=>e=>r.filter(t=>t.accountId===e),[r]),c=Gi.useMemo(()=>e=>r.filter(t=>t.category===e),[r]);return bo.jsx(Qw.Provider,{value:{transactions:r,recurringTransactions:s,addTransaction:e=>{const t={...e,id:Pt()};a(e=>[...e,t])},updateTransaction:(e,t)=>{a(n=>n.map(n=>n.id===e?{...n,...t}:n))},deleteTransaction:e=>{a(t=>t.filter(t=>t.id!==e))},addRecurringTransaction:e=>{const t={...e,id:e.id||Pt()};i(e=>[...e,t])},updateRecurringTransaction:(e,t)=>{i(n=>n.map(n=>n.id===e?{...n,...t}:n))},deleteRecurringTransaction:e=>{i(t=>t.filter(t=>t.id!==e))},importTransactions:e=>{const t=e.map(e=>({...e,id:Pt(),isImported:!0}));a(e=>[...e,...t])},getTransactionsByAccount:o,getTransactionsByCategory:c},children:e})}function Rt({children:e,initialBudgets:t=[]}){const[n,r]=Gi.useState(()=>{const e=localStorage.getItem("money_management_budgets");if(e)try{return JSON.parse(e)}catch(n){return console.error("Error parsing saved budgets:",n),t}return t});return Gi.useEffect(()=>{localStorage.setItem("money_management_budgets",JSON.stringify(n))},[n]),bo.jsx(Xw.Provider,{value:{budgets:n,addBudget:e=>{const t={...e,id:Pt(),isActive:!1!==e.isActive,createdAt:new Date};r(e=>[...e,t])},updateBudget:(e,t)=>{r(n=>n.map(n=>n.id===e?{...n,...t}:n))},deleteBudget:e=>{r(t=>t.filter(t=>t.id!==e))},getBudgetByCategory:e=>n.find(t=>t.category===e&&!1!==t.isActive)},children:e})}function Ut(){const e=Gi.useContext(Xw);if(!e)throw new Error("useBudgets must be used within BudgetProvider");return e}function zt({children:e,initialCategories:t}){const[n,r]=Gi.useState(()=>{const e=localStorage.getItem("money_management_categories");if(e)try{return JSON.parse(e)}catch(n){return console.error("Error parsing saved categories:",n),t||[{id:"type-income",name:"Income",type:"income",level:"type",isSystem:!0},{id:"type-expense",name:"Expense",type:"expense",level:"type",isSystem:!0},{id:"type-transfer",name:"Transfer",type:"both",level:"type",isSystem:!0},{id:"sub-salary",name:"Salary & Wages",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-business",name:"Business Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-investment-income",name:"Investment Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-other-income",name:"Other Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"salary",name:"Regular Salary",type:"income",level:"detail",parentId:"sub-salary"},{id:"bonus",name:"Bonus",type:"income",level:"detail",parentId:"sub-salary"},{id:"overtime",name:"Overtime",type:"income",level:"detail",parentId:"sub-salary"},{id:"freelance",name:"Freelance Income",type:"income",level:"detail",parentId:"sub-business"},{id:"dividends",name:"Dividends",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"interest",name:"Interest",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"capital-gains",name:"Capital Gains",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"rental-income",name:"Rental Income",type:"income",level:"detail",parentId:"sub-other-income"},{id:"gifts-received",name:"Gifts Received",type:"income",level:"detail",parentId:"sub-other-income"},{id:"sub-housing",name:"Housing",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-transport",name:"Transport",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-food",name:"Food & Dining",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-utilities",name:"Utilities",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-healthcare",name:"Healthcare",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-entertainment",name:"Entertainment",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-shopping",name:"Shopping",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-education",name:"Education",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-personal",name:"Personal Care",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-insurance",name:"Insurance",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-savings",name:"Savings & Investments",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-taxes",name:"Taxes",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-other-expense",name:"Other Expenses",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-adjustments",name:"Adjustments",type:"both",level:"sub",parentId:"type-expense",isSystem:!0},{id:"rent",name:"Rent",type:"expense",level:"detail",parentId:"sub-housing"},{id:"mortgage",name:"Mortgage",type:"expense",level:"detail",parentId:"sub-housing"},{id:"property-tax",name:"Property Tax",type:"expense",level:"detail",parentId:"sub-housing"},{id:"home-maintenance",name:"Home Maintenance",type:"expense",level:"detail",parentId:"sub-housing"},{id:"home-insurance",name:"Home Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"fuel",name:"Fuel",type:"expense",level:"detail",parentId:"sub-transport"},{id:"public-transport",name:"Public Transport",type:"expense",level:"detail",parentId:"sub-transport"},{id:"car-maintenance",name:"Car Maintenance",type:"expense",level:"detail",parentId:"sub-transport"},{id:"car-insurance",name:"Car Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"parking",name:"Parking",type:"expense",level:"detail",parentId:"sub-transport"},{id:"tolls",name:"Tolls",type:"expense",level:"detail",parentId:"sub-transport"},{id:"groceries",name:"Groceries",type:"expense",level:"detail",parentId:"sub-food"},{id:"restaurants",name:"Restaurants",type:"expense",level:"detail",parentId:"sub-food"},{id:"takeout",name:"Takeout/Delivery",type:"expense",level:"detail",parentId:"sub-food"},{id:"coffee-shops",name:"Coffee Shops",type:"expense",level:"detail",parentId:"sub-food"},{id:"electricity",name:"Electricity",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"water",name:"Water",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"gas",name:"Gas",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"internet",name:"Internet",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"phone",name:"Phone",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"tv",name:"TV/Streaming",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"health-insurance",name:"Health Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"doctor",name:"Doctor Visits",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"dentist",name:"Dental Care",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"pharmacy",name:"Pharmacy",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"vision",name:"Vision Care",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"movies",name:"Movies & Shows",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"concerts",name:"Concerts & Events",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"sports",name:"Sports & Recreation",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"hobbies",name:"Hobbies",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"subscriptions",name:"Subscriptions",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"clothing",name:"Clothing",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"electronics",name:"Electronics",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"household",name:"Household Items",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"gifts",name:"Gifts",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"account-adjustments",name:"Account Adjustments",type:"both",level:"detail",parentId:"sub-adjustments",isSystem:!0},{id:"transfer-in",name:"Transfer In",type:"both",level:"detail",parentId:"type-transfer",isSystem:!0},{id:"transfer-out",name:"Transfer Out",type:"both",level:"detail",parentId:"type-transfer",isSystem:!0}]}return t||[{id:"type-income",name:"Income",type:"income",level:"type",isSystem:!0},{id:"type-expense",name:"Expense",type:"expense",level:"type",isSystem:!0},{id:"type-transfer",name:"Transfer",type:"both",level:"type",isSystem:!0},{id:"sub-salary",name:"Salary & Wages",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-business",name:"Business Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-investment-income",name:"Investment Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-other-income",name:"Other Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"salary",name:"Regular Salary",type:"income",level:"detail",parentId:"sub-salary"},{id:"bonus",name:"Bonus",type:"income",level:"detail",parentId:"sub-salary"},{id:"overtime",name:"Overtime",type:"income",level:"detail",parentId:"sub-salary"},{id:"freelance",name:"Freelance Income",type:"income",level:"detail",parentId:"sub-business"},{id:"dividends",name:"Dividends",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"interest",name:"Interest",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"capital-gains",name:"Capital Gains",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"rental-income",name:"Rental Income",type:"income",level:"detail",parentId:"sub-other-income"},{id:"gifts-received",name:"Gifts Received",type:"income",level:"detail",parentId:"sub-other-income"},{id:"sub-housing",name:"Housing",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-transport",name:"Transport",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-food",name:"Food & Dining",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-utilities",name:"Utilities",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-healthcare",name:"Healthcare",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-entertainment",name:"Entertainment",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-shopping",name:"Shopping",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-education",name:"Education",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-personal",name:"Personal Care",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-insurance",name:"Insurance",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-savings",name:"Savings & Investments",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-taxes",name:"Taxes",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-other-expense",name:"Other Expenses",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-adjustments",name:"Adjustments",type:"both",level:"sub",parentId:"type-expense",isSystem:!0},{id:"rent",name:"Rent",type:"expense",level:"detail",parentId:"sub-housing"},{id:"mortgage",name:"Mortgage",type:"expense",level:"detail",parentId:"sub-housing"},{id:"property-tax",name:"Property Tax",type:"expense",level:"detail",parentId:"sub-housing"},{id:"home-maintenance",name:"Home Maintenance",type:"expense",level:"detail",parentId:"sub-housing"},{id:"home-insurance",name:"Home Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"fuel",name:"Fuel",type:"expense",level:"detail",parentId:"sub-transport"},{id:"public-transport",name:"Public Transport",type:"expense",level:"detail",parentId:"sub-transport"},{id:"car-maintenance",name:"Car Maintenance",type:"expense",level:"detail",parentId:"sub-transport"},{id:"car-insurance",name:"Car Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"parking",name:"Parking",type:"expense",level:"detail",parentId:"sub-transport"},{id:"tolls",name:"Tolls",type:"expense",level:"detail",parentId:"sub-transport"},{id:"groceries",name:"Groceries",type:"expense",level:"detail",parentId:"sub-food"},{id:"restaurants",name:"Restaurants",type:"expense",level:"detail",parentId:"sub-food"},{id:"takeout",name:"Takeout/Delivery",type:"expense",level:"detail",parentId:"sub-food"},{id:"coffee-shops",name:"Coffee Shops",type:"expense",level:"detail",parentId:"sub-food"},{id:"electricity",name:"Electricity",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"water",name:"Water",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"gas",name:"Gas",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"internet",name:"Internet",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"phone",name:"Phone",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"tv",name:"TV/Streaming",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"health-insurance",name:"Health Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"doctor",name:"Doctor Visits",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"dentist",name:"Dental Care",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"pharmacy",name:"Pharmacy",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"vision",name:"Vision Care",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"movies",name:"Movies & Shows",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"concerts",name:"Concerts & Events",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"sports",name:"Sports & Recreation",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"hobbies",name:"Hobbies",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"subscriptions",name:"Subscriptions",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"clothing",name:"Clothing",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"electronics",name:"Electronics",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"household",name:"Household Items",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"gifts",name:"Gifts",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"account-adjustments",name:"Account Adjustments",type:"both",level:"detail",parentId:"sub-adjustments",isSystem:!0},{id:"transfer-in",name:"Transfer In",type:"both",level:"detail",parentId:"type-transfer",isSystem:!0},{id:"transfer-out",name:"Transfer Out",type:"both",level:"detail",parentId:"type-transfer",isSystem:!0}]});Gi.useEffect(()=>{localStorage.setItem("money_management_categories",JSON.stringify(n))},[n]);const a=Gi.useMemo(()=>{const e=new Map;return t=>{if(!t)return"Uncategorized";if(e.has(t))return e.get(t);const r=n.find(e=>e.id===t);if(!r)return"Uncategorized";let a=r.name,s=r;for(;s.parentId;){const e=n.find(e=>e.id===s.parentId);if(!e)break;a=`${e.name} > ${a}`,s=e}return e.set(t,a),a}},[n]);return bo.jsx(ex.Provider,{value:{categories:n,addCategory:e=>{const t={...e,id:Pt()};r(e=>[...e,t])},updateCategory:(e,t)=>{r(n=>n.map(n=>n.id===e?{...n,...t}:n))},deleteCategory:e=>{const t=n.find(t=>t.id===e);t?.isSystem||r(t=>t.filter(t=>t.id!==e))},getCategoryById:e=>n.find(t=>t.id===e),getCategoryPath:a,getSubCategories:e=>n.filter(t=>t.parentId===e&&"sub"===t.level),getDetailCategories:e=>n.filter(t=>t.parentId===e&&"detail"===t.level)},children:e})}function $t({children:e,initialGoals:t=[]}){const[n,r]=Gi.useState(()=>{const e=localStorage.getItem("money_management_goals");if(e)try{return JSON.parse(e).map(e=>({...e,targetDate:new Date(e.targetDate),createdAt:new Date(e.createdAt)}))}catch(n){return console.error("Error parsing saved goals:",n),t}return t});return Gi.useEffect(()=>{localStorage.setItem("money_management_goals",JSON.stringify(n))},[n]),bo.jsx(tx.Provider,{value:{goals:n,addGoal:e=>{const t={...e,id:Pt(),createdAt:new Date};r(e=>[...e,t])},updateGoal:(e,t)=>{r(n=>n.map(n=>n.id===e?{...n,...t}:n))},deleteGoal:e=>{r(t=>t.filter(t=>t.id!==e))},getGoalById:e=>n.find(t=>t.id===e),getActiveGoals:()=>n.filter(e=>e.isActive)},children:e})}function Bt({children:e}){const[t,n]=Gi.useState(()=>{try{const e=localStorage.getItem("money_management_compact_view");return null===e||"true"===e}catch(e){return console.error("Error reading compactView from localStorage:",e),!0}}),[r,a]=Gi.useState(()=>{try{return localStorage.getItem("money_management_currency")||"GBP"}catch(e){return console.error("Error reading currency from localStorage:",e),"GBP"}}),[s,i]=Gi.useState(()=>{try{const e=localStorage.getItem("money_management_theme");return e?["light","dark","auto","scheduled"].includes(e)?e:"light":(localStorage.setItem("money_management_theme","light"),"light")}catch(e){return console.error("Error reading theme from localStorage:",e),"light"}}),[o,c]=Gi.useState(()=>{try{const e=localStorage.getItem("money_management_color_theme");return e&&["blue","green","red","pink"].includes(e)?e:(localStorage.setItem("money_management_color_theme","blue"),"blue")}catch(e){return console.error("Error reading colorTheme from localStorage:",e),"blue"}}),[l,u]=Gi.useState(()=>{try{return localStorage.getItem("money_management_first_name")||""}catch(e){return console.error("Error reading firstName from localStorage:",e),""}}),[d,h]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_budget")}catch(e){return console.error("Error reading showBudget from localStorage:",e),!0}}),[p,g]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_goals")}catch(e){return console.error("Error reading showGoals from localStorage:",e),!0}}),[m,f]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_analytics")}catch(e){return console.error("Error reading showAnalytics from localStorage:",e),!0}}),[y,v]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_goal_celebrations")}catch(e){return console.error("Error reading enableGoalCelebrations from localStorage:",e),!0}}),[b,w]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_investments")}catch(e){return console.error("Error reading showInvestments from localStorage:",e),!0}}),[x,k]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_enhanced_investments")}catch(e){return console.error("Error reading showEnhancedInvestments from localStorage:",e),!0}}),[_,S]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_ai_analytics")}catch(e){return console.error("Error reading showAIAnalytics from localStorage:",e),!0}}),[j,I]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_tax_planning")}catch(e){return console.error("Error reading showTaxPlanning from localStorage:",e),!0}}),[C,E]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_household")}catch(e){return console.error("Error reading showHousehold from localStorage:",e),!0}}),[T,N]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_business_features")}catch(e){return console.error("Error reading showBusinessFeatures from localStorage:",e),!0}}),[A,O]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_financial_planning")}catch(e){return console.error("Error reading showFinancialPlanning from localStorage:",e),!0}}),[D,P]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_data_intelligence")}catch(e){return console.error("Error reading showDataIntelligence from localStorage:",e),!0}}),[M,L]=Gi.useState(()=>{try{return"false"!==localStorage.getItem("money_management_show_summaries")}catch(e){return console.error("Error reading showSummaries from localStorage:",e),!0}}),[R,U]=Gi.useState(()=>{try{const e=localStorage.getItem("money_management_theme_schedule");return e?JSON.parse(e):{enabled:!1,lightStartTime:"06:00",darkStartTime:"18:00"}}catch(e){return console.error("Error reading theme schedule from localStorage:",e),{enabled:!1,lightStartTime:"06:00",darkStartTime:"18:00"}}}),[z,$]=Gi.useState("light"),B=Gi.useCallback(()=>{let e="light";if("dark"===s)e="dark";else if("auto"===s)e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";else if("scheduled"===s&&R.enabled){const t=new Date,n=t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0"),r=R.lightStartTime;e=n>=R.darkStartTime||n<r?"dark":"light"}else e="light";$(e)},[s,R]);return Gi.useEffect(()=>{if(B(),"auto"===s){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>B();return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}if("scheduled"===s&&R.enabled){const e=setInterval(B,6e4);return()=>clearInterval(e)}},[s,R,B]),Gi.useEffect(()=>{const e=()=>{const e=document.documentElement;e.classList.remove("dark"),requestAnimationFrame(()=>{"dark"===z?e.classList.add("dark"):e.classList.remove("dark")})};e();const t=setTimeout(e,100);return()=>clearTimeout(t)},[z]),Gi.useEffect(()=>{const e=document.documentElement;["theme-blue","theme-green","theme-red","theme-pink"].forEach(t=>{e.classList.remove(t)}),e.classList.add(`theme-${o}`)},[o]),Gi.useEffect(()=>{const e=setTimeout(()=>{localStorage.setItem("money_management_compact_view",t.toString()),localStorage.setItem("money_management_currency",r),localStorage.setItem("money_management_theme",s),localStorage.setItem("money_management_color_theme",o),localStorage.setItem("money_management_first_name",l),localStorage.setItem("money_management_show_budget",d.toString()),localStorage.setItem("money_management_show_goals",p.toString()),localStorage.setItem("money_management_show_analytics",m.toString()),localStorage.setItem("money_management_show_investments",b.toString()),localStorage.setItem("money_management_show_enhanced_investments",x.toString()),localStorage.setItem("money_management_show_ai_analytics",_.toString()),localStorage.setItem("money_management_show_tax_planning",j.toString()),localStorage.setItem("money_management_show_household",C.toString()),localStorage.setItem("money_management_show_business_features",T.toString()),localStorage.setItem("money_management_show_financial_planning",A.toString()),localStorage.setItem("money_management_show_data_intelligence",D.toString()),localStorage.setItem("money_management_show_summaries",M.toString()),localStorage.setItem("money_management_theme_schedule",JSON.stringify(R)),localStorage.setItem("money_management_goal_celebrations",y.toString())},300);return()=>clearTimeout(e)},[t,r,s,o,l,d,p,m,b,x,_,j,C,T,A,D,M,R,y]),bo.jsx(nx.Provider,{value:{compactView:t,setCompactView:n,currency:r,setCurrency:a,theme:s,setTheme:i,actualTheme:z,colorTheme:o,setColorTheme:c,firstName:l,setFirstName:u,themeSchedule:R,setThemeSchedule:U,showBudget:d,setShowBudget:h,showGoals:p,setShowGoals:g,showAnalytics:m,setShowAnalytics:f,showInvestments:b,setShowInvestments:w,showEnhancedInvestments:x,setShowEnhancedInvestments:k,showAIAnalytics:_,setShowAIAnalytics:S,showTaxPlanning:j,setShowTaxPlanning:I,showHousehold:C,setShowHousehold:E,showBusinessFeatures:T,setShowBusinessFeatures:N,showFinancialPlanning:A,setShowFinancialPlanning:O,showDataIntelligence:D,setShowDataIntelligence:P,showSummaries:M,setShowSummaries:L,enableGoalCelebrations:y,setEnableGoalCelebrations:v},children:e})}function Ft(){const e=Gi.useContext(nx);if(!e)throw new Error("usePreferences must be used within PreferencesProvider");return e}function Wt({children:e}){const[t,n]=Gi.useState(!1);return bo.jsx(rx.Provider,{value:{isWideView:t,setIsWideView:n},children:e})}function qt(){const e=Gi.useContext(rx);if(void 0===e)throw new Error("useLayout must be used within a LayoutProvider");return e}function Gt(e,t){return new Date(e,t+1,0)}function Vt(e,t,n){const r=[];let a=n,s=0,i=0;const o=new Date(e,t,1),c=Gt(e,t).getDate();r.push({id:"t"+a++,date:o,description:"Monthly Salary",amount:6e3,type:"income",category:"Salary",accountId:"1",cleared:!0}),r.push({id:"t"+a++,date:o,description:"Mortgage Payment",amount:-1200,type:"transfer",category:"transfer",accountId:"1",cleared:!0}),r.push({id:"t"+a++,date:o,description:"Mortgage Payment",amount:1200,type:"transfer",category:"transfer",accountId:"8",cleared:!0}),ox.forEach(e=>{r.push({id:"t"+a++,date:o,description:e.description,amount:-e.amount,type:"expense",category:e.category,accountId:"1",cleared:!0})});for(let l=1;l<=c;l++){const n=new Date(e,t,l),o=n.getDay();Math.random()>.85||Object.entries(ax).forEach(([e,t])=>{let u=!1;if(t.frequency>=1){const e=Math.floor(7/t.frequency);u=o%e===0}else{const e=Math.floor(1/t.frequency);u=l===e}if(u&&Math.random()<.8){const o=(d=t.min,h=t.max,Math.round(100*(Math.random()*(h-d)+d))/100),u=t.cards[Math.floor(Math.random()*t.cards.length)],p=ix[e],g=p[Math.floor(Math.random()*p.length)];r.push({id:"t"+a++,date:n,description:g,amount:-o,type:"expense",category:sx[e],accountId:u,cleared:l<c-2}),"5"===u?s+=o:"6"===u&&(i+=o)}var d,h})}return{transactions:r,creditCardBalances:{natwest:s,amex:i},nextId:a}}function Ht(e,t,n,r){const a=[];let s=r;const i=new Date(e,t,14);return n.natwest>0&&(a.push({id:"t"+s++,date:i,description:"Credit Card Payment - Natwest",amount:-n.natwest,type:"transfer",category:"transfer",accountId:"1",cleared:!0}),a.push({id:"t"+s++,date:i,description:"Credit Card Payment - Natwest",amount:n.natwest,type:"transfer",category:"transfer",accountId:"5",cleared:!0})),n.amex>0&&(a.push({id:"t"+s++,date:i,description:"Credit Card Payment - American Express",amount:-n.amex,type:"transfer",category:"transfer",accountId:"1",cleared:!0}),a.push({id:"t"+s++,date:i,description:"Credit Card Payment - American Express",amount:n.amex,type:"transfer",category:"transfer",accountId:"6",cleared:!0})),{transactions:a,nextId:s}}function Yt(e,t){return e.filter(e=>e.accountId===t).reduce((e,t)=>"income"===t.type||"transfer"===t.type&&t.amount>0?e+t.amount:e-Math.abs(t.amount),0)}function Kt(e,t,n,r){const a=[];let s=r;const i=Gt(e,t);if(n>.01)a.push({id:"t"+s++,date:i,description:"Balance Sweep to Savings",amount:-n,type:"transfer",category:"transfer",accountId:"1",cleared:!0}),a.push({id:"t"+s++,date:i,description:"Balance Sweep from Current",amount:n,type:"transfer",category:"transfer",accountId:"3",cleared:!0});else if(n<-.01){const e=Math.abs(n);a.push({id:"t"+s++,date:i,description:"Balance Transfer from Savings",amount:-e,type:"transfer",category:"transfer",accountId:"3",cleared:!0}),a.push({id:"t"+s++,date:i,description:"Balance Transfer to Current",amount:e,type:"transfer",category:"transfer",accountId:"1",cleared:!0})}return{transactions:a,nextId:s}}function Zt(e,t){return new Date(e,t+1,0)}function Jt({children:e,useTestData:t=!1}){const n=t?[{id:"1",name:"Natwest Current Account",type:"current",balance:0,currency:"GBP",institution:"Natwest",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"2",name:"Monzo Current Account",type:"current",balance:0,currency:"GBP",institution:"Monzo",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"3",name:"Natwest Savings Account",type:"savings",balance:0,currency:"GBP",institution:"Natwest",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"4",name:"NS&I Premium Bonds",type:"savings",balance:0,currency:"GBP",institution:"NS&I",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"5",name:"Natwest Credit Card",type:"credit",balance:0,currency:"GBP",institution:"Natwest",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"6",name:"American Express Gold",type:"credit",balance:0,currency:"GBP",institution:"American Express",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"7",name:"Natwest Personal Loan",type:"loan",balance:0,currency:"GBP",institution:"Natwest",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"8",name:"Natwest Mortgage",type:"mortgage",balance:0,currency:"GBP",institution:"Natwest",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"9",name:"Hargreaves Lansdown SIPP",type:"investment",balance:0,currency:"GBP",institution:"Hargreaves Lansdown",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx,holdings:lx(ux().filter(e=>"9"===e.accountId))},{id:"10",name:"Hargreaves Lansdown ISA",type:"investment",balance:0,currency:"GBP",institution:"Hargreaves Lansdown",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx},{id:"11",name:"City Trader Account",type:"investment",balance:1e4,currency:"GBP",institution:"City Trading",lastUpdated:new Date,openingBalance:1e4,openingBalanceDate:cx},{id:"12",name:"Primary Residence",type:"asset",balance:0,currency:"GBP",institution:"Property",lastUpdated:new Date,openingBalance:0,openingBalanceDate:cx}]:[],r=t?(()=>{const e=[];let t=1;const n=new Date("2024-07-01");e.push({id:"t"+t++,date:n,description:"Mortgage Loan",amount:-2e5,type:"transfer",category:"transfer",accountId:"8",cleared:!0}),e.push({id:"t"+t++,date:n,description:"Mortgage Loan",amount:2e5,type:"transfer",category:"transfer",accountId:"12",cleared:!0}),e.push({id:"t"+t++,date:n,description:"Personal Loan",amount:-5e4,type:"transfer",category:"transfer",accountId:"7",cleared:!0}),e.push({id:"t"+t++,date:n,description:"Personal Loan",amount:5e4,type:"transfer",category:"transfer",accountId:"1",cleared:!0}),e.push({id:"t"+t++,date:n,description:"House Deposit",amount:-2e4,type:"transfer",category:"transfer",accountId:"1",cleared:!0}),e.push({id:"t"+t++,date:n,description:"House Deposit",amount:2e4,type:"transfer",category:"transfer",accountId:"12",cleared:!0}),e.push({id:"t"+t++,date:n,description:"Hargreaves ISA",amount:-2e4,type:"transfer",category:"transfer",accountId:"1",cleared:!0}),e.push({id:"t"+t++,date:n,description:"Hargreaves ISA",amount:2e4,type:"transfer",category:"transfer",accountId:"10",cleared:!0}),e.push({id:"t"+t++,date:n,description:"NS&I Premium Bonds",amount:-1e4,type:"transfer",category:"transfer",accountId:"1",cleared:!0}),e.push({id:"t"+t++,date:n,description:"NS&I Premium Bonds",amount:1e4,type:"transfer",category:"transfer",accountId:"4",cleared:!0}),ux().forEach(r=>{const a=r.quantity*r.purchasePrice,s=r.symbol.endsWith(".L")?.005*a:0,i=a+24.95+s;e.push({id:"t"+t++,date:n,description:`Buy ${r.quantity} ${r.symbol}`,amount:-i,type:"expense",category:"Investments",accountId:r.accountId,cleared:!0,investmentData:{symbol:r.symbol,quantity:r.quantity,pricePerShare:r.purchasePrice,transactionFee:24.95,stampDuty:s,totalCost:i}})});let r={natwest:0,amex:0};for(let a=0;a<12;a++){const n=2024+Math.floor((6+a)/12),s=(6+a)%12;if(new Date(n,s,1)>new Date)break;const i=Vt(n,s,t);if(e.push(...i.transactions),t=i.nextId,a>0){const a=Ht(n,s,r,t);e.push(...a.transactions),t=a.nextId}const o=Yt(e.filter(e=>new Date(e.date)<=Zt(n,s)),"1"),c=Kt(n,s,o,t);e.push(...c.transactions),t=c.nextId,r=i.creditCardBalances}return e})():[],a=t?[{id:"1",category:"Groceries",amount:600,period:"monthly",isActive:!0,createdAt:cx},{id:"2",category:"Transport",amount:300,period:"monthly",isActive:!0,createdAt:cx},{id:"3",category:"Utilities",amount:200,period:"monthly",isActive:!0,createdAt:cx},{id:"4",category:"Entertainment",amount:400,period:"monthly",isActive:!0,createdAt:cx}]:[],s=t?[{id:"1",name:"Emergency Fund",targetAmount:2e4,currentAmount:1e4,targetDate:new Date("2025-12-31"),type:"savings",createdAt:cx,isActive:!0},{id:"2",name:"Holiday Fund",targetAmount:5e3,currentAmount:2e3,targetDate:new Date("2025-08-01"),type:"savings",createdAt:cx,isActive:!0}]:[];return bo.jsx(Bt,{children:bo.jsx(Wt,{children:bo.jsx(zt,{children:bo.jsx(Mt,{initialAccounts:n,children:bo.jsx(Lt,{initialTransactions:r,initialRecurringTransactions:[],children:bo.jsx(Rt,{initialBudgets:a,children:bo.jsx($t,{initialGoals:s,children:e})})})})})})})}function Qt(e){return{id:e.id,name:e.name,type:"checking"===e.type?"current":e.type,balance:e.balance,currency:e.currency,institution:e.institution||"",isActive:e.is_active,initialBalance:e.initial_balance,openingBalance:e.initial_balance,createdAt:e.created_at,updatedAt:e.updated_at,lastUpdated:e.updated_at||e.created_at,icon:e.icon,color:e.color}}async function Xt(e){try{if(!tm)throw new Error("Supabase not configured");let t=e;if(e.startsWith("user_")&&(t=await im.getDatabaseUserId(e),!t))return console.log("[SimpleAccountService] No user found for Clerk ID:",e),[];const{data:n,error:r}=await tm.from("accounts").select("*").eq("user_id",t).eq("is_active",!0).order("created_at",{ascending:!0});if(r)throw console.error("[SimpleAccountService] Error fetching accounts:",r),r;return(n||[]).map(Qt)}catch(t){return await em.get(Kg)||[]}}function en(e){var t,n,r,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)(n=7-(r=e[t]+"").length)&&(s+=dn(n)),s+=r;(n=7-(r=(i=e[t])+"").length)&&(s+=dn(n))}else if(0===i)return"0";for(;i%10==0;)i/=10;return s+i}function tn(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ix+e)}function nn(e,t,n,r){var a,s,i,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,a=0):(a=Math.ceil((t+1)/7),t%=7),s=Ax(10,7-t),o=e[a]%s|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),i=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):i=(n<4&&o+1==s||n>3&&o+1==s/2)&&(e[a+1]/s/100|0)==Ax(10,t-2)-1||(o==s/2||0==o)&&!(e[a+1]/s/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),i=(r||n<4)&&9999==o||!r&&n>3&&4999==o):i=((r||n<4)&&o+1==s||!r&&n>3&&o+1==s/2)&&(e[a+1]/s/1e3|0)==Ax(10,t-3)-1,i}function rn(e,t,n){for(var r,a,s=[0],i=0,o=e.length;i<o;){for(a=s.length;a--;)s[a]*=t;for(s[0]+=wx.indexOf(e.charAt(i++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}function an(e,t,n,r){var a,s,i,o,c,l,u,d,h,p=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(a=1,o=d[0];o>=10;o/=10)a++;if((s=t-a)<0)s+=7,i=t,c=(u=d[h=0])/Ax(10,a-i-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(o=d.length)){if(!r)break e;for(;o++<=h;)d.push(0);u=c=0,a=1,i=(s%=7)-7+1}else{for(u=o=d[h],a=1;o>=10;o/=10)a++;c=(i=(s%=7)-7+a)<0?0:u/Ax(10,a-i-1)%10|0}if(r=r||t<0||void 0!==d[h+1]||(i<0?u:u%Ax(10,a-i-1)),l=n<4?(c||r)&&(0==n||n==(e.s<0?3:2)):c>5||5==c&&(4==n||r||6==n&&(s>0?i>0?u/Ax(10,a-i):0:d[h-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,l?(t-=e.e+1,d[0]=Ax(10,(7-t%7)%7),e.e=-t||0):d[0]=e.e=0,e;if(0==s?(d.length=h,o=1,h--):(d.length=h+1,o=Ax(10,7-s),d[h]=i>0?(u/Ax(10,a-i)%Ax(10,i)|0)*o:0),l)for(;;){if(0==h){for(s=1,i=d[0];i>=10;i/=10)s++;for(i=d[0]+=o,o=1;i>=10;i/=10)o++;s!=o&&(e.e++,d[0]==Lx&&(d[0]=1));break}if(d[h]+=o,d[h]!=Lx)break;d[h--]=0,o=1}for(s=d.length;0===d[--s];)d.pop()}return Sx&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function sn(e,t,n){if(!e.isFinite())return yn(e);var r,a=e.e,s=en(e.d),i=s.length;return t?(n&&(r=n-i)>0?s=s.charAt(0)+"."+s.slice(1)+dn(r):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):a<0?(s="0."+dn(-a-1)+s,n&&(r=n-i)>0&&(s+=dn(r))):a>=i?(s+=dn(a+1-i),n&&(r=n-a-1)>0&&(s=s+"."+dn(r))):((r=a+1)<i&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-i)>0&&(a+1===i&&(s+="."),s+=dn(r))),s}function on(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function cn(e,t,n){if(t>Rx)throw Sx=!0,n&&(e.precision=n),Error(Cx);return an(new e(xx),t,1,!0)}function ln(e,t,n){if(t>Ux)throw Error(Cx);return an(new e(kx),t,n,!0)}function un(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function dn(e){for(var t="";e--;)t+="0";return t}function hn(e,t,n,r){var a,s=new e(1),i=Math.ceil(r/7+4);for(Sx=!1;;){if(n%2&&_n((s=s.times(t)).d,i)&&(a=!0),0===(n=Nx(n/2))){n=s.d.length-1,a&&0===s.d[n]&&++s.d[n];break}_n((t=t.times(t)).d,i)}return Sx=!0,s}function pn(e){return 1&e.d[e.d.length-1]}function gn(e,t,n){for(var r,a,s=new e(t[0]),i=0;++i<t.length;){if(!(a=new e(t[i])).s){s=a;break}((r=s.cmp(a))===n||0===r&&s.s===n)&&(s=a)}return s}function mn(e,t){var n,r,a,s,i,o,c,l=0,u=0,d=0,h=e.constructor,p=h.rounding,g=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(Sx=!1,c=g):c=t,o=new h(.03125);e.e>-2;)e=e.times(o),d+=5;for(c+=r=Math.log(Ax(2,d))/Math.LN10*2+5|0,n=s=i=new h(1),h.precision=c;;){if(s=an(s.times(e),c,1),n=n.times(++u),en((o=i.plus($x(s,n,c,1))).d).slice(0,c)===en(i.d).slice(0,c)){for(a=d;a--;)i=an(i.times(i),c,1);if(null!=t)return h.precision=g,i;if(!(l<3&&nn(i.d,c-r,p,l)))return an(i,h.precision=g,p,Sx=!0);h.precision=c+=10,n=s=o=new h(1),u=0,l++}i=o}}function fn(e,t){var n,r,a,s,i,o,c,l,u,d,h,p=1,g=e,m=g.d,f=g.constructor,y=f.rounding,v=f.precision;if(g.s<0||!m||!m[0]||!g.e&&1==m[0]&&1==m.length)return new f(m&&!m[0]?-1/0:1!=g.s?NaN:m?0:g);if(null==t?(Sx=!1,u=v):u=t,f.precision=u+=10,r=(n=en(m)).charAt(0),!(Math.abs(s=g.e)<15e14))return l=cn(f,u+2,v).times(s+""),g=fn(new f(r+"."+n.slice(1)),u-10).plus(l),f.precision=v,null==t?an(g,v,y,Sx=!0):g;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=en((g=g.times(e)).d)).charAt(0),p++;for(s=g.e,r>1?(g=new f("0."+n),s++):g=new f(r+"."+n.slice(1)),d=g,c=i=g=$x(g.minus(1),g.plus(1),u,1),h=an(g.times(g),u,1),a=3;;){if(i=an(i.times(h),u,1),en((l=c.plus($x(i,new f(a),u,1))).d).slice(0,u)===en(c.d).slice(0,u)){if(c=c.times(2),0!==s&&(c=c.plus(cn(f,u+2,v).times(s+""))),c=$x(c,new f(p),u,1),null!=t)return f.precision=v,c;if(!nn(c.d,u-10,y,o))return an(c,f.precision=v,y,Sx=!0);f.precision=u+=10,l=i=g=$x(d.minus(1),d.plus(1),u,1),h=an(g.times(g),u,1),a=o=1}c=l,a+=2}}function yn(e){return String(e.s*e.s/0)}function vn(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(a=t.length;48===t.charCodeAt(a-1);--a);if(t=t.slice(r,a)){if(a-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=7;r<a;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=a;for(;r--;)t+="0";e.d.push(+t),Sx&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function bn(e,t,n,r,a){var s,i,o,c,l=e.precision,u=Math.ceil(l/7);for(Sx=!1,c=n.times(n),o=new e(r);;){if(i=$x(o.times(c),new e(t++*t++),l,1),o=a?r.plus(i):r.minus(i),r=$x(i.times(c),new e(t++*t++),l,1),void 0!==(i=o.plus(r)).d[u]){for(s=u;i.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=r,r=i,i=s}return Sx=!0,i.d.length=u+1,i}function wn(e,t){for(var n=e;--t;)n*=e;return n}function xn(e,t){var n,r=t.s<0,a=ln(e,e.precision,1),s=a.times(.5);if((t=t.abs()).lte(s))return yx=r?4:1,t;if((n=t.divToInt(a)).isZero())yx=r?3:2;else{if((t=t.minus(n.times(a))).lte(s))return yx=pn(n)?r?2:3:r?4:1,t;yx=pn(n)?r?1:4:r?3:2}return t.minus(a).abs()}function kn(e,t,n,r){var a,s,i,o,c,l,u,d,h,p=e.constructor,g=void 0!==n;if(g?(tn(n,1,bx),void 0===r?r=p.rounding:tn(r,0,8)):(n=p.precision,r=p.rounding),e.isFinite()){for(g?(a=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):a=t,(i=(u=sn(e)).indexOf("."))>=0&&(u=u.replace(".",""),(h=new p(1)).e=u.length-i,h.d=rn(sn(h),10,a),h.e=h.d.length),s=c=(d=rn(u,10,a)).length;0==d[--c];)d.pop();if(d[0]){if(i<0?s--:((e=new p(e)).d=d,e.e=s,d=(e=$x(e,h,n,r,0,a)).d,s=e.e,l=fx),i=d[n],o=a/2,l=l||void 0!==d[n+1],l=r<4?(void 0!==i||l)&&(0===r||r===(e.s<0?3:2)):i>o||i===o&&(4===r||l||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,l)for(;++d[--n]>a-1;)d[n]=0,n||(++s,d.unshift(1));for(c=d.length;!d[c-1];--c);for(i=0,u="";i<c;i++)u+=wx.charAt(d[i]);if(g){if(c>1)if(16==t||8==t){for(i=16==t?4:3,--c;c%i;c++)u+="0";for(c=(d=rn(u,a,t)).length;!d[c-1];--c);for(i=1,u="1.";i<c;i++)u+=wx.charAt(d[i])}else u=u.charAt(0)+"."+u.slice(1);u=u+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)u="0"+u;u="0."+u}else if(++s>c)for(s-=c;s--;)u+="0";else s<c&&(u=u.slice(0,s)+"."+u.slice(s))}else u=g?"0p+0":"0";u=(16==t?"0x":2==t?"0b":8==t?"0o":"")+u}else u=yn(e);return e.s<0?"-"+u:u}function _n(e,t){if(e.length>t)return e.length=t,!0}function Sn(e){return new this(e).abs()}function jn(e){return new this(e).acos()}function In(e){return new this(e).acosh()}function Cn(e,t){return new this(e).plus(t)}function En(e){return new this(e).asin()}function Tn(e){return new this(e).asinh()}function Nn(e){return new this(e).atan()}function An(e){return new this(e).atanh()}function On(e,t){e=new this(e),t=new this(t);var n,r=this.precision,a=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?ln(this,r,a):new this(0)).s=e.s:!e.d||t.isZero()?(n=ln(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan($x(e,t,s,1)),t=ln(this,s,1),this.precision=r,this.rounding=a,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan($x(e,t,s,1)):(n=ln(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function Dn(e){return new this(e).cbrt()}function Pn(e){return an(e=new this(e),e.e+1,2)}function Mn(e,t,n){return new this(e).clamp(t,n)}function Ln(e){if(!e||"object"!=typeof e)throw Error(jx+"Object expected");var t,n,r,a=!0===e.defaults,s=["precision",1,bx,"rounding",0,8,"toExpNeg",-vx,0,"toExpPos",0,vx,"maxE",0,vx,"minE",-vx,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],a&&(this[n]=_x[n]),void 0!==(r=e[n])){if(!(Nx(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(Ix+n+": "+r);this[n]=r}if(n="crypto",a&&(this[n]=_x[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(Ix+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Ex);this[n]=!0}else this[n]=!1}return this}function Rn(e){return new this(e).cos()}function Un(e){return new this(e).cosh()}function zn(e,t){return new this(e).div(t)}function $n(e){return new this(e).exp()}function Bn(e){return an(e=new this(e),e.e+1,3)}function Fn(){var e,t,n=new this(0);for(Sx=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Sx=!0,new this(1/0);n=t}return Sx=!0,n.sqrt()}function Wn(e){return e instanceof Bx||e&&e.toStringTag===Tx||!1}function qn(e){return new this(e).ln()}function Gn(e,t){return new this(e).log(t)}function Vn(e){return new this(e).log(2)}function Hn(e){return new this(e).log(10)}function Yn(){return gn(this,arguments,-1)}function Kn(){return gn(this,arguments,1)}function Zn(e,t){return new this(e).mod(t)}function Jn(e,t){return new this(e).mul(t)}function Qn(e,t){return new this(e).pow(t)}function Xn(e){var t,n,r,a,s=0,i=new this(1),o=[];if(void 0===e?e=this.precision:tn(e,1,bx),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(a=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=a%1e7;else{if(!crypto.randomBytes)throw Error(Ex);for(t=crypto.randomBytes(r*=4);s<r;)(a=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(o.push(a%1e7),s+=4);s=r/4}else for(;s<r;)o[s++]=1e7*Math.random()|0;for(e%=7,(r=o[--s])&&e&&(a=Ax(10,7-e),o[s]=(r/a|0)*a);0===o[s];s--)o.pop();if(s<0)n=0,o=[0];else{for(n=-1;0===o[0];n-=7)o.shift();for(r=1,a=o[0];a>=10;a/=10)r++;r<7&&(n-=7-r)}return i.e=n,i.d=o,i}function er(e){return an(e=new this(e),e.e+1,this.rounding)}function tr(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function nr(e){return new this(e).sin()}function rr(e){return new this(e).sinh()}function ar(e){return new this(e).sqrt()}function sr(e,t){return new this(e).sub(t)}function ir(){var e=0,t=arguments,n=new this(t[e]);for(Sx=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Sx=!0,an(n,this.precision,this.rounding)}function or(e){return new this(e).tan()}function cr(e){return new this(e).tanh()}function lr(e){return an(e=new this(e),e.e+1,1)}function ur(e){return new Bx(null==e?0:e)}function dr(e){return e.reduce((e,t)=>e.plus(ur(t)),new Bx(0))}function hr(e){return{...e,balance:ur(e.balance),openingBalance:void 0!==e.openingBalance?ur(e.openingBalance):void 0,holdings:e.holdings?.map(mr)}}function pr(e){return{...e,amount:ur(e.amount)}}function gr(e){return{...e,targetAmount:ur(e.targetAmount),currentAmount:ur(e.currentAmount)}}function mr(e){return{...e,shares:ur(e.shares),value:ur(e.value),averageCost:void 0!==e.averageCost?ur(e.averageCost):void 0,currentPrice:void 0!==e.currentPrice?ur(e.currentPrice):void 0,marketValue:void 0!==e.marketValue?ur(e.marketValue):void 0,gain:void 0!==e.gain?ur(e.gain):void 0,gainPercent:void 0!==e.gainPercent?ur(e.gainPercent):void 0}}function fr({children:e}){const{user:t,isLoaded:n}=g(),[r,a]=Gi.useState([]),[s,i]=Gi.useState([]),[o,c]=Gi.useState([]),[l,u]=Gi.useState([]),[d,h]=Gi.useState([]),[p,m]=Gi.useState([]),[f,y]=Gi.useState([]),[v,b]=Gi.useState(!0),[w,x]=Gi.useState(!1),[k,_]=Gi.useState(null),[S,j]=Gi.useState(null),[I,C]=Gi.useState(!1),E=Gi.useRef(null),T=Gi.useRef(null);Gi.useEffect(()=>{n&&(async()=>{b(!0),j(null);try{if(console.log("[AppContext] Initializing with user:",t?.id),t){console.log("[AppContext] User found, initializing services");const e=await im.ensureUserExists(t.id,t.emailAddresses[0]?.emailAddress||"",t.firstName||void 0,t.lastName||void 0);if(e){console.log("[AppContext] Database user ID resolved:",e),await mx.initialize(t.id),await px.initialize(t.id,t.emailAddresses[0]?.emailAddress||"",t.firstName||void 0,t.lastName||void 0),console.log("[AppContext] Loading app data...");const n=await Xt(e);console.log("[AppContext] Accounts loaded:",n.length),a(n)}else console.warn("[AppContext] Failed to resolve database user ID - no data will be loaded"),a([])}else console.log("[AppContext] No user logged in"),a([]);const e=await px.loadAppData();if(i(e.transactions),c(e.budgets),u(e.goals),0===e.categories.length?h([{id:"type-income",name:"Income",type:"income",level:"type",isSystem:!0},{id:"type-expense",name:"Expense",type:"expense",level:"type",isSystem:!0},{id:"type-transfer",name:"Transfer",type:"both",level:"type",isSystem:!0},{id:"sub-salary",name:"Salary & Wages",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-business",name:"Business Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-investment-income",name:"Investment Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-other-income",name:"Other Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"salary",name:"Regular Salary",type:"income",level:"detail",parentId:"sub-salary"},{id:"bonus",name:"Bonus",type:"income",level:"detail",parentId:"sub-salary"},{id:"overtime",name:"Overtime",type:"income",level:"detail",parentId:"sub-salary"},{id:"freelance",name:"Freelance Income",type:"income",level:"detail",parentId:"sub-business"},{id:"dividends",name:"Dividends",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"interest",name:"Interest",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"capital-gains",name:"Capital Gains",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"rental-income",name:"Rental Income",type:"income",level:"detail",parentId:"sub-other-income"},{id:"gifts-received",name:"Gifts Received",type:"income",level:"detail",parentId:"sub-other-income"},{id:"sub-housing",name:"Housing",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-transport",name:"Transport",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-food",name:"Food & Dining",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-utilities",name:"Utilities",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-healthcare",name:"Healthcare",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-entertainment",name:"Entertainment",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-shopping",name:"Shopping",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-education",name:"Education",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-personal",name:"Personal Care",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-insurance",name:"Insurance",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-savings",name:"Savings & Investments",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-taxes",name:"Taxes",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-other-expense",name:"Other Expenses",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-adjustments",name:"Adjustments",type:"both",level:"sub",parentId:"type-expense",isSystem:!0},{id:"rent",name:"Rent",type:"expense",level:"detail",parentId:"sub-housing"},{id:"mortgage",name:"Mortgage",type:"expense",level:"detail",parentId:"sub-housing"},{id:"property-tax",name:"Property Tax",type:"expense",level:"detail",parentId:"sub-housing"},{id:"home-maintenance",name:"Home Maintenance",type:"expense",level:"detail",parentId:"sub-housing"},{id:"home-insurance",name:"Home Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"fuel",name:"Fuel",type:"expense",level:"detail",parentId:"sub-transport"},{id:"public-transport",name:"Public Transport",type:"expense",level:"detail",parentId:"sub-transport"},{id:"car-maintenance",name:"Car Maintenance",type:"expense",level:"detail",parentId:"sub-transport"},{id:"car-insurance",name:"Car Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"parking",name:"Parking",type:"expense",level:"detail",parentId:"sub-transport"},{id:"tolls",name:"Tolls",type:"expense",level:"detail",parentId:"sub-transport"},{id:"groceries",name:"Groceries",type:"expense",level:"detail",parentId:"sub-food"},{id:"restaurants",name:"Restaurants",type:"expense",level:"detail",parentId:"sub-food"},{id:"takeout",name:"Takeout/Delivery",type:"expense",level:"detail",parentId:"sub-food"},{id:"coffee-shops",name:"Coffee Shops",type:"expense",level:"detail",parentId:"sub-food"},{id:"electricity",name:"Electricity",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"water",name:"Water",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"gas",name:"Gas",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"internet",name:"Internet",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"phone",name:"Phone",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"tv",name:"TV/Streaming",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"health-insurance",name:"Health Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"doctor",name:"Doctor Visits",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"dentist",name:"Dental Care",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"pharmacy",name:"Pharmacy",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"vision",name:"Vision Care",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"movies",name:"Movies & Shows",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"concerts",name:"Concerts & Events",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"sports",name:"Sports & Recreation",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"hobbies",name:"Hobbies",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"subscriptions",name:"Subscriptions",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"clothing",name:"Clothing",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"electronics",name:"Electronics",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"household",name:"Household Items",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"gifts",name:"Gifts",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"account-adjustments",name:"Account Adjustments",type:"both",level:"detail",parentId:"sub-adjustments",isSystem:!0},{id:"transfer-in",name:"Transfer In",type:"both",level:"detail",parentId:"type-transfer",isSystem:!0},{id:"transfer-out",name:"Transfer Out",type:"both",level:"detail",parentId:"type-transfer",isSystem:!0}]):h(e.categories),C(px.isUsingSupabase()),_(new Date),px.isUsingSupabase()&&t){const e=(e,t)=>{const n=Date.now();E.current&&E.current.type===e&&n-E.current.timestamp<1e3?console.log(`[AppContext] Skipping duplicate ${e} update`):(T.current&&clearTimeout(T.current),T.current=setTimeout(async()=>{E.current={type:e,timestamp:n},await t()},200))},n=async function(n){if(!tm)return()=>{};try{const r=await im.getDatabaseUserId(n);if(!r)return console.warn("[SimpleAccountService] No database user found for Clerk ID:",n),()=>{};console.log("[SimpleAccountService] Database user ID:",r);const s=tm.channel(`accounts-${r}`).on("postgres_changes",{event:"*",schema:"public",table:"accounts",filter:`user_id=eq.${r}`},n=>{console.log("\ud83d\udd14 [SimpleAccountService] Real-time update received!"),console.log("   Event type:",n.eventType),console.log("   Table:",n.table),console.log("   Schema:",n.schema),console.log("   Old record:",n.old),console.log("   New record:",n.new),console.log("   Commit timestamp:",n.commit_timestamp),console.log("   Full payload:",n),(async n=>{console.log("[AppContext] Real-time account update received:",n),console.log("[AppContext] Update type:",n.eventType),"UPDATE"===n.eventType&&n.new&&!n.new.is_active&&console.log("[AppContext] Account was soft-deleted (is_active = false)"),e("account",async()=>{console.log("[AppContext] Reloading accounts after real-time update");const e=await Xt(t.id);console.log("[AppContext] Updated accounts:",e.length,"accounts"),a(e),_(new Date);const n=await px.getTransactions();i(n)})})(n)}).subscribe((e,t)=>{if(console.log(`\ud83d\udce1 [SimpleAccountService] Subscription status: ${e}`),t&&console.error("\u274c [SimpleAccountService] Subscription error:",t),"SUBSCRIBED"===e){console.log("\u2705 [SimpleAccountService] Successfully subscribed!"),console.log("   Channel:",`accounts-${r}`),console.log("   Filter:",`user_id=eq.${r}`),console.log("   Database user ID:",r);const e=tm.getChannels();console.log(`\ud83d\udcca [SimpleAccountService] Total active channels: ${e.length}`),e.forEach((e,t)=>{console.log(`   ${t+1}. ${e.topic} - State: ${e.state}`)})}else"CHANNEL_ERROR"===e?(console.error("\u274c [SimpleAccountService] Channel error - check if realtime is enabled in Supabase"),console.error("   You may need to enable realtime for the accounts table in Supabase dashboard"),console.error("   Go to: Table Editor > accounts > Replication (toggle on)")):"TIMED_OUT"===e?console.error("\u23f1\ufe0f [SimpleAccountService] Subscription timed out"):"CLOSED"===e&&console.log("\ud83d\udd12 [SimpleAccountService] Channel closed")});return()=>{console.log("[SimpleAccountService] Unsubscribing from real-time updates"),tm.removeChannel(s)}}catch(r){return console.error("[SimpleAccountService] Error setting up subscription:",r),()=>{}}}(t.id),r=await n,s=px.subscribeToUpdates({onTransactionUpdate:async t=>{console.log("[AppContext] Transaction update:",t),e("transaction",async()=>{const e=await px.getTransactions();i(e);const t=await px.getAccounts();a(t),_(new Date)})}});return()=>{T.current&&clearTimeout(T.current),r(),s()}}}catch(e){console.error("[AppContext] Failed to initialize data:",e),console.error("[AppContext] Error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),j("Failed to load data. Using offline mode.")}finally{b(!1)}})()},[t,n]),Gi.useCallback(async()=>{x(!0);try{const e=await px.refreshData();a(e.accounts),i(e.transactions),c(e.budgets),u(e.goals),e.categories.length>0&&h(e.categories),_(new Date),j(null)}catch(e){console.error("Failed to refresh data:",e),j("Failed to sync data")}finally{x(!1)}},[]);const N=Gi.useCallback(async e=>{try{if(console.log("[AppContext] Adding account:",e),!t?.id)throw new Error("User not authenticated");const n={...e,balance:e.initialBalance||e.balance||0,initialBalance:e.initialBalance||e.balance||0,isActive:void 0===e.isActive||e.isActive},r=await async function(e,t){let n=await im.getDatabaseUserId(e);try{if(!tm)throw new Error("Supabase not configured - using localStorage");if(n)console.log("[SimpleAccountService] Using existing user:",n);else{if(n=await im.ensureUserExists(e,"user@example.com",void 0,void 0),!n)throw new Error("Failed to get or create database user");console.log("[SimpleAccountService] Created user via userIdService:",n)}const r={user_id:n,name:t.name,type:"current"===t.type?"checking":t.type,currency:t.currency||"GBP",balance:t.balance||0,initial_balance:t.initialBalance||t.balance||0,is_active:!1!==t.isActive,institution:t.institution||null,icon:t.icon||null,color:t.color||null};console.log("[SimpleAccountService] Creating account with data:",r);const{data:a,error:s}=await tm.from("accounts").insert(r).select().single();if(s)throw console.error("[SimpleAccountService] Failed to create account:",s),console.error("[SimpleAccountService] Error details:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),s;if(!a)throw console.error("[SimpleAccountService] No data returned from account creation"),new Error("Account creation returned no data");return console.log("[SimpleAccountService] Account created successfully:",a),Qt(a)}catch(r){console.error("[SimpleAccountService] Error creating account, falling back to localStorage:",r);const e={...t,id:crypto.randomUUID(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},n=await em.get(Kg)||[];return n.push(e),await em.set(Kg,n),e}}(t.id,n);return console.log("[AppContext] Account created:",r),a(e=>[...e,r]),r}catch(n){throw console.error("[AppContext] Failed to add account:",n),n}},[t]),A=Gi.useCallback(async(e,t)=>{try{const n=await px.updateAccount(e,t);a(t=>t.map(t=>t.id===e?n:t))}catch(n){throw console.error("Failed to update account:",n),n}},[]),O=Gi.useCallback(async e=>{try{await px.deleteAccount(e),a(t=>t.filter(t=>t.id!==e)),i(t=>t.filter(t=>t.accountId!==e))}catch(t){throw console.error("Failed to delete account:",t),t}},[]),D=Gi.useCallback(async e=>{try{const t=await px.createTransaction(e);i(e=>[...e,t]),a(t=>t.map(t=>t.id===e.accountId?{...t,balance:(t.balance||0)+e.amount}:t))}catch(t){throw console.error("Failed to add transaction:",t),t}},[]),P=Gi.useCallback(async(e,t)=>{try{const n=s.find(t=>t.id===e),r=await px.updateTransaction(e,t);if(i(t=>t.map(t=>t.id===e?r:t)),n&&void 0!==t.amount&&t.amount!==n.amount){const e=t.amount-n.amount;a(t=>t.map(t=>t.id===n.accountId?{...t,balance:(t.balance||0)+e}:t))}}catch(n){throw console.error("Failed to update transaction:",n),n}},[s]),M=Gi.useCallback(async e=>{try{const t=s.find(t=>t.id===e);await px.deleteTransaction(e),i(t=>t.filter(t=>t.id!==e)),t&&a(e=>e.map(e=>e.id===t.accountId?{...e,balance:(e.balance||0)-t.amount}:e))}catch(t){throw console.error("Failed to delete transaction:",t),t}},[s]),L=Gi.useCallback(e=>{const t={...e,id:crypto.randomUUID(),spent:0};c(e=>[...e,t])},[]),R=Gi.useCallback((e,t)=>{c(n=>n.map(n=>n.id===e?{...n,...t}:n))},[]),U=Gi.useCallback(e=>{c(t=>t.filter(t=>t.id!==e))},[]),z=Gi.useCallback(e=>{const t={...e,id:crypto.randomUUID(),progress:0};u(e=>[...e,t])},[]),$=Gi.useCallback((e,t)=>{u(n=>n.map(n=>n.id===e?{...n,...t}:n))},[]),B=Gi.useCallback(e=>{u(t=>t.filter(t=>t.id!==e))},[]),F=Gi.useCallback((e,t)=>{u(n=>n.map(n=>{if(n.id===e){const e=Math.min((n.progress||0)+t,n.targetAmount);return{...n,progress:e}}return n}))},[]),W=Gi.useCallback(e=>{const t={...e,id:crypto.randomUUID()};h(e=>[...e,t])},[]),q=Gi.useCallback((e,t)=>{h(n=>n.map(n=>n.id===e?{...n,...t}:n))},[]),G=Gi.useCallback(e=>{h(t=>t.filter(t=>t.id!==e&&t.parentId!==e))},[]),V=Gi.useCallback(e=>d.filter(t=>t.parentId===e),[d]),H=Gi.useCallback(e=>d.filter(t=>t.parentId===e),[d]),Y=Gi.useCallback(e=>{const t={...e,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date};m(e=>[...e,t])},[]),K=Gi.useCallback((e,t)=>{m(n=>n.map(n=>n.id===e?{...n,...t,updatedAt:new Date}:n))},[]),Z=Gi.useCallback(e=>{m(t=>t.filter(t=>t.id!==e))},[]),J=Gi.useCallback(e=>s.filter(t=>t.tags?.includes(e)??!1).length,[s]),Q=Gi.useCallback(()=>{const e=new Set;return s.forEach(t=>{t.tags&&t.tags.forEach(t=>e.add(t))}),Array.from(e)},[s]),X=Gi.useCallback(e=>{e.accounts&&a(e.accounts),e.transactions&&i(e.transactions),e.budgets&&c(e.budgets),e.goals&&u(e.goals),e.categories&&h(e.categories),e.tags&&m(e.tags),e.recurringTransactions&&y(e.recurringTransactions)},[]),ee=Gi.useCallback(()=>({accounts:r,transactions:s,budgets:o,goals:l,categories:d,tags:p,recurringTransactions:f}),[r,s,o,l,d,p,f]),te=Gi.useCallback(()=>s.map(pr),[s]),ne=Gi.useCallback(()=>r.map(hr),[r]),re=Gi.useCallback(()=>l.map(gr),[l]),ae=Gi.useCallback(()=>{a([]),i([]),c([]),u([]),h([{id:"type-income",name:"Income",type:"income",level:"type",isSystem:!0},{id:"type-expense",name:"Expense",type:"expense",level:"type",isSystem:!0},{id:"type-transfer",name:"Transfer",type:"both",level:"type",isSystem:!0},{id:"sub-salary",name:"Salary & Wages",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-business",name:"Business Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-investment-income",name:"Investment Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"sub-other-income",name:"Other Income",type:"income",level:"sub",parentId:"type-income",isSystem:!0},{id:"salary",name:"Regular Salary",type:"income",level:"detail",parentId:"sub-salary"},{id:"bonus",name:"Bonus",type:"income",level:"detail",parentId:"sub-salary"},{id:"overtime",name:"Overtime",type:"income",level:"detail",parentId:"sub-salary"},{id:"freelance",name:"Freelance Income",type:"income",level:"detail",parentId:"sub-business"},{id:"dividends",name:"Dividends",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"interest",name:"Interest",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"capital-gains",name:"Capital Gains",type:"income",level:"detail",parentId:"sub-investment-income"},{id:"rental-income",name:"Rental Income",type:"income",level:"detail",parentId:"sub-other-income"},{id:"gifts-received",name:"Gifts Received",type:"income",level:"detail",parentId:"sub-other-income"},{id:"sub-housing",name:"Housing",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-transport",name:"Transport",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-food",name:"Food & Dining",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-utilities",name:"Utilities",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-healthcare",name:"Healthcare",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-entertainment",name:"Entertainment",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-shopping",name:"Shopping",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-education",name:"Education",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-personal",name:"Personal Care",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-insurance",name:"Insurance",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-savings",name:"Savings & Investments",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-taxes",name:"Taxes",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-other-expense",name:"Other Expenses",type:"expense",level:"sub",parentId:"type-expense",isSystem:!0},{id:"sub-adjustments",name:"Adjustments",type:"both",level:"sub",parentId:"type-expense",isSystem:!0},{id:"rent",name:"Rent",type:"expense",level:"detail",parentId:"sub-housing"},{id:"mortgage",name:"Mortgage",type:"expense",level:"detail",parentId:"sub-housing"},{id:"property-tax",name:"Property Tax",type:"expense",level:"detail",parentId:"sub-housing"},{id:"home-maintenance",name:"Home Maintenance",type:"expense",level:"detail",parentId:"sub-housing"},{id:"home-insurance",name:"Home Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"fuel",name:"Fuel",type:"expense",level:"detail",parentId:"sub-transport"},{id:"public-transport",name:"Public Transport",type:"expense",level:"detail",parentId:"sub-transport"},{id:"car-maintenance",name:"Car Maintenance",type:"expense",level:"detail",parentId:"sub-transport"},{id:"car-insurance",name:"Car Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"parking",name:"Parking",type:"expense",level:"detail",parentId:"sub-transport"},{id:"tolls",name:"Tolls",type:"expense",level:"detail",parentId:"sub-transport"},{id:"groceries",name:"Groceries",type:"expense",level:"detail",parentId:"sub-food"},{id:"restaurants",name:"Restaurants",type:"expense",level:"detail",parentId:"sub-food"},{id:"takeout",name:"Takeout/Delivery",type:"expense",level:"detail",parentId:"sub-food"},{id:"coffee-shops",name:"Coffee Shops",type:"expense",level:"detail",parentId:"sub-food"},{id:"electricity",name:"Electricity",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"water",name:"Water",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"gas",name:"Gas",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"internet",name:"Internet",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"phone",name:"Phone",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"tv",name:"TV/Streaming",type:"expense",level:"detail",parentId:"sub-utilities"},{id:"health-insurance",name:"Health Insurance",type:"expense",level:"detail",parentId:"sub-insurance"},{id:"doctor",name:"Doctor Visits",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"dentist",name:"Dental Care",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"pharmacy",name:"Pharmacy",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"vision",name:"Vision Care",type:"expense",level:"detail",parentId:"sub-healthcare"},{id:"movies",name:"Movies & Shows",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"concerts",name:"Concerts & Events",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"sports",name:"Sports & Recreation",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"hobbies",name:"Hobbies",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"subscriptions",name:"Subscriptions",type:"expense",level:"detail",parentId:"sub-entertainment"},{id:"clothing",name:"Clothing",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"electronics",name:"Electronics",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"household",name:"Household Items",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"gifts",name:"Gifts",type:"expense",level:"detail",parentId:"sub-shopping"},{id:"account-adjustments",name:"Account Adjustments",type:"both",level:"detail",parentId:"sub-adjustments",isSystem:!0},{id:"transfer-in",name:"Transfer In",type:"both",level:"detail",parentId:"type-transfer",isSystem:!0},{id:"transfer-out",name:"Transfer Out",type:"both",level:"detail",parentId:"type-transfer",isSystem:!0}]),m([]),y([])},[]),se={accounts:r,transactions:s,budgets:o,goals:l,categories:d,tags:p,recurringTransactions:f,addAccount:N,updateAccount:A,deleteAccount:O,addTransaction:D,updateTransaction:P,deleteTransaction:M,addBudget:L,updateBudget:R,deleteBudget:U,addGoal:z,updateGoal:$,deleteGoal:B,contributeToGoal:F,addCategory:W,updateCategory:q,deleteCategory:G,getSubCategories:V,getDetailCategories:H,addTag:Y,updateTag:K,deleteTag:Z,getTagUsageCount:J,getAllUsedTags:Q,importData:X,exportData:ee,clearAllData:ae,getDecimalTransactions:te,getDecimalAccounts:ne,getDecimalGoals:re,isLoading:v,isSyncing:w,lastSyncTime:k,syncError:S,isUsingSupabase:I};return bo.jsx(Fx.Provider,{value:se,children:e})}function yr(){const e=Gi.useContext(Fx);if(void 0===e)throw console.error("useApp called outside of AppProvider"),new Error("useApp must be used within an AppProvider");return e}function vr({children:e}){const[t,n]=Gi.useState(()=>{try{const e=localStorage.getItem("money_management_notifications"),t=e?JSON.parse(e):[],n=Date.now()-6048e5;return(Array.isArray(t)?t.filter(e=>{try{return new Date(e.timestamp).getTime()>n}catch{return!1}}):[]).slice(0,20)}catch{return[]}}),[r,a]=Gi.useState(()=>{try{return"true"===localStorage.getItem("money_management_budget_alerts_enabled")}catch{return!0}}),[s,i]=Gi.useState(()=>{try{const e=localStorage.getItem("money_management_alert_threshold");return e?parseInt(e,10):80}catch{return 80}}),[o,c]=Gi.useState(()=>{try{return"true"===localStorage.getItem("money_management_large_transaction_alerts_enabled")}catch{return!0}}),[l,u]=Gi.useState(()=>{try{const e=localStorage.getItem("money_management_large_transaction_threshold");return e?parseInt(e,10):500}catch{return 500}}),d=t.filter(e=>!e.read).length;Gi.useEffect(()=>{localStorage.setItem("money_management_notifications",JSON.stringify(t))},[t]),Gi.useEffect(()=>{localStorage.setItem("money_management_budget_alerts_enabled",r.toString())},[r]),Gi.useEffect(()=>{localStorage.setItem("money_management_alert_threshold",s.toString())},[s]),Gi.useEffect(()=>{localStorage.setItem("money_management_large_transaction_alerts_enabled",o.toString())},[o]),Gi.useEffect(()=>{localStorage.setItem("money_management_large_transaction_threshold",l.toString())},[l]);const h=Gi.useCallback(e=>{const t={...e,id:`notification-${Date.now()}`,timestamp:new Date,read:!1};n(e=>[t,...e].slice(0,50))},[]),p=Gi.useCallback(e=>{n(t=>[...e,...t].slice(0,50))},[]),g=Gi.useCallback(e=>{n(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},[]),m=Gi.useCallback(()=>{n(e=>e.map(e=>({...e,read:!0})))},[]),f=Gi.useCallback(e=>{n(t=>t.filter(t=>t.id!==e))},[]),y=Gi.useCallback(()=>{n([])},[]),v=Gi.useCallback(e=>{if(!r)return;const n=new Set(t.filter(e=>e.timestamp>new Date(Date.now()-864e5)).map(e=>e.message));e.forEach(e=>{const t=`budget-${e.budgetId}-${e.percentage}`;if(!n.has(t)){const n="danger"===e.type?"error":"warning",r="danger"===e.type?`Budget Exceeded: ${e.categoryName}`:`Budget Warning: ${e.categoryName}`;"danger"===e.type?(e.percentage,e.period,new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e.spent),new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e.budget)):(e.percentage,e.period),h({type:n,title:r,message:t,action:{label:"View Budget",onClick:()=>{window.location.href="/budget"}}})}})},[r,t,h]),b=Gi.useCallback((e,t)=>{o&&e>=l&&h({type:"warning",title:"Large Transaction Detected",message:`A large transaction of ${new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e)} was added: ${t}`,action:{label:"View Transactions",onClick:()=>{window.location.href="/transactions"}}})},[o,l,h]),w=Gi.useCallback((e,t,n)=>{if(!r)return;const a=Wx.checkBudgetAlerts(e,t,n);a.length>0&&p(a)},[r,p]),x=Gi.useCallback((e,t)=>{if(!o)return;const n=Wx.checkTransactionAlerts(e,t);n.length>0&&p(n)},[o,p]),k=Gi.useCallback((e,t)=>{const n=Wx.checkGoalProgress(e,t);n.length>0&&p(n)},[p]);return bo.jsx(qx.Provider,{value:{notifications:t,unreadCount:d,budgetAlertsEnabled:r,setBudgetAlertsEnabled:a,alertThreshold:s,setAlertThreshold:i,largeTransactionAlertsEnabled:o,setLargeTransactionAlertsEnabled:c,largeTransactionThreshold:l,setLargeTransactionThreshold:u,addNotification:h,addNotifications:p,markAsRead:g,markAllAsRead:m,removeNotification:f,clearAll:y,checkBudgetAlerts:v,checkLargeTransaction:b,checkEnhancedBudgetAlerts:w,checkEnhancedTransactionAlerts:x,checkGoalProgress:k},children:e})}function br(){const e=Gi.useContext(qx);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e}function wr(e){return Nk[e]||Nk.lightBlue}function xr(e){const t=document.documentElement;Object.entries(e.colors).forEach(([e,n])=>{Object.entries(n).forEach(([n,r])=>{t.style.setProperty(`--color-${e}-${n}`,r)})}),Object.entries(wk).forEach(([e,n])=>{t.style.setProperty(`--font-size-${e}`,n)}),Object.entries(xk).forEach(([e,n])=>{t.style.setProperty(`--font-weight-${e}`,n)}),Object.entries(kk).forEach(([e,n])=>{t.style.setProperty(`--line-height-${e}`,n)}),Object.entries(_k).forEach(([e,n])=>{const r=e.replace(".","-");t.style.setProperty(`--spacing-${r}`,n)}),Object.entries(Sk).forEach(([e,n])=>{t.style.setProperty(`--radius-${e}`,n)}),Object.entries(jk).forEach(([e,n])=>{t.style.setProperty(`--shadow-${e}`,n)}),Object.entries(Ik).forEach(([e,n])=>{t.style.setProperty(`--duration-${e}`,n)}),Object.entries(Ck).forEach(([e,n])=>{t.style.setProperty(`--easing-${e}`,n)}),t.setAttribute("data-theme",e.id),t.setAttribute("data-theme-mode",e.isDark?"dark":"light"),e.isDark?t.classList.add("dark"):t.classList.remove("dark")}function kr({children:e,defaultTheme:t="lightBlue",storageKey:n="wealthtracker-theme"}){const[r,a]=Gi.useState(()=>"undefined"!=typeof window&&localStorage.getItem(n)||t),[s,i]=Gi.useState(()=>{if("undefined"!=typeof window){const e=localStorage.getItem(`${n}-custom`);if(e)try{return JSON.parse(e)}catch{return[]}}return[]}),o=wr(r)||s.find(e=>e.id===r)||wr(t),c=Gi.useCallback(e=>{a(e),localStorage.setItem(n,e);const t=wr(e)||s.find(t=>t.id===e);t&&xr(t)},[n,s]),l=Gi.useCallback((e,t)=>{const n=function(e,t){const n=`${t?"dark":"light"}${e.charAt(0).toUpperCase()+e.slice(1)}`;return Nk[n]||(t?Nk.darkBlue:Nk.lightBlue)}(e,t);c(n.id)},[c]),u=Gi.useCallback((e,t,r)=>{const a=wr(t),o={id:`custom-${Date.now()}`,name:e,description:`Custom theme based on ${a.name}`,isDark:a.isDark,colors:{...a.colors,...r}},l=[...s,o];i(l),localStorage.setItem(`${n}-custom`,JSON.stringify(l)),c(o.id)},[s,n,c]);Gi.useEffect(()=>{xr(o)},[o]),Gi.useEffect(()=>{const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{if("auto"===localStorage.getItem("theme-mode")){const t=localStorage.getItem("color-theme")||"blue";l(t,e.matches)}};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[l]);const d={theme:o,setTheme:c,setThemeByMode:l,availableThemes:Nk,createCustomTheme:u,customThemes:s};return bo.jsx(Ak.Provider,{value:d,children:e})}function _r({children:e}){const{user:t,isLoaded:n}=g(),{signOut:r}=Ml(),{session:a}=vl(),[s,i]=Gi.useState(null),[o,c]=Gi.useState(0),[l,u]=Gi.useState([]);Gi.useEffect(()=>{if(n&&t){const e=Ok.mapClerkUser(t);i(e),c(Ok.getSecurityScore(e)),u(Ok.getSecurityRecommendations(e)),async function(e,t,n){const{userIdService:r}=await po(async()=>{const{userIdService:e}=await Promise.resolve().then(()=>om);return{userIdService:e}},void 0);return null!==await r.ensureUserExists(e,t,n?.split(" ")[0],n?.split(" ")[1])}(t.id,t.primaryEmailAddress?.emailAddress||"",t.fullName||void 0).then(e=>{})}else n&&!t&&(i(null),c(0),u([]))},[t,n]);const d={user:s,isLoading:!n,isAuthenticated:!!s,securityScore:o,securityRecommendations:l,signOut:async()=>{await r(),i(null)},refreshSession:async()=>{a&&await a.reload()}};return bo.jsx(Dk.Provider,{value:d,children:e})}function Sr(){const e=Gi.useContext(Dk);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}function jr(e,t,n){const r=e.filter(e=>e.accountId===t);let a=new Bx(n);for(const s of r){const e=new Bx(s.amount);"income"===s.type?a=a.plus(e):"expense"===s.type?a=a.minus(e):"transfer"===s.type&&(a=a.plus(e))}return a.toNumber()}function Ir(e,t){return e.filter(e=>"expense"===e.type&&e.category===t.category&&Cr(e.date,t)).reduce((e,t)=>new Bx(e).plus(t.amount).toNumber(),0)}function Cr(e,t){const n=new Date(e),r=new Date;switch(t.period){case"monthly":return n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear();case"quarterly":return Math.floor(n.getMonth()/3)===Math.floor(r.getMonth()/3)&&n.getFullYear()===r.getFullYear();case"yearly":return n.getFullYear()===r.getFullYear();default:return!1}}function Er(e,t,n){const r=t.goals.goals.filter(t=>t.linkedAccountIds?.includes(e.accountId||""));for(const a of r){let e=new Bx(0);for(const n of a.linkedAccountIds||[]){const r=t.accounts.accounts.find(e=>e.id===n);r&&(e=e.plus(r.balance))}n(Om({id:a.id,currentAmount:e.toNumber()}))}}function Tr(){return bo.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:bo.jsxs("div",{className:"text-center",children:[bo.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),bo.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})})}function Nr({children:e}){const t=to(),{isAuthenticated:n,isLoading:r,user:a}=Sr(),[s,i]=Gi.useState(!1),[o,c]=Gi.useState(!1),[l,u]=Gi.useState(null);return Gi.useEffect(()=>{!n||!a||r||o||s||(async()=>{if(i(!0),u(null),!(await im.ensureUserExists(a.id,a.email||"user@example.com",a.firstName,a.lastName)))return console.error("Failed to initialize user in database"),u("Failed to initialize user account. Please try refreshing the page."),c(!0),void i(!1);"undefined"!=typeof window&&sessionStorage.setItem("current_user_id",a.id),t(Pk()).unwrap().then(()=>{c(!0)}).catch(e=>{console.error("\u274c Failed to load data from Supabase:",e),u("Failed to load your data. Please try refreshing the page."),c(!0)}).finally(()=>{i(!1)})})()},[t,n,a,r,o,s]),r||n&&!o?bo.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:bo.jsxs("div",{className:"text-center",children:[bo.jsx(Tr,{}),bo.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:r?"Authenticating...":"Loading your financial data..."}),s&&bo.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-500",children:"Syncing with cloud storage"})]})}):l?bo.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:bo.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[bo.jsx("div",{className:"mb-4 text-red-500",children:bo.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:bo.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 8.5c-.77.833.192 2.5 1.732 2.5z"})})}),bo.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Data Loading Error"}),bo.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:l}),bo.jsx("button",{onClick:()=>{u(null),c(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})}):bo.jsx(bo.Fragment,{children:e})}function Ar({children:e}){const{user:t,isSignedIn:n}=g(),[r,a]=Gi.useState(null),[s,i]=Gi.useState(null),[o,c]=Gi.useState(!0),[l,u]=Gi.useState(null),d=r?.tier||"free",h=Vk.getFeatureLimits(d);Gi.useEffect(()=>{n&&t?(async()=>{await im.ensureUserExists(t.id,t.primaryEmailAddress?.emailAddress||"",t.firstName||void 0,t.lastName||void 0)&&Yk.initializeUserProfile(t.id,t.primaryEmailAddress?.emailAddress||"",t.fullName||void 0).then(()=>{p()}).catch(()=>{p()})})():(a(null),i(null),c(!1),u(null))},[n,t]);const p=async()=>{c(!0),u(null);try{const e=await Yk.getCurrentSubscription(t.id);a(e);const n=localStorage.getItem(`usage_${t?.id}`);i(n?JSON.parse(n):{accounts:0,transactions:0,budgets:0,goals:0,lastCalculated:new Date})}catch(e){console.error("Error loading subscription data:",e),u("Failed to load subscription information"),a(null),i({accounts:0,transactions:0,budgets:0,goals:0,lastCalculated:new Date})}finally{c(!1)}},m={subscription:r,tier:d,limits:h,usage:s,isLoading:o,error:l,hasFeature:e=>Vk.hasFeatureAccess(d,e),canUseFeature:(e,t)=>{const n=`max${e.charAt(0).toUpperCase()+e.slice(1)}`;return Vk.isWithinLimits(d,t,n)},getRemainingUsage:e=>{if(!s)return 0;const t=`max${e.charAt(0).toUpperCase()+e.slice(1)}`,n=h[t],r=s[e];return-1===n?1/0:Math.max(0,n-r)},refreshSubscription:async()=>{await p()},updateUsage:e=>{const n={...s,...e,lastCalculated:new Date};i(n),t?.id&&localStorage.setItem(`usage_${t.id}`,JSON.stringify(n))}};return bo.jsx(Kk.Provider,{value:m,children:e})}function Or(){const e=Gi.useContext(Kk);if(!e)throw new Error("useSubscription must be used within a SubscriptionProvider");return e}function Dr({toast:e,onDismiss:t}){const[n,r]=Gi.useState(!1),[a,s]=Gi.useState(!1);Gi.useEffect(()=>{if(setTimeout(()=>r(!0),10),0!==e.duration){const t=setTimeout(()=>{i()},e.duration||5e3);return()=>clearTimeout(t)}},[e.duration]);const i=()=>{s(!0),setTimeout(()=>{t(e.id)},300)},o={success:bo.jsx(Sv,{size:20,className:"text-green-500"}),error:bo.jsx(Rv,{size:20,className:"text-red-500"}),warning:bo.jsx(Rv,{size:20,className:"text-yellow-500"}),info:bo.jsx(Jk,{size:20,className:"text-blue-500"})},c={success:"text-green-800 dark:text-green-200",error:"text-red-800 dark:text-red-200",warning:"text-yellow-800 dark:text-yellow-200",info:"text-blue-800 dark:text-blue-200"};return bo.jsxs("div",{className:`\n        flex items-start gap-3 p-4 rounded-lg border shadow-lg\n        ${{success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",error:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",warning:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800",info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}[e.type]}\n        transform transition-all duration-300 ease-out\n        ${n&&!a?"translate-x-0 opacity-100":"translate-x-full opacity-0"}\n        min-w-[300px] max-w-[500px]\n      `,role:"alert","aria-live":"polite",children:[bo.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o[e.type]}),bo.jsxs("div",{className:"flex-1 min-w-0",children:[e.title&&bo.jsx("p",{className:`font-semibold ${c[e.type]}`,children:e.title}),bo.jsx("p",{className:`text-sm ${c[e.type]} ${e.title?"mt-1":""}`,children:e.message}),e.action&&bo.jsx("button",{onClick:e.action.onClick,className:`\n              mt-2 text-sm font-medium underline\n              ${c[e.type]} hover:no-underline\n              focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary\n            `,children:e.action.label})]}),bo.jsx("button",{onClick:i,className:`\n          flex-shrink-0 p-1 rounded-md\n          ${c[e.type]} hover:bg-black/5 dark:hover:bg-white/5\n          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary\n          min-w-[44px] min-h-[44px] flex items-center justify-center\n        `,"aria-label":"Dismiss notification",children:bo.jsx(xv,{size:16})})]})}function Pr({toasts:e,onDismiss:t}){return bo.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3",role:"region","aria-label":"Notifications","aria-live":"polite","aria-atomic":"false",children:e.map(e=>bo.jsx(Dr,{toast:e,onDismiss:t},e.id))})}function Mr(){const e=Gi.useContext(Xk);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function Lr({children:e}){const[t,n]=Gi.useState([]),r=Gi.useCallback(e=>{const t={id:`toast-${Date.now()}-${Math.random()}`,...e};n(e=>[...e,t])},[]),a=Gi.useCallback((e,t)=>{r({type:"success",title:t||"Success",message:e,duration:3e3})},[r]),s=Gi.useCallback(e=>{const t=function(e){const t=function(e){if("string"==typeof e){for(const[t,n]of Object.entries(Qk))if(e.toLowerCase().includes(t.toLowerCase()))return n;return e}if(e instanceof Error){const t=e.message;if("NetworkError"===e.name||t.includes("fetch"))return Qk.NetworkError;for(const[e,n]of Object.entries(Qk))if(t.toLowerCase().includes(e.toLowerCase()))return n;return t.length>100?"An error occurred. Please try again or contact support if the problem persists.":t}if("object"==typeof e&&null!==e&&"field"in e){const t=e;return Qk[t.message]||t.message}return"An unexpected error occurred. Please try again."}(e),n=function(e){const t={"session has expired":"Sign in again","connection problem":"Check connection","try again":"Retry","contact support":"Get help"},n=e.toLowerCase();for(const[r,a]of Object.entries(t))if(n.includes(r))return a;return null}(t);let r="error";t.includes("connection")||t.includes("offline")?r="warning":(t.includes("session")||t.includes("sign in"))&&(r="info");let a="Error";return"warning"===r&&(a="Connection Issue"),"info"===r&&(a="Action Required"),{title:a,message:t,action:n||void 0,type:r}}(e);r({type:t.type,title:t.title,message:t.message,duration:6e3,action:t.action?{label:t.action,onClick:()=>{"Sign in again"===t.action?window.location.href="/login":"Retry"===t.action&&window.location.reload()}}:void 0})},[r]),i=Gi.useCallback((e,t)=>{r({type:"warning",title:t||"Warning",message:e,duration:5e3})},[r]),o=Gi.useCallback((e,t)=>{r({type:"info",title:t||"Info",message:e,duration:4e3})},[r]),c=Gi.useCallback(e=>{n(t=>t.filter(t=>t.id!==e))},[]);return bo.jsxs(Xk.Provider,{value:{showToast:r,showSuccess:a,showError:s,showWarning:i,showInfo:o,dismissToast:c},children:[e,bo.jsx(Pr,{toasts:t,onDismiss:c})]})}function Rr(){const[e,t]=Gi.useState([]),[n,r]=Gi.useState({total:0,unread:0,transactions:0,accounts:0,budgets:0,goals:0,system:0}),[a,s]=Gi.useState(new Date);Gi.useEffect(()=>{const e=localStorage.getItem("recentActivities");if(e){const n=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));t(n),o(n)}const n=localStorage.getItem("lastActivityCheck");n&&s(new Date(n));const r=e=>{i(e.detail)};window.addEventListener("activity-logged",r);const a=setInterval(d,6e4);return()=>{window.removeEventListener("activity-logged",r),clearInterval(a)}},[]);const i=Gi.useCallback(e=>{const n={...e,id:`activity_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,read:!1};t(e=>{const t=[n,...e].slice(0,100);return localStorage.setItem("recentActivities",JSON.stringify(t)),o(t),t}),window.dispatchEvent(new CustomEvent("activity-added",{detail:n}))},[]),o=e=>{const t=e.filter(e=>"sync"!==e.type&&"system"!==e.type),n={total:t.length,unread:t.filter(e=>!e.read).length,transactions:t.filter(e=>"transaction"===e.type).length,accounts:t.filter(e=>"account"===e.type).length,budgets:t.filter(e=>"budget"===e.type).length,goals:t.filter(e=>"goal"===e.type).length,system:0};r(n)},c=Gi.useCallback(e=>{t(t=>{const n=t.map(t=>t.id===e?{...t,read:!0}:t);return localStorage.setItem("recentActivities",JSON.stringify(n)),o(n),n})},[]),l=Gi.useCallback(()=>{t(e=>{const t=e.map(e=>({...e,read:!0}));return localStorage.setItem("recentActivities",JSON.stringify(t)),o(t),t});const e=new Date;s(e),localStorage.setItem("lastActivityCheck",e.toISOString())},[]),u=Gi.useCallback(()=>{t([]),localStorage.removeItem("recentActivities"),o([])},[]),d=Gi.useCallback(()=>{const e=localStorage.getItem("recentActivities");if(e){const n=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));t(n),o(n)}},[]),h=Gi.useCallback((t,n=5)=>e.filter(e=>e.type===t).slice(0,n),[e]),p=Gi.useCallback(t=>{const n=e.filter(e=>"sync"!==e.type&&"system"!==e.type);return t?n.filter(e=>e.type===t&&!e.read).length:n.filter(e=>!e.read).length},[e]),g=Gi.useCallback(()=>e.filter(e=>e.timestamp>a),[e,a]);return{activities:e,counts:n,lastChecked:a,addActivity:i,markAsRead:c,markAllAsRead:l,clearActivities:u,getRecentByType:h,getUnreadCount:p,getNewSinceLastCheck:g}}function Ur(e){window.dispatchEvent(new CustomEvent("activity-logged",{detail:e}))}function zr({children:e}){return function(){const{transactions:e,accounts:t,budgets:n,goals:r}=yr();Gi.useEffect(()=>{if(0===e.length)return;const t=[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())[0];Date.now()-new Date(t.date).getTime()<6e4&&Ur({type:"transaction",title:"New Transaction",description:t.description,category:t.category,amount:parseFloat(t.amount),actionUrl:"/transactions"})},[e.length]),Gi.useEffect(()=>{t.forEach(e=>{const t=localStorage.getItem(`account_balance_${e.id}`),n=e.balance.toString();if(t&&t!==n){const r=parseFloat(n)-parseFloat(t);Math.abs(r)>.01&&Ur({type:"account",title:`${e.name} Balance Updated`,description:`Balance changed by \xa3${Math.abs(r).toFixed(2)}`,amount:r,actionUrl:"/accounts"})}localStorage.setItem(`account_balance_${e.id}`,n)})},[t]),Gi.useEffect(()=>{0!==n.length&&n.forEach(t=>{const n=Math.abs(e.filter(e=>e.category===t.category&&parseFloat(e.amount)<0).reduce((e,t)=>e+parseFloat(t.amount),0))/parseFloat(t.amount)*100,r=`budget_alert_${t.id}_${(new Date).getMonth()}`,a=localStorage.getItem(r);n>=90&&!a?(Ur({type:"budget",title:"Budget Alert",description:`${t.category} budget is ${n.toFixed(0)}% spent`,actionUrl:"/budget"}),localStorage.setItem(r,"true")):n>=75&&n<90&&"75"!==a&&(Ur({type:"budget",title:"Budget Warning",description:`${t.category} budget is ${n.toFixed(0)}% spent`,actionUrl:"/budget"}),localStorage.setItem(r,"75"))})},[n,e]),Gi.useEffect(()=>{r.forEach(e=>{const t=parseFloat(e.currentAmount)/parseFloat(e.targetAmount)*100,n=`goal_milestone_${e.id}`,r=parseInt(localStorage.getItem(n)||"0"),a=[25,50,75,100];for(const s of a)if(t>=s&&r<s){Ur({type:"goal",title:100===s?"Goal Achieved!":"Goal Milestone",description:`${e.name} is ${s}% complete`,actionUrl:"/goals"}),localStorage.setItem(n,s.toString());break}})},[r]),Gi.useEffect(()=>{const e=e=>{Ur({type:"sync",title:"Data Synchronized",description:"Your data has been synced with the cloud"})},t=e=>{Ur({type:"system",title:"Sync Error",description:"Failed to sync data. Will retry automatically."})};return window.addEventListener("sync-complete",e),window.addEventListener("sync-error",t),()=>{window.removeEventListener("sync-complete",e),window.removeEventListener("sync-error",t)}},[]),Gi.useEffect(()=>{const e=()=>{Ur({type:"system",title:"Connection Restored",description:"You are back online"})},t=()=>{Ur({type:"system",title:"Working Offline",description:"Changes will sync when reconnected"})};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),Gi.useEffect(()=>{const e=localStorage.getItem("activity_logged_today"),t=(new Date).toDateString();e!==t&&(Ur({type:"system",title:"Welcome Back",description:"Your data is up to date"}),localStorage.setItem("activity_logged_today",t))},[])}(),Gi.useEffect(()=>{},[]),bo.jsx(bo.Fragment,{children:e})}function $r({children:e}){const t=no(),[n,r]=Gi.useState(e),[a,s]=Gi.useState("fadeIn");return Gi.useEffect(()=>{s("fadeOut");const t=setTimeout(()=>{r(e),s("fadeIn")},200);return()=>clearTimeout(t)},[t.pathname]),bo.jsx("div",{className:`page-transition ${a}`,style:{opacity:"fadeIn"===a?1:0,transform:"fadeIn"===a?"translateX(0)":"translateX(10px)",transition:"opacity 200ms ease-out, transform 200ms ease-out"},children:n})}function Br(){const[e,t]=Gi.useState(!1),[n,r]=Gi.useState(0),a=no();return Gi.useEffect(()=>{t(!0),r(0);const e=setInterval(()=>{r(t=>t>=90?(clearInterval(e),90):t+30)},100),n=setTimeout(()=>{r(100),setTimeout(()=>{t(!1)},200)},300);return()=>{clearInterval(e),clearTimeout(n)}},[a]),e?bo.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 bg-gray-200 dark:bg-gray-700 z-50",children:bo.jsx("div",{className:"h-full bg-primary transition-all duration-300 ease-out",style:{width:`${n}%`}})}):null}function Fr(e,t=""){if("true"!==new URLSearchParams(t).get("demo"))return e;const n=e.includes("?")?"&":"?";return e.includes("demo=true")?e:`${e}${n}demo=true`}function Wr(){const e=no(),t=e.pathname.split("/").filter(Boolean);if(0===t.length)return null;const n=[{label:"Home",path:Fr("/",e.search)}];let r="";return t.forEach((t,a)=>{r+=`/${t}`;const s=e_[t]||t.charAt(0).toUpperCase()+t.slice(1);n.push({label:s,path:Fr(r,e.search)})}),bo.jsx("nav",{"aria-label":"Breadcrumb",className:"hidden sm:block mb-4",children:bo.jsx("ol",{className:"flex items-center space-x-2 text-sm",children:n.map((e,t)=>{const r=t===n.length-1;return bo.jsxs("li",{className:"flex items-center",children:[t>0&&bo.jsx(Iv,{size:16,className:"mx-2 text-gray-400 dark:text-gray-600"}),r?bo.jsxs("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:[0===t&&bo.jsx(ov,{size:16,className:"inline mr-1"}),e.label]}):bo.jsxs(ro,{to:e.path,className:"text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-primary-light transition-colors",children:[0===t&&bo.jsx(ov,{size:16,className:"inline mr-1"}),e.label]})]},e.path)})})})}function qr(){const e=no(),t=e.pathname.split("/").filter(Boolean);if(0===t.length)return null;const n=t[t.length-1],r=e_[n]||n.charAt(0).toUpperCase()+n.slice(1),a=t.length>1?`/${t.slice(0,-1).join("/")}`:"/";return bo.jsx("div",{className:"sm:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:bo.jsxs(ro,{to:Fr(a,e.search),className:"flex items-center gap-2 text-primary dark:text-primary-light",children:[bo.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:bo.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),bo.jsx("span",{className:"text-sm font-medium",children:r})]})})}function Gr(){return bo.jsxs(bo.Fragment,{children:[bo.jsx(n_,{}),bo.jsx("style",{jsx:!0,children:"\n        :global(.skip-link) {\n          position: absolute;\n          left: -10000px;\n          top: auto;\n          width: 1px;\n          height: 1px;\n          overflow: hidden;\n          background-color: #1a73e8;\n          color: white;\n          padding: 0.75rem 1.5rem;\n          text-decoration: none;\n          font-weight: 500;\n          border-radius: 0.375rem;\n          z-index: 9999;\n          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n        }\n\n        :global(.skip-link:focus) {\n          position: fixed;\n          left: 1rem;\n          top: 1rem;\n          width: auto;\n          height: auto;\n          overflow: visible;\n          outline: 3px solid #4285f4;\n          outline-offset: 2px;\n          animation: slideIn 0.2s ease-out;\n        }\n\n        @keyframes slideIn {\n          from {\n            transform: translateX(-20px);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n      "})]})}function Vr(){return Vi.useEffect(()=>{const e=e=>{"Tab"===e.key&&document.body.classList.add("user-is-tabbing")},t=()=>{document.body.classList.remove("user-is-tabbing")};return window.addEventListener("keydown",e),window.addEventListener("mousedown",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("mousedown",t)}},[]),bo.jsx("style",{jsx:!0,global:!0,children:'\n      /* Enhanced focus styles for keyboard navigation */\n      .user-is-tabbing *:focus {\n        outline: 3px solid #4285f4 !important;\n        outline-offset: 2px !important;\n      }\n\n      /* Remove default focus for mouse users */\n      *:focus:not(.focus-visible) {\n        outline: none;\n      }\n\n      /* Ensure interactive elements have minimum size */\n      button, a, input, select, textarea, [role="button"] {\n        min-height: 44px;\n        min-width: 44px;\n      }\n\n      /* Exception for inline links */\n      p a, li a, span a {\n        min-height: auto;\n        min-width: auto;\n      }\n    '})}function Hr(){const[e,t]=Vi.useState("");return Vi.useEffect(()=>{const e=()=>{const e=document.title;t(`Navigated to ${e}`)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[]),bo.jsx("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"sr-only",children:e})}function Yr(){const[e,t]=Vi.useState(!1);return Vi.useEffect(()=>{const e=window.matchMedia("(prefers-contrast: high)"),n=e=>{t(e.matches)};return t(e.matches),e.addEventListener("change",n),()=>e.removeEventListener("change",n)},[]),e}function Kr(){const[e,t]=Vi.useState(!1);return Vi.useEffect(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),n=e=>{t(e.matches)};return t(e.matches),e.addEventListener("change",n),()=>e.removeEventListener("change",n)},[]),e}function Zr(){const[e,t]=Gi.useState(!navigator.onLine),[n,r]=Gi.useState(!1);return Gi.useEffect(()=>{const e=()=>{t(!1),r(!0),setTimeout(()=>r(!1),3e3)},n=()=>{t(!0),r(!0)};return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),n?bo.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-auto z-50 transition-all duration-300 "+(e||n?"translate-y-0":"translate-y-full"),children:bo.jsx("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg "+(e?"bg-orange-500 text-white":"bg-green-500 text-white"),children:e?bo.jsxs(bo.Fragment,{children:[bo.jsx(Jb,{size:20}),bo.jsxs("div",{children:[bo.jsx("p",{className:"font-medium",children:"You're offline"}),bo.jsx("p",{className:"text-sm opacity-90",children:"Changes will sync when you're back online"})]})]}):bo.jsxs(bo.Fragment,{children:[bo.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:bo.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0"})}),bo.jsx("p",{className:"font-medium",children:"Back online"})]})})}):null}function Jr(e){l_=e(l_)}function Qr(e){return"function"==typeof e?(t=e,(s_||(s_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(u_(this),e),Xr(this.request)}:function(...e){return Xr(t.apply(u_(this),e))}):(e instanceof IDBTransaction&&function(e){if(i_.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",s),e.removeEventListener("abort",s)},a=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",s),e.addEventListener("abort",s)});i_.set(e,t)}(e),r_(e,a_||(a_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,l_):e);var t}function Xr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",s)},a=()=>{t(Xr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",s)});return c_.set(t,e),t}(e);if(o_.has(e))return o_.get(e);const t=Qr(e);return t!==e&&(o_.set(e,t),c_.set(t,e)),t}function ea(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(p_.get(t))return p_.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=h_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!d_.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,a?"readwrite":"readonly");let i=s.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),a&&s.done]))[0]};return p_.set(t,s),s}async function*ta(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const n=new Proxy(t,v_);for(y_.set(n,t),c_.set(n,u_(t));t;)yield n,t=await(f_.get(n)||t.continue()),f_.delete(n)}function na(e,t){return t===Symbol.asyncIterator&&r_(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&r_(e,[IDBIndex,IDBObjectStore])}function ra(){const{isOffline:e,isSyncing:t,pendingChanges:n,syncNow:r}=function(){const[e,t]=Gi.useState(!navigator.onLine),[n,r]=Gi.useState(!1),[a,s]=Gi.useState(0);Gi.useEffect(()=>{b_.init().catch(console.error)},[]);const i=Gi.useCallback(async()=>{try{const e=await b_.getOfflineQueueCount();s(e)}catch(e){console.error("Failed to get offline queue count:",e)}},[]);return Gi.useEffect(()=>{const e=()=>{t(!1)},n=()=>{t(!0)},a=()=>{r(!0)},s=()=>{r(!1),i()},o=e=>{};window.addEventListener("online",e),window.addEventListener("offline",n),window.addEventListener("offline-sync-start",a),window.addEventListener("offline-sync-complete",s),window.addEventListener("offline-sync-conflict",o),i();const c=setInterval(i,3e4);return()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n),window.removeEventListener("offline-sync-start",a),window.removeEventListener("offline-sync-complete",s),window.removeEventListener("offline-sync-conflict",o),clearInterval(c)}},[i]),{isOffline:e,isSyncing:n,pendingChanges:a,syncNow:Gi.useCallback(async()=>{if(navigator.onLine){r(!0),window.dispatchEvent(new Event("offline-sync-start"));try{await b_.syncOfflineData()}finally{r(!1)}}},[]),clearOfflineData:Gi.useCallback(async()=>{confirm("Are you sure you want to clear all offline data? This cannot be undone.")&&(await b_.clearOfflineData(),s(0))},[])}}();return e||0!==n||t?bo.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:bo.jsx("div",{className:`\n        flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg backdrop-blur-sm\n        ${e?"bg-orange-500/90":t?"bg-blue-500/90":"bg-green-500/90"}\n        text-white transition-all duration-300\n      `,children:e?bo.jsxs(bo.Fragment,{children:[bo.jsx(Jb,{className:"h-5 w-5"}),bo.jsxs("div",{className:"flex-1",children:[bo.jsx("p",{className:"font-medium",children:"Offline Mode"}),n>0&&bo.jsxs("p",{className:"text-sm opacity-90",children:[n," change",1!==n?"s":""," pending"]})]})]}):t?bo.jsxs(bo.Fragment,{children:[bo.jsx(Zv,{className:"h-5 w-5 animate-spin"}),bo.jsxs("div",{className:"flex-1",children:[bo.jsx("p",{className:"font-medium",children:"Syncing..."}),bo.jsx("p",{className:"text-sm opacity-90",children:"Uploading your changes"})]})]}):n>0?bo.jsxs(bo.Fragment,{children:[bo.jsx(Rv,{className:"h-5 w-5"}),bo.jsxs("div",{className:"flex-1",children:[bo.jsx("p",{className:"font-medium",children:"Changes Pending"}),bo.jsxs("p",{className:"text-sm opacity-90",children:[n," change",1!==n?"s":""," to sync"]})]}),bo.jsx("button",{onClick:r,className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded-md text-sm font-medium transition-colors",disabled:t,children:"Sync Now"})]}):bo.jsxs(bo.Fragment,{children:[bo.jsx(Sv,{className:"h-5 w-5"}),bo.jsxs("div",{className:"flex-1",children:[bo.jsx("p",{className:"font-medium",children:"All Synced"}),bo.jsx("p",{className:"text-sm opacity-90",children:"Your data is up to date"})]})]})})}):null}function aa(e,t="GBP"){return`${"GBP"===t?"\xa3":"USD"===t?"$":"\u20ac"}${Math.abs(e).toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function sa({variant:e="primary",size:t="md",isLoading:n=!1,leftIcon:r,rightIcon:a,fullWidth:s=!1,className:i="",children:o,disabled:c,...l}){const u=s?"w-full":"",d={sm:14,md:16,lg:20}[t];return bo.jsx("button",{className:`\n        \n    inline-flex items-center justify-center font-medium\n    transition-all duration-[var(--duration-fast)] ease-[var(--easing-inOut)]\n    focus:outline-none focus:ring-2 focus:ring-offset-2\n    disabled:opacity-50 disabled:cursor-not-allowed\n  \n        ${{primary:"\n      bg-[var(--color-interactive-primary)] text-white\n      hover:bg-[var(--color-interactive-primaryHover)]\n      active:bg-[var(--color-interactive-primaryActive)]\n      focus:ring-[var(--color-interactive-primary)]\n    ",secondary:"\n      bg-[var(--color-surface-secondary)] text-[var(--color-text-primary)]\n      border border-[var(--color-border-primary)]\n      hover:bg-[var(--color-surface-tertiary)]\n      focus:ring-[var(--color-border-focus)]\n    ",danger:"\n      bg-[var(--color-status-error)] text-white\n      hover:opacity-90\n      focus:ring-[var(--color-status-error)]\n    ",success:"\n      bg-[var(--color-status-success)] text-white\n      hover:opacity-90\n      focus:ring-[var(--color-status-success)]\n    ",ghost:"\n      bg-transparent text-[var(--color-text-primary)]\n      hover:bg-[var(--color-surface-secondary)]\n      focus:ring-[var(--color-border-focus)]\n    "}[e]}\n        ${{sm:"px-[var(--spacing-3)] py-[var(--spacing-1-5)] text-[var(--font-size-sm)] rounded-[var(--radius-md)]",md:"px-[var(--spacing-4)] py-[var(--spacing-2)] text-[var(--font-size-base)] rounded-[var(--radius-md)]",lg:"px-[var(--spacing-6)] py-[var(--spacing-3)] text-[var(--font-size-lg)] rounded-[var(--radius-lg)]"}[t]}\n        ${u}\n        ${i}\n      `,disabled:c||n,...l,children:n?bo.jsxs(bo.Fragment,{children:[bo.jsx(Qb,{className:"animate-spin mr-2",size:d}),bo.jsx("span",{children:"Loading..."})]}):bo.jsxs(bo.Fragment,{children:[r&&bo.jsx(r,{className:"mr-2",size:d}),o,a&&bo.jsx(a,{className:"ml-2",size:d})]})})}function ia(){const[e,t]=Gi.useState([]),[n,r]=Gi.useState(null),[a,s]=Gi.useState(!1);Gi.useEffect(()=>{i();const e=()=>{i(),s(!0)};return window.addEventListener("offline-sync-conflict",e),()=>{window.removeEventListener("offline-sync-conflict",e)}},[]);const i=async()=>{const e=await b_.getConflicts();t(e.filter(e=>!e.resolved))};return 0===e.length?null:a?bo.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:bo.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[bo.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:bo.jsxs("div",{className:"flex items-center justify-between",children:[bo.jsxs("div",{children:[bo.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Sync Conflicts"}),bo.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.length," conflict",1!==e.length?"s":""," need",1===e.length?"s":""," resolution"]})]}),bo.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:bo.jsx(xv,{className:"h-5 w-5 text-gray-500"})})]})}),bo.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-200px)]",children:n?bo.jsx(oa,{conflict:n,onResolve:async(t,n)=>{await b_.resolveConflict(t,n),await i(),r(null),1===e.length&&s(!1)},onBack:()=>r(null)}):bo.jsx("div",{className:"space-y-3",children:e.map(e=>bo.jsx("button",{onClick:()=>r(e),className:"w-full text-left p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:bo.jsxs("div",{className:"flex items-center justify-between",children:[bo.jsxs("div",{children:[bo.jsxs("p",{className:"font-medium text-gray-900 dark:text-white capitalize",children:[e.entity," Conflict"]}),bo.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()})]}),bo.jsx(Rv,{className:"h-5 w-5 text-red-500"})]})},e.id))})})]})}):bo.jsxs("button",{onClick:()=>s(!0),className:"fixed bottom-20 right-4 bg-red-500 text-white p-3 rounded-full shadow-lg hover:bg-red-600 transition-colors","aria-label":"Resolve sync conflicts",children:[bo.jsx(Rv,{className:"h-6 w-6"}),e.length>1&&bo.jsx("span",{className:"absolute -top-1 -right-1 bg-white text-red-500 text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:e.length})]})}function oa({conflict:e,onResolve:t,onBack:n}){return bo.jsx("div",{children:"transaction"===e.entity&&(()=>{const r=e.localData,a=e.serverData||{};return bo.jsxs("div",{className:"space-y-6",children:[bo.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[bo.jsxs("div",{className:"space-y-4",children:[bo.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[bo.jsx("span",{className:"text-blue-500",children:"Local Version"}),bo.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:"Your Changes"})]}),bo.jsx(ca,{transaction:r})]}),bo.jsxs("div",{className:"space-y-4",children:[bo.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[bo.jsx("span",{className:"text-green-500",children:"Server Version"}),bo.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200 px-2 py-1 rounded",children:"Latest from Server"})]}),bo.jsx(ca,{transaction:a})]})]}),bo.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[bo.jsx(sa,{variant:"ghost",onClick:n,children:"Back to List"}),bo.jsxs("div",{className:"flex gap-3",children:[bo.jsx(sa,{variant:"secondary",onClick:()=>t(e.id,"server"),leftIcon:kv,children:"Use Server Version"}),bo.jsx(sa,{variant:"primary",onClick:()=>t(e.id,"local"),leftIcon:kv,children:"Keep My Version"})]})]})]})})()})}function ca({transaction:e}){return e&&0!==Object.keys(e).length?bo.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg space-y-2",children:[bo.jsxs("div",{children:[bo.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Description:"}),bo.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.description})]}),bo.jsxs("div",{children:[bo.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amount:"}),bo.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:aa(e.amount)})]}),bo.jsxs("div",{children:[bo.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Date:"}),bo.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString()})]}),e.category&&bo.jsxs("div",{children:[bo.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Category:"}),bo.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.category})]})]}):bo.jsx("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:bo.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center italic",children:"No data available"})})}function la(){const{isInstallable:e,isInstalled:t,installApp:n}=function(){const[e,t]=Gi.useState(null),[n,r]=Gi.useState(!1),[a,s]=Gi.useState(!1);return Gi.useEffect(()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,t=!0===window.navigator.standalone;s(e||t)})();const e=e=>{e.preventDefault(),t(e),r(!0)},n=()=>{s(!0),r(!1),t(null)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",n),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",n)}},[]),{isInstallable:n,isInstalled:a,installApp:async()=>{if(!e)return!1;try{await e.prompt();const{outcome:n}=await e.userChoice;return t(null),r(!1),"accepted"===n}catch(n){return console.error("Error installing app:",n),!1}}}}(),[r,a]=Gi.useState(!1),[s,i]=Gi.useState(!1);return Gi.useEffect(()=>{localStorage.getItem("pwa-install-dismissed")&&i(!0)},[]),Gi.useEffect(()=>{if(e&&!s&&!t){const e=setTimeout(()=>{a(!0)},3e4);return()=>clearTimeout(e)}},[e,s,t]),!r||t?null:bo.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50 animate-fadeIn",children:bo.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-600 p-4",children:[bo.jsxs("div",{className:"flex items-start justify-between mb-3",children:[bo.jsxs("div",{className:"flex items-center",children:[bo.jsx("div",{className:"w-10 h-10 bg-[#8EA9DB] rounded-lg flex items-center justify-center mr-3",children:bo.jsx("span",{className:"text-white font-bold text-lg",children:"W"})}),bo.jsxs("div",{children:[bo.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Install WealthTracker"}),bo.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Get the full app experience"})]})]}),bo.jsx("button",{onClick:()=>{a(!1),i(!0),localStorage.setItem("pwa-install-dismissed","true")},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 p-1",children:bo.jsx(xv,{size:16})})]}),bo.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Install WealthTracker for quick access, offline support, and a native app experience."}),bo.jsxs("div",{className:"flex space-x-2",children:[bo.jsx("button",{onClick:async()=>{await n()&&a(!1)},className:"flex-1 bg-[#8EA9DB] hover:bg-[#7A97C9] text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Install"}),bo.jsx("button",{onClick:()=>{a(!1)},className:"flex-1 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-medium py-2 px-4 rounded-lg transition-colors",children:"Later"})]})]})})}function ua(e,t){navigator.serviceWorker.register(e).then(e=>{k_=e,setInterval(()=>{e.update()},36e5),e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))})},navigator.serviceWorker.addEventListener("message",e=>{})}).catch(e=>{console.error("Error during service worker registration:",e)})}function da(){return new Promise((e,t)=>{if(!navigator.serviceWorker.controller)return void t(new Error("No active service worker"));const n=new MessageChannel;n.port1.onmessage=t=>{e(t.data)},navigator.serviceWorker.controller.postMessage({type:"GET_SYNC_STATUS"},[n.port2])})}function ha(){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"FORCE_SYNC"})}function pa({registration:e}){const[t,n]=Gi.useState(!1),[r,a]=Gi.useState(!1);Gi.useEffect(()=>{if(!e)return;if("localhost"===window.location.hostname&&"5173"===window.location.port)return;const t=()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&n(!0)})};return e.waiting&&n(!0),e.addEventListener("updatefound",t),()=>{e.removeEventListener("updatefound",t)}},[e]);const s=()=>{n(!1),setTimeout(()=>{e?.waiting&&n(!0)},144e5)};return t?bo.jsx("div",{className:"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md z-50 animate-slide-up",children:bo.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 p-4",children:bo.jsxs("div",{className:"flex items-start gap-3",children:[bo.jsx("div",{className:"flex-shrink-0",children:bo.jsx(Zv,{size:24,className:"text-blue-600 dark:text-blue-400 "+(r?"animate-spin":"")})}),bo.jsxs("div",{className:"flex-1",children:[bo.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"Update Available"}),bo.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:"A new version of WealthTracker is available with bug fixes and improvements."}),bo.jsxs("div",{className:"flex flex-wrap gap-2",children:[bo.jsx("button",{onClick:()=>{a(!0);const e=setTimeout(()=>{window.location.reload()},3e3);navigator.serviceWorker.addEventListener("controllerchange",()=>{clearTimeout(e),window.location.reload()},{once:!0}),k_?.waiting&&(k_.waiting.postMessage({type:"SKIP_WAITING"}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}))},disabled:r,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:r?"Updating...":"Update Now"}),bo.jsx("button",{onClick:s,disabled:r,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:"Later"})]})]}),bo.jsx("button",{onClick:s,disabled:r,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors","aria-label":"Dismiss update notification",children:bo.jsx(xv,{size:20})})]})})}):null}function ga({onRefresh:e,children:t,threshold:n=80,maxPullDistance:r=120,refreshingText:a="Refreshing...",pullText:s="Pull to refresh",releaseText:i="Release to refresh",disabled:o=!1,className:c=""}){const[l,u]=Gi.useState(0),[d,h]=Gi.useState(!1),[p,g]=Gi.useState(!1),[m,f]=Gi.useState(!1),y=Gi.useRef(null),v=Gi.useRef(0),b=Gi.useRef(0),w=Gi.useRef(0),x=Gi.useCallback(()=>!(!y.current||o)&&0===y.current.scrollTop,[o]),k=Gi.useCallback(e=>{x()&&!d&&(v.current=e.touches[0].clientY,b.current=v.current,w.current=Date.now(),g(!0))},[x,d]),_=Gi.useCallback(e=>{if(!p||d)return;b.current=e.touches[0].clientY;const t=b.current-v.current;if(t>0){f(!0);const n=Math.max(.3,1-t/r*.7),a=Math.min(t*n,r);u(a),a>10&&e.preventDefault()}},[p,d,r]),S=Gi.useCallback(async()=>{if(p&&!d)if(f(!1),g(!1),l>=n){h(!0);try{await e()}catch(t){console.error("Refresh failed:",t)}finally{h(!1),u(0)}}else u(0)},[p,d,l,n,e]),j=Gi.useCallback(t=>{if(!x()||d)return;v.current=t.clientY,b.current=v.current,g(!0);const a=e=>{b.current=e.clientY;const t=b.current-v.current;if(t>0){f(!0);const e=Math.max(.3,1-t/r*.7),n=Math.min(t*e,r);u(n)}},s=async()=>{if(document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s),f(!1),g(!1),l>=n){h(!0);try{await e()}catch(t){console.error("Refresh failed:",t)}finally{h(!1),u(0)}}else u(0)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",s)},[x,d,l,n,r,e]),I=Math.min(l/n,1),C=l>0||d,E=l>=n&&!d;return Gi.useEffect(()=>()=>{u(0),h(!1),g(!1),f(!1)},[]),bo.jsxs("div",{ref:y,className:`relative overflow-y-auto overflow-x-hidden ${c}`,style:{transform:`translateY(${m?.5*l:0}px)`,transition:m?"none":"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onTouchStart:k,onTouchMove:_,onTouchEnd:S,onMouseDown:j,children:[bo.jsx("div",{className:"absolute top-0 left-0 right-0 flex flex-col items-center justify-center z-10",style:{height:Math.max(l,d?60:0),transform:`translateY(${d?0:-60+l}px)`,transition:d?"transform 0.3s ease":m?"none":"all 0.3s ease"},children:C&&bo.jsxs(bo.Fragment,{children:[bo.jsx("div",{className:"flex items-center justify-center mb-2",children:d?bo.jsx(Zv,{size:24,className:"text-blue-500 animate-spin"}):bo.jsx(Cv,{size:24,className:"text-gray-600 dark:text-gray-400 transition-transform duration-200 "+(E?"rotate-180":""),style:{transform:`rotate(${E?180:180*I}deg)`}})}),bo.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:d?a:E?i:s}),bo.jsx("div",{className:"mt-2 relative",children:bo.jsxs("svg",{width:"20",height:"20",className:"transform -rotate-90",children:[bo.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"2",fill:"none",className:"text-gray-300 dark:text-gray-600"}),bo.jsx("circle",{cx:"10",cy:"10",r:"8",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeDasharray:""+2*Math.PI*8,strokeDashoffset:""+2*Math.PI*8*(1-I),className:"transition-all duration-200 "+(E?"text-green-500":"text-blue-500")})]})})]})}),bo.jsx("div",{style:{paddingTop:d?60:0,transition:"padding-top 0.3s ease"},children:t})]})}function ma({children:e,onRefresh:t,enabled:n=!0}){ao();const r=window.innerWidth<768,a=Gi.useCallback(async()=>{await new Promise(e=>setTimeout(e,1e3)),window.location.reload()},[]),s=t||a;return r&&n?bo.jsx(ga,{onRefresh:s,children:e}):bo.jsx(bo.Fragment,{children:e})}function fa({isOpen:e,onClose:t,title:n,children:r,size:a="md",showCloseButton:s=!0,ariaDescribedBy:i}){const o=Gi.useRef(null),c=Gi.useRef(null),[l,u]=Gi.useState({top:0,maxHeight:"90vh"});return Gi.useEffect(()=>{if(e){c.current=document.activeElement;const e=()=>{const e=window.innerHeight,t=window.scrollY;u({top:t+40,maxHeight:e-80+"px"})};e();const n=()=>e();window.addEventListener("scroll",n),window.addEventListener("resize",n),setTimeout(()=>{o.current?.focus()},50);const r=e=>{if("Tab"!==e.key)return;const t=o.current?.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="number"], input[type="radio"], input[type="checkbox"], select, [tabindex]:not([tabindex="-1"])');if(!t||0===t.length)return;const n=t[0],r=t[t.length-1];e.shiftKey&&document.activeElement===n?(r.focus(),e.preventDefault()):e.shiftKey||document.activeElement!==r||(n.focus(),e.preventDefault())},a=e=>{"Escape"===e.key&&t()};document.addEventListener("keydown",r),document.addEventListener("keydown",a);const s=document.body.style.overflow,i=document.body.style.position,l=document.body.style.top,d=document.body.style.width,h=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${h}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",r),document.removeEventListener("keydown",a),window.removeEventListener("scroll",n),window.removeEventListener("resize",n),document.body.style.position=i,document.body.style.top=l,document.body.style.width=d,document.body.style.overflow=s,window.scrollTo(0,h),c.current?.focus()}}},[e,t]),e?bo.jsxs(bo.Fragment,{children:[bo.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 animate-in fade-in duration-200",onClick:t,"aria-hidden":"true"}),bo.jsx("div",{className:"fixed inset-x-0 z-50 flex justify-center px-4",style:{top:`${l.top}px`},children:bo.jsxs("div",{ref:o,className:`\n            bg-white dark:bg-gray-900 \n            rounded-2xl \n            shadow-2xl \n            w-full \n            ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[a]} \n            overflow-hidden \n            flex \n            flex-col\n            animate-in zoom-in-95 slide-in-from-bottom-4 duration-200\n            border border-gray-200/50 dark:border-gray-700/50\n          `,style:{maxHeight:l.maxHeight},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":i,tabIndex:-1,children:[bo.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-r from-gray-50 to-white dark:from-gray-900 dark:to-gray-800 flex-shrink-0",children:[bo.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900 dark:text-white",children:n}),s&&bo.jsx("button",{onClick:t,className:"\n                  p-2 \n                  rounded-lg \n                  text-gray-400 \n                  hover:text-gray-600 \n                  dark:text-gray-500 \n                  dark:hover:text-gray-300 \n                  hover:bg-gray-100 \n                  dark:hover:bg-gray-800 \n                  transition-all \n                  duration-200\n                  focus:outline-none \n                  focus:ring-2 \n                  focus:ring-primary/50\n                ","aria-label":"Close modal",children:bo.jsx(kd,{size:20})})]}),bo.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:r})]})})]}):null}function ya({children:e,className:t=""}){return bo.jsx("div",{className:`px-6 py-5 ${t}`,children:e})}function va({children:e,className:t=""}){return bo.jsx("div",{className:`px-6 py-5 border-t border-gray-200 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50 flex-shrink-0 ${t}`,children:e})}function ba(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&D_ in e?e[D_](t):e instanceof Date?new e.constructor(t):new Date(t)}function wa(e,t){return ba(t||e,e)}function xa(){return P_}function ka(e,t){const n=xa(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=wa(e,t?.in),s=a.getDay(),i=(s<r?7:0)+s-r;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function _a(e,t){return ka(e,{...t,weekStartsOn:1})}function Sa(e,t){const n=wa(e,t?.in),r=n.getFullYear(),a=ba(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const s=_a(a),i=ba(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=_a(i);return n.getTime()>=s.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function ja(e){const t=wa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ia(e,...t){const n=ba.bind(null,e||t.find(e=>"object"==typeof e));return t.map(n)}function Ca(e,t){const n=wa(e,t?.in);return n.setHours(0,0,0,0),n}function Ea(e,t,n){const[r,a]=Ia(n?.in,e,t),s=Ca(r),i=Ca(a),o=+s-ja(s),c=+i-ja(i);return Math.round((o-c)/864e5)}function Ta(e,t){const n=+wa(e)-+wa(t);return n<0?-1:n>0?1:n}function Na(e,t){const n=wa(e,t?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Aa(e,t,n){const[r,a,s]=Ia(n?.in,e,e,t),i=Ta(a,s),o=Math.abs(function(e,t){const[n,r]=Ia(undefined,e,t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(a,s));if(o<1)return 0;1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*o);let c=Ta(a,s)===-i;(function(e,t){const n=wa(e,t?.in);return+function(e,t){const n=wa(e,t?.in);return n.setHours(23,59,59,999),n}(n,t)===+Na(n,t)})(r)&&1===o&&1===Ta(r,s)&&(c=!1);const l=i*(o-+c);return 0===l?0:l}function Oa(e,t){const n=wa(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Da(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}function Pa(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=n?.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=n?.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Ma(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const i=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}(o,e=>e.test(i));let l;return l=e.valueCallback?e.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l,{value:l,rest:t.slice(i.length)}}}function La(e,t){const n=wa(e,t?.in),r=n.getFullYear(),a=xa(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=ba(t?.in||e,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const o=ka(i,t),c=ba(t?.in||e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const l=ka(c,t);return+n>=+o?r+1:+n>=+l?r:r-1}function Ra(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}function Ua(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return 0===s?n+String(a):n+String(a)+t+Ra(s,2)}function za(e,t){return e%60==0?(e>0?"-":"+")+Ra(Math.abs(e)/60,2):$a(e,t)}function $a(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+Ra(Math.trunc(r/60),2)+t+Ra(r%60,2)}function Ba(e,t,n){const r=xa(),a=r.locale??B_,s=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=wa(e,n?.in);if(!function(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+wa(e)));var t}(o))throw new RangeError("Invalid time value");let c=t.match(J_).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,V_[t])(e,a.formatLong):e}).join("").match(Z_).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Fa(e)};if(W_[t])return{isToken:!0,value:e};if(t.match(eS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const l={firstWeekContainsDate:s,weekStartsOn:i,locale:a};return c.map(n=>{if(!n.isToken)return n.value;const r=n.value;return(function(e){return Y_.test(e)}(r)||function(e){return H_.test(e)}(r))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(K_.includes(e))throw new RangeError(r)}(r,t,String(e)),(0,W_[r[0]])(o,r,a.localize,l)}).join("")}function Fa(e){const t=e.match(Q_);return t?t[1].replace(X_,"'"):e}function Wa(e,t){return function(e,t,n){const r=xa(),a=n?.locale??r.locale??B_,s=Ta(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const i=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:s}),[o,c]=Ia(n?.in,...s>0?[t,e]:[e,t]),l=function(e,t,n){const r=function(e,t){return+wa(e)-+wa(t)}(e,t)/1e3;return(a=n?.roundingMethod,e=>{const t=(a?Math[a]:Math.trunc)(e);return 0===t?0:t})(r);var a}(c,o),u=(ja(c)-ja(o))/1e3,d=Math.round((l-u)/60);let h;if(d<2)return n?.includeSeconds?l<5?a.formatDistance("lessThanXSeconds",5,i):l<10?a.formatDistance("lessThanXSeconds",10,i):l<20?a.formatDistance("lessThanXSeconds",20,i):l<40?a.formatDistance("halfAMinute",0,i):l<60?a.formatDistance("lessThanXMinutes",1,i):a.formatDistance("xMinutes",1,i):0===d?a.formatDistance("lessThanXMinutes",1,i):a.formatDistance("xMinutes",d,i);if(d<45)return a.formatDistance("xMinutes",d,i);if(d<90)return a.formatDistance("aboutXHours",1,i);if(d<1440){const e=Math.round(d/60);return a.formatDistance("aboutXHours",e,i)}if(d<2520)return a.formatDistance("xDays",1,i);if(d<O_){const e=Math.round(d/1440);return a.formatDistance("xDays",e,i)}if(d<86400)return h=Math.round(d/O_),a.formatDistance("aboutXMonths",h,i);if(h=Aa(c,o),h<12){const e=Math.round(d/O_);return a.formatDistance("xMonths",e,i)}{const e=h%12,t=Math.trunc(h/12);return e<3?a.formatDistance("aboutXYears",t,i):e<9?a.formatDistance("overXYears",t,i):a.formatDistance("almostXYears",t+1,i)}}(e,function(e){return ba(e,Date.now())}(e),t)}function qa(){return tS||(tS=1,e=nS,t=nS.exports,function(){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t,n,r){for(var a=-1,s=null==e?0:e.length;++a<s;){var i=e[a];t(r,i,n(i),e)}return r}function a(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function s(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function i(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function o(e,t){for(var n=-1,r=null==e?0:e.length,a=0,s=[];++n<r;){var i=e[n];t(i,n,e)&&(s[a++]=i)}return s}function c(e,t){return!(null==e||!e.length)&&y(e,t,0)>-1}function l(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}function u(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}function d(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}function h(e,t,n,r){var a=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++a]);++a<s;)n=t(n,e[a],a,e);return n}function p(e,t,n,r){var a=null==e?0:e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n}function g(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function m(e,t,n){var r;return n(e,function(e,n,a){if(t(e,n,a))return r=n,!1}),r}function f(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}function y(e,t,n){return t==t?function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}(e,t,n):f(e,b,n)}function v(e,t,n,r){for(var a=n-1,s=e.length;++a<s;)if(r(e[a],t))return a;return-1}function b(e){return e!=e}function w(e,t){var n=null==e?0:e.length;return n?S(e,t)/n:K}function x(e){return function(t){return null==t?B:t[e]}}function k(e){return function(t){return null==e?B:e[t]}}function _(e,t,n,r,a){return a(e,function(e,a,s){n=r?(r=!1,e):t(n,e,a,s)}),n}function S(e,t){for(var n,r=-1,a=e.length;++r<a;){var s=t(e[r]);s!==B&&(n=n===B?s:n+s)}return n}function j(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function I(e){return e?e.slice(0,$(e)+1).replace($e,""):e}function C(e){return function(t){return e(t)}}function E(e,t){return u(t,function(t){return e[t]})}function T(e,t){return e.has(t)}function N(e,t){for(var n=-1,r=e.length;++n<r&&y(t,e[n],0)>-1;);return n}function A(e,t){for(var n=e.length;n--&&y(t,e[n],0)>-1;);return n}function O(e){return"\\"+Wt[e]}function D(e){return Rt.test(e)}function P(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function M(e,t){return function(n){return e(t(n))}}function L(e,t){for(var n=-1,r=e.length,a=0,s=[];++n<r;){var i=e[n];i!==t&&i!==q||(e[n]=q,s[a++]=n)}return s}function R(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function U(e){return D(e)?function(e){for(var t=Mt.lastIndex=0;Mt.test(e);)++t;return t}(e):on(e)}function z(e){return D(e)?function(e){return e.match(Mt)||[]}(e):function(e){return e.split("")}(e)}function $(e){for(var t=e.length;t--&&Be.test(e.charAt(t)););return t}var B,F="Expected a function",W="__lodash_hash_undefined__",q="__lodash_placeholder__",G=32,V=128,H=1/0,Y=9007199254740991,K=NaN,Z=4294967295,J=[["ary",V],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",G],["partialRight",64],["rearg",256]],Q="[object Arguments]",X="[object Array]",ee="[object Boolean]",te="[object Date]",ne="[object Error]",re="[object Function]",ae="[object GeneratorFunction]",se="[object Map]",ie="[object Number]",oe="[object Object]",ce="[object Promise]",le="[object RegExp]",ue="[object Set]",de="[object String]",he="[object Symbol]",pe="[object WeakMap]",ge="[object ArrayBuffer]",me="[object DataView]",fe="[object Float32Array]",ye="[object Float64Array]",ve="[object Int8Array]",be="[object Int16Array]",we="[object Int32Array]",xe="[object Uint8Array]",ke="[object Uint8ClampedArray]",_e="[object Uint16Array]",Se="[object Uint32Array]",je=/\b__p \+= '';/g,Ie=/\b(__p \+=) '' \+/g,Ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ee=/&(?:amp|lt|gt|quot|#39);/g,Te=/[&<>"']/g,Ne=RegExp(Ee.source),Ae=RegExp(Te.source),Oe=/<%-([\s\S]+?)%>/g,De=/<%([\s\S]+?)%>/g,Pe=/<%=([\s\S]+?)%>/g,Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/[\\^$.*+?()[\]{}|]/g,ze=RegExp(Ue.source),$e=/^\s+/,Be=/\s/,Fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,We=/\{\n\/\* \[wrapped with (.+)\] \*/,qe=/,? & /,Ge=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ve=/[()=,{}\[\]\/\s]/,He=/\\(\\)?/g,Ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ke=/\w*$/,Ze=/^[-+]0x[0-9a-f]+$/i,Je=/^0b[01]+$/i,Qe=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,et=/^(?:0|[1-9]\d*)$/,tt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nt=/($^)/,rt=/['\n\r\u2028\u2029\\]/g,at="\\ud800-\\udfff",st="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",it="\\u2700-\\u27bf",ot="a-z\\xdf-\\xf6\\xf8-\\xff",ct="A-Z\\xc0-\\xd6\\xd8-\\xde",lt="\\ufe0e\\ufe0f",ut="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dt="["+at+"]",ht="["+ut+"]",pt="["+st+"]",gt="\\d+",mt="["+it+"]",ft="["+ot+"]",yt="[^"+at+ut+gt+it+ot+ct+"]",vt="\\ud83c[\\udffb-\\udfff]",bt="[^"+at+"]",wt="(?:\\ud83c[\\udde6-\\uddff]){2}",xt="[\\ud800-\\udbff][\\udc00-\\udfff]",kt="["+ct+"]",_t="\\u200d",St="(?:"+ft+"|"+yt+")",jt="(?:"+kt+"|"+yt+")",It="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ct="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Et="(?:"+pt+"|"+vt+")?",Tt="["+lt+"]?",Nt=Tt+Et+"(?:"+_t+"(?:"+[bt,wt,xt].join("|")+")"+Tt+Et+")*",At="(?:"+[mt,wt,xt].join("|")+")"+Nt,Ot="(?:"+[bt+pt+"?",pt,wt,xt,dt].join("|")+")",Dt=RegExp("['\u2019]","g"),Pt=RegExp(pt,"g"),Mt=RegExp(vt+"(?="+vt+")|"+Ot+Nt,"g"),Lt=RegExp([kt+"?"+ft+"+"+It+"(?="+[ht,kt,"$"].join("|")+")",jt+"+"+Ct+"(?="+[ht,kt+St,"$"].join("|")+")",kt+"?"+St+"+"+It,kt+"+"+Ct,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gt,At].join("|"),"g"),Rt=RegExp("["+_t+at+st+lt+"]"),Ut=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$t=-1,Bt={};Bt[fe]=Bt[ye]=Bt[ve]=Bt[be]=Bt[we]=Bt[xe]=Bt[ke]=Bt[_e]=Bt[Se]=!0,Bt[Q]=Bt[X]=Bt[ge]=Bt[ee]=Bt[me]=Bt[te]=Bt[ne]=Bt[re]=Bt[se]=Bt[ie]=Bt[oe]=Bt[le]=Bt[ue]=Bt[de]=Bt[pe]=!1;var Ft={};Ft[Q]=Ft[X]=Ft[ge]=Ft[me]=Ft[ee]=Ft[te]=Ft[fe]=Ft[ye]=Ft[ve]=Ft[be]=Ft[we]=Ft[se]=Ft[ie]=Ft[oe]=Ft[le]=Ft[ue]=Ft[de]=Ft[he]=Ft[xe]=Ft[ke]=Ft[_e]=Ft[Se]=!0,Ft[ne]=Ft[re]=Ft[pe]=!1;var Wt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qt=parseFloat,Gt=parseInt,Vt="object"==typeof Zi&&Zi&&Zi.Object===Object&&Zi,Ht="object"==typeof self&&self&&self.Object===Object&&self,Yt=Vt||Ht||Function("return this")(),Kt=t&&!t.nodeType&&t,Zt=Kt&&e&&!e.nodeType&&e,Jt=Zt&&Zt.exports===Kt,Qt=Jt&&Vt.process,Xt=function(){try{return Zt&&Zt.require&&Zt.require("util").types||Qt&&Qt.binding&&Qt.binding("util")}catch(e){}}(),en=Xt&&Xt.isArrayBuffer,tn=Xt&&Xt.isDate,nn=Xt&&Xt.isMap,rn=Xt&&Xt.isRegExp,an=Xt&&Xt.isSet,sn=Xt&&Xt.isTypedArray,on=x("length"),cn=k({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),ln=k({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),un=k({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),dn=function e(t){function k(e){if(Aa(e)&&!xo(e)&&!(e instanceof st)){if(e instanceof at)return e;if(ws.call(e,"__wrapped__"))return ra(e)}return new at(e)}function Be(){}function at(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=B}function st(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Z,this.__views__=[]}function it(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ot(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ct(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function lt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ct;++t<n;)this.add(e[t])}function ut(e){var t=this.__data__=new ot(e);this.size=t.size}function dt(e,t){var n=xo(e),r=!n&&wo(e),a=!n&&!r&&_o(e),s=!n&&!r&&!a&&Eo(e),i=n||r||a||s,o=i?j(e.length,ps):[],c=o.length;for(var l in e)!t&&!ws.call(e,l)||i&&("length"==l||a&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Fr(l,c))||o.push(l);return o}function ht(e){var t=e.length;return t?e[Cn(0,t-1)]:B}function pt(e,t){return ea(ar(e),kt(t,0,e.length))}function gt(e){return ea(ar(e))}function mt(e,t,n){(n!==B&&!_a(e[t],n)||n===B&&!(t in e))&&wt(e,t,n)}function ft(e,t,n){var r=e[t];ws.call(e,t)&&_a(r,n)&&(n!==B||t in e)||wt(e,t,n)}function yt(e,t){for(var n=e.length;n--;)if(_a(e[n][0],t))return n;return-1}function vt(e,t,n,r){return vi(e,function(e,a,s){t(r,e,n(e),s)}),r}function bt(e,t){return e&&sr(t,Ga(t),e)}function wt(e,t,n){"__proto__"==t&&Us?Us(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function xt(e,t){for(var n=-1,r=t.length,a=is(r),s=null==e;++n<r;)a[n]=s?B:Wa(e,t[n]);return a}function kt(e,t,n){return e==e&&(n!==B&&(e=e<=n?e:n),t!==B&&(e=e>=t?e:t)),e}function _t(e,t,n,r,s,i){var o,c=1&t,l=2&t,u=4&t;if(n&&(o=s?n(e,r,s,i):n(e)),o!==B)return o;if(!Na(e))return e;var d=xo(e);if(d){if(o=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ws.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return ar(e,o)}else{var h=Ni(e),p=h==re||h==ae;if(_o(e))return Qn(e,c);if(h==oe||h==Q||p&&!s){if(o=l||p?{}:$r(e),!c)return l?function(e,t){return sr(e,Ti(e),t)}(e,function(e,t){return e&&sr(t,Va(t),e)}(o,e)):function(e,t){return sr(e,Ei(e),t)}(e,bt(o,e))}else{if(!Ft[h])return s?e:{};o=function(e,t,n){var r,a=e.constructor;switch(t){case ge:return Xn(e);case ee:case te:return new a(+e);case me:return function(e,t){var n=t?Xn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case fe:case ye:case ve:case be:case we:case xe:case ke:case _e:case Se:return er(e,n);case se:return new a;case ie:case de:return new a(e);case le:return function(e){var t=new e.constructor(e.source,Ke.exec(e));return t.lastIndex=e.lastIndex,t}(e);case ue:return new a;case he:return r=e,mi?ds(mi.call(r)):{}}}(e,h,c)}}i||(i=new ut);var g=i.get(e);if(g)return g;i.set(e,o),Co(e)?e.forEach(function(r){o.add(_t(r,t,n,r,e,i))}):jo(e)&&e.forEach(function(r,a){o.set(a,_t(r,t,n,a,e,i))});var m=d?B:(u?l?Or:Ar:l?Va:Ga)(e);return a(m||e,function(r,a){m&&(r=e[a=r]),ft(o,a,_t(r,t,n,a,e,i))}),o}function St(e,t,n){var r=n.length;if(null==e)return!r;for(e=ds(e);r--;){var a=n[r],s=t[a],i=e[a];if(i===B&&!(a in e)||!s(i))return!1}return!0}function jt(e,t,n){if("function"!=typeof e)throw new gs(F);return Di(function(){e.apply(B,n)},t)}function It(e,t,n,r){var a=-1,s=c,i=!0,o=e.length,d=[],h=t.length;if(!o)return d;n&&(t=u(t,C(n))),r?(s=l,i=!1):t.length>=200&&(s=T,i=!1,t=new lt(t));e:for(;++a<o;){var p=e[a],g=null==n?p:n(p);if(p=r||0!==p?p:0,i&&g==g){for(var m=h;m--;)if(t[m]===g)continue e;d.push(p)}else s(t,g,r)||d.push(p)}return d}function Ct(e,t){var n=!0;return vi(e,function(e,r,a){return n=!!t(e,r,a)}),n}function Et(e,t,n){for(var r=-1,a=e.length;++r<a;){var s=e[r],i=t(s);if(null!=i&&(o===B?i==i&&!Ma(i):n(i,o)))var o=i,c=s}return c}function Tt(e,t){var n=[];return vi(e,function(e,r,a){t(e,r,a)&&n.push(e)}),n}function Nt(e,t,n,r,a){var s=-1,i=e.length;for(n||(n=Br),a||(a=[]);++s<i;){var o=e[s];t>0&&n(o)?t>1?Nt(o,t-1,n,r,a):d(a,o):r||(a[a.length]=o)}return a}function At(e,t){return e&&wi(e,t,Ga)}function Ot(e,t){return e&&xi(e,t,Ga)}function Mt(e,t){return o(t,function(t){return Ca(e[t])})}function Rt(e,t){for(var n=0,r=(t=Zn(t,e)).length;null!=e&&n<r;)e=e[ta(t[n++])];return n&&n==r?e:B}function Wt(e,t,n){var r=t(e);return xo(e)?r:d(r,n(e))}function Vt(e){return null==e?e===B?"[object Undefined]":"[object Null]":Rs&&Rs in ds(e)?function(e){var t=ws.call(e,Rs),n=e[Rs];try{e[Rs]=B;var r=!0}catch(s){}var a=_s.call(e);return r&&(t?e[Rs]=n:delete e[Rs]),a}(e):function(e){return _s.call(e)}(e)}function Ht(e,t){return e>t}function Kt(e,t){return null!=e&&ws.call(e,t)}function Zt(e,t){return null!=e&&t in ds(e)}function Qt(e,t,n){for(var r=n?l:c,a=e[0].length,s=e.length,i=s,o=is(s),d=1/0,h=[];i--;){var p=e[i];i&&t&&(p=u(p,C(t))),d=Zs(p.length,d),o[i]=!n&&(t||a>=120&&p.length>=120)?new lt(i&&p):B}p=e[0];var g=-1,m=o[0];e:for(;++g<a&&h.length<d;){var f=p[g],y=t?t(f):f;if(f=n||0!==f?f:0,!(m?T(m,y):r(h,y,n))){for(i=s;--i;){var v=o[i];if(!(v?T(v,y):r(e[i],y,n)))continue e}m&&m.push(y),h.push(f)}}return h}function Xt(e,t,r){var a=null==(e=Zr(e,t=Zn(t,e)))?e:e[ta(ca(t))];return null==a?B:n(a,e,r)}function on(e){return Aa(e)&&Vt(e)==Q}function hn(e,t,n,r,a){return e===t||(null==e||null==t||!Aa(e)&&!Aa(t)?e!=e&&t!=t:function(e,t,n,r,a,s){var i=xo(e),o=xo(t),c=i?X:Ni(e),l=o?X:Ni(t),u=(c=c==Q?oe:c)==oe,d=(l=l==Q?oe:l)==oe,h=c==l;if(h&&_o(e)){if(!_o(t))return!1;i=!0,u=!1}if(h&&!u)return s||(s=new ut),i||Eo(e)?Tr(e,t,n,r,a,s):function(e,t,n,r,a,s,i){switch(n){case me:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ge:return!(e.byteLength!=t.byteLength||!s(new Ts(e),new Ts(t)));case ee:case te:case ie:return _a(+e,+t);case ne:return e.name==t.name&&e.message==t.message;case le:case de:return e==t+"";case se:var o=P;case ue:var c=1&r;if(o||(o=R),e.size!=t.size&&!c)return!1;var l=i.get(e);if(l)return l==t;r|=2,i.set(e,t);var u=Tr(o(e),o(t),r,a,s,i);return i.delete(e),u;case he:if(mi)return mi.call(e)==mi.call(t)}return!1}(e,t,c,n,r,a,s);if(!(1&n)){var p=u&&ws.call(e,"__wrapped__"),g=d&&ws.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,f=g?t.value():t;return s||(s=new ut),a(m,f,n,r,s)}}return!!h&&(s||(s=new ut),function(e,t,n,r,a,s){var i=1&n,o=Ar(e),c=o.length;if(c!=Ar(t).length&&!i)return!1;for(var l=c;l--;){var u=o[l];if(!(i?u in t:ws.call(t,u)))return!1}var d=s.get(e),h=s.get(t);if(d&&h)return d==t&&h==e;var p=!0;s.set(e,t),s.set(t,e);for(var g=i;++l<c;){var m=e[u=o[l]],f=t[u];if(r)var y=i?r(f,m,u,t,e,s):r(m,f,u,e,t,s);if(!(y===B?m===f||a(m,f,n,r,s):y)){p=!1;break}g||(g="constructor"==u)}if(p&&!g){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,r,a,s))}(e,t,n,r,hn,a))}function pn(e,t,n,r){var a=n.length,s=a,i=!r;if(null==e)return!s;for(e=ds(e);a--;){var o=n[a];if(i&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<s;){var c=(o=n[a])[0],l=e[c],u=o[1];if(i&&o[2]){if(l===B&&!(c in e))return!1}else{var d=new ut;if(r)var h=r(l,u,c,e,t,d);if(!(h===B?hn(u,l,3,r,d):h))return!1}}return!0}function gn(e){return!(!Na(e)||(t=e,ks&&ks in t))&&(Ca(e)?Is:Qe).test(na(e));var t}function mn(e){return"function"==typeof e?e:null==e?Xa:"object"==typeof e?xo(e)?wn(e[0],e[1]):bn(e):rs(e)}function fn(e){if(!Vr(e))return Ys(e);var t=[];for(var n in ds(e))ws.call(e,n)&&"constructor"!=n&&t.push(n);return t}function yn(e,t){return e<t}function vn(e,t){var n=-1,r=Sa(e)?is(e.length):[];return vi(e,function(e,a,s){r[++n]=t(e,a,s)}),r}function bn(e){var t=Rr(e);return 1==t.length&&t[0][2]?Yr(t[0][0],t[0][1]):function(n){return n===e||pn(n,e,t)}}function wn(e,t){return qr(e)&&Hr(t)?Yr(ta(e),t):function(n){var r=Wa(n,e);return r===B&&r===t?qa(n,e):hn(t,r,3)}}function xn(e,t,n,r,a){e!==t&&wi(t,function(s,i){if(a||(a=new ut),Na(s))!function(e,t,n,r,a,s,i){var o=Jr(e,n),c=Jr(t,n),l=i.get(c);if(l)mt(e,n,l);else{var u=s?s(o,c,n+"",e,t,i):B,d=u===B;if(d){var h=xo(c),p=!h&&_o(c),g=!h&&!p&&Eo(c);u=c,h||p||g?xo(o)?u=o:ja(o)?u=ar(o):p?(d=!1,u=Qn(c,!0)):g?(d=!1,u=er(c,!0)):u=[]:Da(c)||wo(c)?(u=o,wo(o)?u=Ba(o):Na(o)&&!Ca(o)||(u=$r(c))):d=!1}d&&(i.set(c,u),a(u,c,r,s,i),i.delete(c)),mt(e,n,u)}}(e,t,i,n,xn,r,a);else{var o=r?r(Jr(e,i),s,i+"",e,t,a):B;o===B&&(o=s),mt(e,i,o)}},Va)}function kn(e,t){var n=e.length;if(n)return Fr(t+=t<0?n:0,n)?e[t]:B}function _n(e,t,n){t=t.length?u(t,function(e){return xo(e)?function(t){return Rt(t,1===e.length?e[0]:e)}:e}):[Xa];var r=-1;return t=u(t,C(Mr())),function(e){var t=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var r=-1,a=e.criteria,s=t.criteria,i=a.length,o=n.length;++r<i;){var c=tr(a[r],s[r]);if(c)return r>=o?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)});t--;)e[t]=e[t].value;return e}(vn(e,function(e,n,a){return{criteria:u(t,function(t){return t(e)}),index:++r,value:e}}))}function Sn(e,t,n){for(var r=-1,a=t.length,s={};++r<a;){var i=t[r],o=Rt(e,i);n(o,i)&&On(s,Zn(i,e),o)}return s}function jn(e,t,n,r){var a=r?v:y,s=-1,i=t.length,o=e;for(e===t&&(t=ar(t)),n&&(o=u(e,C(n)));++s<i;)for(var c=0,l=t[s],d=n?n(l):l;(c=a(o,d,c,r))>-1;)o!==e&&Ps.call(o,c,1),Ps.call(e,c,1);return e}function In(e,t){for(var n=e?t.length:0,r=n-1;n--;){var a=t[n];if(n==r||a!==s){var s=a;Fr(a)?Ps.call(e,a,1):Fn(e,a)}}return e}function Cn(e,t){return e+Ws(Xs()*(t-e+1))}function En(e,t){var n="";if(!e||t<1||t>Y)return n;do{t%2&&(n+=e),(t=Ws(t/2))&&(e+=e)}while(t);return n}function Tn(e,t){return Pi(Kr(e,t,Xa),e+"")}function Nn(e){return ht(Ya(e))}function An(e,t){var n=Ya(e);return ea(n,kt(t,0,n.length))}function On(e,t,n,r){if(!Na(e))return e;for(var a=-1,s=(t=Zn(t,e)).length,i=s-1,o=e;null!=o&&++a<s;){var c=ta(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=i){var u=o[c];(l=r?r(u,c,o):B)===B&&(l=Na(u)?u:Fr(t[a+1])?[]:{})}ft(o,c,l),o=o[c]}return e}function Dn(e){return ea(Ya(e))}function Pn(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=is(a);++r<a;)s[r]=e[r+t];return s}function Mn(e,t){var n;return vi(e,function(e,r,a){return!(n=t(e,r,a))}),!!n}function Ln(e,t,n){var r=0,a=null==e?r:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;r<a;){var s=r+a>>>1,i=e[s];null!==i&&!Ma(i)&&(n?i<=t:i<t)?r=s+1:a=s}return a}return Rn(e,t,Xa,n)}function Rn(e,t,n,r){var a=0,s=null==e?0:e.length;if(0===s)return 0;for(var i=(t=n(t))!=t,o=null===t,c=Ma(t),l=t===B;a<s;){var u=Ws((a+s)/2),d=n(e[u]),h=d!==B,p=null===d,g=d==d,m=Ma(d);if(i)var f=r||g;else f=l?g&&(r||h):o?g&&h&&(r||!p):c?g&&h&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);f?a=u+1:s=u}return Zs(s,4294967294)}function Un(e,t){for(var n=-1,r=e.length,a=0,s=[];++n<r;){var i=e[n],o=t?t(i):i;if(!n||!_a(o,c)){var c=o;s[a++]=0===i?0:i}}return s}function zn(e){return"number"==typeof e?e:Ma(e)?K:+e}function $n(e){if("string"==typeof e)return e;if(xo(e))return u(e,$n)+"";if(Ma(e))return fi?fi.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bn(e,t,n){var r=-1,a=c,s=e.length,i=!0,o=[],u=o;if(n)i=!1,a=l;else if(s>=200){var d=t?null:Ii(e);if(d)return R(d);i=!1,a=T,u=new lt}else u=t?[]:o;e:for(;++r<s;){var h=e[r],p=t?t(h):h;if(h=n||0!==h?h:0,i&&p==p){for(var g=u.length;g--;)if(u[g]===p)continue e;t&&u.push(p),o.push(h)}else a(u,p,n)||(u!==o&&u.push(p),o.push(h))}return o}function Fn(e,t){return null==(e=Zr(e,t=Zn(t,e)))||delete e[ta(ca(t))]}function Wn(e,t,n,r){return On(e,t,n(Rt(e,t)),r)}function qn(e,t,n,r){for(var a=e.length,s=r?a:-1;(r?s--:++s<a)&&t(e[s],s,e););return n?Pn(e,r?0:s,r?s+1:a):Pn(e,r?s+1:0,r?a:s)}function Gn(e,t){var n=e;return n instanceof st&&(n=n.value()),h(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},n)}function Vn(e,t,n){var r=e.length;if(r<2)return r?Bn(e[0]):[];for(var a=-1,s=is(r);++a<r;)for(var i=e[a],o=-1;++o<r;)o!=a&&(s[a]=It(s[a]||i,e[o],t,n));return Bn(Nt(s,1),t,n)}function Hn(e,t,n){for(var r=-1,a=e.length,s=t.length,i={};++r<a;){var o=r<s?t[r]:B;n(i,e[r],o)}return i}function Yn(e){return ja(e)?e:[]}function Kn(e){return"function"==typeof e?e:Xa}function Zn(e,t){return xo(e)?e:qr(e,t)?[e]:Mi(Fa(e))}function Jn(e,t,n){var r=e.length;return n=n===B?r:n,!t&&n>=r?e:Pn(e,t,n)}function Qn(e,t){if(t)return e.slice();var n=e.length,r=Ns?Ns(n):new e.constructor(n);return e.copy(r),r}function Xn(e){var t=new e.constructor(e.byteLength);return new Ts(t).set(new Ts(e)),t}function er(e,t){var n=t?Xn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function tr(e,t){if(e!==t){var n=e!==B,r=null===e,a=e==e,s=Ma(e),i=t!==B,o=null===t,c=t==t,l=Ma(t);if(!o&&!l&&!s&&e>t||s&&i&&c&&!o&&!l||r&&i&&c||!n&&c||!a)return 1;if(!r&&!s&&!l&&e<t||l&&n&&a&&!r&&!s||o&&n&&a||!i&&a||!c)return-1}return 0}function nr(e,t,n,r){for(var a=-1,s=e.length,i=n.length,o=-1,c=t.length,l=Ks(s-i,0),u=is(c+l),d=!r;++o<c;)u[o]=t[o];for(;++a<i;)(d||a<s)&&(u[n[a]]=e[a]);for(;l--;)u[o++]=e[a++];return u}function rr(e,t,n,r){for(var a=-1,s=e.length,i=-1,o=n.length,c=-1,l=t.length,u=Ks(s-o,0),d=is(u+l),h=!r;++a<u;)d[a]=e[a];for(var p=a;++c<l;)d[p+c]=t[c];for(;++i<o;)(h||a<s)&&(d[p+n[i]]=e[a++]);return d}function ar(e,t){var n=-1,r=e.length;for(t||(t=is(r));++n<r;)t[n]=e[n];return t}function sr(e,t,n,r){var a=!n;n||(n={});for(var s=-1,i=t.length;++s<i;){var o=t[s],c=r?r(n[o],e[o],o,n,e):B;c===B&&(c=e[o]),a?wt(n,o,c):ft(n,o,c)}return n}function ir(e,t){return function(n,a){var s=xo(n)?r:vt,i=t?t():{};return s(n,e,Mr(a,2),i)}}function or(e){return Tn(function(t,n){var r=-1,a=n.length,s=a>1?n[a-1]:B,i=a>2?n[2]:B;for(s=e.length>3&&"function"==typeof s?(a--,s):B,i&&Wr(n[0],n[1],i)&&(s=a<3?B:s,a=1),t=ds(t);++r<a;){var o=n[r];o&&e(t,o,r,s)}return t})}function cr(e,t){return function(n,r){if(null==n)return n;if(!Sa(n))return e(n,r);for(var a=n.length,s=t?a:-1,i=ds(n);(t?s--:++s<a)&&!1!==r(i[s],s,i););return n}}function lr(e){return function(t,n,r){for(var a=-1,s=ds(t),i=r(t),o=i.length;o--;){var c=i[e?o:++a];if(!1===n(s[c],c,s))break}return t}}function ur(e){return function(t){var n=D(t=Fa(t))?z(t):B,r=n?n[0]:t.charAt(0),a=n?Jn(n,1).join(""):t.slice(1);return r[e]()+a}}function dr(e){return function(t){return h(Ja(Za(t).replace(Dt,"")),e,"")}}function hr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=yi(e.prototype),r=e.apply(n,t);return Na(r)?r:n}}function pr(e){return function(t,n,r){var a=ds(t);if(!Sa(t)){var s=Mr(n,3);t=Ga(t),n=function(e){return s(a[e],e,a)}}var i=e(t,n,r);return i>-1?a[s?t[i]:i]:B}}function gr(e){return Nr(function(t){var n=t.length,r=n,a=at.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new gs(F);if(a&&!i&&"wrapper"==Dr(s))var i=new at([],!0)}for(r=i?r:n;++r<n;){var o=Dr(s=t[r]),c="wrapper"==o?Ci(s):B;i=c&&Gr(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?i[Dr(c[0])].apply(i,c[3]):1==s.length&&Gr(s)?i[o]():i.thru(s)}return function(){var e=arguments,r=e[0];if(i&&1==e.length&&xo(r))return i.plant(r).value();for(var a=0,s=n?t[a].apply(this,e):r;++a<n;)s=t[a].call(this,s);return s}})}function mr(e,t,n,r,a,s,i,o,c,l){var u=t&V,d=1&t,h=2&t,p=24&t,g=512&t,m=h?B:hr(e);return function f(){for(var y=arguments.length,v=is(y),b=y;b--;)v[b]=arguments[b];if(p)var w=Pr(f),x=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(v,w);if(r&&(v=nr(v,r,a,p)),s&&(v=rr(v,s,i,p)),y-=x,p&&y<l){var k=L(v,w);return kr(e,t,mr,f.placeholder,n,v,k,o,c,l-y)}var _=d?n:this,S=h?_[e]:e;return y=v.length,o?v=function(e,t){for(var n=e.length,r=Zs(t.length,n),a=ar(e);r--;){var s=t[r];e[r]=Fr(s,n)?a[s]:B}return e}(v,o):g&&y>1&&v.reverse(),u&&c<y&&(v.length=c),this&&this!==Yt&&this instanceof f&&(S=m||hr(S)),S.apply(_,v)}}function fr(e,t){return function(n,r){return function(e,t,n,r){return At(e,function(e,a,s){t(r,n(e),a,s)}),r}(n,e,t(r),{})}}function yr(e,t){return function(n,r){var a;if(n===B&&r===B)return t;if(n!==B&&(a=n),r!==B){if(a===B)return r;"string"==typeof n||"string"==typeof r?(n=$n(n),r=$n(r)):(n=zn(n),r=zn(r)),a=e(n,r)}return a}}function vr(e){return Nr(function(t){return t=u(t,C(Mr())),Tn(function(r){var a=this;return e(t,function(e){return n(e,a,r)})})})}function br(e,t){var n=(t=t===B?" ":$n(t)).length;if(n<2)return n?En(t,e):t;var r=En(t,Fs(e/U(t)));return D(t)?Jn(z(r),0,e).join(""):r.slice(0,e)}function wr(e){return function(t,n,r){return r&&"number"!=typeof r&&Wr(t,n,r)&&(n=r=B),t=Ra(t),n===B?(n=t,t=0):n=Ra(n),function(e,t,n,r){for(var a=-1,s=Ks(Fs((t-e)/(n||1)),0),i=is(s);s--;)i[r?s:++a]=e,e+=n;return i}(t,n,r=r===B?t<n?1:-1:Ra(r),e)}}function xr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=$a(t),n=$a(n)),e(t,n)}}function kr(e,t,n,r,a,s,i,o,c,l){var u=8&t;t|=u?G:64,4&(t&=~(u?64:G))||(t&=-4);var d=[e,t,a,u?s:B,u?i:B,u?B:s,u?B:i,o,c,l],h=n.apply(B,d);return Gr(e)&&Oi(h,d),h.placeholder=r,Qr(h,e,t)}function _r(e){var t=us[e];return function(e,n){if(e=$a(e),(n=null==n?0:Zs(Ua(n),292))&&Vs(e)){var r=(Fa(e)+"e").split("e");return+((r=(Fa(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function Sr(e){return function(t){var n=Ni(t);return n==se?P(t):n==ue?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return u(t,function(t){return[t,e[t]]})}(t,e(t))}}function jr(e,t,r,a,s,i,o,c){var l=2&t;if(!l&&"function"!=typeof e)throw new gs(F);var u=a?a.length:0;if(u||(t&=-97,a=s=B),o=o===B?o:Ks(Ua(o),0),c=c===B?c:Ua(c),u-=s?s.length:0,64&t){var d=a,h=s;a=s=B}var p=l?B:Ci(e),g=[e,t,r,a,s,d,h,i,o,c];if(p&&function(e,t){var n=e[1],r=t[1],a=n|r,s=a<131,i=r==V&&8==n||r==V&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!i)return e;1&r&&(e[2]=t[2],a|=1&n?0:4);var o=t[3];if(o){var c=e[3];e[3]=c?nr(c,o,t[4]):o,e[4]=c?L(e[3],q):t[4]}(o=t[5])&&(c=e[5],e[5]=c?rr(c,o,t[6]):o,e[6]=c?L(e[5],q):t[6]),(o=t[7])&&(e[7]=o),r&V&&(e[8]=null==e[8]?t[8]:Zs(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=a}(g,p),e=g[0],t=g[1],r=g[2],a=g[3],s=g[4],!(c=g[9]=g[9]===B?l?0:e.length:Ks(g[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)m=8==t||16==t?function(e,t,r){var a=hr(e);return function s(){for(var i=arguments.length,o=is(i),c=i,l=Pr(s);c--;)o[c]=arguments[c];var u=i<3&&o[0]!==l&&o[i-1]!==l?[]:L(o,l);return(i-=u.length)<r?kr(e,t,mr,s.placeholder,B,o,u,B,B,r-i):n(this&&this!==Yt&&this instanceof s?a:e,this,o)}}(e,t,c):t!=G&&33!=t||s.length?mr.apply(B,g):function(e,t,r,a){var s=1&t,i=hr(e);return function t(){for(var o=-1,c=arguments.length,l=-1,u=a.length,d=is(u+c),h=this&&this!==Yt&&this instanceof t?i:e;++l<u;)d[l]=a[l];for(;c--;)d[l++]=arguments[++o];return n(h,s?r:this,d)}}(e,t,r,a);else var m=function(e,t,n){var r=1&t,a=hr(e);return function t(){return(this&&this!==Yt&&this instanceof t?a:e).apply(r?n:this,arguments)}}(e,t,r);return Qr((p?ki:Oi)(m,g),e,t)}function Ir(e,t,n,r){return e===B||_a(e,ys[n])&&!ws.call(r,n)?t:e}function Cr(e,t,n,r,a,s){return Na(e)&&Na(t)&&(s.set(t,e),xn(e,t,B,Cr,s),s.delete(t)),e}function Er(e){return Da(e)?B:e}function Tr(e,t,n,r,a,s){var i=1&n,o=e.length,c=t.length;if(o!=c&&!(i&&c>o))return!1;var l=s.get(e),u=s.get(t);if(l&&u)return l==t&&u==e;var d=-1,h=!0,p=2&n?new lt:B;for(s.set(e,t),s.set(t,e);++d<o;){var m=e[d],f=t[d];if(r)var y=i?r(f,m,d,t,e,s):r(m,f,d,e,t,s);if(y!==B){if(y)continue;h=!1;break}if(p){if(!g(t,function(e,t){if(!T(p,t)&&(m===e||a(m,e,n,r,s)))return p.push(t)})){h=!1;break}}else if(m!==f&&!a(m,f,n,r,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Nr(e){return Pi(Kr(e,B,ia),e+"")}function Ar(e){return Wt(e,Ga,Ei)}function Or(e){return Wt(e,Va,Ti)}function Dr(e){for(var t=e.name+"",n=ci[t],r=ws.call(ci,t)?n.length:0;r--;){var a=n[r],s=a.func;if(null==s||s==e)return a.name}return t}function Pr(e){return(ws.call(k,"placeholder")?k:e).placeholder}function Mr(){var e=k.iteratee||es;return e=e===es?mn:e,arguments.length?e(arguments[0],arguments[1]):e}function Lr(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Rr(e){for(var t=Ga(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Hr(a)]}return t}function Ur(e,t){var n=function(e,t){return null==e?B:e[t]}(e,t);return gn(n)?n:B}function zr(e,t,n){for(var r=-1,a=(t=Zn(t,e)).length,s=!1;++r<a;){var i=ta(t[r]);if(!(s=null!=e&&n(e,i)))break;e=e[i]}return s||++r!=a?s:!!(a=null==e?0:e.length)&&Ta(a)&&Fr(i,a)&&(xo(e)||wo(e))}function $r(e){return"function"!=typeof e.constructor||Vr(e)?{}:yi(As(e))}function Br(e){return xo(e)||wo(e)||!!(Ms&&e&&e[Ms])}function Fr(e,t){var n=typeof e;return!!(t=null==t?Y:t)&&("number"==n||"symbol"!=n&&et.test(e))&&e>-1&&e%1==0&&e<t}function Wr(e,t,n){if(!Na(n))return!1;var r=typeof t;return!!("number"==r?Sa(n)&&Fr(t,n.length):"string"==r&&t in n)&&_a(n[t],e)}function qr(e,t){if(xo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ma(e))||Le.test(e)||!Me.test(e)||null!=t&&e in ds(t)}function Gr(e){var t=Dr(e),n=k[t];if("function"!=typeof n||!(t in st.prototype))return!1;if(e===n)return!0;var r=Ci(n);return!!r&&e===r[0]}function Vr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ys)}function Hr(e){return e==e&&!Na(e)}function Yr(e,t){return function(n){return null!=n&&n[e]===t&&(t!==B||e in ds(n))}}function Kr(e,t,r){return t=Ks(t===B?e.length-1:t,0),function(){for(var a=arguments,s=-1,i=Ks(a.length-t,0),o=is(i);++s<i;)o[s]=a[t+s];s=-1;for(var c=is(t+1);++s<t;)c[s]=a[s];return c[t]=r(o),n(e,this,c)}}function Zr(e,t){return t.length<2?e:Rt(e,Pn(t,0,-1))}function Jr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Qr(e,t,n){var r=t+"";return Pi(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Fe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return a(J,function(n){var r="_."+n[0];t&n[1]&&!c(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(We);return t?t[1].split(qe):[]}(r),n)))}function Xr(e){var t=0,n=0;return function(){var r=Js(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(B,arguments)}}function ea(e,t){var n=-1,r=e.length,a=r-1;for(t=t===B?r:t;++n<t;){var s=Cn(n,a),i=e[s];e[s]=e[n],e[n]=i}return e.length=t,e}function ta(e){if("string"==typeof e||Ma(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function na(e){if(null!=e){try{return bs.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ra(e){if(e instanceof st)return e.clone();var t=new at(e.__wrapped__,e.__chain__);return t.__actions__=ar(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function aa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:Ua(n);return a<0&&(a=Ks(r+a,0)),f(e,Mr(t,3),a)}function sa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==B&&(a=Ua(n),a=n<0?Ks(r+a,0):Zs(a,r-1)),f(e,Mr(t,3),a,!0)}function ia(e){return null!=e&&e.length?Nt(e,1):[]}function oa(e){return e&&e.length?e[0]:B}function ca(e){var t=null==e?0:e.length;return t?e[t-1]:B}function la(e,t){return e&&e.length&&t&&t.length?jn(e,t):e}function ua(e){return null==e?e:ei.call(e)}function da(e){if(!e||!e.length)return[];var t=0;return e=o(e,function(e){if(ja(e))return t=Ks(e.length,t),!0}),j(t,function(t){return u(e,x(t))})}function ha(e,t){if(!e||!e.length)return[];var r=da(e);return null==t?r:u(r,function(e){return n(t,B,e)})}function pa(e){var t=k(e);return t.__chain__=!0,t}function ga(e,t){return t(e)}function ma(e,t){return(xo(e)?a:vi)(e,Mr(t,3))}function fa(e,t){return(xo(e)?s:bi)(e,Mr(t,3))}function ya(e,t){return(xo(e)?u:vn)(e,Mr(t,3))}function va(e,t,n){return t=n?B:t,t=e&&null==t?e.length:t,jr(e,V,B,B,B,B,t)}function ba(e,t){var n;if("function"!=typeof t)throw new gs(F);return e=Ua(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=B),n}}function wa(e,t,n){function r(t){var n=c,r=l;return c=l=B,g=t,d=e.apply(r,n)}function a(e){var n=e-p;return p===B||n>=t||n<0||f&&e-g>=u}function s(){var e=co();if(a(e))return i(e);h=Di(s,function(e){var n=t-(e-p);return f?Zs(n,u-(e-g)):n}(e))}function i(e){return h=B,y&&c?r(e):(c=l=B,d)}function o(){var e=co(),n=a(e);if(c=arguments,l=this,p=e,n){if(h===B)return function(e){return g=e,h=Di(s,t),m?r(e):d}(p);if(f)return ji(h),h=Di(s,t),r(p)}return h===B&&(h=Di(s,t)),d}var c,l,u,d,h,p,g=0,m=!1,f=!1,y=!0;if("function"!=typeof e)throw new gs(F);return t=$a(t)||0,Na(n)&&(m=!!n.leading,u=(f="maxWait"in n)?Ks($a(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),o.cancel=function(){h!==B&&ji(h),g=0,c=p=l=h=B},o.flush=function(){return h===B?d:i(co())},o}function xa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new gs(F);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var i=e.apply(this,r);return n.cache=s.set(a,i)||s,i};return n.cache=new(xa.Cache||ct),n}function ka(e){if("function"!=typeof e)throw new gs(F);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function _a(e,t){return e===t||e!=e&&t!=t}function Sa(e){return null!=e&&Ta(e.length)&&!Ca(e)}function ja(e){return Aa(e)&&Sa(e)}function Ia(e){if(!Aa(e))return!1;var t=Vt(e);return t==ne||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Da(e)}function Ca(e){if(!Na(e))return!1;var t=Vt(e);return t==re||t==ae||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ea(e){return"number"==typeof e&&e==Ua(e)}function Ta(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Y}function Na(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Aa(e){return null!=e&&"object"==typeof e}function Oa(e){return"number"==typeof e||Aa(e)&&Vt(e)==ie}function Da(e){if(!Aa(e)||Vt(e)!=oe)return!1;var t=As(e);if(null===t)return!0;var n=ws.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&bs.call(n)==Ss}function Pa(e){return"string"==typeof e||!xo(e)&&Aa(e)&&Vt(e)==de}function Ma(e){return"symbol"==typeof e||Aa(e)&&Vt(e)==he}function La(e){if(!e)return[];if(Sa(e))return Pa(e)?z(e):ar(e);if(Ls&&e[Ls])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ls]());var t=Ni(e);return(t==se?P:t==ue?R:Ya)(e)}function Ra(e){return e?(e=$a(e))===H||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Ua(e){var t=Ra(e),n=t%1;return t==t?n?t-n:t:0}function za(e){return e?kt(Ua(e),0,Z):0}function $a(e){if("number"==typeof e)return e;if(Ma(e))return K;if(Na(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Na(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=I(e);var n=Je.test(e);return n||Xe.test(e)?Gt(e.slice(2),n?2:8):Ze.test(e)?K:+e}function Ba(e){return sr(e,Va(e))}function Fa(e){return null==e?"":$n(e)}function Wa(e,t,n){var r=null==e?B:Rt(e,t);return r===B?n:r}function qa(e,t){return null!=e&&zr(e,t,Zt)}function Ga(e){return Sa(e)?dt(e):fn(e)}function Va(e){return Sa(e)?dt(e,!0):function(e){if(!Na(e))return function(e){var t=[];if(null!=e)for(var n in ds(e))t.push(n);return t}(e);var t=Vr(e),n=[];for(var r in e)("constructor"!=r||!t&&ws.call(e,r))&&n.push(r);return n}(e)}function Ha(e,t){if(null==e)return{};var n=u(Or(e),function(e){return[e]});return t=Mr(t),Sn(e,n,function(e,n){return t(e,n[0])})}function Ya(e){return null==e?[]:E(e,Ga(e))}function Ka(e){return ec(Fa(e).toLowerCase())}function Za(e){return(e=Fa(e))&&e.replace(tt,cn).replace(Pt,"")}function Ja(e,t,n){return e=Fa(e),(t=n?B:t)===B?function(e){return Ut.test(e)}(e)?function(e){return e.match(Lt)||[]}(e):function(e){return e.match(Ge)||[]}(e):e.match(t)||[]}function Qa(e){return function(){return e}}function Xa(e){return e}function es(e){return mn("function"==typeof e?e:_t(e,1))}function ts(e,t,n){var r=Ga(t),s=Mt(t,r);null!=n||Na(t)&&(s.length||!r.length)||(n=t,t=e,e=this,s=Mt(t,Ga(t)));var i=!(Na(n)&&"chain"in n&&!n.chain),o=Ca(e);return a(s,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__);return(n.__actions__=ar(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,d([this.value()],arguments))})}),e}function ns(){}function rs(e){return qr(e)?x(ta(e)):function(e){return function(t){return Rt(t,e)}}(e)}function as(){return[]}function ss(){return!1}var is=(t=null==t?Yt:dn.defaults(Yt.Object(),t,dn.pick(Yt,zt))).Array,os=t.Date,cs=t.Error,ls=t.Function,us=t.Math,ds=t.Object,hs=t.RegExp,ps=t.String,gs=t.TypeError,ms=is.prototype,fs=ls.prototype,ys=ds.prototype,vs=t["__core-js_shared__"],bs=fs.toString,ws=ys.hasOwnProperty,xs=0,ks=function(){var e=/[^.]+$/.exec(vs&&vs.keys&&vs.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),_s=ys.toString,Ss=bs.call(ds),js=Yt._,Is=hs("^"+bs.call(ws).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cs=Jt?t.Buffer:B,Es=t.Symbol,Ts=t.Uint8Array,Ns=Cs?Cs.allocUnsafe:B,As=M(ds.getPrototypeOf,ds),Os=ds.create,Ds=ys.propertyIsEnumerable,Ps=ms.splice,Ms=Es?Es.isConcatSpreadable:B,Ls=Es?Es.iterator:B,Rs=Es?Es.toStringTag:B,Us=function(){try{var e=Ur(ds,"defineProperty");return e({},"",{}),e}catch(t){}}(),zs=t.clearTimeout!==Yt.clearTimeout&&t.clearTimeout,$s=os&&os.now!==Yt.Date.now&&os.now,Bs=t.setTimeout!==Yt.setTimeout&&t.setTimeout,Fs=us.ceil,Ws=us.floor,qs=ds.getOwnPropertySymbols,Gs=Cs?Cs.isBuffer:B,Vs=t.isFinite,Hs=ms.join,Ys=M(ds.keys,ds),Ks=us.max,Zs=us.min,Js=os.now,Qs=t.parseInt,Xs=us.random,ei=ms.reverse,ti=Ur(t,"DataView"),ni=Ur(t,"Map"),ri=Ur(t,"Promise"),ai=Ur(t,"Set"),si=Ur(t,"WeakMap"),ii=Ur(ds,"create"),oi=si&&new si,ci={},li=na(ti),ui=na(ni),di=na(ri),hi=na(ai),pi=na(si),gi=Es?Es.prototype:B,mi=gi?gi.valueOf:B,fi=gi?gi.toString:B,yi=function(){function e(){}return function(t){if(!Na(t))return{};if(Os)return Os(t);e.prototype=t;var n=new e;return e.prototype=B,n}}();k.templateSettings={escape:Oe,evaluate:De,interpolate:Pe,variable:"",imports:{_:k}},k.prototype=Be.prototype,k.prototype.constructor=k,at.prototype=yi(Be.prototype),at.prototype.constructor=at,st.prototype=yi(Be.prototype),st.prototype.constructor=st,it.prototype.clear=function(){this.__data__=ii?ii(null):{},this.size=0},it.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},it.prototype.get=function(e){var t=this.__data__;if(ii){var n=t[e];return n===W?B:n}return ws.call(t,e)?t[e]:B},it.prototype.has=function(e){var t=this.__data__;return ii?t[e]!==B:ws.call(t,e)},it.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ii&&t===B?W:t,this},ot.prototype.clear=function(){this.__data__=[],this.size=0},ot.prototype.delete=function(e){var t=this.__data__,n=yt(t,e);return!(n<0||(n==t.length-1?t.pop():Ps.call(t,n,1),--this.size,0))},ot.prototype.get=function(e){var t=this.__data__,n=yt(t,e);return n<0?B:t[n][1]},ot.prototype.has=function(e){return yt(this.__data__,e)>-1},ot.prototype.set=function(e,t){var n=this.__data__,r=yt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ct.prototype.clear=function(){this.size=0,this.__data__={hash:new it,map:new(ni||ot),string:new it}},ct.prototype.delete=function(e){var t=Lr(this,e).delete(e);return this.size-=t?1:0,t},ct.prototype.get=function(e){return Lr(this,e).get(e)},ct.prototype.has=function(e){return Lr(this,e).has(e)},ct.prototype.set=function(e,t){var n=Lr(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},lt.prototype.add=lt.prototype.push=function(e){return this.__data__.set(e,W),this},lt.prototype.has=function(e){return this.__data__.has(e)},ut.prototype.clear=function(){this.__data__=new ot,this.size=0},ut.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ut.prototype.get=function(e){return this.__data__.get(e)},ut.prototype.has=function(e){return this.__data__.has(e)},ut.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ot){var r=n.__data__;if(!ni||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ct(r)}return n.set(e,t),this.size=n.size,this};var vi=cr(At),bi=cr(Ot,!0),wi=lr(),xi=lr(!0),ki=oi?function(e,t){return oi.set(e,t),e}:Xa,_i=Us?function(e,t){return Us(e,"toString",{configurable:!0,enumerable:!1,value:Qa(t),writable:!0})}:Xa,Si=Tn,ji=zs||function(e){return Yt.clearTimeout(e)},Ii=ai&&1/R(new ai([,-0]))[1]==H?function(e){return new ai(e)}:ns,Ci=oi?function(e){return oi.get(e)}:ns,Ei=qs?function(e){return null==e?[]:(e=ds(e),o(qs(e),function(t){return Ds.call(e,t)}))}:as,Ti=qs?function(e){for(var t=[];e;)d(t,Ei(e)),e=As(e);return t}:as,Ni=Vt;(ti&&Ni(new ti(new ArrayBuffer(1)))!=me||ni&&Ni(new ni)!=se||ri&&Ni(ri.resolve())!=ce||ai&&Ni(new ai)!=ue||si&&Ni(new si)!=pe)&&(Ni=function(e){var t=Vt(e),n=t==oe?e.constructor:B,r=n?na(n):"";if(r)switch(r){case li:return me;case ui:return se;case di:return ce;case hi:return ue;case pi:return pe}return t});var Ai=vs?Ca:ss,Oi=Xr(ki),Di=Bs||function(e,t){return Yt.setTimeout(e,t)},Pi=Xr(_i),Mi=function(){var e=xa(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Re,function(e,n,r,a){t.push(r?a.replace(He,"$1"):n||e)}),t},function(e){return 500===t.size&&t.clear(),e}),t=e.cache;return e}(),Li=Tn(function(e,t){return ja(e)?It(e,Nt(t,1,ja,!0)):[]}),Ri=Tn(function(e,t){var n=ca(t);return ja(n)&&(n=B),ja(e)?It(e,Nt(t,1,ja,!0),Mr(n,2)):[]}),Ui=Tn(function(e,t){var n=ca(t);return ja(n)&&(n=B),ja(e)?It(e,Nt(t,1,ja,!0),B,n):[]}),zi=Tn(function(e){var t=u(e,Yn);return t.length&&t[0]===e[0]?Qt(t):[]}),$i=Tn(function(e){var t=ca(e),n=u(e,Yn);return t===ca(n)?t=B:n.pop(),n.length&&n[0]===e[0]?Qt(n,Mr(t,2)):[]}),Bi=Tn(function(e){var t=ca(e),n=u(e,Yn);return(t="function"==typeof t?t:B)&&n.pop(),n.length&&n[0]===e[0]?Qt(n,B,t):[]}),Fi=Tn(la),Wi=Nr(function(e,t){var n=null==e?0:e.length,r=xt(e,t);return In(e,u(t,function(e){return Fr(e,n)?+e:e}).sort(tr)),r}),qi=Tn(function(e){return Bn(Nt(e,1,ja,!0))}),Gi=Tn(function(e){var t=ca(e);return ja(t)&&(t=B),Bn(Nt(e,1,ja,!0),Mr(t,2))}),Vi=Tn(function(e){var t=ca(e);return t="function"==typeof t?t:B,Bn(Nt(e,1,ja,!0),B,t)}),Hi=Tn(function(e,t){return ja(e)?It(e,t):[]}),Yi=Tn(function(e){return Vn(o(e,ja))}),Ki=Tn(function(e){var t=ca(e);return ja(t)&&(t=B),Vn(o(e,ja),Mr(t,2))}),Zi=Tn(function(e){var t=ca(e);return t="function"==typeof t?t:B,Vn(o(e,ja),B,t)}),Ji=Tn(da),Qi=Tn(function(e){var t=e.length,n=t>1?e[t-1]:B;return n="function"==typeof n?(e.pop(),n):B,ha(e,n)}),Xi=Nr(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return xt(t,e)};return!(t>1||this.__actions__.length)&&r instanceof st&&Fr(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ga,args:[a],thisArg:B}),new at(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(B),e})):this.thru(a)}),eo=ir(function(e,t,n){ws.call(e,n)?++e[n]:wt(e,n,1)}),to=pr(aa),no=pr(sa),ro=ir(function(e,t,n){ws.call(e,n)?e[n].push(t):wt(e,n,[t])}),ao=Tn(function(e,t,r){var a=-1,s="function"==typeof t,i=Sa(e)?is(e.length):[];return vi(e,function(e){i[++a]=s?n(t,e,r):Xt(e,t,r)}),i}),so=ir(function(e,t,n){wt(e,n,t)}),io=ir(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),oo=Tn(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Wr(e,t[0],t[1])?t=[]:n>2&&Wr(t[0],t[1],t[2])&&(t=[t[0]]),_n(e,Nt(t,1),[])}),co=$s||function(){return Yt.Date.now()},lo=Tn(function(e,t,n){var r=1;if(n.length){var a=L(n,Pr(lo));r|=G}return jr(e,r,t,n,a)}),uo=Tn(function(e,t,n){var r=3;if(n.length){var a=L(n,Pr(uo));r|=G}return jr(t,r,e,n,a)}),ho=Tn(function(e,t){return jt(e,1,t)}),po=Tn(function(e,t,n){return jt(e,$a(t)||0,n)});xa.Cache=ct;var go=Si(function(e,t){var r=(t=1==t.length&&xo(t[0])?u(t[0],C(Mr())):u(Nt(t,1),C(Mr()))).length;return Tn(function(a){for(var s=-1,i=Zs(a.length,r);++s<i;)a[s]=t[s].call(this,a[s]);return n(e,this,a)})}),mo=Tn(function(e,t){var n=L(t,Pr(mo));return jr(e,G,B,t,n)}),fo=Tn(function(e,t){var n=L(t,Pr(fo));return jr(e,64,B,t,n)}),yo=Nr(function(e,t){return jr(e,256,B,B,B,t)}),vo=xr(Ht),bo=xr(function(e,t){return e>=t}),wo=on(function(){return arguments}())?on:function(e){return Aa(e)&&ws.call(e,"callee")&&!Ds.call(e,"callee")},xo=is.isArray,ko=en?C(en):function(e){return Aa(e)&&Vt(e)==ge},_o=Gs||ss,So=tn?C(tn):function(e){return Aa(e)&&Vt(e)==te},jo=nn?C(nn):function(e){return Aa(e)&&Ni(e)==se},Io=rn?C(rn):function(e){return Aa(e)&&Vt(e)==le},Co=an?C(an):function(e){return Aa(e)&&Ni(e)==ue},Eo=sn?C(sn):function(e){return Aa(e)&&Ta(e.length)&&!!Bt[Vt(e)]},To=xr(yn),No=xr(function(e,t){return e<=t}),Ao=or(function(e,t){if(Vr(t)||Sa(t))sr(t,Ga(t),e);else for(var n in t)ws.call(t,n)&&ft(e,n,t[n])}),Oo=or(function(e,t){sr(t,Va(t),e)}),Do=or(function(e,t,n,r){sr(t,Va(t),e,r)}),Po=or(function(e,t,n,r){sr(t,Ga(t),e,r)}),Mo=Nr(xt),Lo=Tn(function(e,t){e=ds(e);var n=-1,r=t.length,a=r>2?t[2]:B;for(a&&Wr(t[0],t[1],a)&&(r=1);++n<r;)for(var s=t[n],i=Va(s),o=-1,c=i.length;++o<c;){var l=i[o],u=e[l];(u===B||_a(u,ys[l])&&!ws.call(e,l))&&(e[l]=s[l])}return e}),Ro=Tn(function(e){return e.push(B,Cr),n(Fo,B,e)}),Uo=fr(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=_s.call(t)),e[t]=n},Qa(Xa)),zo=fr(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=_s.call(t)),ws.call(e,t)?e[t].push(n):e[t]=[n]},Mr),$o=Tn(Xt),Bo=or(function(e,t,n){xn(e,t,n)}),Fo=or(function(e,t,n,r){xn(e,t,n,r)}),Wo=Nr(function(e,t){var n={};if(null==e)return n;var r=!1;t=u(t,function(t){return t=Zn(t,e),r||(r=t.length>1),t}),sr(e,Or(e),n),r&&(n=_t(n,7,Er));for(var a=t.length;a--;)Fn(n,t[a]);return n}),qo=Nr(function(e,t){return null==e?{}:function(e,t){return Sn(e,t,function(t,n){return qa(e,n)})}(e,t)}),Go=Sr(Ga),Vo=Sr(Va),Ho=dr(function(e,t,n){return t=t.toLowerCase(),e+(n?Ka(t):t)}),Yo=dr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ko=dr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Zo=ur("toLowerCase"),Jo=dr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Qo=dr(function(e,t,n){return e+(n?" ":"")+ec(t)}),Xo=dr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),ec=ur("toUpperCase"),tc=Tn(function(e,t){try{return n(e,B,t)}catch(r){return Ia(r)?r:new cs(r)}}),nc=Nr(function(e,t){return a(t,function(t){t=ta(t),wt(e,t,lo(e[t],e))}),e}),rc=gr(),ac=gr(!0),sc=Tn(function(e,t){return function(n){return Xt(n,e,t)}}),ic=Tn(function(e,t){return function(n){return Xt(e,n,t)}}),oc=vr(u),cc=vr(i),lc=vr(g),uc=wr(),dc=wr(!0),hc=yr(function(e,t){return e+t},0),pc=_r("ceil"),gc=yr(function(e,t){return e/t},1),mc=_r("floor"),fc=yr(function(e,t){return e*t},1),yc=_r("round"),vc=yr(function(e,t){return e-t},0);return k.after=function(e,t){if("function"!=typeof t)throw new gs(F);return e=Ua(e),function(){if(--e<1)return t.apply(this,arguments)}},k.ary=va,k.assign=Ao,k.assignIn=Oo,k.assignInWith=Do,k.assignWith=Po,k.at=Mo,k.before=ba,k.bind=lo,k.bindAll=nc,k.bindKey=uo,k.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return xo(e)?e:[e]},k.chain=pa,k.chunk=function(e,t,n){t=(n?Wr(e,t,n):t===B)?1:Ks(Ua(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var a=0,s=0,i=is(Fs(r/t));a<r;)i[s++]=Pn(e,a,a+=t);return i},k.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var s=e[t];s&&(a[r++]=s)}return a},k.concat=function(){var e=arguments.length;if(!e)return[];for(var t=is(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return d(xo(n)?ar(n):[n],Nt(t,1))},k.cond=function(e){var t=null==e?0:e.length,r=Mr();return e=t?u(e,function(e){if("function"!=typeof e[1])throw new gs(F);return[r(e[0]),e[1]]}):[],Tn(function(r){for(var a=-1;++a<t;){var s=e[a];if(n(s[0],this,r))return n(s[1],this,r)}})},k.conforms=function(e){return function(e){var t=Ga(e);return function(n){return St(n,e,t)}}(_t(e,1))},k.constant=Qa,k.countBy=eo,k.create=function(e,t){var n=yi(e);return null==t?n:bt(n,t)},k.curry=function e(t,n,r){var a=jr(t,8,B,B,B,B,B,n=r?B:n);return a.placeholder=e.placeholder,a},k.curryRight=function e(t,n,r){var a=jr(t,16,B,B,B,B,B,n=r?B:n);return a.placeholder=e.placeholder,a},k.debounce=wa,k.defaults=Lo,k.defaultsDeep=Ro,k.defer=ho,k.delay=po,k.difference=Li,k.differenceBy=Ri,k.differenceWith=Ui,k.drop=function(e,t,n){var r=null==e?0:e.length;return r?Pn(e,(t=n||t===B?1:Ua(t))<0?0:t,r):[]},k.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Pn(e,0,(t=r-(t=n||t===B?1:Ua(t)))<0?0:t):[]},k.dropRightWhile=function(e,t){return e&&e.length?qn(e,Mr(t,3),!0,!0):[]},k.dropWhile=function(e,t){return e&&e.length?qn(e,Mr(t,3),!0):[]},k.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&Wr(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=Ua(n))<0&&(n=-n>a?0:a+n),(r=r===B||r>a?a:Ua(r))<0&&(r+=a),r=n>r?0:za(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},k.filter=function(e,t){return(xo(e)?o:Tt)(e,Mr(t,3))},k.flatMap=function(e,t){return Nt(ya(e,t),1)},k.flatMapDeep=function(e,t){return Nt(ya(e,t),H)},k.flatMapDepth=function(e,t,n){return n=n===B?1:Ua(n),Nt(ya(e,t),n)},k.flatten=ia,k.flattenDeep=function(e){return null!=e&&e.length?Nt(e,H):[]},k.flattenDepth=function(e,t){return null!=e&&e.length?Nt(e,t=t===B?1:Ua(t)):[]},k.flip=function(e){return jr(e,512)},k.flow=rc,k.flowRight=ac,k.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var a=e[t];r[a[0]]=a[1]}return r},k.functions=function(e){return null==e?[]:Mt(e,Ga(e))},k.functionsIn=function(e){return null==e?[]:Mt(e,Va(e))},k.groupBy=ro,k.initial=function(e){return null!=e&&e.length?Pn(e,0,-1):[]},k.intersection=zi,k.intersectionBy=$i,k.intersectionWith=Bi,k.invert=Uo,k.invertBy=zo,k.invokeMap=ao,k.iteratee=es,k.keyBy=so,k.keys=Ga,k.keysIn=Va,k.map=ya,k.mapKeys=function(e,t){var n={};return t=Mr(t,3),At(e,function(e,r,a){wt(n,t(e,r,a),e)}),n},k.mapValues=function(e,t){var n={};return t=Mr(t,3),At(e,function(e,r,a){wt(n,r,t(e,r,a))}),n},k.matches=function(e){return bn(_t(e,1))},k.matchesProperty=function(e,t){return wn(e,_t(t,1))},k.memoize=xa,k.merge=Bo,k.mergeWith=Fo,k.method=sc,k.methodOf=ic,k.mixin=ts,k.negate=ka,k.nthArg=function(e){return e=Ua(e),Tn(function(t){return kn(t,e)})},k.omit=Wo,k.omitBy=function(e,t){return Ha(e,ka(Mr(t)))},k.once=function(e){return ba(2,e)},k.orderBy=function(e,t,n,r){return null==e?[]:(xo(t)||(t=null==t?[]:[t]),xo(n=r?B:n)||(n=null==n?[]:[n]),_n(e,t,n))},k.over=oc,k.overArgs=go,k.overEvery=cc,k.overSome=lc,k.partial=mo,k.partialRight=fo,k.partition=io,k.pick=qo,k.pickBy=Ha,k.property=rs,k.propertyOf=function(e){return function(t){return null==e?B:Rt(e,t)}},k.pull=Fi,k.pullAll=la,k.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?jn(e,t,Mr(n,2)):e},k.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?jn(e,t,B,n):e},k.pullAt=Wi,k.range=uc,k.rangeRight=dc,k.rearg=yo,k.reject=function(e,t){return(xo(e)?o:Tt)(e,ka(Mr(t,3)))},k.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,a=[],s=e.length;for(t=Mr(t,3);++r<s;){var i=e[r];t(i,r,e)&&(n.push(i),a.push(r))}return In(e,a),n},k.rest=function(e,t){if("function"!=typeof e)throw new gs(F);return Tn(e,t=t===B?t:Ua(t))},k.reverse=ua,k.sampleSize=function(e,t,n){return t=(n?Wr(e,t,n):t===B)?1:Ua(t),(xo(e)?pt:An)(e,t)},k.set=function(e,t,n){return null==e?e:On(e,t,n)},k.setWith=function(e,t,n,r){return r="function"==typeof r?r:B,null==e?e:On(e,t,n,r)},k.shuffle=function(e){return(xo(e)?gt:Dn)(e)},k.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Wr(e,t,n)?(t=0,n=r):(t=null==t?0:Ua(t),n=n===B?r:Ua(n)),Pn(e,t,n)):[]},k.sortBy=oo,k.sortedUniq=function(e){return e&&e.length?Un(e):[]},k.sortedUniqBy=function(e,t){return e&&e.length?Un(e,Mr(t,2)):[]},k.split=function(e,t,n){return n&&"number"!=typeof n&&Wr(e,t,n)&&(t=n=B),(n=n===B?Z:n>>>0)?(e=Fa(e))&&("string"==typeof t||null!=t&&!Io(t))&&!(t=$n(t))&&D(e)?Jn(z(e),0,n):e.split(t,n):[]},k.spread=function(e,t){if("function"!=typeof e)throw new gs(F);return t=null==t?0:Ks(Ua(t),0),Tn(function(r){var a=r[t],s=Jn(r,0,t);return a&&d(s,a),n(e,this,s)})},k.tail=function(e){var t=null==e?0:e.length;return t?Pn(e,1,t):[]},k.take=function(e,t,n){return e&&e.length?Pn(e,0,(t=n||t===B?1:Ua(t))<0?0:t):[]},k.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Pn(e,(t=r-(t=n||t===B?1:Ua(t)))<0?0:t,r):[]},k.takeRightWhile=function(e,t){return e&&e.length?qn(e,Mr(t,3),!1,!0):[]},k.takeWhile=function(e,t){return e&&e.length?qn(e,Mr(t,3)):[]},k.tap=function(e,t){return t(e),e},k.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new gs(F);return Na(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),wa(e,t,{leading:r,maxWait:t,trailing:a})},k.thru=ga,k.toArray=La,k.toPairs=Go,k.toPairsIn=Vo,k.toPath=function(e){return xo(e)?u(e,ta):Ma(e)?[e]:ar(Mi(Fa(e)))},k.toPlainObject=Ba,k.transform=function(e,t,n){var r=xo(e),s=r||_o(e)||Eo(e);if(t=Mr(t,4),null==n){var i=e&&e.constructor;n=s?r?new i:[]:Na(e)&&Ca(i)?yi(As(e)):{}}return(s?a:At)(e,function(e,r,a){return t(n,e,r,a)}),n},k.unary=function(e){return va(e,1)},k.union=qi,k.unionBy=Gi,k.unionWith=Vi,k.uniq=function(e){return e&&e.length?Bn(e):[]},k.uniqBy=function(e,t){return e&&e.length?Bn(e,Mr(t,2)):[]},k.uniqWith=function(e,t){return t="function"==typeof t?t:B,e&&e.length?Bn(e,B,t):[]},k.unset=function(e,t){return null==e||Fn(e,t)},k.unzip=da,k.unzipWith=ha,k.update=function(e,t,n){return null==e?e:Wn(e,t,Kn(n))},k.updateWith=function(e,t,n,r){return r="function"==typeof r?r:B,null==e?e:Wn(e,t,Kn(n),r)},k.values=Ya,k.valuesIn=function(e){return null==e?[]:E(e,Va(e))},k.without=Hi,k.words=Ja,k.wrap=function(e,t){return mo(Kn(t),e)},k.xor=Yi,k.xorBy=Ki,k.xorWith=Zi,k.zip=Ji,k.zipObject=function(e,t){return Hn(e||[],t||[],ft)},k.zipObjectDeep=function(e,t){return Hn(e||[],t||[],On)},k.zipWith=Qi,k.entries=Go,k.entriesIn=Vo,k.extend=Oo,k.extendWith=Do,ts(k,k),k.add=hc,k.attempt=tc,k.camelCase=Ho,k.capitalize=Ka,k.ceil=pc,k.clamp=function(e,t,n){return n===B&&(n=t,t=B),n!==B&&(n=(n=$a(n))==n?n:0),t!==B&&(t=(t=$a(t))==t?t:0),kt($a(e),t,n)},k.clone=function(e){return _t(e,4)},k.cloneDeep=function(e){return _t(e,5)},k.cloneDeepWith=function(e,t){return _t(e,5,t="function"==typeof t?t:B)},k.cloneWith=function(e,t){return _t(e,4,t="function"==typeof t?t:B)},k.conformsTo=function(e,t){return null==t||St(e,t,Ga(t))},k.deburr=Za,k.defaultTo=function(e,t){return null==e||e!=e?t:e},k.divide=gc,k.endsWith=function(e,t,n){e=Fa(e),t=$n(t);var r=e.length,a=n=n===B?r:kt(Ua(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},k.eq=_a,k.escape=function(e){return(e=Fa(e))&&Ae.test(e)?e.replace(Te,ln):e},k.escapeRegExp=function(e){return(e=Fa(e))&&ze.test(e)?e.replace(Ue,"\\$&"):e},k.every=function(e,t,n){var r=xo(e)?i:Ct;return n&&Wr(e,t,n)&&(t=B),r(e,Mr(t,3))},k.find=to,k.findIndex=aa,k.findKey=function(e,t){return m(e,Mr(t,3),At)},k.findLast=no,k.findLastIndex=sa,k.findLastKey=function(e,t){return m(e,Mr(t,3),Ot)},k.floor=mc,k.forEach=ma,k.forEachRight=fa,k.forIn=function(e,t){return null==e?e:wi(e,Mr(t,3),Va)},k.forInRight=function(e,t){return null==e?e:xi(e,Mr(t,3),Va)},k.forOwn=function(e,t){return e&&At(e,Mr(t,3))},k.forOwnRight=function(e,t){return e&&Ot(e,Mr(t,3))},k.get=Wa,k.gt=vo,k.gte=bo,k.has=function(e,t){return null!=e&&zr(e,t,Kt)},k.hasIn=qa,k.head=oa,k.identity=Xa,k.includes=function(e,t,n,r){e=Sa(e)?e:Ya(e),n=n&&!r?Ua(n):0;var a=e.length;return n<0&&(n=Ks(a+n,0)),Pa(e)?n<=a&&e.indexOf(t,n)>-1:!!a&&y(e,t,n)>-1},k.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:Ua(n);return a<0&&(a=Ks(r+a,0)),y(e,t,a)},k.inRange=function(e,t,n){return t=Ra(t),n===B?(n=t,t=0):n=Ra(n),function(e,t,n){return e>=Zs(t,n)&&e<Ks(t,n)}(e=$a(e),t,n)},k.invoke=$o,k.isArguments=wo,k.isArray=xo,k.isArrayBuffer=ko,k.isArrayLike=Sa,k.isArrayLikeObject=ja,k.isBoolean=function(e){return!0===e||!1===e||Aa(e)&&Vt(e)==ee},k.isBuffer=_o,k.isDate=So,k.isElement=function(e){return Aa(e)&&1===e.nodeType&&!Da(e)},k.isEmpty=function(e){if(null==e)return!0;if(Sa(e)&&(xo(e)||"string"==typeof e||"function"==typeof e.splice||_o(e)||Eo(e)||wo(e)))return!e.length;var t=Ni(e);if(t==se||t==ue)return!e.size;if(Vr(e))return!fn(e).length;for(var n in e)if(ws.call(e,n))return!1;return!0},k.isEqual=function(e,t){return hn(e,t)},k.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:B)?n(e,t):B;return r===B?hn(e,t,B,n):!!r},k.isError=Ia,k.isFinite=function(e){return"number"==typeof e&&Vs(e)},k.isFunction=Ca,k.isInteger=Ea,k.isLength=Ta,k.isMap=jo,k.isMatch=function(e,t){return e===t||pn(e,t,Rr(t))},k.isMatchWith=function(e,t,n){return n="function"==typeof n?n:B,pn(e,t,Rr(t),n)},k.isNaN=function(e){return Oa(e)&&e!=+e},k.isNative=function(e){if(Ai(e))throw new cs("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return gn(e)},k.isNil=function(e){return null==e},k.isNull=function(e){return null===e},k.isNumber=Oa,k.isObject=Na,k.isObjectLike=Aa,k.isPlainObject=Da,k.isRegExp=Io,k.isSafeInteger=function(e){return Ea(e)&&e>=-9007199254740991&&e<=Y},k.isSet=Co,k.isString=Pa,k.isSymbol=Ma,k.isTypedArray=Eo,k.isUndefined=function(e){return e===B},k.isWeakMap=function(e){return Aa(e)&&Ni(e)==pe},k.isWeakSet=function(e){return Aa(e)&&"[object WeakSet]"==Vt(e)},k.join=function(e,t){return null==e?"":Hs.call(e,t)},k.kebabCase=Yo,k.last=ca,k.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==B&&(a=(a=Ua(n))<0?Ks(r+a,0):Zs(a,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):f(e,b,a,!0)},k.lowerCase=Ko,k.lowerFirst=Zo,k.lt=To,k.lte=No,k.max=function(e){return e&&e.length?Et(e,Xa,Ht):B},k.maxBy=function(e,t){return e&&e.length?Et(e,Mr(t,2),Ht):B},k.mean=function(e){return w(e,Xa)},k.meanBy=function(e,t){return w(e,Mr(t,2))},k.min=function(e){return e&&e.length?Et(e,Xa,yn):B},k.minBy=function(e,t){return e&&e.length?Et(e,Mr(t,2),yn):B},k.stubArray=as,k.stubFalse=ss,k.stubObject=function(){return{}},k.stubString=function(){return""},k.stubTrue=function(){return!0},k.multiply=fc,k.nth=function(e,t){return e&&e.length?kn(e,Ua(t)):B},k.noConflict=function(){return Yt._===this&&(Yt._=js),this},k.noop=ns,k.now=co,k.pad=function(e,t,n){e=Fa(e);var r=(t=Ua(t))?U(e):0;if(!t||r>=t)return e;var a=(t-r)/2;return br(Ws(a),n)+e+br(Fs(a),n)},k.padEnd=function(e,t,n){e=Fa(e);var r=(t=Ua(t))?U(e):0;return t&&r<t?e+br(t-r,n):e},k.padStart=function(e,t,n){e=Fa(e);var r=(t=Ua(t))?U(e):0;return t&&r<t?br(t-r,n)+e:e},k.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Qs(Fa(e).replace($e,""),t||0)},k.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Wr(e,t,n)&&(t=n=B),n===B&&("boolean"==typeof t?(n=t,t=B):"boolean"==typeof e&&(n=e,e=B)),e===B&&t===B?(e=0,t=1):(e=Ra(e),t===B?(t=e,e=0):t=Ra(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=Xs();return Zs(e+a*(t-e+qt("1e-"+((a+"").length-1))),t)}return Cn(e,t)},k.reduce=function(e,t,n){var r=xo(e)?h:_,a=arguments.length<3;return r(e,Mr(t,4),n,a,vi)},k.reduceRight=function(e,t,n){var r=xo(e)?p:_,a=arguments.length<3;return r(e,Mr(t,4),n,a,bi)},k.repeat=function(e,t,n){return t=(n?Wr(e,t,n):t===B)?1:Ua(t),En(Fa(e),t)},k.replace=function(){var e=arguments,t=Fa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},k.result=function(e,t,n){var r=-1,a=(t=Zn(t,e)).length;for(a||(a=1,e=B);++r<a;){var s=null==e?B:e[ta(t[r])];s===B&&(r=a,s=n),e=Ca(s)?s.call(e):s}return e},k.round=yc,k.runInContext=e,k.sample=function(e){return(xo(e)?ht:Nn)(e)},k.size=function(e){if(null==e)return 0;if(Sa(e))return Pa(e)?U(e):e.length;var t=Ni(e);return t==se||t==ue?e.size:fn(e).length},k.snakeCase=Jo,k.some=function(e,t,n){var r=xo(e)?g:Mn;return n&&Wr(e,t,n)&&(t=B),r(e,Mr(t,3))},k.sortedIndex=function(e,t){return Ln(e,t)},k.sortedIndexBy=function(e,t,n){return Rn(e,t,Mr(n,2))},k.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Ln(e,t);if(r<n&&_a(e[r],t))return r}return-1},k.sortedLastIndex=function(e,t){return Ln(e,t,!0)},k.sortedLastIndexBy=function(e,t,n){return Rn(e,t,Mr(n,2),!0)},k.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Ln(e,t,!0)-1;if(_a(e[n],t))return n}return-1},k.startCase=Qo,k.startsWith=function(e,t,n){return e=Fa(e),n=null==n?0:kt(Ua(n),0,e.length),t=$n(t),e.slice(n,n+t.length)==t},k.subtract=vc,k.sum=function(e){return e&&e.length?S(e,Xa):0},k.sumBy=function(e,t){return e&&e.length?S(e,Mr(t,2)):0},k.template=function(e,t,n){var r=k.templateSettings;n&&Wr(e,t,n)&&(t=B),e=Fa(e),t=Do({},t,r,Ir);var a,s,i=Do({},t.imports,r.imports,Ir),o=Ga(i),c=E(i,o),l=0,u=t.interpolate||nt,d="__p += '",h=hs((t.escape||nt).source+"|"+u.source+"|"+(u===Pe?Ye:nt).source+"|"+(t.evaluate||nt).source+"|$","g"),p="//# sourceURL="+(ws.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$t+"]")+"\n";e.replace(h,function(t,n,r,i,o,c){return r||(r=i),d+=e.slice(l,c).replace(rt,O),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),o&&(s=!0,d+="';\n"+o+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t}),d+="';\n";var g=ws.call(t,"variable")&&t.variable;if(g){if(Ve.test(g))throw new cs("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(je,""):d).replace(Ie,"$1").replace(Ce,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=tc(function(){return ls(o,p+"return "+d).apply(B,c)});if(m.source=d,Ia(m))throw m;return m},k.times=function(e,t){if((e=Ua(e))<1||e>Y)return[];var n=Z,r=Zs(e,Z);t=Mr(t),e-=Z;for(var a=j(r,t);++n<e;)t(n);return a},k.toFinite=Ra,k.toInteger=Ua,k.toLength=za,k.toLower=function(e){return Fa(e).toLowerCase()},k.toNumber=$a,k.toSafeInteger=function(e){return e?kt(Ua(e),-9007199254740991,Y):0===e?e:0},k.toString=Fa,k.toUpper=function(e){return Fa(e).toUpperCase()},k.trim=function(e,t,n){if((e=Fa(e))&&(n||t===B))return I(e);if(!e||!(t=$n(t)))return e;var r=z(e),a=z(t);return Jn(r,N(r,a),A(r,a)+1).join("")},k.trimEnd=function(e,t,n){if((e=Fa(e))&&(n||t===B))return e.slice(0,$(e)+1);if(!e||!(t=$n(t)))return e;var r=z(e);return Jn(r,0,A(r,z(t))+1).join("")},k.trimStart=function(e,t,n){if((e=Fa(e))&&(n||t===B))return e.replace($e,"");if(!e||!(t=$n(t)))return e;var r=z(e);return Jn(r,N(r,z(t))).join("")},k.truncate=function(e,t){var n=30,r="...";if(Na(t)){var a="separator"in t?t.separator:a;n="length"in t?Ua(t.length):n,r="omission"in t?$n(t.omission):r}var s=(e=Fa(e)).length;if(D(e)){var i=z(e);s=i.length}if(n>=s)return e;var o=n-U(r);if(o<1)return r;var c=i?Jn(i,0,o).join(""):e.slice(0,o);if(a===B)return c+r;if(i&&(o+=c.length-o),Io(a)){if(e.slice(o).search(a)){var l,u=c;for(a.global||(a=hs(a.source,Fa(Ke.exec(a))+"g")),a.lastIndex=0;l=a.exec(u);)var d=l.index;c=c.slice(0,d===B?o:d)}}else if(e.indexOf($n(a),o)!=o){var h=c.lastIndexOf(a);h>-1&&(c=c.slice(0,h))}return c+r},k.unescape=function(e){return(e=Fa(e))&&Ne.test(e)?e.replace(Ee,un):e},k.uniqueId=function(e){var t=++xs;return Fa(e)+t},k.upperCase=Xo,k.upperFirst=ec,k.each=ma,k.eachRight=fa,k.first=oa,ts(k,function(){var e={};return At(k,function(t,n){ws.call(k.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),k.VERSION="4.17.21",a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){k[e].placeholder=k}),a(["drop","take"],function(e,t){st.prototype[e]=function(n){n=n===B?1:Ks(Ua(n),0);var r=this.__filtered__&&!t?new st(this):this.clone();return r.__filtered__?r.__takeCount__=Zs(n,r.__takeCount__):r.__views__.push({size:Zs(n,Z),type:e+(r.__dir__<0?"Right":"")}),r},st.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),a(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;st.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Mr(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),a(["head","last"],function(e,t){var n="take"+(t?"Right":"");st.prototype[e]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");st.prototype[e]=function(){return this.__filtered__?new st(this):this[n](1)}}),st.prototype.compact=function(){return this.filter(Xa)},st.prototype.find=function(e){return this.filter(e).head()},st.prototype.findLast=function(e){return this.reverse().find(e)},st.prototype.invokeMap=Tn(function(e,t){return"function"==typeof e?new st(this):this.map(function(n){return Xt(n,e,t)})}),st.prototype.reject=function(e){return this.filter(ka(Mr(e)))},st.prototype.slice=function(e,t){e=Ua(e);var n=this;return n.__filtered__&&(e>0||t<0)?new st(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==B&&(n=(t=Ua(t))<0?n.dropRight(-t):n.take(t-e)),n)},st.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},st.prototype.toArray=function(){return this.take(Z)},At(st.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=k[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);a&&(k.prototype[t]=function(){var t=this.__wrapped__,i=r?[1]:arguments,o=t instanceof st,c=i[0],l=o||xo(t),u=function(e){var t=a.apply(k,d([e],i));return r&&h?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(o=l=!1);var h=this.__chain__,p=!!this.__actions__.length,g=s&&!h,m=o&&!p;if(!s&&l){t=m?t:new st(this);var f=e.apply(t,i);return f.__actions__.push({func:ga,args:[u],thisArg:B}),new at(f,h)}return g&&m?e.apply(this,i):(f=this.thru(u),g?r?f.value()[0]:f.value():f)})}),a(["pop","push","shift","sort","splice","unshift"],function(e){var t=ms[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);k.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var a=this.value();return t.apply(xo(a)?a:[],e)}return this[n](function(n){return t.apply(xo(n)?n:[],e)})}}),At(st.prototype,function(e,t){var n=k[t];if(n){var r=n.name+"";ws.call(ci,r)||(ci[r]=[]),ci[r].push({name:t,func:n})}}),ci[mr(B,2).name]=[{name:"wrapper",func:B}],st.prototype.clone=function(){var e=new st(this.__wrapped__);return e.__actions__=ar(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ar(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ar(this.__views__),e},st.prototype.reverse=function(){if(this.__filtered__){var e=new st(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},st.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=xo(e),r=t<0,a=n?e.length:0,s=function(e,t,n){for(var r=-1,a=n.length;++r<a;){var s=n[r],i=s.size;switch(s.type){case"drop":e+=i;break;case"dropRight":t-=i;break;case"take":t=Zs(t,e+i);break;case"takeRight":e=Ks(e,t-i)}}return{start:e,end:t}}(0,a,this.__views__),i=s.start,o=s.end,c=o-i,l=r?o:i-1,u=this.__iteratees__,d=u.length,h=0,p=Zs(c,this.__takeCount__);if(!n||!r&&a==c&&p==c)return Gn(e,this.__actions__);var g=[];e:for(;c--&&h<p;){for(var m=-1,f=e[l+=t];++m<d;){var y=u[m],v=y.iteratee,b=y.type,w=v(f);if(2==b)f=w;else if(!w){if(1==b)continue e;break e}}g[h++]=f}return g},k.prototype.at=Xi,k.prototype.chain=function(){return pa(this)},k.prototype.commit=function(){return new at(this.value(),this.__chain__)},k.prototype.next=function(){this.__values__===B&&(this.__values__=La(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?B:this.__values__[this.__index__++]}},k.prototype.plant=function(e){for(var t,n=this;n instanceof Be;){var r=ra(n);r.__index__=0,r.__values__=B,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},k.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof st){var t=e;return this.__actions__.length&&(t=new st(this)),(t=t.reverse()).__actions__.push({func:ga,args:[ua],thisArg:B}),new at(t,this.__chain__)}return this.thru(ua)},k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=function(){return Gn(this.__wrapped__,this.__actions__)},k.prototype.first=k.prototype.head,Ls&&(k.prototype[Ls]=function(){return this}),k}();Zt?((Zt.exports=dn)._=dn,Kt._=dn):Yt._=dn}.call(rS)),nS.exports;var e,t}function Ga(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return vS(e,t,r)}}function Va(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jS;dS&&dS(e,null);let r=t.length;for(;r--;){let a=t[r];if("string"==typeof a){const e=n(a);e!==a&&(hS(t)||(t[r]=e),a=e)}e[a]=!0}return e}function Ha(e){for(let t=0;t<e.length;t++)AS(e,t)||(e[t]=null);return e}function Ya(e){const t=yS(null);for(const[n,r]of uS(e))AS(e,n)&&(Array.isArray(r)?t[n]=Ha(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=Ya(r):t[n]=r);return t}function Ka(e,t){for(;null!==e;){const n=gS(e,t);if(n){if(n.get)return Ga(n.get);if("function"==typeof n.value)return Ga(n.value)}e=pS(e)}return function(){return null}}function Za(e,t){const[n,r]=Gi.useState(e);return Gi.useEffect(()=>{const n=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(n)}},[e,t]),n}function Ja({isOpen:e,onClose:t}){const[n,r]=Gi.useState(""),a=Za(n,300),[s,i]=Gi.useState(0),{results:o,hasResults:c,resultCount:l}=function(e){const{accounts:t,transactions:n,budgets:r,goals:a,categories:s}=yr(),i=Gi.useMemo(()=>{if(!e||e.length<2)return[];const i=[],o=e.toLowerCase().split(" ").filter(e=>e.length>0);try{const e=(e,t)=>{const n=e.toLowerCase();let r=0;const a=[];return t.forEach(e=>{n.includes(e)&&(n===e?r+=100:n.startsWith(e)?r+=50:r+=20,a.push(e))}),{score:r,matches:a}},c=e=>{if(!e)return"";const t=s.find(t=>t.id===e);return t?.name||""};return t.forEach(t=>{try{const n=e(t.name,o),r=e(t.institution||"",o),a=e(t.type,o),s=n.score+r.score+a.score,c=[...n.matches,...r.matches,...a.matches];if(s>0){const e="number"==typeof t.balance?t.balance.toFixed(2):"0.00";i.push({id:t.id,type:"account",title:t.name,description:`${t.type} at ${t.institution||"Unknown"} - ${t.currency||"GBP"} ${e}`,data:t,score:s,matches:[...new Set(c)]})}}catch(n){console.error("Error searching account:",t.id,n)}}),n.forEach(n=>{try{const r=e(n.description,o),a=e(c(n.category),o),s=e(n.amount?.toString()||"",o),l=e(n.type,o),u=r.score+a.score+s.score+l.score,d=[...r.matches,...a.matches,...s.matches,...l.matches];if(u>0){const e=t.find(e=>e.id===n.accountId),r="number"==typeof n.amount?n.amount.toFixed(2):"0.00";i.push({id:n.id,type:"transaction",title:n.description,description:`${n.type} - ${r} ${e?.currency||"GBP"} (${c(n.category)})`,data:n,score:u,matches:[...new Set(d)]})}}catch(r){console.error("Error searching transaction:",n.id,r)}}),r.forEach(t=>{try{const n=e(c(t.category),o),r=e(t.amount?.toString()||"",o),a=e(t.period,o),s=n.score+r.score+a.score,l=[...n.matches,...r.matches,...a.matches];if(s>0){const e="number"==typeof t.amount?t.amount.toFixed(2):"0.00";i.push({id:t.id,type:"budget",title:`${c(t.category)} Budget`,description:`${t.period} budget - ${e} GBP`,data:t,score:s,matches:[...new Set(l)]})}}catch(n){console.error("Error searching budget:",t.id,n)}}),a.forEach(t=>{try{const n=e(t.name,o),r=e(t.type,o),a=e(t.targetAmount?.toString()||"",o),s=e(t.currentAmount?.toString()||"",o),c=n.score+r.score+a.score+s.score,l=[...n.matches,...r.matches,...a.matches,...s.matches];if(c>0){const e="number"==typeof t.currentAmount?t.currentAmount:0,n="number"==typeof t.targetAmount?t.targetAmount:1,r=n>0?(e/n*100).toFixed(1):"0.0";i.push({id:t.id,type:"goal",title:t.name,description:`${t.type} goal - ${e.toFixed(2)} / ${n.toFixed(2)} GBP (${r}%)`,data:t,score:c,matches:[...new Set(l)]})}}catch(n){console.error("Error searching goal:",t.id,n)}}),i.sort((e,t)=>t.score-e.score)}catch(c){return console.error("Error in global search:",c),[]}},[e,t,n,r,a,s]);return{results:i,hasResults:i.length>0,resultCount:i.length}}(a),u=ao(),d=Gi.useRef(null);Gi.useEffect(()=>{e&&d.current&&d.current.focus()},[e]),Gi.useEffect(()=>{e||(r(""),i(0))},[e]),Gi.useEffect(()=>{const n=n=>{if(e)switch(n.key){case"ArrowDown":n.preventDefault(),i(e=>Math.min(e+1,o.length-1));break;case"ArrowUp":n.preventDefault(),i(e=>Math.max(e-1,0));break;case"Enter":n.preventDefault(),o[s]&&h(o[s]);break;case"Escape":n.preventDefault(),t()}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,o,s,t]),Gi.useEffect(()=>{i(0)},[o]);const h=e=>{const n="true"===new URLSearchParams(window.location.search).get("demo");let r=(e=>{switch(e.type){case"account":return"/accounts";case"transaction":return`/transactions?search=${e.id}`;case"budget":return"/budget";case"goal":return"/goals";default:return"/"}})(e);n&&(r=r.includes("?")?`${r}&demo=true`:`${r}?demo=true`),u(r),t()},p=(e,t)=>{if(!e)return bo.jsx(bo.Fragment,{});if(!t||!t.length)return bo.jsx(bo.Fragment,{children:e});let n=e;t.forEach(e=>{if(e){const t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(`(${t})`,"gi");n=n.replace(r,'<mark class="bg-yellow-200 dark:bg-yellow-800 px-1 rounded">$1</mark>')}});const r=rj.sanitize(n,{ALLOWED_TAGS:["mark"],ALLOWED_ATTR:["class"]});return bo.jsx("span",{dangerouslySetInnerHTML:{__html:r}})};return e?bo.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-start justify-center pt-20",children:bo.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-2xl mx-4 max-h-[70vh] overflow-hidden",children:[bo.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-600",children:bo.jsxs("div",{className:"relative",children:[bo.jsx(qv,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),bo.jsx("input",{ref:d,type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Search accounts, transactions, budgets, goals...",className:"w-full pl-10 pr-10 py-3 bg-transparent border-0 focus:ring-0 text-gray-900 dark:text-white placeholder-gray-500 text-lg",autoComplete:"off","data-search-input":!0}),bo.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:bo.jsx(xv,{size:20})})]})}),bo.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[n.length<2&&bo.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[bo.jsx(qv,{size:48,className:"mx-auto mb-4 opacity-50"}),bo.jsx("p",{className:"text-lg",children:"Start typing to search..."}),bo.jsx("p",{className:"text-sm mt-2",children:"Search across accounts, transactions, budgets, and goals"})]}),n.length>=2&&!c&&bo.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[bo.jsx(qv,{size:48,className:"mx-auto mb-4 opacity-50"}),bo.jsx("p",{className:"text-lg",children:"No results found"}),bo.jsx("p",{className:"text-sm mt-2",children:"Try different keywords or check your spelling"})]}),c&&bo.jsxs("div",{className:"p-2",children:[bo.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 px-3 py-2",children:[l," result",1!==l?"s":""]}),o.map((e,t)=>{const n=(e=>{switch(e){case"account":return uv;case"transaction":return dv;case"budget":return ib;case"goal":return ob;default:return qv}})(e.type);return bo.jsxs("button",{onClick:()=>h(e),className:"w-full flex items-center p-3 rounded-lg transition-colors text-left "+(t===s?"bg-[var(--color-primary)]/10 border-l-2 border-[var(--color-primary)]":"hover:bg-gray-50 dark:hover:bg-gray-700"),children:[bo.jsx("div",{className:"p-2 rounded-lg mr-3 "+(t===s?"bg-[var(--color-primary)] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:bo.jsx(n,{size:20})}),bo.jsxs("div",{className:"flex-1 min-w-0",children:[bo.jsxs("div",{className:"flex items-center justify-between",children:[bo.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:p(e.title,e.matches)}),bo.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2 capitalize",children:e.type})]}),bo.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:p(e.description,e.matches)})]})]},`${e.type}-${e.id}`)})]})]}),n.length>=2&&bo.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:bo.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[bo.jsxs("div",{children:["\ud83d\udca1 ",bo.jsx("strong",{children:"Tips:"})," Use \u2191\u2193 to navigate, Enter to select, Escape to close"]}),bo.jsx("div",{children:"\ud83d\udd0d Search works across all your financial data"})]})})]})}):null}function Qa({isOpen:e,onClose:t}){const n=e=>{if(e.key.includes(" "))return e.key.split(" ").map(e=>e.toUpperCase()).join(" \u2192 ");const t=[];e.ctrlKey&&t.push("Ctrl"),e.altKey&&t.push("Alt"),e.shiftKey&&t.push("Shift"),e.metaKey&&t.push("Cmd");let n=e.key;return"comma"===n&&(n=",")," "===n&&(n="Space"),t.push(n.toUpperCase()),t.join("+")},r=[{key:"g h",description:"Go to Home",category:"Navigation",action:()=>{}},{key:"g d",description:"Go to Dashboard",category:"Navigation",action:()=>{}},{key:"g a",description:"Go to Accounts",category:"Navigation",action:()=>{}},{key:"g t",description:"Go to Transactions",category:"Navigation",action:()=>{}},{key:"g i",description:"Go to Investments",category:"Navigation",action:()=>{}},{key:"g b",description:"Go to Budget",category:"Navigation",action:()=>{}},{key:"g g",description:"Go to Goals",category:"Navigation",action:()=>{}},{key:"g r",description:"Go to Analytics",category:"Navigation",action:()=>{}},{key:"g s",description:"Go to Settings",category:"Navigation",action:()=>{}},{key:"n t",description:"New Transaction",category:"Quick Actions",action:()=>{}},{key:"n a",description:"New Account",category:"Quick Actions",action:()=>{}},{key:"n g",description:"New Goal",category:"Quick Actions",action:()=>{}},{key:"n b",description:"New Budget",category:"Quick Actions",action:()=>{}},{key:"Ctrl+K",description:"Open global search",category:"Global",action:()=>{},ctrlKey:!0},{key:"/",description:"Focus search input",category:"Global",action:()=>{}},{key:"?",description:"Show keyboard shortcuts",category:"Global",action:()=>{}},{key:"Escape",description:"Close modal/dialog",category:"Global",action:()=>{}},{key:"Ctrl+R",description:"Refresh data",category:"Utility",action:()=>{},ctrlKey:!0},{key:"Ctrl+P",description:"Print",category:"Utility",action:()=>{},ctrlKey:!0}].reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return e?bo.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:bo.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[bo.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-600",children:[bo.jsxs("div",{className:"flex items-center space-x-3",children:[bo.jsx(fb,{size:24,className:"text-[var(--color-primary)]"}),bo.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Keyboard Shortcuts"})]}),bo.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close keyboard shortcuts help",children:bo.jsx(xv,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),bo.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:Object.entries(r).map(([e,t])=>bo.jsxs("div",{className:"mb-6 last:mb-0",children:[bo.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:e}),bo.jsx("div",{className:"space-y-2",children:t.map((e,t)=>bo.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[bo.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:e.description}),bo.jsx("div",{className:"flex items-center space-x-1",children:n(e).includes("\u2192")?n(e).split(" \u2192 ").map((e,t)=>bo.jsxs(Vi.Fragment,{children:[t>0&&bo.jsx("span",{className:"text-gray-400 text-sm mx-1",children:"\u2192"}),bo.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-500 rounded",children:e})]},t)):n(e).split("+").map((e,t)=>bo.jsxs(Vi.Fragment,{children:[t>0&&bo.jsx("span",{className:"text-gray-400 text-sm",children:"+"}),bo.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-gray-600 border border-gray-200 dark:border-gray-500 rounded",children:e})]},t))})]},t))})]},e))}),bo.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-700",children:bo.jsxs("div",{className:"flex items-center justify-between",children:[bo.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[bo.jsxs("p",{className:"mb-1",children:[bo.jsx("strong",{children:"Tip:"})," Shortcuts work from anywhere in the app"]}),bo.jsxs("p",{children:["Press ",bo.jsx("kbd",{className:"px-1 py-0.5 text-xs bg-gray-200 dark:bg-gray-600 rounded",children:"?"})," to open this help"]})]}),bo.jsx("button",{onClick:t,className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-secondary)] transition-colors",children:"Got it!"})]})})]})}):null}function Xa(){const e=ao(),{activities:t,counts:n,markAsRead:r,markAllAsRead:a,clearActivities:s,getNewSinceLastCheck:i}=Rr(),[o,c]=Gi.useState(!1),[l,u]=Gi.useState("all"),[d,h]=Gi.useState(!1);Gi.useEffect(()=>{i().length>0&&(h(!0),setTimeout(()=>h(!1),3e3))},[t]);const p=()=>{const e=t.filter(e=>"sync"!==e.type&&"system"!==e.type);return"all"===l?e:e.filter(e=>e.type===l)},g=e=>{switch(e.type){case"transaction":return bo.jsx(hd,{size:16,className:"text-blue-500"});case"account":return bo.jsx(yd,{size:16,className:"text-green-500"});case"budget":return bo.jsx(bd,{size:16,className:"text-purple-500"});case"goal":return bo.jsx(wd,{size:16,className:"text-orange-500"});case"sync":return bo.jsx(ld,{size:16,className:"text-teal-500"});case"system":return bo.jsx(fd,{size:16,className:"text-gray-500"});default:return bo.jsx(sd,{size:16,className:"text-gray-500"})}},m=e=>e.read?"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";return bo.jsxs(bo.Fragment,{children:[bo.jsxs("button",{onClick:()=>c(!o),className:"relative p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Notifications"+(n.unread>0?` (${n.unread} unread)`:""),children:[bo.jsx(sd,{size:20,className:"text-gray-700 dark:text-gray-200"}),n.unread>0&&bo.jsx("span",{className:"absolute -top-1 -right-1 min-w-[20px] h-5 px-1 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:n.unread>99?"99+":n.unread}),d&&bo.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full animate-ping"})]}),o&&bo.jsxs(bo.Fragment,{children:[bo.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),bo.jsxs("div",{className:"absolute right-0 top-12 z-50 w-96 max-h-[600px] bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[bo.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[bo.jsxs("div",{className:"flex items-center justify-between",children:[bo.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Notifications"}),bo.jsxs("div",{className:"flex items-center gap-2",children:[n.unread>0&&bo.jsx("button",{onClick:a,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Mark all as read"}),bo.jsx("button",{onClick:()=>c(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:bo.jsx(kd,{size:16})})]})]}),bo.jsx("div",{className:"flex gap-1 mt-3 overflow-x-auto",children:[{value:"all",label:"All",count:n.total},{value:"transaction",label:"Transactions",count:n.transactions},{value:"account",label:"Accounts",count:n.accounts},{value:"budget",label:"Budgets",count:n.budgets},{value:"system",label:"System",count:n.system}].map(e=>bo.jsxs("button",{onClick:()=>u(e.value),className:"px-3 py-1 text-xs rounded-full transition-colors whitespace-nowrap "+(l===e.value?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.label,e.count>0&&bo.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",e.count,")"]})]},e.value))})]}),bo.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"450px"},children:0===p().length?bo.jsxs("div",{className:"p-8 text-center",children:[bo.jsx(sd,{size:48,className:"mx-auto mb-3 text-gray-300 dark:text-gray-600"}),bo.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications"}),bo.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Your recent activity will appear here"})]}):bo.jsx("div",{className:"p-2",children:(()=>{const e=p(),t=new Map;return e.forEach(e=>{const n=(e=>{const t=new Date,n=new Date(t);return n.setDate(n.getDate()-1),e.toDateString()===t.toDateString()?"Today":e.toDateString()===n.toDateString()?"Yesterday":e>new Date(t.getTime()-6048e5)?"This Week":"Earlier"})(e.timestamp);t.has(n)||t.set(n,[]),t.get(n).push(e)}),Array.from(t.entries()).map(([e,t])=>({date:e,items:t}))})().map(t=>bo.jsxs("div",{className:"mb-4",children:[bo.jsx("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase px-2 mb-2",children:t.date}),bo.jsx("div",{className:"space-y-1",children:t.items.map(t=>bo.jsx("button",{onClick:()=>(t=>{r(t.id),t.actionUrl&&(e(t.actionUrl),c(!1))})(t),className:`w-full p-3 rounded-lg border transition-all hover:shadow-sm text-left ${m(t)}`,children:bo.jsxs("div",{className:"flex items-start gap-3",children:[bo.jsx("div",{className:"mt-0.5",children:g(t)}),bo.jsxs("div",{className:"flex-1 min-w-0",children:[bo.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white "+(t.read?"":"font-semibold"),children:t.title}),bo.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5 truncate",children:t.description}),t.amount&&bo.jsxs("p",{className:"text-sm font-medium mt-1 "+(t.amount>0?"text-green-600":"text-red-600"),children:["\xa3",Math.abs(t.amount).toFixed(2)]}),bo.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:Wa(t.timestamp,{addSuffix:!0})})]}),!t.read&&bo.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"})]})},t.id))})]},t.date))})}),p().length>0&&bo.jsx("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700",children:bo.jsx("button",{onClick:()=>{confirm("Are you sure you want to clear all notifications?")&&s()},className:"w-full text-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Clear all notifications"})})]})]})]})}function es({type:e,className:t=""}){const{getUnreadCount:n}=Rr(),r=n(e);return 0===r?null:bo.jsx("span",{className:`ml-auto inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-medium text-white bg-blue-500 rounded-full ${t}`,children:r>9?"9+":r})}function ts({activeSequence:e}){const[t,n]=Gi.useState(!1);return Gi.useEffect(()=>{if(!e){const e=setTimeout(()=>n(!1),200);return()=>clearTimeout(e)}n(!0)},[e]),t&&e?bo.jsx("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-50 animate-fadeIn",children:bo.jsxs("div",{className:"bg-gray-900 dark:bg-gray-800 text-white px-6 py-3 rounded-lg shadow-xl flex items-center space-x-3",children:[bo.jsx(fb,{size:20,className:"text-primary"}),bo.jsxs("div",{className:"flex items-center space-x-2",children:[bo.jsx("kbd",{className:"px-2 py-1 text-sm font-semibold bg-gray-800 dark:bg-gray-700 border border-gray-600 rounded",children:e.toUpperCase()}),bo.jsx("span",{className:"text-sm",children:(()=>{switch(e){case"g":return"Go to... (press H/D/A/T/I/B/G/R/S)";case"n":return"New... (press T/A/G/B)";default:return"Waiting for next key..."}})()})]})]})}):null}function ns(){const e=function(){const e=Gi.useRef(sj.getConnectionState());return Gi.useEffect(()=>sj.onConnectionChange(t=>{e.current=t}),[]),e.current}(),[t,n]=Gi.useState(!1);return bo.jsxs("div",{className:"relative",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[bo.jsx("div",{className:"w-2 h-2 rounded-full "+(e.isConnected?"bg-green-500":e.isReconnecting?"bg-yellow-500 animate-pulse":"bg-red-500")}),t&&bo.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[e.isConnected?"Real-time sync active":e.isReconnecting?"Reconnecting to real-time sync...":"Real-time sync disconnected",bo.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-900"})]})]})}function rs(){const e=no(),[t,n]=Gi.useState(!1);return bo.jsxs(bo.Fragment,{children:[t&&bo.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>n(!1),children:bo.jsxs("div",{className:"absolute bottom-20 right-4 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-2 min-w-[200px]",children:[bo.jsxs(ro,{to:"/transactions?action=add",className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>n(!1),children:[bo.jsx(pv,{size:20}),bo.jsx("span",{children:"Add Transaction"})]}),bo.jsxs(ro,{to:"/accounts?action=add",className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>n(!1),children:[bo.jsx(uv,{size:20}),bo.jsx("span",{children:"Add Account"})]}),bo.jsxs(ro,{to:"/budget?action=add",className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>n(!1),children:[bo.jsx(fv,{size:20}),bo.jsx("span",{children:"Add Budget"})]}),bo.jsxs(ro,{to:"/goals?action=add",className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:()=>n(!1),children:[bo.jsx(cv,{size:20}),bo.jsx("span",{children:"Set Goal"})]})]})}),bo.jsx("button",{onClick:()=>n(!t),className:"md:hidden fixed bottom-20 right-4 w-14 h-14 bg-primary dark:bg-blue-600 text-white rounded-full shadow-lg z-50 flex items-center justify-center transition-transform "+(t?"rotate-45":""),"aria-label":"Quick actions",children:t?bo.jsx(xv,{size:24}):bo.jsx(vv,{size:24})}),bo.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50",role:"navigation","aria-label":"Mobile navigation",children:bo.jsx("div",{className:"flex justify-around items-center py-2 px-2 max-w-sm mx-auto",children:ij.map(t=>{const n="/"===(r=t.to)?"/"===e.pathname:e.pathname.startsWith(r);var r;const a=t.icon;return bo.jsxs(ro,{to:t.to,className:"flex flex-col items-center justify-center min-w-[48px] min-h-[48px] flex-1 py-2 px-1 rounded-lg transition-colors "+(n?"text-primary bg-primary/10":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),"aria-label":t.label,"aria-current":n?"page":void 0,children:[bo.jsxs("div",{className:"relative",children:[bo.jsx(a,{size:22}),t.badge&&bo.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:t.badge>99?"99+":t.badge})]}),bo.jsx("span",{className:"text-xs mt-1 truncate max-w-full "+(n?"font-medium":"font-normal"),children:t.label})]},t.to)})})})]})}function as(e,t={}){const{threshold:n=50,velocity:r=.3,preventDefaultTouchmove:a=!1,trackMouse:s=!1,delta:i=10,preventScrollOnSwipe:o=!0,longPressDelay:c=500,doubleTapDelay:l=300}=t,[u,d]=Gi.useState(!1),[h,p]=Gi.useState(null),[g,m]=Gi.useState(0),f=Gi.useRef(null),y=Gi.useRef(null),v=Gi.useRef(0),b=Gi.useRef(),w=Gi.useRef(0),x=Gi.useRef(0),k=Gi.useRef(null),_=Gi.useCallback((e,t)=>{const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return Math.sqrt(n*n+r*r)},[]),S=Gi.useCallback((e,t)=>{const n=e.clientX-t.clientX,r=e.clientY-t.clientY;return 180*Math.atan2(r,n)/Math.PI},[]),j=Gi.useCallback(t=>{if(1===t.touches.length){const n=t.touches[0];f.current={x:n.clientX,y:n.clientY,time:Date.now()},b.current=setTimeout(()=>{e.onLongPress&&f.current&&(e.onLongPress(),f.current=null)},c)}else 2===t.touches.length&&(w.current=_(t.touches[0],t.touches[1]),x.current=S(t.touches[0],t.touches[1]));d(!1),p(null)},[e,c,_,S]),I=Gi.useCallback(t=>{if(a&&t.preventDefault(),b.current&&clearTimeout(b.current),1===t.touches.length&&f.current){const e=t.touches[0],n=e.clientX-f.current.x,r=e.clientY-f.current.y,a=Math.sqrt(n*n+r*r);m(a),a>i&&(d(!0),Math.abs(n)>Math.abs(r)?p(n>0?"right":"left"):p(r>0?"down":"up"),o&&t.preventDefault())}else if(2===t.touches.length){const n=_(t.touches[0],t.touches[1]),r=S(t.touches[0],t.touches[1]);if(e.onPinch&&w.current){const t=n/w.current;e.onPinch(t)}if(e.onRotate&&x.current){const t=r-x.current;e.onRotate(t)}t.preventDefault()}},[a,o,i,e,_,S]),C=Gi.useCallback(t=>{if(b.current&&clearTimeout(b.current),!f.current)return;const a=Date.now(),s=a-f.current.time;if(1===t.changedTouches.length){const o=t.changedTouches[0];y.current={x:o.clientX,y:o.clientY,time:a};const c=y.current.x-f.current.x,u=y.current.y-f.current.y,d=Math.sqrt(c*c+u*u),h=Math.abs(c/s),p=Math.abs(u/s);d<i&&s<200?a-v.current<l?(e.onDoubleTap&&e.onDoubleTap(),v.current=0):(e.onTap&&e.onTap(),v.current=a):(d>n||h>r||p>r)&&(Math.abs(c)>Math.abs(u)?c>0&&e.onSwipeRight?e.onSwipeRight():c<0&&e.onSwipeLeft&&e.onSwipeLeft():u>0&&e.onSwipeDown?e.onSwipeDown():u<0&&e.onSwipeUp&&e.onSwipeUp())}f.current=null,y.current=null,w.current=0,x.current=0,d(!1),p(null),m(0)},[n,r,i,l,e]),E=Gi.useCallback(t=>{s&&(f.current={x:t.clientX,y:t.clientY,time:Date.now()},b.current=setTimeout(()=>{e.onLongPress&&f.current&&(e.onLongPress(),f.current=null)},c))},[s,e,c]),T=Gi.useCallback(e=>{if(!s||!f.current)return;b.current&&clearTimeout(b.current);const t=e.clientX-f.current.x,n=e.clientY-f.current.y,r=Math.sqrt(t*t+n*n);r>i&&(d(!0),m(r),Math.abs(t)>Math.abs(n)?p(t>0?"right":"left"):p(n>0?"down":"up"))},[s,i]),N=Gi.useCallback(t=>{if(!s||!f.current)return;b.current&&clearTimeout(b.current);const r=t.clientX-f.current.x,a=t.clientY-f.current.y,o=Math.sqrt(r*r+a*a),c=Date.now()-f.current.time;o<i&&c<200?e.onTap&&e.onTap():o>n&&(Math.abs(r)>Math.abs(a)?r>0&&e.onSwipeRight?e.onSwipeRight():r<0&&e.onSwipeLeft&&e.onSwipeLeft():a>0&&e.onSwipeDown?e.onSwipeDown():a<0&&e.onSwipeUp&&e.onSwipeUp()),f.current=null,d(!1),p(null),m(0)},[s,n,i,e]);return Gi.useEffect(()=>{const e=k.current;if(e)return e.addEventListener("touchstart",j,{passive:!a}),e.addEventListener("touchmove",I,{passive:!a}),e.addEventListener("touchend",C),s&&(e.addEventListener("mousedown",E),e.addEventListener("mousemove",T),e.addEventListener("mouseup",N),e.addEventListener("mouseleave",N)),()=>{e.removeEventListener("touchstart",j),e.removeEventListener("touchmove",I),e.removeEventListener("touchend",C),s&&(e.removeEventListener("mousedown",E),e.removeEventListener("mousemove",T),e.removeEventListener("mouseup",N),e.removeEventListener("mouseleave",N)),b.current&&clearTimeout(b.current)}},[j,I,C,E,T,N,a,s]),{ref:k,isSwipe:u,swipeDirection:h,swipeDistance:g,bind:{ref:k}}}function ss(e,{onSubmit:t,onClose:n,resetOnClose:r=!0}){const[a]=Gi.useState(()=>"function"==typeof e?e():e),[s,i]=Gi.useState(a),[o,c]=Gi.useState(!1),[l,u]=Gi.useState({}),d=Gi.useCallback((e,t)=>{i(n=>({...n,[e]:t})),u(t=>{if(t[e]){const n={...t};return delete n[e],n}return t})},[]),h=Gi.useCallback((e,t)=>{u(n=>({...n,[e]:t}))},[]),p=Gi.useCallback(()=>{u({})},[]),g=Gi.useCallback(()=>{i(a),u({}),c(!1)},[a]),m=Gi.useCallback(async e=>{e&&e.preventDefault(),c(!0),p();try{await t(s),r&&g(),n()}catch(a){console.error("Form submission error:",a),u({submit:a instanceof Error?a.message:"An error occurred"})}finally{c(!1)}},[s,t,n,r,p,g]);return{formData:s,setFormData:i,updateField:d,errors:l,setFieldError:h,clearErrors:p,isSubmitting:o,handleSubmit:m,reset:g}}function is({isOpen:e,onClose:t,onCategoryCreated:n,initialType:r="expense"}){const{categories:a,addCategory:s,getSubCategories:i,getDetailCategories:o}=yr(),[c,l]=Gi.useState(!1),[u,d]=Gi.useState(!1),{formData:h,updateField:p,reset:g}=ss({type:r,selectedCategory:"",newCategoryName:"",selectedSpecific:"",newSpecificName:""},{onSubmit:()=>{},onClose:t}),m=i(`type-${h.type}`),f=m.map(e=>e.name),y={expense:["Bills","Food","Household","Personal","Transportation","Entertainment","Healthcare","Shopping"],income:["Employment","Investments","Business","Other Income"]}[h.type].filter(e=>!f.includes(e));return bo.jsxs(fa,{isOpen:e,onClose:t,title:"Create New Category",size:"md",children:[bo.jsxs(ya,{className:"space-y-4",children:[bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type"}),bo.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[bo.jsx("button",{onClick:()=>{p("type","income"),p("selectedCategory",""),l(!1),p("newCategoryName",""),p("selectedSpecific",""),d(!1),p("newSpecificName","")},className:"px-4 py-2 rounded-lg font-medium transition-colors "+("income"===h.type?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"Income"}),bo.jsx("button",{onClick:()=>{p("type","expense"),p("selectedCategory",""),l(!1),p("newCategoryName",""),p("selectedSpecific",""),d(!1),p("newSpecificName","")},className:"px-4 py-2 rounded-lg font-medium transition-colors "+("expense"===h.type?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"Expense"})]})]}),bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),bo.jsxs("select",{value:c?"new":h.selectedCategory,onChange:e=>(e=>{if("new"===e)l(!0),p("selectedCategory","");else if(e.startsWith("suggest-")){const t=e.replace("suggest-","");l(!0),p("newCategoryName",t),p("selectedCategory","")}else l(!1),p("selectedCategory",e),p("newCategoryName","");p("selectedSpecific",""),d(!1),p("newSpecificName","")})(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:[bo.jsx("option",{value:"",children:"Select a category"}),m.map(e=>bo.jsx("option",{value:e.id,children:e.name},e.id)),y.length>0&&bo.jsx("optgroup",{label:"Suggestions",children:y.map(e=>bo.jsxs("option",{value:`suggest-${e}`,children:[e," (create new)"]},e))}),bo.jsx("option",{value:"new",children:"+ New Category"})]}),c&&bo.jsx("input",{type:"text",value:h.newCategoryName,onChange:e=>p("newCategoryName",e.target.value),placeholder:"Enter new category name",className:"mt-2 w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",autoFocus:!0})]}),(h.selectedCategory||c&&h.newCategoryName)&&bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Specific Category"}),h.selectedCategory&&!c?bo.jsxs("select",{value:u?"new":h.selectedSpecific,onChange:e=>{var t;"new"===(t=e.target.value)?(d(!0),p("selectedSpecific","")):(d(!1),p("selectedSpecific",t),p("newSpecificName",""))},className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:[bo.jsx("option",{value:"",children:"Select specific category (optional)"}),o(h.selectedCategory).map(e=>bo.jsx("option",{value:e.id,children:e.name},e.id)),bo.jsx("option",{value:"new",children:"+ New Specific Category"})]}):bo.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"Save the category first to add specific categories"}),u&&h.selectedCategory&&bo.jsx("input",{type:"text",value:h.newSpecificName,onChange:e=>p("newSpecificName",e.target.value),placeholder:"Enter new specific category name",className:"mt-2 w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",autoFocus:!0})]})]}),bo.jsx(va,{children:bo.jsxs("div",{className:"flex gap-2 w-full",children:[bo.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),bo.jsxs("button",{onClick:()=>{let e=h.selectedCategory||h.selectedSpecific;if(c&&h.newCategoryName.trim()){const t={name:h.newCategoryName.trim(),type:h.type,level:"sub",parentId:`type-${h.type}`,isSystem:!1};s(t),e=`new-sub-${h.newCategoryName.trim()}`}if((h.selectedCategory||e)&&u&&h.newSpecificName.trim()){const t=h.selectedCategory||e,n={name:h.newSpecificName.trim(),type:h.type,level:"detail",parentId:t.startsWith("new-sub-")?`type-${h.type}`:t,isSystem:!1};s(n),e=`new-detail-${h.newSpecificName.trim()}`}n&&e&&setTimeout(()=>{if(e.startsWith("new-")){const t=e.includes("detail")?h.newSpecificName.trim():h.newCategoryName.trim(),r=e.includes("detail")?"detail":"sub",s=a.find(e=>e.name===t&&e.level===r);s&&n&&n(s.id)}else n&&n(e)},150),g(),l(!1),d(!1),t()},disabled:!(h.selectedCategory||c&&h.newCategoryName.trim()||h.selectedSpecific||u&&h.newSpecificName.trim()),className:"flex-1 px-4 py-2 text-sm sm:text-base bg-primary text-white rounded-lg hover:bg-secondary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[bo.jsx(oj,{size:16}),"Create Category"]})]})})]})}function os(e){return lj[e]||e}function cs(e,t="GBP"){const n=os(t),r=e<0,a=Math.abs(e),s=new Intl.NumberFormat("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a);return"CHF"===t?r?`-${s} ${n}`:`${s} ${n}`:r?`-${n}${s}`:`${n}${s}`}function ls(e,t,n){if(t===n)return e;const r=function(e,t){if(e===t)return 1;const n=uj[e]||1,r=uj[t]||1;return"GBP"===e?r:"GBP"===t?1/n:r/n}(t,n);return e*r}async function us(){const e=Date.now();if(cj&&e-cj.timestamp<36e5)return cj.rates;const t=await async function(){try{const e=await fetch("https://api.exchangerate-api.com/v4/latest/GBP");if(!e.ok)throw new Error("Failed to fetch exchange rates");return(await e.json()).rates}catch(e){return console.error("Error fetching exchange rates:",e),{GBP:1,USD:1.27,EUR:1.17,CAD:1.71,AUD:1.92,JPY:189.5,CHF:1.12,CNY:9.19,INR:105.85,NZD:2.09}}}();return cj={rates:t,timestamp:e},t}async function ds(e,t){try{const n=await us();return e.reduce((e,{amount:r,currency:a})=>{if(a===t)return e+r;if(!n[a]||!n[t])return console.warn(`Missing exchange rate for ${a} or ${t}`),e+r;const s="GBP"===a?r:r/n[a];return e+("GBP"===t?s:s*n[t])},0)}catch(n){return console.error("Currency conversion error:",n),e.reduce((e,{amount:t})=>e+t,0)}}function hs({isOpen:e,onClose:t,title:n,children:r,snapPoints:a=[.9],initialSnapPoint:s=0,showHandle:i=!0,closeOnOutsideClick:o=!0}){const[c,l]=Gi.useState(0),[u,d]=Gi.useState(!1),[h,p]=Gi.useState(0),[g,m]=Gi.useState(0),f=Gi.useRef(null),y=Gi.useRef(null);return Gi.useEffect(()=>{if(e){const e=window.innerHeight*a[s];l(e),document.body.style.overflow="hidden";const n=e=>{"Escape"===e.key&&t()};return document.addEventListener("keydown",n),()=>{document.body.style.overflow="",document.removeEventListener("keydown",n)}}},[e,a,s,t]),e?bo.jsxs(bo.Fragment,{children:[bo.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity",onClick:()=>{o&&t()},"aria-hidden":"true"}),bo.jsxs("div",{ref:f,className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 rounded-t-2xl shadow-2xl z-50 transition-transform",style:{height:`${c}px`,transform:e?"translateY(0)":"translateY(100%)",transition:u?"none":"transform 0.3s ease-out, height 0.3s ease-out"},role:"dialog","aria-modal":"true","aria-labelledby":n?"bottom-sheet-title":void 0,children:[i&&bo.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 cursor-grab active:cursor-grabbing",onTouchStart:e=>{const t=e.touches[0];p(t.clientY),m(c),d(!0)},onTouchMove:e=>{if(!u)return;const t=e.touches[0],n=h-t.clientY,r=Math.max(0,Math.min(window.innerHeight,g+n));l(r)},onTouchEnd:()=>{if(!u)return;d(!1);const e=window.innerHeight,n=c/e;let r=a[0],s=Math.abs(n-a[0]);for(const t of a){const e=Math.abs(n-t);e<s&&(s=e,r=t)}n<.2*a[0]?t():l(e*r)},children:bo.jsx("div",{className:"flex justify-center pt-3",children:bo.jsx("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})})}),n&&bo.jsxs("div",{className:"flex items-center justify-between px-4 py-4 border-b border-gray-200 dark:border-gray-700",children:[bo.jsx("h2",{id:"bottom-sheet-title",className:"text-lg font-semibold text-gray-900 dark:text-white",children:n}),bo.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close bottom sheet",children:bo.jsx(xv,{size:20})})]}),bo.jsx("div",{ref:y,className:"flex-1 overflow-y-auto overscroll-contain",style:{maxHeight:n?`calc(${c}px - ${i?"3rem":"0px"} - 4rem)`:`calc(${c}px - ${i?"3rem":"0px"})`},children:r})]})]}):null}function ps({isOpen:e,onClose:t,title:n,children:r,size:a="md",className:s,mobileSnapPoints:i=[.9],mobileInitialSnapPoint:o=0,showMobileHandle:c=!0}){return"undefined"!=typeof window&&window.innerWidth<768?bo.jsx(hs,{isOpen:e,onClose:t,title:n,snapPoints:i,initialSnapPoint:o,showHandle:c,children:r}):bo.jsx(fa,{isOpen:e,onClose:t,title:n,size:a,className:s,children:r})}function gs({value:e,onChange:t,placeholder:n="Enter your notes...",maxHeight:r="200px",showPreview:a=!0,className:s=""}){const[i,o]=Gi.useState(!1),c=Gi.useRef(null),l=(n,r="",a="")=>{const s=c.current;if(!s)return;const i=s.selectionStart,o=s.selectionEnd,l=e.substring(i,o)||a,u=e.substring(0,i)+n+l+r+e.substring(o);t(u),setTimeout(()=>{s.focus();const e=i+n.length,t=e+l.length;s.setSelectionRange(e,t)},0)},u=[{icon:bo.jsx(tw,{size:14}),title:"Bold",action:()=>l("**","**","bold text")},{icon:bo.jsx(nw,{size:14}),title:"Italic",action:()=>l("*","*","italic text")},{icon:bo.jsx(iw,{size:14}),title:"Code",action:()=>l("`","`","code")},{icon:bo.jsx(Qv,{size:14}),title:"Link",action:()=>l("[","](url)","link text")},{icon:bo.jsx(rw,{size:14}),title:"List",action:()=>l("- ","","list item")},{icon:bo.jsx(aw,{size:14}),title:"Quote",action:()=>l("> ","","quote")}];return bo.jsxs("div",{className:`markdown-editor border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden ${s}`,children:[bo.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 px-3 py-2 border-b border-gray-300 dark:border-gray-600",children:[bo.jsx("div",{className:"flex items-center gap-1",children:u.map((e,t)=>bo.jsx("button",{onClick:e.action,title:e.title,className:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:e.icon},t))}),a&&bo.jsxs("div",{className:"flex items-center gap-1",children:[bo.jsx("button",{onClick:()=>o(!1),className:"p-1.5 rounded text-sm "+(i?"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"),children:bo.jsx(bv,{size:14})}),bo.jsx("button",{onClick:()=>o(!0),className:"p-1.5 rounded text-sm "+(i?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:bo.jsx(Vv,{size:14})})]})]}),bo.jsx("div",{className:"relative",children:i&&a?bo.jsx("div",{className:"p-3 min-h-[100px] prose prose-sm max-w-none dark:prose-invert",style:{maxHeight:r},children:e?bo.jsx("div",{dangerouslySetInnerHTML:{__html:(e=>{const t=e.replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mb-2">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-xl font-semibold mb-2">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mb-3">$1</h1>').replace(/\*\*\*(.*)\*\*\*/gim,"<strong><em>$1</em></strong>").replace(/\*\*(.*)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*)\*/gim,"<em>$1</em>").replace(/`([^`]+)`/gim,'<code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm">$1</code>').replace(/\[([^\]]+)\]\(([^)]+)\)/gim,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">$1</a>').replace(/^\* (.+)$/gim,'<li class="ml-4">\u2022 $1</li>').replace(/^- (.+)$/gim,'<li class="ml-4">\u2022 $1</li>').replace(/^> (.+)$/gim,'<blockquote class="border-l-4 border-gray-300 dark:border-gray-600 pl-4 italic text-gray-600 dark:text-gray-400">$1</blockquote>').replace(/\n/gim,"<br>");return rj.sanitize(t,{ALLOWED_TAGS:["h1","h2","h3","p","br","strong","em","code","a","li","blockquote"],ALLOWED_ATTR:["href","target","rel","class"],ALLOW_DATA_ATTR:!1})})(e)}}):bo.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic",children:"Nothing to preview..."})}):bo.jsx("textarea",{ref:c,value:e,onChange:e=>t(e.target.value),placeholder:n,className:"w-full p-3 border-none resize-none focus:outline-none bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",style:{maxHeight:r,minHeight:"100px"}})}),bo.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 px-3 py-2 text-xs text-gray-500 dark:text-gray-400 border-t border-gray-300 dark:border-gray-600",children:bo.jsxs("div",{className:"flex flex-wrap gap-4",children:[bo.jsx("span",{children:"**bold**"}),bo.jsx("span",{children:"*italic*"}),bo.jsx("span",{children:"`code`"}),bo.jsx("span",{children:"[link](url)"}),bo.jsx("span",{children:"- list"}),bo.jsx("span",{children:"> quote"})]})})]})}function ms(e,t,n){function r(n,r){var s;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(s=n._zod).traits??(s.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in a.prototype)e in n||Object.defineProperty(n,e,{value:a.prototype[e].bind(n)});n._zod.constr=a,n._zod.def=r}function a(e){var t;const a=n?.Parent?new i:this;r(a,e),(t=a._zod).deferred??(t.deferred=[]);for(const n of a._zod.deferred)n();return a}const s=n?.Parent??Object;class i extends s{}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}function fs(e){return gj}function ys(e,t){return"bigint"==typeof t?t.toString():t}function vs(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function bs(e){return null==e}function ws(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function xs(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==mj)return void 0===r&&(r=mj,r=n()),r},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function ks(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function _s(...e){const t={};for(const n of e){const e=Object.getOwnPropertyDescriptors(n);Object.assign(t,e)}return Object.defineProperties({},t)}function Ss(e){return JSON.stringify(e)}function js(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Is(e){if(!1===js(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==js(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}function Cs(e){return Is(e)?{...e}:Array.isArray(e)?[...e]:e}function Es(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ts(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function Ns(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function As(e,t=0){if(!0===e.aborted)return!0;for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function Os(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function Ds(e){return"string"==typeof e?e:e?.message}function Ps(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const a=Ds(e.inst?._zod.def?.error?.(e))??Ds(t?.error?.(e))??Ds(n.customError?.(e))??Ds(n.localeError?.(e))??"Invalid input";r.message=a}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function Ms(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function Ls(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}function Rs(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Us(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}function zs(e,t,n){e.issues.length&&t.issues.push(...Os(n,e.issues)),t.value[n]=e.value}function $s(e,t,n,r){e.issues.length&&t.issues.push(...Os(n,e.issues)),void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}function Bs(e){const t=Object.keys(e.shape);for(const a of t)if(!e.shape?.[a]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${a}": expected a Zod schema`);const n=(r=e.shape,Object.keys(r).filter(e=>"optional"===r[e]._zod.optin&&"optional"===r[e]._zod.optout));var r;return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(n)}}function Fs(e,t,n,r,a,s){const i=[],o=a.keySet,c=a.catchall._zod,l=c.def.type;for(const u of Object.keys(t)){if(o.has(u))continue;if("never"===l){i.push(u);continue}const a=c.run({value:t[u],issues:[]},r);a instanceof Promise?e.push(a.then(e=>$s(e,n,u,t))):$s(a,n,u,t)}return i.length&&n.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:s}),e.length?Promise.all(e).then(()=>n):n}function Ws(e,t,n,r){for(const s of e)if(0===s.issues.length)return t.value=s.value,t;const a=e.filter(e=>!As(e));return 1===a.length?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>Ps(e,r,fs())))}),t)}function qs(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(Is(e)&&Is(t)){const n=Object.keys(t),r=Object.keys(e).filter(e=>-1!==n.indexOf(e)),a={...e,...t};for(const s of r){const n=qs(e[s],t[s]);if(!n.valid)return{valid:!1,mergeErrorPath:[s,...n.mergeErrorPath]};a[s]=n.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const a=qs(e[r],t[r]);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Gs(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),As(e))return e;const r=qs(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}function Vs(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}function Hs(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}function Ys(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}function Ks(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}function Zs(e){return e.value=Object.freeze(e.value),e}function Js(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(Ls(e))}}function Qs(){return new wC}function Xs(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Ns(t)})}function ei(e,t){return new uI({check:"less_than",...Ns(t),value:e,inclusive:!1})}function ti(e,t){return new uI({check:"less_than",...Ns(t),value:e,inclusive:!0})}function ni(e,t){return new dI({check:"greater_than",...Ns(t),value:e,inclusive:!1})}function ri(e,t){return new dI({check:"greater_than",...Ns(t),value:e,inclusive:!0})}function ai(e,t){return new hI({check:"multiple_of",...Ns(t),value:e})}function si(e,t){return new gI({check:"max_length",...Ns(t),maximum:e})}function ii(e,t){return new mI({check:"min_length",...Ns(t),minimum:e})}function oi(e,t){return new fI({check:"length_equals",...Ns(t),length:e})}function ci(e){return new SI({check:"overwrite",tx:e})}function li(e){return function(e,t){return new WC({type:"string",...Ns(t)})}(0,e)}function ui(e){return function(e,t){return new uE({type:"number",checks:[],...Ns(t)})}(0,e)}function di(e){return function(e,t){return new dE({type:"number",check:"number_format",abort:!1,format:"safeint",...Ns(t)})}(0,e)}function hi(e){return function(e,t){return new hE({type:"boolean",...Ns(t)})}(0,e)}function pi(){return new pE({type:"unknown"})}function gi(e,t){return function(e,t,n){return new mE({type:"array",element:t,...Ns(n)})}(0,e,t)}function mi(e,t){const n={type:"object",shape:e??{},...Ns(t)};return new fE(n)}function fi(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new bE({type:"enum",entries:n,...Ns(t)})}function yi(e){return new xE({type:"optional",innerType:e})}function vi(e){return new kE({type:"nullable",innerType:e})}function bi(e,t){return new CE({type:"pipe",in:e,out:t})}function wi({message:e="Loading...",size:t="medium",className:n=""}){return bo.jsxs("div",{className:`flex flex-col items-center justify-center ${{small:"h-32",medium:"h-48",large:"h-64"}[t]} ${n}`,children:[bo.jsx(Zv,{size:{small:24,medium:32,large:48}[t],className:"text-primary animate-spin mb-4"}),bo.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e})]})}function xi({isLoading:e,children:t,loadingText:n="Loading...",className:r="",disabled:a=!1,onClick:s}){return bo.jsxs("button",{onClick:s,disabled:e||a,className:`relative ${r} ${e?"cursor-not-allowed":""}`,children:[bo.jsx("span",{className:e?"invisible":"",children:t}),e&&bo.jsxs("span",{className:"absolute inset-0 flex items-center justify-center",children:[bo.jsx(Zv,{size:16,className:"animate-spin mr-2"}),n]})]})}function ki({isOpen:e,onClose:t}){const{accounts:n,addTransaction:r,categories:a,getSubCategories:s,getDetailCategories:i}=yr(),[o,c]=Gi.useState(!1),[l,u]=Gi.useState({}),{showSuccess:d,showError:h}=Mr(),{formData:p,updateField:g,handleSubmit:m,isSubmitting:f}=ss({description:"",amount:"",type:"expense",category:"",subCategory:"",accountId:"",date:(new Date).toISOString().split("T")[0],notes:""},{onSubmit:e=>{try{u({});const n=WE.validateTransaction({description:e.description,amount:e.amount,type:"transfer"===e.type?"expense":e.type,category:e.category,accountId:e.accountId,date:e.date,notes:e.notes||void 0}),a=parseFloat(n.amount),s="expense"===e.type?-Math.abs(a):Math.abs(a);r({description:n.description,amount:s,type:e.type,category:n.category,accountId:n.accountId,date:new Date(n.date),notes:n.notes}),d("Transaction added successfully"),t()}catch(n){if(n instanceof CC){u(WE.formatErrors(n));const e=n.issues[0];h(e.message)}else h(n),console.error("Failed to add transaction:",n),u({general:"Unable to save transaction. Please try again."})}},onClose:()=>{u({}),t()}});return bo.jsxs(bo.Fragment,{children:[bo.jsx(ps,{isOpen:e,onClose:t,title:"Add Transaction",size:"md",mobileSnapPoints:[.5,.9],mobileInitialSnapPoint:1,children:bo.jsxs("form",{onSubmit:m,children:[bo.jsx("div",{className:"p-4 md:p-6",children:bo.jsxs("div",{className:"space-y-4",children:[bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),bo.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[bo.jsx("button",{type:"button",onClick:()=>g("type","income"),className:"px-4 py-2 min-h-[44px] rounded-lg font-medium transition-colors "+("income"===p.type?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),"aria-label":"Select income transaction type","aria-pressed":"income"===p.type,children:"Income"}),bo.jsx("button",{type:"button",onClick:()=>g("type","expense"),className:"px-4 py-2 min-h-[44px] rounded-lg font-medium transition-colors "+("expense"===p.type?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),"aria-label":"Select expense transaction type","aria-pressed":"expense"===p.type,children:"Expense"}),bo.jsx("button",{type:"button",onClick:()=>g("type","transfer"),className:"px-4 py-2 min-h-[44px] rounded-lg font-medium transition-colors "+("transfer"===p.type?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),"aria-label":"Select transfer transaction type","aria-pressed":"transfer"===p.type,children:"Transfer"})]})]}),bo.jsxs("div",{children:[bo.jsx("label",{htmlFor:"account-select",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account"}),bo.jsxs("select",{id:"account-select",value:p.accountId,onChange:e=>g("accountId",e.target.value),className:"w-full px-3 py-3 sm:py-2 text-base sm:text-sm bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-blue-400 focus:border-transparent dark:text-white min-h-[48px] sm:min-h-[auto]",required:!0,"aria-label":"Select account for transaction",children:[bo.jsx("option",{value:"",children:"Select account"}),n.map(e=>bo.jsxs("option",{value:e.id,children:[e.name," (",e.type,")"]},e.id))]})]}),bo.jsxs("div",{children:[bo.jsx("label",{htmlFor:"description-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),bo.jsx("input",{id:"description-input",type:"text",value:p.description,onChange:e=>{g("description",e.target.value),l.description&&u(e=>({...e,description:""}))},className:`w-full px-3 py-3 sm:py-2 text-base sm:text-sm bg-white dark:bg-gray-700 border-2 ${l.description?"border-red-500":"border-gray-300 dark:border-gray-500"} rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-blue-400 focus:border-transparent dark:text-white min-h-[48px] sm:min-h-[auto]`,placeholder:"e.g., Grocery shopping",maxLength:500,required:!0,"aria-label":"Transaction description","aria-describedby":l.description?"description-error":void 0}),l.description&&bo.jsx("p",{id:"description-error",className:"mt-1 text-sm text-red-500",role:"alert",children:l.description})]}),bo.jsxs("div",{children:[bo.jsxs("label",{htmlFor:"amount-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Amount ",p.accountId&&(()=>{const e=n.find(e=>e.id===p.accountId);return e?`(${os(e.currency)})`:"(\xa3)"})()]}),bo.jsx("input",{id:"amount-input",type:"number",step:"0.01",value:p.amount,onChange:e=>{g("amount",e.target.value),l.amount&&u(e=>({...e,amount:""}))},className:`w-full px-3 py-3 sm:py-2 text-base sm:text-sm bg-white dark:bg-gray-700 border-2 ${l.amount?"border-red-500":"border-gray-300 dark:border-gray-500"} rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-blue-400 focus:border-transparent dark:text-white min-h-[48px] sm:min-h-[auto]`,placeholder:"0.00",min:"0.01",required:!0,"aria-label":"Transaction amount","aria-describedby":l.amount?"amount-error":void 0}),l.amount&&bo.jsx("p",{id:"amount-error",className:"mt-1 text-sm text-red-500",role:"alert",children:l.amount})]}),bo.jsxs("div",{className:"space-y-3",children:[bo.jsxs("div",{children:[bo.jsxs("div",{className:"flex justify-between items-center mb-1",children:[bo.jsx("label",{htmlFor:"category-select",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),bo.jsxs("button",{type:"button",onClick:()=>c(!0),className:"text-sm text-primary hover:text-secondary flex items-center gap-1 p-2 min-h-[44px]",children:[bo.jsx(vv,{size:14}),"Create new category"]})]}),bo.jsxs("select",{id:"category-select",value:p.subCategory,onChange:e=>{g("subCategory",e.target.value),g("category","")},className:"w-full px-3 py-3 sm:py-2 text-base sm:text-sm bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-blue-400 focus:border-transparent dark:text-white min-h-[48px] sm:min-h-[auto]",required:!0,"aria-label":"Select transaction category",children:[bo.jsx("option",{value:"",children:"Select category"}),s(`type-${p.type}`).map(e=>bo.jsx("option",{value:e.id,children:e.name},e.id))]})]}),p.subCategory&&bo.jsxs("div",{children:[bo.jsx("label",{htmlFor:"subcategory-select",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-category"}),bo.jsxs("select",{id:"subcategory-select",value:p.category,onChange:e=>g("category",e.target.value),className:"w-full px-3 py-3 sm:py-2 text-base sm:text-sm bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-blue-400 focus:border-transparent dark:text-white min-h-[48px] sm:min-h-[auto]",required:!0,"aria-label":"Select transaction sub-category",children:[bo.jsx("option",{value:"",children:"Select sub-category"}),i(p.subCategory).map(e=>bo.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),bo.jsxs("div",{children:[bo.jsx("label",{htmlFor:"date-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),bo.jsx("input",{id:"date-input",type:"date",value:p.date,onChange:e=>g("date",e.target.value),className:"w-full px-3 py-3 sm:py-2 text-base sm:text-sm bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-blue-400 focus:border-transparent dark:text-white min-h-[48px] sm:min-h-[auto]",required:!0,"aria-label":"Transaction date"})]}),bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (Optional)"}),bo.jsx(gs,{value:p.notes,onChange:e=>{e.length<=1e3&&g("notes",e)},placeholder:"Add any additional notes or details...",maxHeight:"150px",className:"w-full"}),p.notes.length>900&&bo.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[1e3-p.notes.length," characters remaining"]})]}),l.general&&bo.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg",children:l.general})]})}),bo.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 md:p-6",children:bo.jsxs("div",{className:"flex gap-3 w-full",children:[bo.jsx("button",{type:"button",onClick:t,disabled:f,className:"flex-1 px-4 py-2 min-h-[44px] text-sm sm:text-base border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),bo.jsx(xi,{isLoading:f,loadingText:"Adding...",className:"flex-1 px-4 py-2 min-h-[44px] text-sm sm:text-base bg-primary text-white rounded-lg hover:bg-secondary disabled:opacity-50",children:"Add Transaction"})]})})]})}),bo.jsx(is,{isOpen:o,onClose:()=>c(!1),initialType:"transfer"===p.type?"expense":p.type,onCategoryCreated:e=>{const t=a.find(t=>t.id===e);t&&("detail"===t.level?(g("subCategory",t.parentId||""),g("category",e)):(g("subCategory",e),g("category",""))),c(!1)}})]})}function _i({isOpen:e,onClose:t,initialType:n="expense"}){const{accounts:r,addTransaction:a,categories:s}=yr(),{showSuccess:i,showError:o}=Mr(),[c,l]=Gi.useState(n),[u,d]=Gi.useState(""),[h,p]=Gi.useState(""),[g,m]=Gi.useState(r[0]?.id||""),[f,y]=Gi.useState(r[1]?.id||""),[v,b]=Gi.useState(""),w=Gi.useRef(null);Gi.useEffect(()=>{e&&w.current&&setTimeout(()=>w.current?.focus(),100)},[e]),Gi.useEffect(()=>{l(n)},[n]);const x=s.filter(e=>e.type===("transfer"===c?"expense":c)&&!e.parentId);Gi.useEffect(()=>{x.length>0&&!v&&b(x[0].id)},[x,v]);const k=e=>{if(e.preventDefault(),u&&h)if(g)if("transfer"!==c||f)try{const e={amount:parseFloat(u),description:h,type:c,accountId:g,category:v,date:new Date};"transfer"===c&&f&&(e.toAccountId=f),a(e),i(("expense"===c?"Expense":"income"===c?"Income":"Transfer")+" added quickly!"),d(""),p(""),t()}catch(n){o(n instanceof Error?n.message:"Failed to add transaction")}else o("Please select a destination account");else o("Please select an account");else o("Please enter amount and description")};return e?bo.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[bo.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),bo.jsxs("div",{className:"relative bg-white dark:bg-gray-800 w-full sm:max-w-md rounded-t-2xl sm:rounded-2xl shadow-2xl transform transition-transform duration-300",onKeyDown:e=>{"Escape"===e.key?t():"Enter"===e.key&&e.metaKey&&k(e)},children:[bo.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[bo.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Quick ","expense"===c?"Expense":"income"===c?"Income":"Transfer"]}),bo.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close",children:bo.jsx(xv,{size:20})})]}),bo.jsxs("form",{onSubmit:k,className:"p-4 space-y-4",children:[bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),bo.jsxs("div",{className:"relative",children:[bo.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400",children:os("USD")}),bo.jsx("input",{ref:w,type:"number",step:"0.01",value:u,onChange:e=>d(e.target.value),className:"w-full pl-8 pr-3 py-3 text-lg font-medium bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"0.00",required:!0})]})]}),bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),bo.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"What's this for?",required:!0})]}),bo.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"transfer"===c?"From Account":"Account"}),bo.jsx("select",{value:g,onChange:e=>m(e.target.value),className:"w-full px-2 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",required:!0,children:r.map(e=>bo.jsx("option",{value:e.id,children:e.name},e.id))})]}),bo.jsx("div",{children:"transfer"===c?bo.jsxs(bo.Fragment,{children:[bo.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"To Account"}),bo.jsx("select",{value:f,onChange:e=>y(e.target.value),className:"w-full px-2 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",required:!0,children:r.filter(e=>e.id!==g).map(e=>bo.jsx("option",{value:e.id,children:e.name},e.id))})]}):bo.jsxs(bo.Fragment,{children:[bo.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Category"}),bo.jsx("select",{value:v,onChange:e=>b(e.target.value),className:"w-full px-2 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",required:"transfer"!==c,children:x.map(e=>bo.jsx("option",{value:e.id,children:e.name},e.id))})]})})]}),bo.jsxs("div",{className:"flex gap-2",children:[bo.jsx("button",{type:"button",onClick:()=>l("expense"),className:"flex-1 py-2 px-3 rounded-lg font-medium transition-colors "+("expense"===c?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:"Expense"}),bo.jsx("button",{type:"button",onClick:()=>l("income"),className:"flex-1 py-2 px-3 rounded-lg font-medium transition-colors "+("income"===c?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:"Income"}),bo.jsx("button",{type:"button",onClick:()=>l("transfer"),className:"flex-1 py-2 px-3 rounded-lg font-medium transition-colors "+("transfer"===c?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:"Transfer"})]}),bo.jsxs("button",{type:"submit",className:"w-full py-3 bg-primary hover:bg-secondary text-white font-medium rounded-lg transition-colors",children:["Add ","expense"===c?"Expense":"income"===c?"Income":"Transfer"," (\u2318\u21b5)"]})]}),bo.jsxs("div",{className:"px-4 pb-3 text-xs text-gray-500 dark:text-gray-400",children:["Tip: Press ",bo.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded",children:"Esc"})," to cancel or ",bo.jsx("kbd",{className:"px-1 py-0.5 bg-gray-200 dark:bg-gray-700 rounded",children:"\u2318\u21b5"})," to save"]})]})]}):null}function Si({className:e=""}){const[t,n]=Gi.useState(!1),[r,a]=Gi.useState(!1),[s,i]=Gi.useState(!0),[o,c]=Gi.useState(!0),[l,u]=Gi.useState(0),d=no(),{showInfo:h}=Mr(),p=["/login","/welcome","/settings"].some(e=>d.pathname.startsWith(e));return Gi.useEffect(()=>{if(p)return;const e=()=>{const e=window.scrollY;c(!(e>l&&e>100)),u(e)};return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[l,p]),Gi.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"n"===e.key&&(e.preventDefault(),s?a(!0):n(!0))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[s]),p?bo.jsx(bo.Fragment,{}):bo.jsxs(bo.Fragment,{children:[bo.jsxs("button",{onClick:()=>s?a(!0):n(!0),onContextMenu:e=>{e.preventDefault();const t=!s;i(t),h(t?"Quick entry mode activated":"Full form mode activated")},className:`\n          fixed bottom-6 right-6 z-40\n          w-14 h-14 sm:w-16 sm:h-16\n          bg-primary hover:bg-secondary\n          text-white\n          rounded-full\n          shadow-lg hover:shadow-xl\n          flex items-center justify-center\n          transition-all duration-300 ease-out\n          transform hover:scale-110\n          ${o?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}\n          ${e}\n        `,"aria-label":"Add new transaction (Ctrl+N)",title:"Add new transaction (Ctrl+N)",children:[bo.jsx(vv,{size:24,className:"sm:hidden"}),bo.jsx(vv,{size:28,className:"hidden sm:block"})]}),bo.jsx("div",{className:`\n          hidden lg:block\n          fixed bottom-7 right-24 z-40\n          bg-gray-900 text-white\n          px-3 py-2 rounded-lg\n          text-sm font-medium\n          transition-all duration-300\n          ${o?"opacity-0 group-hover:opacity-100":"opacity-0 pointer-events-none"}\n        `,children:"Quick add (\u2318N)"}),bo.jsx(_i,{isOpen:r,onClose:()=>a(!1)}),bo.jsx(ki,{isOpen:t,onClose:()=>n(!1)})]})}function ji(){const[e,t]=Gi.useState(navigator.onLine);return Gi.useEffect(()=>{const e=()=>{t(!0)},n=()=>{t(!1)};return window.addEventListener("online",e),window.addEventListener("offline",n),window.addEventListener("app-online",e),window.addEventListener("app-offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n),window.removeEventListener("app-online",e),window.removeEventListener("app-offline",n)}},[]),e}function Ii({variant:e="compact",showLastSync:t=!1,className:n=""}){const r=ji(),{status:a,lastSyncTime:s,pendingChanges:i,error:o,triggerSync:c}=function(){const e=ji(),[t,n]=Gi.useState(e?"synced":"offline"),[r,a]=Gi.useState(()=>{const e=localStorage.getItem("lastSyncTime");return e?new Date(e):new Date}),[s,i]=Gi.useState(0),[o,c]=Gi.useState(null);Gi.useEffect(()=>{const t=t=>{e?(i(e=>e+1),n("pending"),setTimeout(()=>{e&&l()},2e3)):i(e=>e+1)};return window.addEventListener("data-changed",t),()=>{window.removeEventListener("data-changed",t)}},[e]),Gi.useEffect(()=>{e?s>0?(n("pending"),l()):n("synced"):n("offline")},[e,s]);const l=Gi.useCallback(async()=>{if(e&&"syncing"!==t){n("syncing"),c(null);try{await new Promise(e=>setTimeout(e,1500));const e=new Date;a(e),localStorage.setItem("lastSyncTime",e.toISOString()),i(0),n("synced"),window.dispatchEvent(new CustomEvent("sync-complete",{detail:{timestamp:e}}))}catch(r){n("error"),c(r instanceof Error?r.message:"Sync failed"),window.dispatchEvent(new CustomEvent("sync-error",{detail:{error:r}}))}}},[e,t]);return{status:t,lastSyncTime:r,pendingChanges:s,error:o,triggerSync:l}}(),[l,u]=Gi.useState(!1),d=async()=>{if(!l&&"syncing"!==a){u(!0);try{await c()}finally{setTimeout(()=>u(!1),1e3)}}},h=()=>{if(!r)return bo.jsx(ud,{size:16,className:"text-gray-500"});switch(a){case"synced":return bo.jsx(id,{size:16,className:"text-green-600"});case"syncing":return bo.jsx(vd,{size:16,className:"text-blue-600 animate-spin"});case"pending":return bo.jsx(dd,{size:16,className:"text-yellow-600"});case"error":return bo.jsx(cd,{size:16,className:"text-red-600"});default:return bo.jsx(dd,{size:16,className:"text-gray-500"})}},p=()=>{if(!r)return"Offline";switch(a){case"synced":return"All changes saved";case"syncing":return"Syncing...";case"pending":return`${i} pending ${1===i?"change":"changes"}`;case"error":return"Sync error";default:return"Ready"}},g=()=>{if(!r)return"text-gray-500";switch(a){case"synced":return"text-green-600";case"syncing":return"text-blue-600";case"pending":return"text-yellow-600";case"error":return"text-red-600";default:return"text-gray-500"}};return"compact"===e?bo.jsxs("button",{onClick:d,disabled:!r||"syncing"===a||l,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${n}`,title:p(),"aria-label":`Sync status: ${p()}`,children:[h(),bo.jsx("span",{className:`text-sm hidden sm:inline ${g()}`,children:"syncing"===a||l?"Syncing...":"Sync"})]}):bo.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 ${n}`,children:[bo.jsxs("div",{className:"flex items-center justify-between mb-3",children:[bo.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Sync Status"}),bo.jsx("button",{onClick:d,disabled:!r||"syncing"===a||l,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Sync now","aria-label":"Trigger manual sync",children:bo.jsx(vd,{size:16,className:"syncing"===a||l?"animate-spin":""})})]}),bo.jsxs("div",{className:"space-y-2",children:[bo.jsxs("div",{className:"flex items-center gap-2",children:[h(),bo.jsx("span",{className:`text-sm font-medium ${g()}`,children:p()})]}),t&&s&&bo.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last synced ",Wa(s,{addSuffix:!0})]}),o&&bo.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs text-red-600 dark:text-red-400",children:o}),!r&&bo.jsx("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded text-xs text-yellow-600 dark:text-yellow-400",children:"You're offline. Changes will sync when you reconnect."})]})]})}function Ci({to:e,icon:t,label:n,isCollapsed:r,hasSubItems:a,isSubItem:s,onNavigate:i}){const o=no(),{isWideView:c}=qt(),l=!c&&(o.pathname===e||a&&o.pathname.startsWith(e)||"/accounts"===e&&(o.pathname.startsWith("/transactions")||o.pathname.startsWith("/reconciliation"))||"/forecasting"===e&&(o.pathname.startsWith("/budget")||o.pathname.startsWith("/goals"))),u="true"===new URLSearchParams(o.search).get("demo")?`${e}?demo=true`:e,d=bo.jsxs(bo.Fragment,{children:[bo.jsx(t,{size:18}),!r&&bo.jsxs(bo.Fragment,{children:[bo.jsx("span",{className:"flex-1 text-sm",children:n}),a&&bo.jsx(Iv,{size:14,className:"text-gray-400"})]})]}),h=`flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] ${s?"ml-5 text-xs":""} ${r?"sidebar-link-collapsed":""} ${l?r?"text-black dark:text-white":"bg-sidebar-active dark:bg-gray-900 text-black dark:text-white shadow-lg border-2 border-sidebar dark:border-gray-600":"bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50"}`;return bo.jsxs(ro,{to:u,className:h,title:r?n:void 0,onClick:()=>{i&&i()},"aria-label":n,"aria-current":l?"page":void 0,children:[d,!r&&a&&bo.jsx(es,{type:"Accounts"===n?"account":"Budget"===n?"budget":void 0})]})}function Ei(){const[e,t]=Gi.useState(!1),[n,r]=Gi.useState(!1),[a,s]=Gi.useState(!1),[i,o]=Gi.useState(!1),[c,l]=Gi.useState(!1),[u,d]=Gi.useState(!1),[h,p]=Gi.useState(!1),g=no(),m=ao(),f=new URLSearchParams(g.search),{registration:y}=function(){const[e,t]=Gi.useState({registration:null,updateAvailable:!1,isOffline:!navigator.onLine,syncStatus:null});return Gi.useEffect(()=>{const e=k_||window.swRegistration;e&&(t(t=>({...t,registration:e})),e.waiting&&t(e=>({...e,updateAvailable:!0})));const n=e=>{t(t=>({...t,registration:e.detail.registration,updateAvailable:!0}))},r=()=>{t(e=>({...e,isOffline:!0}))},a=()=>{t(e=>({...e,isOffline:!1})),ha()},s=e=>{"sync-status"===e.data.type&&t(t=>({...t,syncStatus:{pendingRequests:e.data.pendingRequests,lastSync:e.data.lastSync}}))};return window.addEventListener("sw-update-available",n),window.addEventListener("app-offline",r),window.addEventListener("app-online",a),window.addEventListener("offline",r),window.addEventListener("online",a),navigator.serviceWorker?.addEventListener("message",s),da().then(e=>{t(t=>({...t,syncStatus:e}))}).catch(()=>{}),()=>{window.removeEventListener("sw-update-available",n),window.removeEventListener("app-offline",r),window.removeEventListener("app-online",a),window.removeEventListener("offline",r),window.removeEventListener("online",a),navigator.serviceWorker?.removeEventListener("message",s)}},[]),{...e,checkUpdates:Gi.useCallback(async()=>{try{await(k_?k_.update():Promise.reject(new Error("No service worker registration found")))}catch(e){console.error("Failed to check for updates:",e)}},[]),refreshSyncStatus:Gi.useCallback(async()=>{try{const e=await da();t(t=>({...t,syncStatus:e}))}catch(e){console.error("Failed to get sync status:",e)}},[]),forceSync:Gi.useCallback(()=>{ha()},[]),enableOffline:Gi.useCallback(()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"ENABLE_OFFLINE_MODE"})},[])}}(),{showGoals:v,showAnalytics:b,showInvestments:w,showEnhancedInvestments:x,showAIAnalytics:k,showTaxPlanning:_,showHousehold:S,showBusinessFeatures:j,showFinancialPlanning:I,showDataIntelligence:C,showSummaries:E}=Ft(),{isWideView:T}=qt(),{isOpen:N,openSearch:A,closeSearch:O}=function(){const[e,t]=Gi.useState(!1);return{isOpen:e,openSearch:()=>t(!0),closeSearch:()=>t(!1)}}(),{isOpen:D,openHelp:P,closeHelp:M}=function(){const[e,t]=Gi.useState(!1);return{isOpen:e,openHelp:()=>t(!0),closeHelp:()=>t(!1)}}(),{currentConflict:L,currentAnalysis:R,isModalOpen:U,resolveConflict:z,dismissConflict:$,conflictState:B}=function(){const[e,t]=Gi.useState({hasConflicts:!1,conflicts:[],autoResolvedCount:0,requiresUserIntervention:!1}),[n,r]=Gi.useState(null),[a,s]=Gi.useState(null),[i,o]=Gi.useState(!1);Gi.useEffect(()=>{let e=0;const a=({conflict:e,analysis:a})=>{iS.requiresUserIntervention(a)&&(t(t=>({...t,hasConflicts:!0,conflicts:[...t.conflicts,e],requiresUserIntervention:!0})),n||(r(e),s(a),o(!0)))},i=({conflict:n,analysis:r,resolution:a})=>{e++,t(t=>({...t,autoResolvedCount:e}))},c=e=>{e.conflicts&&e.conflicts.length>0&&t(t=>({...t,hasConflicts:!0,conflicts:e.conflicts}))};return lS.on("conflict-detected",a),lS.on("conflict-auto-resolved",i),lS.on("status-changed",c),()=>{lS.off("conflict-detected",a),lS.off("conflict-auto-resolved",i),lS.off("status-changed",c)}},[n]);const c=Gi.useCallback(async(a,i)=>{if(n)try{lS.resolveConflict(n.id,a,i),t(e=>({...e,conflicts:e.conflicts.filter(e=>e.id!==n.id),hasConflicts:e.conflicts.length>1,requiresUserIntervention:e.conflicts.length>1})),o(!1);const c=e.conflicts.filter(e=>e.id!==n.id);if(c.length>0){const e=c[0],t=iS.analyzeConflict(e.entity,e.clientData,e.serverData,e.clientTimestamp||Date.now(),e.serverTimestamp||Date.now());r(e),s(t),o(!0)}else r(null),s(null)}catch(c){console.error("Failed to resolve conflict:",c)}},[n,e.conflicts]),l=Gi.useCallback(()=>{o(!1)},[]),u=Gi.useCallback(()=>{if(n)o(!0);else if(e.conflicts.length>0){const t=e.conflicts[0],n=iS.analyzeConflict(t.entity,t.clientData,t.serverData,t.clientTimestamp||Date.now(),t.serverTimestamp||Date.now());r(t),s(n),o(!0)}},[n,e.conflicts]),d=Gi.useCallback((e,t,n,r,a)=>iS.analyzeConflict(e,t,n,r||Date.now(),a||Date.now()),[]);return{conflictState:e,currentConflict:n,currentAnalysis:a,isModalOpen:i,resolveConflict:c,dismissConflict:l,showConflictModal:u,analyzeConflict:d,generateSummary:iS.generateConflictSummary,requiresUserIntervention:iS.requiresUserIntervention}}(),{activeSequence:F}=function(e){const t=ao(),n=Gi.useRef(null),r=Gi.useRef(null),[a,s]=Gi.useState(null),i=Gi.useCallback((e,n)=>{if("g"===e)switch(n){case"h":t("/");break;case"d":t("/dashboard");break;case"a":t("/accounts");break;case"t":t("/transactions");break;case"i":t("/investments");break;case"b":t("/budget");break;case"g":t("/goals");break;case"r":t("/analytics");break;case"s":t("/settings")}else if("n"===e)switch(n){case"t":t("/transactions?action=add");break;case"a":t("/accounts?action=add");break;case"g":t("/goals?action=add");break;case"b":t("/budget?action=add")}},[t]),o=[{key:"g",description:"Go to... (press another key)",action:()=>{n.current="g",s("g"),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{n.current=null,s(null)},2e3)},category:"Navigation",sequence:!0},{key:"n",description:"New... (press another key)",action:()=>{n.current="n",s("n"),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{n.current=null,s(null)},2e3)},category:"Quick Actions",sequence:!0},{key:"h",altKey:!0,description:"Go to Home",action:()=>t("/"),category:"Navigation"},{key:"d",altKey:!0,description:"Go to Dashboard",action:()=>t("/dashboard"),category:"Navigation"},{key:"a",altKey:!0,description:"Go to Accounts",action:()=>t("/accounts"),category:"Navigation"},{key:"t",altKey:!0,description:"Go to Transactions",action:()=>t("/transactions"),category:"Navigation"},{key:"b",altKey:!0,description:"Go to Budget",action:()=>t("/budget"),category:"Navigation"},{key:"g",altKey:!0,description:"Go to Goals",action:()=>t("/goals"),category:"Navigation"},{key:"i",altKey:!0,description:"Go to Investments",action:()=>t("/investments"),category:"Navigation"},{key:"r",altKey:!0,description:"Go to Analytics",action:()=>t("/analytics"),category:"Navigation"},{key:"comma",altKey:!0,description:"Go to Settings",action:()=>t("/settings"),category:"Navigation"},{key:"n",ctrlKey:!0,shiftKey:!0,description:"New Transaction",action:()=>t("/transactions?action=add"),category:"Quick Actions"},{key:"n",ctrlKey:!0,altKey:!0,description:"New Account",action:()=>t("/accounts?action=add"),category:"Quick Actions"},{key:"r",ctrlKey:!0,description:"Refresh Data",action:()=>window.location.reload(),category:"Utility"},{key:"p",ctrlKey:!0,description:"Print Current Page",action:()=>window.print(),category:"Utility"}];return Gi.useEffect(()=>{const t=t=>{if(!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement)){if(n.current)return t.preventDefault(),i(n.current,t.key),n.current=null,s(null),void(r.current&&(clearTimeout(r.current),r.current=null));if("/"===t.key&&!t.ctrlKey&&!t.altKey&&!t.metaKey){t.preventDefault();const e=document.querySelector("[data-search-input]");e&&e.focus()}"?"!==t.key||t.ctrlKey||t.altKey||t.metaKey||(t.preventDefault(),e&&e())}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t),r.current&&clearTimeout(r.current)}},[i,e]),function(e){Gi.useEffect(()=>{const t=t=>{if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement)return;if(document.querySelector('[role="dialog"]')||document.querySelector(".modal-open"))return;const n=e.find(e=>{const n=e.key.toLowerCase()===t.key.toLowerCase(),r=Boolean(e.ctrlKey)===t.ctrlKey,a=Boolean(e.altKey)===t.altKey,s=Boolean(e.shiftKey)===t.shiftKey,i=Boolean(e.metaKey)===t.metaKey;return n&&r&&a&&s&&i});n&&(t.preventDefault(),t.stopPropagation(),n.action())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e])}(o),{shortcuts:o,activeSequence:a}}(P),W=(e,t)=>{const n=["/dashboard","/accounts","/transactions","/investments","/analytics"],r=n.indexOf(t);return-1===r?null:"next"===e?r<n.length-1?n[r+1]:null:r>0?n[r-1]:null},q=as({onSwipeLeft:()=>{if(window.innerWidth<=768){const e=W("next",g.pathname);e&&m(e)}},onSwipeRight:()=>{if(window.innerWidth<=768){const e=W("prev",g.pathname);e&&m(e)}},threshold:100}),G=()=>{t(!e)};Gi.useEffect(()=>{T&&t(!0)},[T]);const V=()=>{r(!n)};return Gi.useEffect(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),A()),"?"!==e.key||e.ctrlKey||e.metaKey||e.altKey||(e.preventDefault(),P()),e.altKey&&"m"===e.key&&(e.preventDefault(),V()),e.altKey&&"s"===e.key&&(e.preventDefault(),G()),"Escape"===e.key&&n&&(e.preventDefault(),r(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n,A,P]),Gi.useEffect(()=>{const e=e=>{const t=e.detail;setCurrentConflict(t),setConflictModalOpen(!0)};return window.addEventListener("open-conflict-resolver",e),()=>window.removeEventListener("open-conflict-resolver",e)},[]),bo.jsxs("div",{className:"flex min-h-screen bg-tertiary dark:bg-gray-900",children:[bo.jsx(QE,{}),bo.jsx(Gr,{}),bo.jsx(Vr,{}),bo.jsx(Hr,{}),bo.jsxs("div",{className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50",children:[bo.jsx("a",{href:"#main-content",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Skip to main content"}),bo.jsx("a",{href:"#main-navigation",className:"inline-block px-4 py-2 ml-2 bg-blue-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Skip to navigation"})]}),bo.jsx("aside",{className:(e?"w-14":"w-52")+" bg-sidebar dark:bg-gray-800 shadow-2xl rounded-2xl transition-all duration-300 hidden md:block m-4 h-[calc(100vh-2rem)] fixed","aria-label":"Main navigation sidebar",children:bo.jsxs("div",{className:"p-3 h-full flex flex-col",children:[bo.jsxs("header",{className:"flex items-center justify-between mb-6",role:"banner",children:[!e&&bo.jsx("h1",{className:"text-lg font-bold text-white dark:text-white",children:"Wealth Tracker"}),bo.jsxs("div",{className:"flex items-center space-x-2",children:[!e&&bo.jsx("button",{onClick:A,className:"p-1 rounded hover:bg-white/20 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Open global search",title:"Search (Ctrl+K)",children:bo.jsx(qv,{size:18,className:"text-white dark:text-gray-400"})}),bo.jsx("button",{onClick:G,className:"p-1 rounded hover:bg-white/20 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":e?"Expand sidebar":"Collapse sidebar",title:e?"Expand sidebar (Alt+S)":"Collapse sidebar (Alt+S)",children:bo.jsx(Wv,{size:18,className:"text-white dark:text-gray-400"})})]})]}),bo.jsxs("nav",{id:"main-navigation",className:"space-y-1.5 flex-1 overflow-y-auto pr-2",role:"navigation","aria-label":"Main navigation menu",children:[bo.jsx(Ci,{to:"/",icon:ov,label:"Home",isCollapsed:e}),bo.jsx(Ci,{to:"/dashboard",icon:pv,label:"Dashboard",isCollapsed:e}),bo.jsx("div",{children:e?bo.jsx(Ci,{to:"/accounts",icon:uv,label:"Accounts",isCollapsed:!0}):bo.jsxs("div",{children:[bo.jsxs(ro,{to:"true"===f.get("demo")?"/accounts?demo=true":"/accounts",onClick:()=>o(!i),className:"w-full flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] "+("/accounts"===g.pathname||g.pathname.startsWith("/transactions")||g.pathname.startsWith("/reconciliation")?"bg-sidebar-active dark:bg-gray-900 text-black dark:text-white shadow-lg border-2 border-sidebar dark:border-gray-600":"bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50"),"aria-expanded":i,"aria-label":"Accounts",children:[bo.jsx(uv,{size:18}),bo.jsx("span",{className:"flex-1 text-sm text-left",children:"Accounts"}),bo.jsx(Iv,{size:14,className:"text-gray-400 transition-transform duration-200 "+(i?"rotate-90":"")})]}),i&&bo.jsxs("div",{className:"mt-1 space-y-0.5",children:[bo.jsx(Ci,{to:"/transactions",icon:dv,label:"Transactions",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/reconciliation",icon:Lv,label:"Reconciliation",isCollapsed:!1,isSubItem:!0})]})]})}),(w||x)&&bo.jsx("div",{children:e?bo.jsx(Ci,{to:"/investments",icon:fv,label:"Investments",isCollapsed:!0}):bo.jsxs("div",{children:[bo.jsxs(ro,{to:"true"===f.get("demo")?"/investments?demo=true":"/investments",onClick:()=>p(!h),className:"w-full flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] "+("/investments"===g.pathname||g.pathname.startsWith("/enhanced-investments")?"bg-sidebar-active dark:bg-gray-900 text-black dark:text-white shadow-lg border-2 border-sidebar dark:border-gray-600":"bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50"),"aria-expanded":h,"aria-label":"Investments",children:[bo.jsx(fv,{size:18}),bo.jsx("span",{className:"flex-1 text-sm text-left",children:"Investments"}),bo.jsx(Iv,{size:14,className:"text-gray-400 transition-transform duration-200 "+(h?"rotate-90":"")})]}),h&&bo.jsx("div",{className:"mt-1 space-y-0.5",children:x&&bo.jsx(Ci,{to:"/enhanced-investments",icon:pv,label:"Investment Analytics",isCollapsed:!1,isSubItem:!0})})]})}),v&&bo.jsx("div",{children:e?bo.jsx(Ci,{to:"/forecasting",icon:gv,label:"Forecasting",isCollapsed:!0}):bo.jsxs("div",{children:[bo.jsxs(ro,{to:"true"===f.get("demo")?"/forecasting?demo=true":"/forecasting",onClick:()=>l(!c),className:"w-full flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] "+("/forecasting"===g.pathname||"/budget"===g.pathname||"/goals"===g.pathname?"bg-sidebar-active dark:bg-gray-900 text-black dark:text-white shadow-lg border-2 border-sidebar dark:border-gray-600":"bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50"),"aria-expanded":c,"aria-label":"Forecasting & Budget",children:[bo.jsx(gv,{size:18}),bo.jsx("span",{className:"flex-1 text-sm text-left",children:"Forecasting"}),bo.jsx(Iv,{size:14,className:"text-gray-400 transition-transform duration-200 "+(c?"rotate-90":"")})]}),c&&bo.jsx("div",{className:"mt-1 space-y-0.5",children:bo.jsx(Ci,{to:"/goals",icon:ob,label:"Goals",isCollapsed:!1,isSubItem:!0})})]})}),b&&bo.jsx(Ci,{to:"/analytics",icon:pv,label:"Analytics",isCollapsed:e}),bo.jsxs("div",{children:[e?bo.jsx(Ci,{to:"/advanced",icon:Bb,label:"Advanced",isCollapsed:!0}):bo.jsxs(ro,{to:"true"===f.get("demo")?"/advanced?demo=true":"/advanced",onClick:()=>d(!u),className:"w-full flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] "+("/advanced"===g.pathname||g.pathname.startsWith("/ai-")||"/custom-reports"===g.pathname||"/tax-planning"===g.pathname||"/household"===g.pathname||"/business-features"===g.pathname||"/financial-planning"===g.pathname||"/data-intelligence"===g.pathname||"/summaries"===g.pathname?"bg-sidebar-active dark:bg-gray-900 text-black dark:text-white shadow-lg border-2 border-sidebar dark:border-gray-600":"bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50"),"aria-expanded":u,"aria-label":"Advanced",children:[bo.jsx(Bb,{size:18}),bo.jsx("span",{className:"flex-1 text-sm text-left",children:"Advanced"}),bo.jsx(Iv,{size:14,className:"text-gray-400 transition-transform duration-200 "+(u?"rotate-90":"")})]}),u&&!e&&bo.jsxs("div",{className:"mt-1 space-y-0.5",children:[k&&bo.jsx(Ci,{to:"/ai-analytics",icon:Bb,label:"AI Analytics",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/ai-features",icon:Xb,label:"AI Features",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/custom-reports",icon:sb,label:"Custom Reports",isCollapsed:!1,isSubItem:!0}),_&&bo.jsx(Ci,{to:"/tax-planning",icon:Rb,label:"Tax Planning",isCollapsed:!1,isSubItem:!0}),S&&bo.jsx(Ci,{to:"/household",icon:db,label:"Household",isCollapsed:!1,isSubItem:!0}),j&&bo.jsx(Ci,{to:"/business-features",icon:Tb,label:"Business Features",isCollapsed:!1,isSubItem:!0}),I&&bo.jsx(Ci,{to:"/financial-planning",icon:Rb,label:"Financial Planning",isCollapsed:!1,isSubItem:!0}),C&&bo.jsx(Ci,{to:"/data-intelligence",icon:eb,label:"Data Intelligence",isCollapsed:!1,isSubItem:!0}),E&&bo.jsx(Ci,{to:"/summaries",icon:mv,label:"Summaries",isCollapsed:!1,isSubItem:!0})]})]}),bo.jsxs("div",{children:[e?bo.jsx(Ci,{to:"/settings",icon:cv,label:"Settings",isCollapsed:!0}):bo.jsxs(ro,{to:"true"===f.get("demo")?"/settings?demo=true":"/settings",onClick:()=>s(!a),className:"w-full flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] "+(g.pathname.startsWith("/settings")||"/enhanced-import"===g.pathname||"/export-manager"===g.pathname||"/documents"===g.pathname||"/open-banking"===g.pathname?"bg-sidebar-active dark:bg-gray-900 text-black dark:text-white shadow-lg border-2 border-sidebar dark:border-gray-600":"bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50"),"aria-expanded":a,"aria-label":"Settings",children:[bo.jsx(cv,{size:18}),bo.jsx("span",{className:"flex-1 text-sm text-left",children:"Settings"}),bo.jsx(Iv,{size:14,className:"text-gray-400 transition-transform duration-200 "+(a?"rotate-90":"")})]}),a&&!e&&bo.jsxs("div",{className:"mt-1 space-y-0.5",children:[bo.jsx(Ci,{to:"/settings/app",icon:lv,label:"App Settings",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/settings/data",icon:eb,label:"Data Management",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/settings/categories",icon:tb,label:"Categories",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/settings/tags",icon:nb,label:"Tags",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/settings/deleted-accounts",icon:ab,label:"Deleted Accounts",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/settings/security",icon:gb,label:"Security",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/enhanced-import",icon:Kv,label:"Enhanced Import",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/export-manager",icon:Yv,label:"Export Manager",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/documents",icon:rb,label:"Documents",isCollapsed:!1,isSubItem:!0}),bo.jsx(Ci,{to:"/open-banking",icon:Ab,label:"Open Banking",isCollapsed:!1,isSubItem:!0})]})]})]})]})}),bo.jsx("header",{className:"md:hidden fixed top-0 left-0 right-0 z-40 bg-white dark:bg-gray-800 shadow-md",role:"banner",children:bo.jsxs("div",{className:"flex items-center justify-between p-4",children:[bo.jsx("button",{onClick:V,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":n?"Close navigation menu":"Open navigation menu","aria-expanded":n,"aria-controls":"mobile-menu",title:n?"Close menu (Escape)":"Open menu (Alt+M)",children:n?bo.jsx(xv,{size:24,className:"text-gray-700 dark:text-gray-200"}):bo.jsx(Wv,{size:24,className:"text-gray-700 dark:text-gray-200"})}),bo.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",id:"mobile-app-title",children:"Wealth Tracker"}),bo.jsxs("div",{className:"flex items-center gap-2",children:[bo.jsx(Ii,{variant:"compact",className:"mr-1"}),bo.jsx(Xa,{}),bo.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Search",children:bo.jsx(qv,{size:20,className:"text-gray-700 dark:text-gray-200"})}),bo.jsx(hu,{afterSignOutUrl:"/",appearance:{elements:{avatarBox:"w-8 h-8",userButtonPopoverCard:"shadow-xl",userButtonPopoverActions:"mt-2"}}})]})]})}),bo.jsxs("div",{className:"hidden md:flex items-center gap-3 fixed top-4 right-4 z-30",role:"toolbar","aria-label":"User tools",children:[bo.jsx(Ii,{variant:"compact"}),bo.jsx(Xa,{}),bo.jsx(ns,{}),bo.jsx(hu,{afterSignOutUrl:"/",appearance:{elements:{avatarBox:"w-10 h-10",userButtonPopoverCard:"shadow-xl",userButtonPopoverActions:"mt-2"}}})]}),n&&bo.jsx("div",{className:"md:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:V,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:bo.jsx("nav",{id:"mobile-menu",className:"w-full max-w-sm h-full bg-sidebar dark:bg-gray-800 shadow-2xl overflow-y-auto rounded-r-2xl",onClick:e=>e.stopPropagation(),role:"navigation","aria-label":"Mobile navigation menu",children:bo.jsxs("div",{className:"p-4 pb-6",children:[bo.jsxs("header",{className:"flex justify-between items-center mb-8",role:"banner",children:[bo.jsx("h2",{id:"mobile-menu-title",className:"text-2xl font-bold text-white dark:text-white",children:"Wealth Tracker"}),bo.jsxs("div",{className:"flex items-center space-x-2",children:[bo.jsx("button",{onClick:()=>{A(),V()},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Open global search",children:bo.jsx(qv,{size:24,className:"text-white dark:text-gray-300"})}),bo.jsx("button",{onClick:V,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-white/50","aria-label":"Close navigation menu",children:bo.jsx(xv,{size:24,className:"text-white dark:text-gray-300"})})]})]}),bo.jsxs("div",{className:"space-y-2",role:"none",children:[bo.jsx(Ci,{to:"/",icon:ov,label:"Home",isCollapsed:!1,onNavigate:V}),bo.jsx(Ci,{to:"/dashboard",icon:pv,label:"Dashboard",isCollapsed:!1,onNavigate:V}),bo.jsxs("div",{children:[bo.jsxs(ro,{to:"true"===f.get("demo")?"/accounts?demo=true":"/accounts",onClick:()=>{o(!i),V()},className:"w-full flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50",children:[bo.jsx(uv,{size:18}),bo.jsx("span",{className:"flex-1 text-sm text-left",children:"Accounts"}),bo.jsx(Iv,{size:14,className:"text-gray-400 transition-transform duration-200 "+(i?"rotate-90":"")})]}),i&&bo.jsxs("div",{className:"mt-1 space-y-1",children:[bo.jsx(Ci,{to:"/transactions",icon:dv,label:"Transactions",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/reconciliation",icon:Lv,label:"Reconciliation",isCollapsed:!1,isSubItem:!0,onNavigate:V})]})]}),(w||x)&&bo.jsxs("div",{children:[bo.jsxs(ro,{to:"true"===f.get("demo")?"/investments?demo=true":"/investments",onClick:()=>{p(!h),V()},className:"w-full flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50",children:[bo.jsx(fv,{size:18}),bo.jsx("span",{className:"flex-1 text-sm text-left",children:"Investments"}),bo.jsx(Iv,{size:14,className:"text-gray-400 transition-transform duration-200 "+(h?"rotate-90":"")})]}),h&&bo.jsx("div",{className:"mt-1 space-y-1",children:x&&bo.jsx(Ci,{to:"/enhanced-investments",icon:pv,label:"Investment Analytics",isCollapsed:!1,isSubItem:!0,onNavigate:V})})]}),v&&bo.jsxs("div",{children:[bo.jsxs(ro,{to:"true"===f.get("demo")?"/forecasting?demo=true":"/forecasting",onClick:()=>{l(!c),V()},className:"w-full flex items-center gap-2 px-3 py-2.5 md:py-2 rounded-lg transition-colors min-h-[40px] md:min-h-[auto] bg-secondary text-white dark:text-gray-300 hover:bg-secondary dark:hover:bg-gray-800/50",children:[bo.jsx(gv,{size:18}),bo.jsx("span",{className:"flex-1 text-sm text-left",children:"Forecasting"}),bo.jsx(Iv,{size:14,className:"text-gray-400 transition-transform duration-200 "+(c?"rotate-90":"")})]}),c&&bo.jsx("div",{className:"mt-1 space-y-1",children:bo.jsx(Ci,{to:"/goals",icon:ob,label:"Goals",isCollapsed:!1,isSubItem:!0,onNavigate:V})})]}),b&&bo.jsx(Ci,{to:"/analytics",icon:pv,label:"Analytics",isCollapsed:!1,onNavigate:V}),k&&bo.jsx(Ci,{to:"/ai-analytics",icon:Bb,label:"AI Analytics",isCollapsed:!1,onNavigate:V}),bo.jsx(Ci,{to:"/custom-reports",icon:sb,label:"Custom Reports",isCollapsed:!1,onNavigate:V}),_&&bo.jsx(Ci,{to:"/tax-planning",icon:Rb,label:"Tax Planning",isCollapsed:!1,onNavigate:V}),S&&bo.jsx(Ci,{to:"/household",icon:db,label:"Household",isCollapsed:!1,onNavigate:V}),j&&bo.jsx(Ci,{to:"/business-features",icon:Tb,label:"Business Features",isCollapsed:!1,onNavigate:V}),I&&bo.jsx(Ci,{to:"/financial-planning",icon:Rb,label:"Financial Planning",isCollapsed:!1,onNavigate:V}),C&&bo.jsx(Ci,{to:"/data-intelligence",icon:eb,label:"Data Intelligence",isCollapsed:!1,onNavigate:V}),E&&bo.jsx(Ci,{to:"/summaries",icon:mv,label:"Summaries",isCollapsed:!1,onNavigate:V}),bo.jsxs("div",{children:[bo.jsx(Ci,{to:"/settings",icon:cv,label:"Settings",isCollapsed:!1,hasSubItems:!0}),a&&bo.jsxs("div",{className:"mt-1 space-y-1",children:[bo.jsx(Ci,{to:"/settings/app",icon:lv,label:"App Settings",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/settings/data",icon:eb,label:"Data Management",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/settings/categories",icon:tb,label:"Categories",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/settings/tags",icon:nb,label:"Tags",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/settings/deleted-accounts",icon:ab,label:"Deleted Accounts",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/settings/security",icon:gb,label:"Security",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/enhanced-import",icon:Kv,label:"Enhanced Import",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/export-manager",icon:Yv,label:"Export Manager",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/documents",icon:rb,label:"Documents",isCollapsed:!1,isSubItem:!0,onNavigate:V}),bo.jsx(Ci,{to:"/open-banking",icon:Ab,label:"Open Banking",isCollapsed:!1,isSubItem:!0,onNavigate:V})]})]})]})]})})}),bo.jsxs("main",{ref:q,id:"main-content",className:`flex-1 md:pl-0 mt-16 md:mt-0 ${e?"md:ml-[5.5rem]":"md:ml-[14.5rem]"} transition-all duration-300`,style:{WebkitOverflowScrolling:"touch"},role:"main","aria-label":"Main content",tabIndex:-1,children:[bo.jsx(Br,{}),bo.jsx("div",{className:"hidden md:block sticky top-0 z-30 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-3",children:bo.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[bo.jsx("div",{className:"flex-1 max-w-2xl",children:bo.jsxs("button",{onClick:A,className:"w-full flex items-center gap-3 px-4 py-2 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-lg text-left transition-colors group","aria-label":"Search transactions, accounts, and more",children:[bo.jsx(qv,{size:20,className:"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}),bo.jsx("span",{className:"text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300",children:"Search transactions, accounts, budgets..."}),bo.jsx("span",{className:"ml-auto text-xs text-gray-400 dark:text-gray-500 font-mono",children:"Ctrl+K"})]})}),bo.jsxs("div",{className:"flex items-center gap-4 ml-6",children:[bo.jsx(Xa,{}),bo.jsx(ns,{}),bo.jsx(hu,{afterSignOutUrl:"/",appearance:{elements:{avatarBox:"w-8 h-8",userButtonPopoverCard:"shadow-xl",userButtonPopoverActions:"mt-2"}}})]})]})}),bo.jsx(qr,{}),bo.jsx(ma,{children:bo.jsxs("div",{className:"p-4 md:p-6 lg:p-8 max-w-7xl mx-auto pb-20 md:pb-8",children:[bo.jsx("div",{className:"hidden sm:block",children:bo.jsx(Wr,{})}),bo.jsx($r,{children:bo.jsx(so,{})})]})})]}),bo.jsx(Zr,{}),bo.jsx(ra,{}),bo.jsx(ia,{}),bo.jsx(I_,{}),bo.jsx(E_,{}),bo.jsx(oS,{isOpen:U,onClose:$,conflict:L,analysis:R,onResolve:z}),bo.jsx(pa,{registration:y}),bo.jsx(la,{}),bo.jsx(Vw,{children:bo.jsx(Ja,{isOpen:N,onClose:O})}),bo.jsx(Qa,{isOpen:D,onClose:M}),L&&bo.jsx(oS,{isOpen:U,onClose:$,conflict:L,analysis:R,onResolve:z}),B.requiresUserIntervention&&bo.jsx("div",{className:"fixed bottom-20 right-4 z-50 bg-amber-100 dark:bg-amber-900/90 p-3 rounded-lg shadow-lg",children:bo.jsxs("div",{className:"flex items-center gap-2",children:[bo.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),bo.jsxs("span",{className:"text-sm text-amber-800 dark:text-amber-200",children:[B.conflicts.length," conflict",1!==B.conflicts.length?"s":""," need attention"]})]})}),B.autoResolvedCount>0&&bo.jsx("div",{className:"fixed top-20 right-4 z-50 bg-green-100 dark:bg-green-900/90 p-3 rounded-lg shadow-lg animate-fade-in-out",children:bo.jsxs("div",{className:"flex items-center gap-2",children:[bo.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:bo.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),bo.jsxs("span",{className:"text-sm text-green-800 dark:text-green-200",children:[B.autoResolvedCount," conflict",1!==B.autoResolvedCount?"s":""," auto-resolved"]})]})}),bo.jsx(ts,{activeSequence:F}),bo.jsx(rs,{}),bo.jsx(Si,{})]})}function Ti(e){const t=Gi.lazy(e);return t.preload=e,t}function Ni(e){"requestIdleCallback"in window?requestIdleCallback(()=>e.preload()):setTimeout(()=>e.preload(),1)}function Ai(){const[e,t]=Gi.useState({}),n=function(){const e=Gi.useContext(oT);if(void 0===e)throw new Error("useApp must be used within an AppProvider");return e}();return Gi.useEffect(()=>{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&e.push(n)}const r=async()=>{try{return(await indexedDB.databases()).map(e=>e.name)}catch(e){return"IndexedDB check failed: "+e}},a=()=>{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);if(n&&(n.startsWith("enc_")||n.includes("encrypted")))try{const e=localStorage.getItem(n);e&&JSON.parse(e)}catch{e.push({key:n,error:"Parse error"})}}return e};(async()=>{const s={localStorage:{keys:e,totalKeys:e.length,encryptedKeys:e.filter(e=>e.startsWith("enc_")).length,corruptedKeys:a()},indexedDB:await r(),appContext:{accounts:n?.accounts?.length||0,transactions:n?.transactions?.length||0,categories:n?.categories?.length||0,isLoading:n?.isLoading||!1,hasTestData:n?.hasTestData||!1},errors:[]};t(s)})()},[n]),bo.jsxs("div",{className:"p-4 bg-white rounded-lg shadow",children:[bo.jsx("h2",{className:"text-xl font-bold mb-4",children:"Diagnostic Report"}),bo.jsx("pre",{className:"text-xs overflow-auto bg-gray-100 p-4 rounded",children:JSON.stringify(e,null,2)}),bo.jsxs("div",{className:"mt-4 space-x-2",children:[bo.jsx("button",{onClick:()=>{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&(n.startsWith("enc_")||n.startsWith("wealthtracker_"))&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),alert(`Cleared ${e.length} keys. Please refresh the page.`)},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Clear Encrypted Storage"}),bo.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),alert("All storage cleared. Please refresh the page.")},className:"px-4 py-2 bg-red-800 text-white rounded hover:bg-red-900",children:"Clear ALL Storage"})]})]})}function Oi({className:e="",width:t,height:n,variant:r="text",animation:a="pulse"}){const s={width:t||"100%",height:n||("text"===r?"1em":"100%")};return bo.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 ${{text:"rounded",circular:"rounded-full",rectangular:"",rounded:"rounded-lg"}[r]} ${{pulse:"animate-pulse",wave:"animate-shimmer",none:""}[a]} ${e}`,style:s,"aria-label":"Loading...",role:"status"})}function Di({lines:e=1,spacing:t="normal",className:n=""}){return bo.jsx("div",{className:`${{tight:"space-y-1",normal:"space-y-2",loose:"space-y-3"}[t]} ${n}`,children:Array.from({length:e}).map((t,n)=>bo.jsx(Oi,{variant:"text",width:n===e-1&&e>1?"80%":"100%"},n))})}function Pi({className:e=""}){return bo.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow p-6 ${e}`,children:[bo.jsxs("div",{className:"flex items-start justify-between mb-4",children:[bo.jsxs("div",{className:"flex-1",children:[bo.jsx(Oi,{variant:"text",width:"60%",height:"24px",className:"mb-2"}),bo.jsx(Oi,{variant:"text",width:"40%"})]}),bo.jsx(Oi,{variant:"circular",width:"40px",height:"40px"})]}),bo.jsx(Di,{lines:3})]})}function Mi({columns:e=5}){return bo.jsx("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:Array.from({length:e}).map((e,t)=>bo.jsx("td",{className:"py-4 px-4",children:bo.jsx(Oi,{variant:"text"})},t))})}function Li({items:e=5,className:t=""}){return bo.jsx("div",{className:`space-y-4 ${t}`,children:Array.from({length:e}).map((e,t)=>bo.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white dark:bg-gray-800 rounded-lg",children:[bo.jsx(Oi,{variant:"circular",width:"48px",height:"48px"}),bo.jsxs("div",{className:"flex-1",children:[bo.jsx(Oi,{variant:"text",width:"40%",className:"mb-2"}),bo.jsx(Oi,{variant:"text",width:"60%"})]}),bo.jsx(Oi,{variant:"rectangular",width:"80px",height:"32px"})]},t))})}function Ri({children:e,requirePremium:t=!1,requiredRole:n,fallbackPath:r="/"}){const{isLoaded:a,isSignedIn:s}=Ml(),i=no(),o="undefined"!=typeof window&&("true"===window.localStorage.getItem("isTestMode")||"true"===new URLSearchParams(window.location.search).get("testMode")),c="undefined"!=typeof window&&"true"===new URLSearchParams(window.location.search).get("demo");return a||o||c?s||o||c?bo.jsx(bo.Fragment,{children:e}):(sessionStorage.setItem("redirectAfterLogin",i.pathname),bo.jsx(io,{to:r,replace:!0})):bo.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:bo.jsxs("div",{className:"text-center",children:[bo.jsx(Oi,{className:"w-32 h-32 rounded-full mx-auto mb-4"}),bo.jsx(Oi,{className:"w-48 h-6 mx-auto mb-2"}),bo.jsx(Oi,{className:"w-64 h-4 mx-auto"})]})})}function Ui({children:e,requirePremium:t,requiredRole:n,fallbackPath:r}){return bo.jsx(Ri,{requirePremium:t,requiredRole:n,fallbackPath:r,children:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:e})})}function zi(){const{user:e,isLoaded:t}=g(),[n,r]=Gi.useState(null),[a,s]=Gi.useState(!0),[i,o]=Gi.useState(null),c=async t=>{s(!0),o(null);try{let n=im.getCurrentDatabaseUserId();n&&im.getCurrentClerkId()===t||(console.log("[useUserId] Fetching database ID for Clerk ID:",t),n=e?.emailAddresses?.[0]?.emailAddress?await im.ensureUserExists(t,e.emailAddresses[0].emailAddress,e.firstName||void 0,e.lastName||void 0):await im.getDatabaseUserId(t),n&&await im.setCurrentUser(t,n)),r(n),n?console.log("[useUserId] Database ID resolved:",n):console.warn("[useUserId] No database ID found for Clerk ID:",t)}catch(n){console.error("[useUserId] Error fetching database ID:",n),o(n instanceof Error?n.message:"Failed to fetch database ID")}finally{s(!1)}};return Gi.useEffect(()=>{t?e?.id?c(e.id):(r(null),s(!1),im.clearCache()):s(!0)},[e?.id,t]),{clerkId:e?.id||null,databaseId:n,isLoading:!t||a,error:i,refresh:async()=>{e?.id&&await c(e.id)}}}function $i(){const{clerkId:e,databaseId:t,isLoading:n}=zi(),[r,a]=Gi.useState([]),[s,i]=Gi.useState(null),o=e=>{a(t=>[...t,`${(new Date).toLocaleTimeString()}: ${e}`])};return Gi.useEffect(()=>{n?o("Loading user information..."):t?(async()=>{o(`Starting test for Clerk user: ${e}`),o(`Using database ID: ${t}`),i(t);const n=zg.getChannels();o(`Active channels: ${n.length}`),n.forEach(e=>{o(`  - ${e.topic}: ${e.state}`)}),o("Setting up realtime subscription...");zg.channel(`test-accounts-${t}`).on("postgres_changes",{event:"*",schema:"public",table:"accounts",filter:`user_id=eq.${t}`},e=>{o(`\ud83c\udfaf REALTIME EVENT RECEIVED: ${e.eventType}`)}).subscribe((e,t)=>{o(`Subscription status: ${e}`),t&&o(`Subscription error: ${t.message}`)});setTimeout(async()=>{o("Creating test account...");const e={user_id:dbUser.id,name:`Test Account ${Date.now()}`,type:"savings",currency:"GBP",balance:100,initial_balance:100,is_active:!0},{data:t,error:n}=await zg.from("accounts").insert(e).select().single();n?o(`Error creating test account: ${n.message}`):(o(`\u2705 Test account created: ${t.name}`),o("You should see a realtime event above if sync is working!"),setTimeout(async()=>{o("Deleting test account...");const{error:e}=await zg.from("accounts").delete().eq("id",t.id);o(e?`Error deleting: ${e.message}`:"\u2705 Test account deleted")},5e3))},2e3)})():o("No user logged in or database user not found")},[e,t,n]),bo.jsxs("div",{className:"fixed top-20 right-4 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg max-w-md max-h-96 overflow-y-auto z-50 border-2 border-blue-500",children:[bo.jsx("h3",{className:"font-bold text-sm mb-2 text-blue-600",children:"\ud83e\uddea Realtime Sync Test"}),bo.jsxs("div",{className:"text-xs space-y-1 font-mono",children:[bo.jsxs("div",{children:["Clerk ID: ",user?.id?.slice(0,10),"..."]}),bo.jsxs("div",{children:["DB ID: ",s?.slice(0,10),"..."]}),bo.jsx("div",{className:"mt-2 border-t pt-2",children:r.map((e,t)=>bo.jsx("div",{className:e.includes("ERROR")||e.includes("Error")?"text-red-600":e.includes("\u2705")||e.includes("\ud83c\udfaf")?"text-green-600":"text-gray-600",children:e},t))})]})]})}function Bi(){const[e,t]=Gi.useState(!1),[n,r]=Gi.useState(null),[a,s]=Gi.useState(!0);Gi.useEffect(()=>{(async()=>{if((()=>{if(!_d())return!1;try{if("true"===localStorage.getItem("safari_warning_dismissed"))return!1}catch{}return!0})()){const e=await Cd();r(e),e.warnings&&e.warnings.length>0&&t(!0)}s(!1)})()},[]);const i=()=>{Nd(),t(!1)};if(a||!e||!n)return null;const o=!n.localStorage||!n.sessionStorage,c=!n.thirdPartyCookies;return bo.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:bo.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",children:[bo.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 px-6 py-4",children:bo.jsxs("div",{className:"flex items-center justify-between text-white",children:[bo.jsxs("div",{className:"flex items-center gap-3",children:[bo.jsx(xd,{size:24}),bo.jsx("h2",{className:"text-xl font-bold",children:"Safari Compatibility Issue"})]}),bo.jsx("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:bo.jsx(kd,{size:20})})]})}),bo.jsxs("div",{className:"p-6 space-y-4",children:[bo.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"We've detected that you're using Safari, which has some compatibility issues with our secure authentication system."}),bo.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-2",children:[bo.jsx("h3",{className:"font-semibold text-orange-900 dark:text-orange-300 mb-2",children:"Issues Detected:"}),o&&bo.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[bo.jsx(xd,{size:16,className:"text-orange-600 mt-0.5"}),bo.jsxs("div",{children:[bo.jsx("span",{className:"font-medium text-orange-900 dark:text-orange-300",children:"Private Browsing Mode"}),bo.jsx("p",{className:"text-orange-700 dark:text-orange-400",children:"Safari's private mode blocks storage needed for authentication."})]})]}),c&&bo.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[bo.jsx(xd,{size:16,className:"text-orange-600 mt-0.5"}),bo.jsxs("div",{children:[bo.jsx("span",{className:"font-medium text-orange-900 dark:text-orange-300",children:"Cross-Site Tracking Prevention"}),bo.jsx("p",{className:"text-orange-700 dark:text-orange-400",children:"Safari's privacy settings may block authentication cookies."})]})]})]}),bo.jsxs("div",{className:"space-y-3",children:[bo.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Recommended Solutions:"}),bo.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[bo.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Option 1: Adjust Safari Settings"}),bo.jsxs("ol",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1 list-decimal list-inside",children:[o&&bo.jsx("li",{children:"Exit Private Browsing mode (File \u2192 New Window)"}),bo.jsx("li",{children:"Open Safari \u2192 Preferences \u2192 Privacy"}),bo.jsx("li",{children:'Uncheck "Prevent cross-site tracking"'}),bo.jsx("li",{children:'Ensure "Block all cookies" is unchecked'}),bo.jsx("li",{children:"Reload this page and try again"})]})]}),bo.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[bo.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Option 2: Use a Different Browser (Recommended)"}),bo.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"For the best experience, we recommend using:"}),bo.jsxs("div",{className:"flex gap-3",children:[bo.jsxs("a",{href:"https://www.google.com/chrome/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors",children:[bo.jsx(od,{size:18}),"Chrome",bo.jsx(pd,{size:14})]}),bo.jsxs("a",{href:"https://www.microsoft.com/edge",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/40 transition-colors",children:[bo.jsx(gd,{size:18}),"Edge",bo.jsx(pd,{size:14})]}),bo.jsxs("a",{href:"https://www.mozilla.org/firefox/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-lg hover:bg-orange-200 dark:hover:bg-orange-900/40 transition-colors",children:[bo.jsx(gd,{size:18}),"Firefox",bo.jsx(pd,{size:14})]})]})]})]}),bo.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[bo.jsx("button",{onClick:()=>{Nd(),t(!1),window.location.href="/login"},className:"flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Try Anyway"}),bo.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"I'll Use Another Browser"})]})]})]})})}function Fi(){return Gi.useEffect(()=>{(async()=>{(await(async()=>{if(!_d())return{safari:!1,indexedDB:!0};crypto.randomUUID||(crypto.randomUUID=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))});const e=await(async()=>{if(!("indexedDB"in window))return!1;try{return(await new Promise((e,t)=>{const n=indexedDB.open("_test_db_",1);n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})).close(),await new Promise((e,t)=>{const n=indexedDB.deleteDatabase("_test_db_");n.onsuccess=()=>e(),n.onerror=()=>t(n.error)}),!0}catch(e){return!1}})();return{safari:!0,indexedDB:e,privateMode:!e&&0===localStorage.length}})()).safari&&await Cd()})(),qE()&&(()=>{if(!qE())return;const e={accounts:GE,transactions:HE(100),budgets:YE,goals:KE,categories:ZE,recurringTransactions:JE};localStorage.setItem("demoMode","true"),localStorage.setItem("accounts",JSON.stringify(e.accounts)),localStorage.setItem("transactions",JSON.stringify(e.transactions)),localStorage.setItem("budgets",JSON.stringify(e.budgets)),localStorage.setItem("goals",JSON.stringify(e.goals)),localStorage.setItem("categories",JSON.stringify(e.categories)),localStorage.setItem("recurringTransactions",JSON.stringify(e.recurringTransactions))})(),tT.preloadCommonLogos(),nT.init(),iT.initializeBackups(),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",e=>{"perform-backup"===e.data.type&&iT.performBackup()}),Ni(dT),Ni(pT),Ni(hT),Ni(yT)},[]),bo.jsx(cT,{children:bo.jsx(Vw,{children:bo.jsx(Gw,{fallback:e=>bo.jsx(Dt,{error:e.error,resetError:e.resetError}),showDialog:!0,children:bo.jsx(Jt,{children:bo.jsx(kr,{children:bo.jsx(fr,{children:bo.jsx(_r,{children:bo.jsx(Ar,{children:bo.jsx(Lr,{children:bo.jsx(vr,{children:bo.jsx(Nr,{children:bo.jsx(zr,{children:bo.jsxs(oo,{children:[bo.jsx(Bi,{}),bo.jsxs(co,{children:[bo.jsx(lo,{path:"/login",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(lT,{})})}),bo.jsxs(lo,{path:"/",element:bo.jsx(Ei,{}),children:[bo.jsx(lo,{index:!0,element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(uT,{})})}),bo.jsx(lo,{path:"dashboard",element:bo.jsx(Ui,{children:bo.jsx(dT,{})})}),bo.jsx(lo,{path:"accounts",element:bo.jsx(Ui,{children:bo.jsx(hT,{})})}),bo.jsx(lo,{path:"accounts/:accountId",element:bo.jsx(Ui,{children:bo.jsx(MT,{})})}),bo.jsx(lo,{path:"transactions",element:bo.jsx(Ui,{children:bo.jsx(pT,{})})}),bo.jsx(lo,{path:"transactions-comparison",element:bo.jsx(Ui,{children:bo.jsx(gT,{})})}),bo.jsx(lo,{path:"reconciliation",element:bo.jsx(Ui,{children:bo.jsx(mT,{})})}),bo.jsx(lo,{path:"investments",element:bo.jsx(Ui,{children:bo.jsx(fT,{})})}),bo.jsx(lo,{path:"enhanced-investments",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx(RT,{})})}),bo.jsx(lo,{path:"budget",element:bo.jsx(Ui,{children:bo.jsx(yT,{})})}),bo.jsx(lo,{path:"goals",element:bo.jsx(Ui,{children:bo.jsx(vT,{})})}),bo.jsx(lo,{path:"analytics",element:bo.jsx(Ui,{children:bo.jsx(bT,{})})}),bo.jsx(lo,{path:"ai-analytics",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx(wT,{})})}),bo.jsx(lo,{path:"ai-features",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx(xT,{})})}),bo.jsx(lo,{path:"custom-reports",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx(kT,{})})}),bo.jsx(lo,{path:"tax-planning",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx(_T,{})})}),bo.jsx(lo,{path:"summaries",element:bo.jsx(Ui,{children:bo.jsx(LT,{})})}),bo.jsx(lo,{path:"household",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx(UT,{})})}),bo.jsx(lo,{path:"mobile-features",element:bo.jsx(Ui,{children:bo.jsx(zT,{})})}),bo.jsx(lo,{path:"business-features",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx($T,{})})}),bo.jsx(lo,{path:"financial-planning",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx(BT,{})})}),bo.jsx(lo,{path:"data-intelligence",element:bo.jsx(Ui,{requirePremium:!0,children:bo.jsx(FT,{})})}),bo.jsx(lo,{path:"export-manager",element:bo.jsx(Ui,{children:bo.jsx(WT,{})})}),bo.jsx(lo,{path:"enhanced-import",element:bo.jsx(Ui,{children:bo.jsx(GT,{})})}),bo.jsx(lo,{path:"documents",element:bo.jsx(Ui,{children:bo.jsx(VT,{})})}),bo.jsx(lo,{path:"ocr-test",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(HT,{})})}),bo.jsx(lo,{path:"open-banking",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(YT,{})})}),bo.jsx(lo,{path:"performance",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(KT,{})})}),bo.jsx(lo,{path:"subscription",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(ZT,{})})}),bo.jsx(lo,{path:"advanced",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(qT,{})})}),bo.jsxs(lo,{path:"settings",children:[bo.jsx(lo,{index:!0,element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(ST,{})})}),bo.jsx(lo,{path:"app",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(jT,{})})}),bo.jsx(lo,{path:"data",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(IT,{})})}),bo.jsx(lo,{path:"categories",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(CT,{})})}),bo.jsx(lo,{path:"tags",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(ET,{})})}),bo.jsx(lo,{path:"notifications",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(OT,{})})}),bo.jsx(lo,{path:"accessibility",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(DT,{})})}),bo.jsx(lo,{path:"deleted-accounts",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(TT,{})})}),bo.jsx(lo,{path:"security",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(NT,{})})}),bo.jsx(lo,{path:"subscription",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(ZT,{})})}),bo.jsx(lo,{path:"security/audit-logs",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(AT,{})})}),bo.jsx(lo,{path:"accessibility",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(PT,{})})})]}),bo.jsx(lo,{path:"diagnostics",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx(Ai,{})})}),bo.jsx(lo,{path:"realtime-test",element:bo.jsx(Gi.Suspense,{fallback:bo.jsx(Tr,{}),children:bo.jsx($i,{})})}),bo.jsx(lo,{path:"forecasting",element:bo.jsx(io,{to:"/budget",replace:!0})})]})]})]})})})})})})})})})})})})})}import{r as Wi,m as qi,a as Gi,n as Vi,f as Hi,o as Yi,g as Ki,q as Zi,s as Ji,b as Qi,j as Xi,u as eo,t as to,v as no,L as ro,w as ao,O as so,N as io,B as oo,x as co,y as lo,P as uo}from"./chunk-BWx9oMeS.js";import{r as ho}from"./chunk-BN8kgYrt.js";import{_ as po}from"./chunk-Drd-K-oK.js";!function(){function e(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}}();var go,mo,fo,yo={exports:{}},vo={},bo=n(),wo={},xo=r(),ko=class e extends Error{static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(t){super(new.target.formatMessage(new.target.kind,t.message,t.code,t.docsUrl),{cause:t.cause}),Object.setPrototypeOf(this,e.prototype),this.code=t.code,this.docsUrl=t.docsUrl,this.longMessage=t.longMessage,this.cause=t.cause}toString(){return`[${this.name}]\nMessage:${this.message}`}static formatMessage(e,t,n,r){const a="Clerk:",s=new RegExp(a.replace(" ","\\s*"),"i");return t=`${a} ${(t=t.replace(s,"")).trim()}\n\n(code="${n}")\n\n`,r&&(t+=`\n\nDocs: ${r}`),t}},_o=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"}),So=class e extends ko{static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(t,n){super({...n,message:t}),Object.setPrototypeOf(this,e.prototype)}},jo=Object.defineProperty,Io=Object.getOwnPropertyDescriptor,Co=Object.getOwnPropertyNames,Eo=Object.prototype.hasOwnProperty,To={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},No=new Set(["first_factor","second_factor","multi_factor"]),Ao=new Set(["strict_mfa","strict","moderate","lax"]),Oo=e=>e.replace(/^(org:)*/,"org:"),Do=(e,t)=>{const{org:n,user:r}=Po(e),[a,s]=t.split(":"),i=s||a;return"org"===a?n.includes(i):"user"===a?r.includes(i):[...n,...r].includes(i)},Po=e=>{const t=e?e.split(",").map(e=>e.trim()):[];return{org:t.filter(e=>e.split(":")[0].includes("o")).map(e=>e.split(":")[1]),user:t.filter(e=>e.split(":")[0].includes("u")).map(e=>e.split(":")[1])}},Mo=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,Lo=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],Ro="pk_live_",Uo=ho(),zo=Object.prototype.hasOwnProperty;const $o=new WeakMap,Bo=()=>{},Fo=Bo(),Wo=Object,qo=e=>e===Fo,Go=e=>"function"==typeof e,Vo=(e,t)=>({...e,...t}),Ho=e=>Go(e.then),Yo={},Ko={},Zo="undefined",Jo=typeof window!=Zo,Qo=typeof document!=Zo,Xo=Jo&&"Deno"in window,ec=(e,t)=>{const n=$o.get(e);return[()=>!qo(t)&&e.get(t)||Yo,r=>{if(!qo(t)){const a=e.get(t);t in Ko||(Ko[t]=a),n[5](t,Vo(a,r),a||Yo)}},n[6],()=>!qo(t)&&t in Ko?Ko[t]:!qo(t)&&e.get(t)||Yo]};let tc=!0;const[nc,rc]=Jo&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Bo,Bo],ac={isOnline:()=>tc,isVisible:()=>{const e=Qo&&document.visibilityState;return qo(e)||"hidden"!==e}},sc={initFocus:e=>(Qo&&document.addEventListener("visibilitychange",e),nc("focus",e),()=>{Qo&&document.removeEventListener("visibilitychange",e),rc("focus",e)}),initReconnect:e=>{const t=()=>{tc=!0,e()},n=()=>{tc=!1};return nc("online",t),nc("offline",n),()=>{rc("online",t),rc("offline",n)}}},ic=!Vi.useId,oc=!Jo||Xo,cc=oc?Gi.useEffect:Gi.useLayoutEffect,lc="undefined"!=typeof navigator&&navigator.connection,uc=!oc&&lc&&(["slow-2g","2g"].includes(lc.effectiveType)||lc.saveData),dc=new WeakMap,hc=(e,t)=>e===`[object ${t}]`;let pc=0;const gc=e=>{const t=typeof e,n=(r=e,Wo.prototype.toString.call(r));var r;const a=hc(n,"Date"),s=hc(n,"RegExp"),i=hc(n,"Object");let o,c;if(Wo(e)!==e||a||s)o=a?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=dc.get(e),o)return o;if(o=++pc+"~",dc.set(e,o),Array.isArray(e)){for(o="@",c=0;c<e.length;c++)o+=gc(e[c])+",";dc.set(e,o)}if(i){o="#";const t=Wo.keys(e).sort();for(;!qo(c=t.pop());)qo(e[c])||(o+=c+":"+gc(e[c])+",");dc.set(e,o)}}return o},mc=e=>{if(Go(e))try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?gc(e):"",t]};let fc=0;const yc=()=>++fc,vc=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},bc=(e,t)=>{if(!$o.has(e)){const n=Vo(sc,t),r=Object.create(null),a=l.bind(Fo,e);let s=Bo;const i=Object.create(null),o=(e,t)=>{const n=i[e]||[];return i[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},c=(t,n,r)=>{e.set(t,n);const a=i[t];if(a)for(const e of a)e(n,r)},u=()=>{if(!$o.has(e)&&($o.set(e,[r,Object.create(null),Object.create(null),Object.create(null),a,c,o]),!oc)){const t=n.initFocus(setTimeout.bind(Fo,vc.bind(Fo,r,0))),a=n.initReconnect(setTimeout.bind(Fo,vc.bind(Fo,r,1)));s=()=>{t&&t(),a&&a(),$o.delete(e)}}};return u(),[e,a,u,s]}return[e,$o.get(e)[4]]},[wc,xc]=bc(new Map),kc=Vo({onLoadingSlow:Bo,onSuccess:Bo,onError:Bo,onErrorRetry:(e,t,n,r,a)=>{const s=n.errorRetryCount,i=a.retryCount,o=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!qo(s)&&i>s||setTimeout(r,o,a)},onDiscarded:Bo,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:uc?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:uc?5e3:3e3,compare:function e(t,n){var r,a;if(t===n)return!0;if(t&&n&&(r=t.constructor)===n.constructor){if(r===Date)return t.getTime()===n.getTime();if(r===RegExp)return t.toString()===n.toString();if(r===Array){if((a=t.length)===n.length)for(;a--&&e(t[a],n[a]););return-1===a}if(!r||"object"==typeof t){for(r in a=0,t){if(zo.call(t,r)&&++a&&!zo.call(n,r))return!1;if(!(r in n)||!e(t[r],n[r]))return!1}return Object.keys(n).length===a}}return t!=t&&n!=n},isPaused:()=>!1,cache:wc,mutate:xc,fallback:{}},ac),_c=(e,t)=>{const n=Vo(e,t);if(t){const{use:r,fallback:a}=e,{use:s,fallback:i}=t;r&&s&&(n.use=r.concat(s)),a&&i&&(n.fallback=Vo(a,i))}return n},Sc=Gi.createContext({}),jc="$inf$",Ic=Jo&&window.__SWR_DEVTOOLS_USE__,Cc=Ic?window.__SWR_DEVTOOLS_USE__:[],Ec=e=>Go(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],Tc=()=>Vo(kc,Gi.useContext(Sc)),Nc=Cc.concat(e=>(t,n,r)=>e(t,n&&((...e)=>{const[r]=mc(t),[,,,a]=$o.get(wc);if(r.startsWith(jc))return n(...e);const s=a[r];return qo(s)?n(...e):(delete a[r],s)}),r));Ic&&(window.__SWR_DEVTOOLS_REACT__=Vi);const Ac=()=>{},Oc=Ac(),Dc=Object,Pc=e=>e===Oc,Mc=new WeakMap,Lc=(e,t)=>e===`[object ${t}]`;let Rc=0;const Uc=e=>{const t=typeof e,n=(r=e,Dc.prototype.toString.call(r));var r;const a=Lc(n,"Date"),s=Lc(n,"RegExp"),i=Lc(n,"Object");let o,c;if(Dc(e)!==e||a||s)o=a?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=Mc.get(e),o)return o;if(o=++Rc+"~",Mc.set(e,o),Array.isArray(e)){for(o="@",c=0;c<e.length;c++)o+=Uc(e[c])+",";Mc.set(e,o)}if(i){o="#";const t=Dc.keys(e).sort();for(;!Pc(c=t.pop());)Pc(e[c])||(o+=c+":"+Uc(e[c])+",");Mc.set(e,o)}}return o},zc=Vi.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),$c={dedupe:!0},Bc=Wo.defineProperty(e=>{const{value:t}=e,n=Gi.useContext(Sc),r=Go(t),a=Gi.useMemo(()=>r?t(n):t,[r,n,t]),s=Gi.useMemo(()=>r?a:_c(n,a),[r,n,a]),i=a&&a.provider,o=Gi.useRef(Fo);i&&!o.current&&(o.current=bc(i(s.cache||wc),a));const c=o.current;return c&&(s.cache=c[0],s.mutate=c[1]),cc(()=>{if(c)return c[2]&&c[2](),c[3]},[]),Gi.createElement(Sc.Provider,Vo(e,{value:s}))},"defaultValue",{value:kc}),Fc=(Wc=(e,t,n)=>{const{cache:r,compare:a,suspense:s,fallbackData:i,revalidateOnMount:o,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:h,keepPreviousData:p}=n,[g,m,f,y]=$o.get(r),[v,b]=mc(e),w=Gi.useRef(!1),x=Gi.useRef(!1),k=Gi.useRef(v),_=Gi.useRef(t),S=Gi.useRef(n),j=()=>S.current,I=()=>j().isVisible()&&j().isOnline(),[C,E,T,N]=ec(r,v),A=Gi.useRef({}).current,O=qo(i)?qo(n.fallback)?Fo:n.fallback[v]:i,D=(e,t)=>{for(const n in A){const r=n;if("data"===r){if(!a(e[r],t[r])){if(!qo(e[r]))return!1;if(!a(F,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},P=Gi.useMemo(()=>{const e=!!v&&!!t&&(qo(o)?!j().isPaused()&&!s&&!1!==c:o),n=t=>{const n=Vo(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=C(),a=N(),i=n(r),l=r===a?i:n(a);let u=i;return[()=>{const e=n(C());return D(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>l]},[r,v]),M=Uo.useSyncExternalStore(Gi.useCallback(e=>T(v,(t,n)=>{D(n,t)||e()}),[r,v]),P[0],P[1]),L=!w.current,R=g[v]&&g[v].length>0,U=M.data,z=qo(U)?O&&Ho(O)?zc(O):O:U,$=M.error,B=Gi.useRef(z),F=p?qo(U)?qo(B.current)?z:B.current:U:z,W=!(R&&!qo($))&&(L&&!qo(o)?o:!j().isPaused()&&(s?!qo(z)&&c:qo(z)||c)),q=!!(v&&t&&L&&W),G=qo(M.isValidating)?q:M.isValidating,V=qo(M.isLoading)?q:M.isLoading,H=Gi.useCallback(async e=>{const t=_.current;if(!v||!t||x.current||j().isPaused())return!1;let r,s,i=!0;const o=e||{},c=!f[v]||!o.dedupe,l=()=>ic?!x.current&&v===k.current&&w.current:v===k.current,u={isValidating:!1,isLoading:!1},d=()=>{E(u)},h=()=>{const e=f[v];e&&e[1]===s&&delete f[v]},p={isValidating:!0};qo(C().data)&&(p.isLoading=!0);try{if(c&&(E(p),n.loadingTimeout&&qo(C().data)&&setTimeout(()=>{i&&l()&&j().onLoadingSlow(v,n)},n.loadingTimeout),f[v]=[t(b),yc()]),[r,s]=f[v],r=await r,c&&setTimeout(h,n.dedupingInterval),!f[v]||f[v][1]!==s)return c&&l()&&j().onDiscarded(v),!1;u.error=Fo;const e=m[v];if(!qo(e)&&(s<=e[0]||s<=e[1]||0===e[1]))return d(),c&&l()&&j().onDiscarded(v),!1;const o=C().data;u.data=a(o,r)?o:r,c&&l()&&j().onSuccess(r,v,n)}catch(y){h();const e=j(),{shouldRetryOnError:t}=e;e.isPaused()||(u.error=y,c&&l()&&(e.onError(y,v,e),(!0===t||Go(t)&&t(y))&&(j().revalidateOnFocus&&j().revalidateOnReconnect&&!I()||e.onErrorRetry(y,v,e,e=>{const t=g[v];t&&t[0]&&t[0](3,e)},{retryCount:(o.retryCount||0)+1,dedupe:!0}))))}return i=!1,d(),!0},[v,r]),Y=Gi.useCallback((...e)=>l(r,k.current,...e),[]);if(cc(()=>{_.current=t,S.current=n,qo(U)||(B.current=U)}),cc(()=>{if(!v)return;const e=H.bind(Fo,$c);let t=0;if(j().revalidateOnFocus){const e=Date.now();t=e+j().focusThrottleInterval}const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(v,g,(n,r={})=>{if(0==n){const n=Date.now();j().revalidateOnFocus&&n>t&&I()&&(t=n+j().focusThrottleInterval,e())}else if(1==n)j().revalidateOnReconnect&&I()&&e();else{if(2==n)return H();if(3==n)return H(r)}});return x.current=!1,k.current=v,w.current=!0,E({_k:b}),W&&(f[v]||(qo(z)||oc?e():(r=e,Jo&&typeof window.requestAnimationFrame!=Zo?window.requestAnimationFrame(r):setTimeout(r,1)))),()=>{x.current=!0,n()};var r},[v]),cc(()=>{function e(){const e=Go(u)?u(C().data):u;e&&-1!==n&&(n=setTimeout(t,e))}function t(){C().error||!d&&!j().isVisible()||!h&&!j().isOnline()?e():H($c).then(e)}let n;return e(),()=>{n&&(clearTimeout(n),n=-1)}},[u,d,h,v]),Gi.useDebugValue(F),s&&qo(z)&&v){if(!ic&&oc)throw new Error("Fallback data is required when using Suspense in SSR.");_.current=t,S.current=n,x.current=!1;const e=y[v];if(!qo(e)){const t=Y(e);zc(t)}if(!qo($))throw $;{const e=H($c);qo(F)||(e.status="fulfilled",e.value=!0),zc(e)}}return{mutate:Y,get data(){return A.data=!0,F},get error(){return A.error=!0,$},get isValidating(){return A.isValidating=!0,G},get isLoading(){return A.isLoading=!0,V}}},function(...e){const t=Tc(),[n,r,a]=Ec(e),s=_c(t,a);let i=Wc;const{use:o}=s,c=(o||[]).concat(Nc);for(let l=c.length;l--;)i=c[l](i);return i(n,r||s.fetcher||null,s)});var Wc;const qc=Object.freeze(Object.defineProperty({__proto__:null,SWRConfig:Bc,default:Fc,mutate:xc,preload:(e,t)=>{const[n,r]=mc(e),[,,,a]=$o.get(wc);if(a[n])return a[n];const s=t(r);return a[n]=s,s},unstable_serialize:e=>(e=>{if("function"==typeof e)try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?Uc(e):"",t]})(e)[0],useSWRConfig:Tc},Symbol.toStringTag,{value:"Module"})),Gc=()=>{},Vc=Gc(),Hc=Object,Yc=e=>e===Vc,Kc=new WeakMap,Zc=(e,t)=>e===`[object ${t}]`;let Jc=0;const Qc=e=>{const t=typeof e,n=(r=e,Hc.prototype.toString.call(r));var r;const a=Zc(n,"Date"),s=Zc(n,"RegExp"),i=Zc(n,"Object");let o,c;if(Hc(e)!==e||a||s)o=a?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(o=Kc.get(e),o)return o;if(o=++Jc+"~",Kc.set(e,o),Array.isArray(e)){for(o="@",c=0;c<e.length;c++)o+=Qc(e[c])+",";Kc.set(e,o)}if(i){o="#";const t=Hc.keys(e).sort();for(;!Yc(c=t.pop());)Yc(e[c])||(o+=c+":"+Qc(e[c])+",");Kc.set(e,o)}}return o},Xc=Promise.resolve(),el=(tl=Fc,nl=e=>(t,n,r)=>{const a=Gi.useRef(!1),{cache:s,initialSize:i=1,revalidateAll:o=!1,persistSize:c=!1,revalidateFirstPage:l=!0,revalidateOnMount:u=!1,parallel:d=!1}=r,[,,,h]=$o.get(wc);let p;try{p=(e=>(e=>{if("function"==typeof e)try{e=e()}catch(n){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?Qc(e):"",t]})(e?e(0,null):null)[0])(t),p&&(p=jc+p)}catch(S){}const[g,m,f]=ec(s,p),y=Gi.useCallback(()=>qo(g()._l)?i:g()._l,[s,p,i]);Uo.useSyncExternalStore(Gi.useCallback(e=>p?f(p,()=>{e()}):()=>{},[s,p]),y,y);const v=Gi.useCallback(()=>{const e=g()._l;return qo(e)?i:e},[p,i]),b=Gi.useRef(v());cc(()=>{a.current?p&&m({_l:c?b.current:v()}):a.current=!0},[p,s]);const w=u&&!a.current,x=e(p,async e=>{const a=g()._i,i=g()._r;m({_r:Fo});const c=[],u=v(),[p]=ec(s,e),f=p().data,y=[];let b=null;for(let g=0;g<u;++g){const[e,u]=mc(t(g,d?null:b));if(!e)break;const[p,m]=ec(s,e);let v=p().data;const x=o||a||qo(v)||l&&!g&&!qo(f)||w||f&&!qo(f[g])&&!r.compare(f[g],v);if(n&&("function"==typeof i?i(v,u):x)){const t=async()=>{if(e in h){const t=h[e];delete h[e],v=await t}else v=await n(u);m({data:v,_k:u}),c[g]=v};d?y.push(t):await t()}else c[g]=v;d||(b=v)}return d&&await Promise.all(y.map(e=>e())),m({_i:Fo}),c},r),k=Gi.useCallback(function(e,t){const n="boolean"==typeof t?{revalidate:t}:t||{},r=!1!==n.revalidate;return p?(r&&(qo(e)?m({_i:!0,_r:n.revalidate}):m({_i:!1,_r:n.revalidate})),arguments.length?x.mutate(e,{...n,revalidate:r}):x.mutate()):Xc},[p,s]),_=Gi.useCallback(e=>{if(!p)return Xc;const[,n]=ec(s,p);let r;if(Go(e)?r=e(v()):"number"==typeof e&&(r=e),"number"!=typeof r)return Xc;n({_l:r}),b.current=r;const a=[],[i]=ec(s,p);let o=null;for(let c=0;c<r;++c){const[e]=mc(t(c,o)),[n]=ec(s,e),r=e?n().data:Fo;if(qo(r))return k(i().data);a.push(r),o=r}return k(a)},[p,s,k,v]);return{size:v(),setSize:_,mutate:k,get data(){return x.data},get error(){return x.error},get isValidating(){return x.isValidating},get isLoading(){return x.isLoading}}},(...e)=>{const[t,n,r]=Ec(e),a=(r.use||[]).concat(nl);return tl(t,n,{...r,use:a})});var tl,nl,rl=Object.prototype.hasOwnProperty,al=(e,t)=>{const{assertCtxFn:n=h}={},r=Vi.createContext(void 0);return r.displayName=e,[r,()=>{const t=Vi.useContext(r);return n(t,`${e} not found`),t.value},()=>{const e=Vi.useContext(r);return e?e.value:{}}]},sl={};((e,t)=>{for(var n in t)jo(e,n,{get:t[n],enumerable:!0})})(sl,{useSWR:()=>Fc,useSWRInfinite:()=>el}),((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of Co(t))Eo.call(e,a)||"default"===a||jo(e,a,{get:()=>t[a],enumerable:!(r=Io(t,a))||r.enumerable})})(sl,qc);var[il,ol]=al("ClerkInstanceContext"),[cl,ll]=al("UserContext"),[ul]=al("ClientContext"),[dl,hl]=al("SessionContext");Vi.createContext({});var[pl]=al("CheckoutContext"),gl=({children:e,...t})=>Vi.createElement(pl.Provider,{value:{value:t}},e),[ml]=al("OrganizationContext"),fl=({children:e,organization:t,swrConfig:n})=>Vi.createElement(sl.SWRConfig,{value:n},Vi.createElement(ml.Provider,{value:{value:{organization:t}}},e)),yl="useSession",vl=()=>{p(yl);const e=hl(),t=ol();return t.telemetry?.record(c(yl)),void 0===e?{isLoaded:!1,isSignedIn:void 0,session:void 0}:null===e?{isLoaded:!0,isSignedIn:!1,session:null}:{isLoaded:!0,isSignedIn:t.isSignedIn,session:e}},bl="useUser",wl=d,xl=(e,t,n)=>{const r=!!n,a=Gi.useRef(n);Gi.useEffect(()=>{a.current=n},[n]),Gi.useEffect(()=>{if(!r||!e)return()=>{};const n=(...e)=>{a.current&&a.current(...e)};return e.on(t,n),()=>{e.off(t,n)}},[r,t,e,a])},kl=Vi.createContext(null);kl.displayName="ElementsContext";var _l=e=>null!==e&&"object"==typeof e,Sl="[object Object]",jl=(e,t)=>{if(!_l(e)||!_l(t))return e===t;const n=Array.isArray(e);if(n!==Array.isArray(t))return!1;const r=Object.prototype.toString.call(e)===Sl;if(r!==(Object.prototype.toString.call(t)===Sl))return!1;if(!r&&!n)return e===t;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;const i={};for(let u=0;u<a.length;u+=1)i[a[u]]=!0;for(let u=0;u<s.length;u+=1)i[s[u]]=!0;const o=Object.keys(i);if(o.length!==a.length)return!1;const c=e,l=t;return o.every(e=>jl(c[e],l[e]))},Il=e=>((e,t)=>{if(!e)throw new Error(`Could not find Elements context; You need to wrap the part of your app that ${t} in an <Elements> provider.`);return e})(Vi.useContext(kl),e);((e,t)=>{const n=`${r=e,r.charAt(0).toUpperCase()+r.slice(1)}Element`;var r;const a=t?e=>{Il(`mounts <${n}>`);const{id:t,className:r}=e;return Vi.createElement("div",{id:t,className:r})}:({id:t,className:r,fallback:a,options:s={},onBlur:i,onFocus:o,onReady:c,onChange:l,onEscape:u,onClick:d,onLoadError:h,onLoaderStart:p,onNetworksChange:g,onConfirm:m,onCancel:f,onShippingAddressChange:y,onShippingRateChange:v})=>{const b=Il(`mounts <${n}>`),w="elements"in b?b.elements:null,[x,k]=Vi.useState(null),_=Vi.useRef(null),S=Vi.useRef(null),[j,I]=Gi.useState(!1);let C;xl(x,"blur",i),xl(x,"focus",o),xl(x,"escape",u),xl(x,"click",d),xl(x,"loaderror",h),xl(x,"loaderstart",p),xl(x,"networkschange",g),xl(x,"confirm",m),xl(x,"cancel",f),xl(x,"shippingaddresschange",y),xl(x,"shippingratechange",v),xl(x,"change",l),c&&(C=()=>{I(!0),c(x)}),xl(x,"ready",C),Vi.useLayoutEffect(()=>{if(null===_.current&&null!==S.current&&w){let t=null;w&&(t=w.create(e,s)),_.current=t,k(t),t&&t.mount(S.current)}},[w,s]);const E=(e=>{const t=Gi.useRef(e);return Gi.useEffect(()=>{t.current=e},[e]),t.current})(s);return Vi.useEffect(()=>{if(!_.current)return;const e=((e,t,n)=>_l(e)?Object.keys(e).reduce((r,a)=>{const s=!_l(t)||!jl(e[a],t[a]);return n.includes(a)?r:s?{...r||{},[a]:e[a]}:r},null):null)(s,E,["paymentRequest"]);e&&"update"in _.current&&_.current.update(e)},[s,E]),Vi.useLayoutEffect(()=>()=>{if(_.current&&"function"==typeof _.current.destroy)try{_.current.destroy(),_.current=null}catch{}},[]),Vi.createElement(Vi.Fragment,null,!j&&a,Vi.createElement("div",{id:t,style:{height:j?"unset":"0px",visibility:j?"visible":"hidden"},className:r,ref:S}))};a.displayName=n,a.__elementType=e})("payment","undefined"==typeof window),al("StripeLibsContext"),al("PaymentElementContext"),al("StripeUtilsContext");var Cl=a({packageName:"@clerk/clerk-react"}),[El,Tl]=al("AuthContext"),Nl=il,Al=ol,Ol="Unsupported usage of isSatellite, domain or proxyUrl. The usage of isSatellite, domain or proxyUrl as function is not supported in non-browser environments.",Dl=e=>{p(()=>{Cl.throwMissingClerkProviderError({source:e})})},Pl=e=>new Promise(t=>{const n=r=>{["ready","degraded"].includes(r)&&(t(),e.off("status",n))};e.on("status",n,{notify:!0})}),Ml=(e={})=>{var t;Dl("useAuth");const{treatPendingAsSignedOut:n,...r}=null!=e?e:{},a=r;let s=Tl();void 0===s.sessionId&&void 0===s.userId&&(s=null!=a?a:{});const i=Al(),o=Gi.useCallback((e=>async t=>(await Pl(e),e.session?e.session.getToken(t):null))(i),[i]),l=Gi.useCallback((e=>async(...t)=>(await Pl(e),e.signOut(...t)))(i),[i]);return null==(t=i.telemetry)||t.record(c("useAuth",{treatPendingAsSignedOut:n})),function(e,{treatPendingAsSignedOut:t=!0}={}){const{userId:n,orgId:r,orgRole:a,has:s,signOut:i,getToken:o,orgPermissions:c,factorVerificationAge:l,sessionClaims:u}=null!=e?e:{},d=Gi.useCallback(e=>{return s?s(e):(t={userId:n,orgId:r,orgRole:a,orgPermissions:c,factorVerificationAge:l,features:(null==u?void 0:u.fea)||"",plans:(null==u?void 0:u.pla)||""},e=>{if(!t.userId)return!1;const n=((e,t)=>{const{features:n,plans:r}=t;return e.feature&&n?Do(n,e.feature):e.plan&&r?Do(r,e.plan):null})(e,t),r=((e,t)=>{const{orgId:n,orgRole:r,orgPermissions:a}=t;return(e.role||e.permission)&&n&&r&&a?e.permission?a.includes(Oo(e.permission)):e.role?Oo(r)===Oo(e.role):null:null})(e,t),a=((e,{factorVerificationAge:t})=>{if(!e.reverification||!t)return null;const n=(e=>{if(!e)return!1;const t="string"==typeof e&&(a=e,Ao.has(a)),n="object"==typeof e&&(e=>No.has(e))(e.level)&&"number"==typeof(r=e.afterMinutes)&&r>0;var r,a;return!(!t&&!n)&&(e=>"string"==typeof e?To[e]:e).bind(null,e)})(e.reverification);if(!n)return null;const{level:r,afterMinutes:a}=n(),[s,i]=t,o=-1!==s?a>s:null,c=-1!==i?a>i:null;switch(r){case"first_factor":return o;case"second_factor":return-1!==i?c:o;case"multi_factor":return-1===i?o:o&&c}})(e,t);return[n||r,a].some(e=>null===e)?[n||r,a].some(e=>!0===e):[n||r,a].every(e=>!0===e)})(e);var t},[s,n,r,a,c,l]),h=(({authObject:{sessionId:e,sessionStatus:t,userId:n,actor:r,orgId:a,orgRole:s,orgSlug:i,signOut:o,getToken:c,has:l,sessionClaims:u},options:{treatPendingAsSignedOut:d=!0}})=>void 0===e&&void 0===n?{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:n,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:o,getToken:c}:null===e&&null===n?{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:n,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:o,getToken:c}:d&&"pending"===t?{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:o,getToken:c}:e&&u&&n&&a&&s?{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:n,actor:r||null,orgId:a,orgRole:s,orgSlug:i||null,has:l,signOut:o,getToken:c}:e&&u&&n&&!a?{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:n,actor:r||null,orgId:null,orgRole:null,orgSlug:null,has:l,signOut:o,getToken:c}:void 0)({authObject:{...e,getToken:o,signOut:i,has:d},options:{treatPendingAsSignedOut:t}});return h||Cl.throw("Invalid state. Feel free to submit a bug or reach out to support here: https://clerk.com/support")}({...s,getToken:o,signOut:l},{treatPendingAsSignedOut:n})},Ll=(e,t)=>{const n=("string"==typeof t?t:null==t?void 0:t.component)||e.displayName||e.name||"Component";e.displayName=n;const r="string"==typeof t?void 0:t,a=t=>{Dl(n);const a=Al();return a.loaded||(null==r?void 0:r.renderWhileLoading)?Vi.createElement(e,{...t,component:n,clerk:a}):null};return a.displayName=`withClerk(${n})`,a},Rl=()=>{try{return!1}catch{}return!1},Ul=()=>{try{return!0}catch{}return!1},zl=e=>{(()=>{try{return!1}catch{}return!1})()&&console.error(`Clerk: ${e}`)},$l=(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n},Bl=e=>t=>{try{return Vi.Children.only(e)}catch{return Cl.throw((e=>`You've passed multiple children components to <${e}/>. You can only pass a single child component or text.`)(t))}},Fl=(e,t)=>(e||(e=t),"string"==typeof e&&(e=Vi.createElement("button",null,e)),e),Wl=e=>(...t)=>{if(e&&"function"==typeof e)return e(...t)},ql=new Map,Gl=e=>{const[t,n]=Gi.useState(new Map);return e.map(e=>({id:e.id,mount:t=>n(n=>new Map(n).set(String(e.id),t)),unmount:()=>n(t=>{const n=new Map(t);return n.set(String(e.id),null),n}),portal:()=>{const n=t.get(String(e.id));return n?Hi.createPortal(e.component,n):null}}))},Vl=(e,t)=>!!e&&Vi.isValidElement(e)&&(null==e?void 0:e.type)===t,Hl=(e,t)=>Zl({children:e,reorderItemsLabels:["account","security"],LinkComponent:v,PageComponent:y,MenuItemsComponent:b,componentName:"UserProfile"},t),Yl=(e,t)=>Zl({children:e,reorderItemsLabels:["general","members"],LinkComponent:_,PageComponent:k,componentName:"OrganizationProfile"},t),Kl=e=>{const t=[],n=[_,k,b,y,v];return Vi.Children.forEach(e,e=>{n.some(t=>Vl(e,t))||t.push(e)}),t},Zl=(e,t)=>{const{children:n,LinkComponent:r,PageComponent:a,MenuItemsComponent:s,reorderItemsLabels:i,componentName:o}=e,{allowForAnyChildren:c=!1}=t||{},l=[];Vi.Children.forEach(n,e=>{if(!Vl(e,a)&&!Vl(e,r)&&!Vl(e,s))return void(e&&!c&&zl((e=>`<${e} /> can only accept <${e}.Page /> and <${e}.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component.`)(o)));const{props:t}=e,{children:n,label:u,url:d,labelIcon:h}=t;if(Vl(e,a))if(Jl(t,i))l.push({label:u});else{if(!Ql(t))return void zl((e=>`Missing props. <${e}.Page /> component requires the following props: url, label, labelIcon, alongside with children to be rendered inside the page.`)(o));l.push({label:u,labelIcon:h,children:n,url:d})}if(Vl(e,r)){if(!Xl(t))return void zl((e=>`Missing props. <${e}.Link /> component requires the following props: url, label and labelIcon.`)(o));l.push({label:u,labelIcon:h,url:d})}});const u=[],d=[],h=[];l.forEach((e,t)=>{if(Ql(e))return u.push({component:e.children,id:t}),void d.push({component:e.labelIcon,id:t});Xl(e)&&h.push({component:e.labelIcon,id:t})});const p=Gl(u),g=Gl(d),m=Gl(h),f=[],y=[];return l.forEach((e,t)=>{if(Jl(e,i))f.push({label:e.label});else{if(Ql(e)){const{portal:n,mount:r,unmount:a}=p.find(e=>e.id===t),{portal:s,mount:i,unmount:o}=g.find(e=>e.id===t);return f.push({label:e.label,url:e.url,mount:r,unmount:a,mountIcon:i,unmountIcon:o}),y.push(n),void y.push(s)}if(Xl(e)){const{portal:n,mount:r,unmount:a}=m.find(e=>e.id===t);return f.push({label:e.label,url:e.url,mountIcon:r,unmountIcon:a}),void y.push(n)}}}),{customPages:f,customPagesPortals:y}},Jl=(e,t)=>{const{children:n,label:r,url:a,labelIcon:s}=e;return!n&&!a&&!s&&t.some(e=>e===r)},Ql=e=>{const{children:t,label:n,url:r,labelIcon:a}=e;return!!(t&&r&&a&&n)},Xl=e=>{const{children:t,label:n,url:r,labelIcon:a}=e;return!(t||!r||!a||!n)},eu=(e,t)=>{const{children:n,label:r,onClick:a,labelIcon:s}=e;return!n&&!a&&!s&&t.some(e=>e===r)},tu=e=>{const{label:t,labelIcon:n,onClick:r,open:a}=e;return!(!n||!t||"function"!=typeof r&&"string"!=typeof a)},nu=e=>{const{label:t,href:n,labelIcon:r}=e;return!!n&&!!r&&!!t},ru=(e=>{const t=null==e?void 0:e.isReady;return n=>new Promise((r,a)=>{const{root:s=(null==document?void 0:document.body),selector:i,timeout:o=0}=n;if(!s)return void a(new Error("No root element provided"));let c=s;if(i&&(c=null==s?void 0:s.querySelector(i)),t(c,i))return void r();const l=new MutationObserver(n=>{for(const a of n)if(!c&&i&&(c=null==s?void 0:s.querySelector(i)),(e.childList&&"childList"===a.type||e.attributes&&"attributes"===a.type)&&t(c,i))return l.disconnect(),void r()});l.observe(s,e),o>0&&setTimeout(()=>{l.disconnect(),a(new Error(`Timeout waiting for ${i}`))},o)})})({childList:!0,subtree:!0,isReady:(e,t)=>{var n;return!!(null==e?void 0:e.childElementCount)&&(null==(n=null==e?void 0:e.matches)?void 0:n.call(e,t))&&e.childElementCount>0}}),au=e=>"mount"in e,su=e=>"open"in e,iu=e=>null==e?void 0:e.map(({mountIcon:e,unmountIcon:t,...n})=>n),ou=class extends Vi.PureComponent{constructor(){super(...arguments),this.rootRef=Vi.createRef()}componentDidUpdate(e){var t,n,r,a;if(!au(e)||!au(this.props))return;const s=$l(e.props,"customPages","customMenuItems","children"),i=$l(this.props.props,"customPages","customMenuItems","children"),o=(null==(t=s.customPages)?void 0:t.length)!==(null==(n=i.customPages)?void 0:n.length),c=(null==(r=s.customMenuItems)?void 0:r.length)!==(null==(a=i.customMenuItems)?void 0:a.length),l=iu(e.props.customMenuItems),u=iu(this.props.props.customMenuItems);wl(s,i)&&wl(l,u)&&!o&&!c||this.rootRef.current&&this.props.updateProps({node:this.rootRef.current,props:this.props.props})}componentDidMount(){this.rootRef.current&&(au(this.props)&&this.props.mount(this.rootRef.current,this.props.props),su(this.props)&&this.props.open(this.props.props))}componentWillUnmount(){this.rootRef.current&&(au(this.props)&&this.props.unmount(this.rootRef.current),su(this.props)&&this.props.close())}render(){const{hideRootHtmlElement:e=!1}=this.props,t={ref:this.rootRef,...this.props.rootProps,...this.props.component&&{"data-clerk-component":this.props.component}};return Vi.createElement(Vi.Fragment,null,!e&&Vi.createElement("div",{...t}),this.props.children)}},cu=e=>{var t,n;return Vi.createElement(Vi.Fragment,null,null==(t=null==e?void 0:e.customPagesPortals)?void 0:t.map((e,t)=>Gi.createElement(e,{key:t})),null==(n=null==e?void 0:e.customMenuItemsPortals)?void 0:n.map((e,t)=>Gi.createElement(e,{key:t})))};Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountSignIn,unmount:e.unmountSignIn,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"SignIn",renderWhileLoading:!0}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountSignUp,unmount:e.unmountSignUp,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"SignUp",renderWhileLoading:!0});var lu=Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}},{customPages:i,customPagesPortals:o}=Hl(r.children);return Vi.createElement(Vi.Fragment,null,a&&n,Vi.createElement(ou,{component:t,mount:e.mountUserProfile,unmount:e.unmountUserProfile,updateProps:e.__unstable__updateProps,props:{...r,customPages:i},rootProps:s},Vi.createElement(cu,{customPagesPortals:o})))},{component:"UserProfile",renderWhileLoading:!0});Object.assign(lu,{Page:y,Link:v});var uu=Gi.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),du=Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}},{customPages:i,customPagesPortals:o}=Hl(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),c=Object.assign(r.userProfileProps||{},{customPages:i}),{customMenuItems:l,customMenuItemsPortals:u}=((e,t)=>{var n;return(({children:e,MenuItemsComponent:t,MenuActionComponent:n,MenuLinkComponent:r,UserProfileLinkComponent:a,UserProfilePageComponent:s,reorderItemsLabels:i,allowForAnyChildren:o=!1})=>{const c=[],l=[],u=[];Vi.Children.forEach(e,e=>{if(!Vl(e,t)&&!Vl(e,a)&&!Vl(e,s))return void(e&&!o&&zl("<UserButton /> can only accept <UserButton.UserProfilePage />, <UserButton.UserProfileLink /> and <UserButton.MenuItems /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component."));if(Vl(e,a)||Vl(e,s))return;const{props:l}=e;Vi.Children.forEach(l.children,e=>{if(!Vl(e,n)&&!Vl(e,r))return void(e&&zl("<UserButton.MenuItems /> component can only accept <UserButton.Action /> and <UserButton.Link /> as its children. Any other provided component will be ignored. Additionally, please ensure that the component is rendered in a client component."));const{props:t}=e,{label:a,labelIcon:s,href:o,onClick:l,open:u}=t;if(Vl(e,n))if(eu(t,i))c.push({label:a});else{if(!tu(t))return void zl("Missing props. <UserButton.Action /> component requires the following props: label.");{const e={label:a,labelIcon:s};if(void 0!==l)c.push({...e,onClick:l});else{if(void 0===u)return void zl("Custom menu item must have either onClick or open property");c.push({...e,open:u.startsWith("/")?u:`/${u}`})}}}if(Vl(e,r)){if(!nu(t))return void zl("Missing props. <UserButton.Link /> component requires the following props: href, label and labelIcon.");c.push({label:a,labelIcon:s,href:o})}})});const d=[],h=[];c.forEach((e,t)=>{tu(e)&&d.push({component:e.labelIcon,id:t}),nu(e)&&h.push({component:e.labelIcon,id:t})});const p=Gl(d),g=Gl(h);return c.forEach((e,t)=>{if(eu(e,i)&&l.push({label:e.label}),tu(e)){const{portal:n,mount:r,unmount:a}=p.find(e=>e.id===t),s={label:e.label,mountIcon:r,unmountIcon:a};"onClick"in e?s.onClick=e.onClick:"open"in e&&(s.open=e.open),l.push(s),u.push(n)}if(nu(e)){const{portal:n,mount:r,unmount:a}=g.find(e=>e.id===t);l.push({label:e.label,href:e.href,mountIcon:r,unmountIcon:a}),u.push(n)}}),{customMenuItems:l,customMenuItemsPortals:u}})({children:e,reorderItemsLabels:["manageAccount","signOut"],MenuItemsComponent:b,MenuActionComponent:w,MenuLinkComponent:x,UserProfileLinkComponent:v,UserProfilePageComponent:y,allowForAnyChildren:null!=(n=null==t?void 0:t.allowForAnyChildren)&&n})})(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),d=Kl(r.children),h={mount:e.mountUserButton,unmount:e.unmountUserButton,updateProps:e.__unstable__updateProps,props:{...r,userProfileProps:c,customMenuItems:l}},p={customPagesPortals:o,customMenuItemsPortals:u};return Vi.createElement(uu.Provider,{value:h},a&&n,e.loaded&&Vi.createElement(ou,{component:t,...h,hideRootHtmlElement:!!r.__experimental_asProvider,rootProps:s},r.__experimental_asProvider?d:null,Vi.createElement(cu,{...p})))},{component:"UserButton",renderWhileLoading:!0}),hu=Object.assign(du,{UserProfilePage:y,UserProfileLink:v,MenuItems:b,Action:w,Link:x,__experimental_Outlet:function(e){const t=Gi.useContext(uu),n={...t,props:{...t.props,...e}};return Vi.createElement(ou,{...n})}}),pu=Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}},{customPages:i,customPagesPortals:o}=Yl(r.children);return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountOrganizationProfile,unmount:e.unmountOrganizationProfile,updateProps:e.__unstable__updateProps,props:{...r,customPages:i},rootProps:s},Vi.createElement(cu,{customPagesPortals:o})))},{component:"OrganizationProfile",renderWhileLoading:!0});Object.assign(pu,{Page:k,Link:_}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountCreateOrganization,unmount:e.unmountCreateOrganization,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"CreateOrganization",renderWhileLoading:!0});var gu=Gi.createContext({mount:()=>{},unmount:()=>{},updateProps:()=>{}}),mu=Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}},{customPages:i,customPagesPortals:o}=Yl(r.children,{allowForAnyChildren:!!r.__experimental_asProvider}),c=Object.assign(r.organizationProfileProps||{},{customPages:i}),l=Kl(r.children),u={mount:e.mountOrganizationSwitcher,unmount:e.unmountOrganizationSwitcher,updateProps:e.__unstable__updateProps,props:{...r,organizationProfileProps:c},rootProps:s,component:t};return e.__experimental_prefetchOrganizationSwitcher(),Vi.createElement(gu.Provider,{value:u},Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{...u,hideRootHtmlElement:!!r.__experimental_asProvider},r.__experimental_asProvider?l:null,Vi.createElement(cu,{customPagesPortals:o}))))},{component:"OrganizationSwitcher",renderWhileLoading:!0});Object.assign(mu,{OrganizationProfilePage:k,OrganizationProfileLink:_,__experimental_Outlet:function(e){const t=Gi.useContext(gu),n={...t,props:{...t.props,...e}};return Vi.createElement(ou,{...n})}}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountOrganizationList,unmount:e.unmountOrganizationList,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"OrganizationList",renderWhileLoading:!0}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,open:e.openGoogleOneTap,close:e.closeGoogleOneTap,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"GoogleOneTap",renderWhileLoading:!0}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountWaitlist,unmount:e.unmountWaitlist,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"Waitlist",renderWhileLoading:!0}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t,{selector:'[data-component-status="ready"]'})||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountPricingTable,unmount:e.unmountPricingTable,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"PricingTable",renderWhileLoading:!0}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountApiKeys,unmount:e.unmountApiKeys,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"ApiKeys",renderWhileLoading:!0}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountUserAvatar,unmount:e.unmountUserAvatar,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"UserAvatar",renderWhileLoading:!0}),Ll(({clerk:e,component:t,fallback:n,...r})=>{const a="rendering"===f(t)||!e.loaded,s={...a&&n&&{style:{display:"none"}}};return Vi.createElement(Vi.Fragment,null,a&&n,e.loaded&&Vi.createElement(ou,{component:t,mount:e.mountTaskChooseOrganization,unmount:e.unmountTaskChooseOrganization,updateProps:e.__unstable__updateProps,props:r,rootProps:s}))},{component:"TaskChooseOrganization",renderWhileLoading:!0});var fu=e=>{throw TypeError(e)},yu=(e,t,n)=>t.has(e)||fu("Cannot "+n),vu=(e,t,n)=>(yu(e,t,"read from private field"),n?n.call(e):t.get(e)),bu=(e,t,n)=>t.has(e)?fu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),wu=(e,t,n,r)=>(yu(e,t,"write to private field"),t.set(e,n),n),xu=(e,t,n)=>(yu(e,t,"access private method"),n),ku={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,t)=>t<5,retryImmediately:!1,jitter:!0},_u=async e=>new Promise(t=>setTimeout(t,e)),Su=(e,t)=>t?e*(1+Math.random()):e,ju="Failed to load Clerk",{isDevOrStagingUrl:Iu}=function(){const e=new Map;return{isDevOrStagingUrl:t=>{if(!t)return!1;const n="string"==typeof t?t:t.hostname;let r=e.get(n);return void 0===r&&(r=Lo.some(e=>n.endsWith(e)),e.set(n,r)),r}}}(),Cu=a({packageName:"@clerk/shared"}),Eu=e=>t=>{const n=(e=>{const t={};return e.publishableKey&&(t["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(t["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(t["data-clerk-domain"]=e.domain),e.nonce&&(t.nonce=e.nonce),t})(e);for(const e in n)t.setAttribute(e,n[e])},Tu=e=>{const t=e.userId,n=e.user,r=e.sessionId,a=e.sessionStatus,s=e.sessionClaims;return{userId:t,user:n,sessionId:r,session:e.session,sessionStatus:a,sessionClaims:s,organization:e.organization,orgId:e.orgId,orgRole:e.orgRole,orgPermissions:e.orgPermissions,orgSlug:e.orgSlug,actor:e.actor,factorVerificationAge:e.factorVerificationAge}},Nu=e=>{const t=e.user?e.user.id:e.user,n=e.user,r=e.session?e.session.id:e.session,a=e.session,s=e.session?.status,i=e.session?e.session.lastActiveToken?.jwt?.claims:null,o=e.session?e.session.factorVerificationAge:null,c=a?.actor,l=e.organization,u=e.organization?e.organization.id:e.organization,d=l?.slug,h=l?n?.organizationMemberships?.find(e=>e.organization.id===u):l,p=h?h.permissions:h,g=h?h.role:h;return{userId:t,user:n,sessionId:r,session:a,sessionStatus:s,sessionClaims:i,organization:l,orgId:u,orgRole:g,orgSlug:d,orgPermissions:p,actor:c,factorVerificationAge:o}},Au=(e,t,n,r,a)=>{const{notify:s}=a||{};let i=e.get(n);i||(i=[],e.set(n,i)),i.push(r),s&&t.has(n)&&r(t.get(n))},Ou=(e,t,n)=>(e.get(t)||[]).map(e=>e(n)),Du=(e,t,n)=>{const r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},Pu="status";"undefined"==typeof window||window.global||(window.global="undefined"==typeof global?window:global);var Mu=Ll(({clerk:e,children:t,...n})=>{const{signUpFallbackRedirectUrl:r,forceRedirectUrl:a,fallbackRedirectUrl:s,signUpForceRedirectUrl:i,mode:o,initialValues:c,withSignUp:l,oauthFlow:u,...d}=n;t=Fl(t,"Sign in");const h=Bl(t)("SignInButton"),p={...d,onClick:async t=>(h&&"object"==typeof h&&"props"in h&&await Wl(h.props.onClick)(t),(()=>{const t={forceRedirectUrl:a,fallbackRedirectUrl:s,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:i,initialValues:c,withSignUp:l,oauthFlow:u};return"modal"===o?e.openSignIn({...t,appearance:n.appearance}):e.redirectToSignIn({...t,signInFallbackRedirectUrl:s,signInForceRedirectUrl:a})})())};return Vi.cloneElement(h,p)},{component:"SignInButton",renderWhileLoading:!0});Ll(({clerk:e,children:t,...n})=>{const{redirectUrl:r,...a}=n;t=Fl(t,"Sign in with Metamask");const s=Bl(t)("SignInWithMetamaskButton"),i={...a,onClick:async t=>(await Wl(s.props.onClick)(t),(async()=>{!async function(){await e.authenticateWithMetamask({redirectUrl:r||void 0})}()})())};return Vi.cloneElement(s,i)},{component:"SignInWithMetamask",renderWhileLoading:!0}),Ll(({clerk:e,children:t,...n})=>{const{redirectUrl:r="/",signOutOptions:a,...s}=n;t=Fl(t,"Sign out");const i=Bl(t)("SignOutButton"),o={...s,onClick:async t=>(await Wl(i.props.onClick)(t),e.signOut({redirectUrl:r,...a}))};return Vi.cloneElement(i,o)},{component:"SignOutButton",renderWhileLoading:!0});var Lu=Ll(({clerk:e,children:t,...n})=>{const{fallbackRedirectUrl:r,forceRedirectUrl:a,signInFallbackRedirectUrl:s,signInForceRedirectUrl:i,mode:o,initialValues:c,oauthFlow:l,...u}=n;t=Fl(t,"Sign up");const d=Bl(t)("SignUpButton"),h={...u,onClick:async t=>(d&&"object"==typeof d&&"props"in d&&await Wl(d.props.onClick)(t),(()=>{const t={fallbackRedirectUrl:r,forceRedirectUrl:a,signInFallbackRedirectUrl:s,signInForceRedirectUrl:i,initialValues:c,oauthFlow:l};return"modal"===o?e.openSignUp({...t,appearance:n.appearance,unsafeMetadata:n.unsafeMetadata}):e.redirectToSignUp({...t,signUpFallbackRedirectUrl:r,signUpForceRedirectUrl:a})})())};return Vi.cloneElement(d,h)},{component:"SignUpButton",renderWhileLoading:!0}),Ru=class{constructor(e){this.isomorphicClerk=e,this.signInSignalProxy=this.buildSignInProxy(),this.signUpSignalProxy=this.buildSignUpProxy()}signInSignal(){return this.signInSignalProxy}signUpSignal(){return this.signUpSignalProxy}buildSignInProxy(){const e=this.gateProperty.bind(this),t=()=>this.client.signIn.__internal_future;return{errors:{fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null},fetchStatus:"idle",signIn:{status:"needs_identifier",availableStrategies:[],isTransferable:!1,get id(){return e(t,"id",void 0)},get supportedFirstFactors(){return e(t,"supportedFirstFactors",[])},get supportedSecondFactors(){return e(t,"supportedSecondFactors",[])},get secondFactorVerification(){return e(t,"secondFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},get identifier(){return e(t,"identifier",null)},get createdSessionId(){return e(t,"createdSessionId",null)},get userData(){return e(t,"userData",{})},get firstFactorVerification(){return e(t,"firstFactorVerification",{status:null,error:null,expireAt:null,externalVerificationRedirectURL:null,nonce:null,attempts:null,message:null,strategy:null,verifiedAtClient:null,verifiedFromTheSameClient:()=>!1,__internal_toSnapshot:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")},pathRoot:"",reload:()=>{throw new Error("__internal_toSnapshot called before Clerk is loaded")}})},create:this.gateMethod(t,"create"),password:this.gateMethod(t,"password"),sso:this.gateMethod(t,"sso"),finalize:this.gateMethod(t,"finalize"),emailCode:this.wrapMethods(()=>t().emailCode,["sendCode","verifyCode"]),emailLink:this.wrapStruct(()=>t().emailLink,["sendLink","waitForVerification"],["verification"],{verification:null}),resetPasswordEmailCode:this.wrapMethods(()=>t().resetPasswordEmailCode,["sendCode","verifyCode","submitPassword"]),phoneCode:this.wrapMethods(()=>t().phoneCode,["sendCode","verifyCode"]),mfa:this.wrapMethods(()=>t().mfa,["sendPhoneCode","verifyPhoneCode","verifyTOTP","verifyBackupCode"]),ticket:this.gateMethod(t,"ticket"),passkey:this.gateMethod(t,"passkey"),web3:this.gateMethod(t,"web3")}}}buildSignUpProxy(){const e=this.gateProperty.bind(this),t=this.gateMethod.bind(this),n=this.wrapMethods.bind(this),r=()=>this.client.signUp.__internal_future;return{errors:{fields:{firstName:null,lastName:null,emailAddress:null,identifier:null,phoneNumber:null,password:null,username:null,code:null,captcha:null,legalAccepted:null},raw:null,global:null},fetchStatus:"idle",signUp:{get id(){return e(r,"id",void 0)},get requiredFields(){return e(r,"requiredFields",[])},get optionalFields(){return e(r,"optionalFields",[])},get missingFields(){return e(r,"missingFields",[])},get username(){return e(r,"username",null)},get firstName(){return e(r,"firstName",null)},get lastName(){return e(r,"lastName",null)},get emailAddress(){return e(r,"emailAddress",null)},get phoneNumber(){return e(r,"phoneNumber",null)},get web3Wallet(){return e(r,"web3Wallet",null)},get hasPassword(){return e(r,"hasPassword",!1)},get unsafeMetadata(){return e(r,"unsafeMetadata",{})},get createdSessionId(){return e(r,"createdSessionId",null)},get createdUserId(){return e(r,"createdUserId",null)},get abandonAt(){return e(r,"abandonAt",null)},get legalAcceptedAt(){return e(r,"legalAcceptedAt",null)},get locale(){return e(r,"locale",null)},get status(){return e(r,"status","missing_requirements")},get unverifiedFields(){return e(r,"unverifiedFields",[])},get isTransferable(){return e(r,"isTransferable",!1)},create:t(r,"create"),update:t(r,"update"),sso:t(r,"sso"),password:t(r,"password"),ticket:t(r,"ticket"),web3:t(r,"web3"),finalize:t(r,"finalize"),verifications:n(()=>r().verifications,["sendEmailCode","verifyEmailCode","sendPhoneCode","verifyPhoneCode"])}}}__internal_effect(e){throw new Error("__internal_effect called before Clerk is loaded")}__internal_computed(e){throw new Error("__internal_computed called before Clerk is loaded")}get client(){const e=this.isomorphicClerk.client;if(!e)throw new Error("Clerk client not ready");return e}gateProperty(e,t,n){return(()=>E()&&this.isomorphicClerk.loaded?e()[t]:n)()}gateMethod(e,t){return async(...n)=>{if(!E())return Cl.throw(`Attempted to call a method (${t}) that is not supported on the server.`);this.isomorphicClerk.loaded||await new Promise(e=>this.isomorphicClerk.addOnLoaded(e));const r=e();return r[t].apply(r,n)}}wrapMethods(e,t){return Object.fromEntries(t.map(t=>[t,this.gateMethod(e,t)]))}wrapStruct(e,t,n,r){const a={};for(const s of t)a[s]=this.gateMethod(e,s);for(const s of n)Object.defineProperty(a,s,{get:()=>this.gateProperty(e,s,r[s]),enumerable:!0});return a}};void 0===globalThis.__BUILD_DISABLE_RHC__&&(globalThis.__BUILD_DISABLE_RHC__=!1);var Uu,zu,$u,Bu,Fu,Wu,qu,Gu,Vu,Hu={name:"@clerk/clerk-react",version:"5.53.4",environment:"production"},Yu=class e{constructor(e){bu(this,Gu),this.clerkjs=null,this.preopenOneTap=null,this.preopenUserVerification=null,this.preopenSignIn=null,this.preopenCheckout=null,this.preopenPlanDetails=null,this.preopenSubscriptionDetails=null,this.preopenSignUp=null,this.preopenUserProfile=null,this.preopenOrganizationProfile=null,this.preopenCreateOrganization=null,this.preOpenWaitlist=null,this.premountSignInNodes=new Map,this.premountSignUpNodes=new Map,this.premountUserAvatarNodes=new Map,this.premountUserProfileNodes=new Map,this.premountUserButtonNodes=new Map,this.premountOrganizationProfileNodes=new Map,this.premountCreateOrganizationNodes=new Map,this.premountOrganizationSwitcherNodes=new Map,this.premountOrganizationListNodes=new Map,this.premountMethodCalls=new Map,this.premountWaitlistNodes=new Map,this.premountPricingTableNodes=new Map,this.premountApiKeysNodes=new Map,this.premountOAuthConsentNodes=new Map,this.premountTaskChooseOrganizationNodes=new Map,this.premountAddListenerCalls=new Map,this.loadedListeners=[],bu(this,Uu,"loading"),bu(this,zu),bu(this,$u),bu(this,Bu),bu(this,Fu,(()=>{const e=new Map,t=new Map,n=new Map;return{on:(...n)=>Au(e,t,...n),prioritizedOn:(...e)=>Au(n,t,...e),emit:(r,a)=>{t.set(r,a),Ou(n,r,a),Ou(e,r,a)},off:(...t)=>Du(e,...t),prioritizedOff:(...e)=>Du(n,...e),internal:{retrieveListeners:t=>e.get(t)||[]}}})()),bu(this,Wu),this.buildSignInUrl=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildSignInUrl(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildSignInUrl",t)},this.buildSignUpUrl=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildSignUpUrl(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildSignUpUrl",t)},this.buildAfterSignInUrl=(...e)=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildAfterSignInUrl(...e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildAfterSignInUrl",t)},this.buildAfterSignUpUrl=(...e)=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildAfterSignUpUrl(...e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildAfterSignUpUrl",t)},this.buildAfterSignOutUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildAfterSignOutUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildAfterSignOutUrl",e)},this.buildNewSubscriptionRedirectUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildNewSubscriptionRedirectUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildNewSubscriptionRedirectUrl",e)},this.buildAfterMultiSessionSingleSignOutUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildAfterMultiSessionSingleSignOutUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildAfterMultiSessionSingleSignOutUrl",e)},this.buildUserProfileUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildUserProfileUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildUserProfileUrl",e)},this.buildCreateOrganizationUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildCreateOrganizationUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildCreateOrganizationUrl",e)},this.buildOrganizationProfileUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildOrganizationProfileUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildOrganizationProfileUrl",e)},this.buildWaitlistUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildWaitlistUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildWaitlistUrl",e)},this.buildTasksUrl=()=>{const e=()=>{var e;return(null==(e=this.clerkjs)?void 0:e.buildTasksUrl())||""};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("buildTasksUrl",e)},this.buildUrlWithAuth=e=>{const t=()=>{var t;return(null==(t=this.clerkjs)?void 0:t.buildUrlWithAuth(e))||""};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("buildUrlWithAuth",t)},this.handleUnauthenticated=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.handleUnauthenticated()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("handleUnauthenticated",e)},this.on=(...e)=>{var t;if(null==(t=this.clerkjs)?void 0:t.on)return this.clerkjs.on(...e);vu(this,Fu).on(...e)},this.off=(...e)=>{var t;if(null==(t=this.clerkjs)?void 0:t.off)return this.clerkjs.off(...e);vu(this,Fu).off(...e)},this.addOnLoaded=e=>{this.loadedListeners.push(e),this.loaded&&this.emitLoaded()},this.emitLoaded=()=>{this.loadedListeners.forEach(e=>e()),this.loadedListeners=[]},this.beforeLoad=e=>{if(!e)throw new Error("Failed to hydrate latest Clerk JS")},this.hydrateClerkJS=e=>{var t;if(!e)throw new Error("Failed to hydrate latest Clerk JS");return this.clerkjs=e,this.premountMethodCalls.forEach(e=>e()),this.premountAddListenerCalls.forEach((t,n)=>{t.nativeUnsubscribe=e.addListener(n)}),null==(t=vu(this,Fu).internal.retrieveListeners("status"))||t.forEach(e=>{this.on("status",e,{notify:!0})}),null!==this.preopenSignIn&&e.openSignIn(this.preopenSignIn),null!==this.preopenCheckout&&e.__internal_openCheckout(this.preopenCheckout),null!==this.preopenPlanDetails&&e.__internal_openPlanDetails(this.preopenPlanDetails),null!==this.preopenSubscriptionDetails&&e.__internal_openSubscriptionDetails(this.preopenSubscriptionDetails),null!==this.preopenSignUp&&e.openSignUp(this.preopenSignUp),null!==this.preopenUserProfile&&e.openUserProfile(this.preopenUserProfile),null!==this.preopenUserVerification&&e.__internal_openReverification(this.preopenUserVerification),null!==this.preopenOneTap&&e.openGoogleOneTap(this.preopenOneTap),null!==this.preopenOrganizationProfile&&e.openOrganizationProfile(this.preopenOrganizationProfile),null!==this.preopenCreateOrganization&&e.openCreateOrganization(this.preopenCreateOrganization),null!==this.preOpenWaitlist&&e.openWaitlist(this.preOpenWaitlist),this.premountSignInNodes.forEach((t,n)=>{e.mountSignIn(n,t)}),this.premountSignUpNodes.forEach((t,n)=>{e.mountSignUp(n,t)}),this.premountUserProfileNodes.forEach((t,n)=>{e.mountUserProfile(n,t)}),this.premountUserAvatarNodes.forEach((t,n)=>{e.mountUserAvatar(n,t)}),this.premountUserButtonNodes.forEach((t,n)=>{e.mountUserButton(n,t)}),this.premountOrganizationListNodes.forEach((t,n)=>{e.mountOrganizationList(n,t)}),this.premountWaitlistNodes.forEach((t,n)=>{e.mountWaitlist(n,t)}),this.premountPricingTableNodes.forEach((t,n)=>{e.mountPricingTable(n,t)}),this.premountApiKeysNodes.forEach((t,n)=>{e.mountApiKeys(n,t)}),this.premountOAuthConsentNodes.forEach((t,n)=>{e.__internal_mountOAuthConsent(n,t)}),this.premountTaskChooseOrganizationNodes.forEach((t,n)=>{e.mountTaskChooseOrganization(n,t)}),void 0===this.clerkjs.status&&vu(this,Fu).emit(Pu,"ready"),this.emitLoaded(),this.clerkjs},this.__experimental_checkout=(...e)=>{var t;return null==(t=this.clerkjs)?void 0:t.__experimental_checkout(...e)},this.__unstable__updateProps=async e=>{const t=await xu(this,Gu,Vu).call(this);if(t&&"__unstable__updateProps"in t)return t.__unstable__updateProps(e)},this.setActive=e=>this.clerkjs?this.clerkjs.setActive(e):Promise.reject(),this.openSignIn=e=>{this.clerkjs&&this.loaded?this.clerkjs.openSignIn(e):this.preopenSignIn=e},this.closeSignIn=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignIn():this.preopenSignIn=null},this.__internal_openCheckout=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openCheckout(e):this.preopenCheckout=e},this.__internal_closeCheckout=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeCheckout():this.preopenCheckout=null},this.__internal_openPlanDetails=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openPlanDetails(e):this.preopenPlanDetails=e},this.__internal_closePlanDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closePlanDetails():this.preopenPlanDetails=null},this.__internal_openSubscriptionDetails=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openSubscriptionDetails(e):this.preopenSubscriptionDetails=null!=e?e:null},this.__internal_closeSubscriptionDetails=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeSubscriptionDetails():this.preopenSubscriptionDetails=null},this.__internal_openReverification=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_openReverification(e):this.preopenUserVerification=e},this.__internal_closeReverification=()=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_closeReverification():this.preopenUserVerification=null},this.openGoogleOneTap=e=>{this.clerkjs&&this.loaded?this.clerkjs.openGoogleOneTap(e):this.preopenOneTap=e},this.closeGoogleOneTap=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeGoogleOneTap():this.preopenOneTap=null},this.openUserProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.openUserProfile(e):this.preopenUserProfile=e},this.closeUserProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeUserProfile():this.preopenUserProfile=null},this.openOrganizationProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.openOrganizationProfile(e):this.preopenOrganizationProfile=e},this.closeOrganizationProfile=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeOrganizationProfile():this.preopenOrganizationProfile=null},this.openCreateOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.openCreateOrganization(e):this.preopenCreateOrganization=e},this.closeCreateOrganization=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeCreateOrganization():this.preopenCreateOrganization=null},this.openWaitlist=e=>{this.clerkjs&&this.loaded?this.clerkjs.openWaitlist(e):this.preOpenWaitlist=e},this.closeWaitlist=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeWaitlist():this.preOpenWaitlist=null},this.openSignUp=e=>{this.clerkjs&&this.loaded?this.clerkjs.openSignUp(e):this.preopenSignUp=e},this.closeSignUp=()=>{this.clerkjs&&this.loaded?this.clerkjs.closeSignUp():this.preopenSignUp=null},this.mountSignIn=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignIn(e,t):this.premountSignInNodes.set(e,t)},this.unmountSignIn=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignIn(e):this.premountSignInNodes.delete(e)},this.mountSignUp=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountSignUp(e,t):this.premountSignUpNodes.set(e,t)},this.unmountSignUp=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountSignUp(e):this.premountSignUpNodes.delete(e)},this.mountUserAvatar=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserAvatar(e,t):this.premountUserAvatarNodes.set(e,t)},this.unmountUserAvatar=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserAvatar(e):this.premountUserAvatarNodes.delete(e)},this.mountUserProfile=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserProfile(e,t):this.premountUserProfileNodes.set(e,t)},this.unmountUserProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserProfile(e):this.premountUserProfileNodes.delete(e)},this.mountOrganizationProfile=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationProfile(e,t):this.premountOrganizationProfileNodes.set(e,t)},this.unmountOrganizationProfile=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationProfile(e):this.premountOrganizationProfileNodes.delete(e)},this.mountCreateOrganization=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountCreateOrganization(e,t):this.premountCreateOrganizationNodes.set(e,t)},this.unmountCreateOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountCreateOrganization(e):this.premountCreateOrganizationNodes.delete(e)},this.mountOrganizationSwitcher=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationSwitcher(e,t):this.premountOrganizationSwitcherNodes.set(e,t)},this.unmountOrganizationSwitcher=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationSwitcher(e):this.premountOrganizationSwitcherNodes.delete(e)},this.__experimental_prefetchOrganizationSwitcher=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.__experimental_prefetchOrganizationSwitcher()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("__experimental_prefetchOrganizationSwitcher",e)},this.mountOrganizationList=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountOrganizationList(e,t):this.premountOrganizationListNodes.set(e,t)},this.unmountOrganizationList=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountOrganizationList(e):this.premountOrganizationListNodes.delete(e)},this.mountUserButton=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountUserButton(e,t):this.premountUserButtonNodes.set(e,t)},this.unmountUserButton=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountUserButton(e):this.premountUserButtonNodes.delete(e)},this.mountWaitlist=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountWaitlist(e,t):this.premountWaitlistNodes.set(e,t)},this.unmountWaitlist=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountWaitlist(e):this.premountWaitlistNodes.delete(e)},this.mountPricingTable=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountPricingTable(e,t):this.premountPricingTableNodes.set(e,t)},this.unmountPricingTable=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountPricingTable(e):this.premountPricingTableNodes.delete(e)},this.mountApiKeys=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountApiKeys(e,t):this.premountApiKeysNodes.set(e,t)},this.unmountApiKeys=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountApiKeys(e):this.premountApiKeysNodes.delete(e)},this.__internal_mountOAuthConsent=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_mountOAuthConsent(e,t):this.premountOAuthConsentNodes.set(e,t)},this.__internal_unmountOAuthConsent=e=>{this.clerkjs&&this.loaded?this.clerkjs.__internal_unmountOAuthConsent(e):this.premountOAuthConsentNodes.delete(e)},this.mountTaskChooseOrganization=(e,t)=>{this.clerkjs&&this.loaded?this.clerkjs.mountTaskChooseOrganization(e,t):this.premountTaskChooseOrganizationNodes.set(e,t)},this.unmountTaskChooseOrganization=e=>{this.clerkjs&&this.loaded?this.clerkjs.unmountTaskChooseOrganization(e):this.premountTaskChooseOrganizationNodes.delete(e)},this.addListener=e=>{if(this.clerkjs)return this.clerkjs.addListener(e);{const t=()=>{var t;const n=this.premountAddListenerCalls.get(e);n&&(null==(t=n.nativeUnsubscribe)||t.call(n),this.premountAddListenerCalls.delete(e))};return this.premountAddListenerCalls.set(e,{unsubscribe:t,nativeUnsubscribe:void 0}),t}},this.navigate=e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.navigate(e)};this.clerkjs&&this.loaded?t():this.premountMethodCalls.set("navigate",t)},this.redirectWithAuth=async(...e)=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectWithAuth(...e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectWithAuth",t)},this.redirectToSignIn=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToSignIn(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToSignIn",t)},this.redirectToSignUp=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToSignUp(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToSignUp",t)},this.redirectToUserProfile=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToUserProfile()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToUserProfile",e)},this.redirectToAfterSignUp=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignUp()};if(this.clerkjs&&this.loaded)return e();this.premountMethodCalls.set("redirectToAfterSignUp",e)},this.redirectToAfterSignIn=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignIn()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("redirectToAfterSignIn",e)},this.redirectToAfterSignOut=()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToAfterSignOut()};this.clerkjs&&this.loaded?e():this.premountMethodCalls.set("redirectToAfterSignOut",e)},this.redirectToOrganizationProfile=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToOrganizationProfile()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToOrganizationProfile",e)},this.redirectToCreateOrganization=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToCreateOrganization()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToCreateOrganization",e)},this.redirectToWaitlist=async()=>{const e=()=>{var e;return null==(e=this.clerkjs)?void 0:e.redirectToWaitlist()};return this.clerkjs&&this.loaded?e():void this.premountMethodCalls.set("redirectToWaitlist",e)},this.redirectToTasks=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.redirectToTasks(e)};return this.clerkjs&&this.loaded?t():void this.premountMethodCalls.set("redirectToTasks",t)},this.handleRedirectCallback=async e=>{var t;const n=()=>{var t;return null==(t=this.clerkjs)?void 0:t.handleRedirectCallback(e)};this.clerkjs&&this.loaded?null==(t=n())||t.catch(()=>{}):this.premountMethodCalls.set("handleRedirectCallback",n)},this.handleGoogleOneTapCallback=async(e,t)=>{var n;const r=()=>{var n;return null==(n=this.clerkjs)?void 0:n.handleGoogleOneTapCallback(e,t)};this.clerkjs&&this.loaded?null==(n=r())||n.catch(()=>{}):this.premountMethodCalls.set("handleGoogleOneTapCallback",r)},this.handleEmailLinkVerification=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.handleEmailLinkVerification(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("handleEmailLinkVerification",t)},this.authenticateWithMetamask=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithMetamask(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithMetamask",t)},this.authenticateWithCoinbaseWallet=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithCoinbaseWallet(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithCoinbaseWallet",t)},this.authenticateWithBase=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithBase(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithBase",t)},this.authenticateWithOKXWallet=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithOKXWallet(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithOKXWallet",t)},this.authenticateWithWeb3=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.authenticateWithWeb3(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("authenticateWithWeb3",t)},this.authenticateWithGoogleOneTap=async e=>(await xu(this,Gu,Vu).call(this)).authenticateWithGoogleOneTap(e),this.__internal_loadStripeJs=async()=>(await xu(this,Gu,Vu).call(this)).__internal_loadStripeJs(),this.createOrganization=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.createOrganization(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("createOrganization",t)},this.getOrganization=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.getOrganization(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("getOrganization",t)},this.joinWaitlist=async e=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.joinWaitlist(e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("joinWaitlist",t)},this.signOut=async(...e)=>{const t=()=>{var t;return null==(t=this.clerkjs)?void 0:t.signOut(...e)};if(this.clerkjs&&this.loaded)return t();this.premountMethodCalls.set("signOut",t)};const{Clerk:t=null,publishableKey:n}=e||{};wu(this,Bu,n),wu(this,$u,null==e?void 0:e.proxyUrl),wu(this,zu,null==e?void 0:e.domain),this.options=e,this.Clerk=t,this.mode=E()?"browser":"server",wu(this,Wu,new Ru(this)),this.options.sdkMetadata||(this.options.sdkMetadata=Hu),vu(this,Fu).emit(Pu,"loading"),vu(this,Fu).prioritizedOn(Pu,e=>wu(this,Uu,e)),vu(this,Bu)&&this.loadClerkJS()}get publishableKey(){return vu(this,Bu)}get loaded(){var e;return(null==(e=this.clerkjs)?void 0:e.loaded)||!1}get status(){var e;return this.clerkjs?(null==(e=this.clerkjs)?void 0:e.status)||(this.clerkjs.loaded?"ready":"loading"):vu(this,Uu)}static getOrCreateInstance(t){return(!E()||!vu(this,qu)||t.Clerk&&vu(this,qu).Clerk!==t.Clerk||vu(this,qu).publishableKey!==t.publishableKey)&&wu(this,qu,new e(t)),vu(this,qu)}static clearInstance(){wu(this,qu,null)}get domain(){return"undefined"!=typeof window&&window.location?m(vu(this,zu),new URL(window.location.href),""):"function"==typeof vu(this,zu)?Cl.throw(Ol):vu(this,zu)||""}get proxyUrl(){return"undefined"!=typeof window&&window.location?m(vu(this,$u),new URL(window.location.href),""):"function"==typeof vu(this,$u)?Cl.throw(Ol):vu(this,$u)||""}__internal_getOption(e){var t,n;return(null==(t=this.clerkjs)?void 0:t.__internal_getOption)?null==(n=this.clerkjs)?void 0:n.__internal_getOption(e):this.options[e]}get sdkMetadata(){var e;return(null==(e=this.clerkjs)?void 0:e.sdkMetadata)||this.options.sdkMetadata||void 0}get instanceType(){var e;return null==(e=this.clerkjs)?void 0:e.instanceType}get frontendApi(){var e;return(null==(e=this.clerkjs)?void 0:e.frontendApi)||""}get isStandardBrowser(){var e;return(null==(e=this.clerkjs)?void 0:e.isStandardBrowser)||this.options.standardBrowser||!1}get isSatellite(){return"undefined"!=typeof window&&window.location?m(this.options.isSatellite,new URL(window.location.href),!1):"function"==typeof this.options.isSatellite&&Cl.throw(Ol)}async loadClerkJS(){var e;if("browser"===this.mode&&!this.loaded){"undefined"!=typeof window&&(window.__clerk_publishable_key=vu(this,Bu),window.__clerk_proxy_url=this.proxyUrl,window.__clerk_domain=this.domain);try{if(this.Clerk){let e;"function"==typeof this.Clerk?(e=new this.Clerk(vu(this,Bu),{proxyUrl:this.proxyUrl,domain:this.domain}),this.beforeLoad(e),await e.load(this.options)):(e=this.Clerk,e.loaded||(this.beforeLoad(e),await e.load(this.options))),global.Clerk=e}else if(!__BUILD_DISABLE_RHC__){if(global.Clerk||await(async e=>{const t=e?.scriptLoadTimeout??15e3;if(I())return null;if(document.querySelector("script[data-clerk-js-script]"))return C(t);if(!e?.publishableKey)return Cu.throwMissingPublishableKeyError(),null;const n=C(t);return j((e=>{const{clerkJSUrl:t,clerkJSVariant:n,clerkJSVersion:r,proxyUrl:a,domain:s,publishableKey:o}=e;if(t)return t;let c="";var l,u;c=a&&(!(u=a)||function(e){return/^http(s)?:\/\//.test(e||"")}(u)||S(u))?(l=a,l?S(l)?new URL(l,window.location.origin).toString():l:"").replace(/http(s)?:\/\//,""):s&&!Iu(i(o)?.frontendApi||"")?function(e){if(!e)return"";let t;if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}return`clerk.${e.replace(t,"")}`}(s):i(o)?.frontendApi||"";const d=n?`${n.replace(/\.+$/,"")}.`:"",h=((e,t="5.103.0")=>{if(e)return e;const n=(e=>e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/)?.[1])(t);return n?"snapshot"===n?"5.103.0":n:(e=>e.trim().replace(/^v/,"").split(".")[0])(t)})(r);return`https://${c}/npm/@clerk/clerk-js@${h}/dist/clerk.${d}browser.js`})(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:Eu(e)}).catch(e=>{throw new So(ju+(e.message?`, ${e.message}`:""),{code:"failed_to_load_clerk_js",cause:e})}),n})({...this.options,publishableKey:vu(this,Bu),proxyUrl:this.proxyUrl,domain:this.domain,nonce:this.options.nonce}),!global.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");this.beforeLoad(global.Clerk),await global.Clerk.load(this.options)}return(null==(e=global.Clerk)?void 0:e.loaded)?this.hydrateClerkJS(global.Clerk):void 0}catch(t){const e=t;return vu(this,Fu).emit(Pu,"error"),void console.error(e.stack||e.message||e)}}}get version(){var e;return null==(e=this.clerkjs)?void 0:e.version}get client(){return this.clerkjs?this.clerkjs.client:void 0}get session(){return this.clerkjs?this.clerkjs.session:void 0}get user(){return this.clerkjs?this.clerkjs.user:void 0}get organization(){return this.clerkjs?this.clerkjs.organization:void 0}get telemetry(){return this.clerkjs?this.clerkjs.telemetry:void 0}get __unstable__environment(){return this.clerkjs?this.clerkjs.__unstable__environment:void 0}get isSignedIn(){return!!this.clerkjs&&this.clerkjs.isSignedIn}get billing(){var e;return null==(e=this.clerkjs)?void 0:e.billing}get __internal_state(){return this.loaded&&this.clerkjs?this.clerkjs.__internal_state:vu(this,Wu)}get apiKeys(){var e;return null==(e=this.clerkjs)?void 0:e.apiKeys}__unstable__setEnvironment(...e){this.clerkjs&&"__unstable__setEnvironment"in this.clerkjs&&this.clerkjs.__unstable__setEnvironment(e)}};Uu=new WeakMap,zu=new WeakMap,$u=new WeakMap,Bu=new WeakMap,Fu=new WeakMap,Wu=new WeakMap,qu=new WeakMap,Gu=new WeakSet,Vu=function(){return new Promise(e=>{this.addOnLoaded(()=>e(this.clerkjs))})},bu(Yu,qu);var Ku,Zu=Yu,Ju=e=>{const t=Vi.useRef(Zu.getOrCreateInstance(e)),[n,r]=Vi.useState(t.current.status);return Vi.useEffect(()=>{t.current.__unstable__updateProps({appearance:e.appearance})},[e.appearance]),Vi.useEffect(()=>{t.current.__unstable__updateProps({options:e})},[e.localization]),Vi.useEffect(()=>(t.current.on("status",r),()=>{t.current&&t.current.off("status",r),Zu.clearInstance()}),[]),{isomorphicClerk:t.current,clerkStatus:n}},Qu=function(e,t){const n=n=>(function(e,t,n=1){Vi.useEffect(()=>{const r=ql.get(e)||0;return r==n?Cl.throw(t):(ql.set(e,r+1),()=>{ql.set(e,(ql.get(e)||1)-1)})},[])}(t,"You've added multiple <ClerkProvider> components in your React component tree. Wrap your components in a single <ClerkProvider>."),Vi.createElement(e,{...n}));return n.displayName=`withMaxAllowedInstancesGuard(${e.displayName||e.name||t||"Component"})`,n}(function(e){const{initialState:t,children:n,__internal_bypassMissingPublishableKey:r,...a}=e,{publishableKey:s="",Clerk:i}=a;return i||r||(s?s&&!o(s)&&Cl.throwInvalidPublishableKeyError({key:s}):Cl.throwMissingPublishableKeyError()),Vi.createElement(T,{initialState:t,isomorphicClerkOptions:a},n)},"ClerkProvider");Qu.displayName="ClerkProvider",Ku={packageName:"@clerk/clerk-react"},Cl.setMessages(Ku).setPackageName(Ku),Cu.setPackageName({packageName:"@clerk/clerk-react"});const Xu=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},ed=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),td=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var nd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const rd=Gi.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:i,...o},c)=>Gi.createElement("svg",{ref:c,...nd,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:ed("lucide",a),...!s&&!td(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>Gi.createElement(e,t)),...Array.isArray(s)?s:[s]])),ad=(e,t)=>{const n=Gi.forwardRef(({className:n,...r},a)=>{return Gi.createElement(rd,{ref:a,iconNode:t,className:ed(`lucide-${s=Xu(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var s});return n.displayName=Xu(e),n},sd=ad("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),id=ad("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),od=ad("chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),cd=ad("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ld=ad("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ud=ad("cloud-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]),dd=ad("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),hd=ad("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),pd=ad("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),gd=ad("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),md=ad("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),fd=ad("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),yd=ad("piggy-bank",[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]]),vd=ad("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),bd=ad("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),wd=ad("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),xd=ad("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),kd=ad("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_d=()=>{const e=navigator.userAgent;return e.includes("Safari")&&!e.includes("Chrome")&&!e.includes("Chromium")},Sd=async()=>{try{document.cookie="test_cookie=1; SameSite=None; Secure";const e=document.cookie.includes("test_cookie=1");return e&&(document.cookie="test_cookie=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"),e}catch(e){return!1}},jd=()=>{try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},Id=()=>{try{const e="__sessionStorage_test__";return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}},Cd=async()=>{if(!_d())return{compatible:!0};const e={safari:!0,localStorage:jd(),sessionStorage:Id(),thirdPartyCookies:await Sd(),compatible:!0,warnings:[]};return e.localStorage||(e.warnings.push("localStorage blocked - likely private browsing mode"),e.compatible=!1),e.sessionStorage||(e.warnings.push("sessionStorage blocked - authentication may fail"),e.compatible=!1),e.thirdPartyCookies||e.warnings.push("Third-party cookies blocked - Clerk may not work properly"),e.compatible&&Ed(),e},Ed=()=>{try{const e=window.fetch;window.fetch=function(...t){const[n,r={}]=t;return"string"==typeof n&&(n.includes("clerk.")||n.includes("accounts."))&&(r.credentials="include",r.mode="cors"),e.apply(this,[n,r])}}catch(e){console.error("Failed to patch fetch for Safari:",e)}window.addEventListener&&window.addEventListener("storage",e=>{(e.key?.includes("clerk")||e.key?.includes("__session"))&&window.location.reload()}),Td()},Td=()=>{Promise.allSettled||(Promise.allSettled=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}),"undefined"==typeof queueMicrotask&&(window.queueMicrotask=function(e){Promise.resolve().then(e)}),document.hasStorageAccess&&document.requestStorageAccess&&document.hasStorageAccess().then(e=>{if(!e)return document.requestStorageAccess()}).catch(e=>{})},Nd=()=>{try{localStorage.setItem("safari_warning_dismissed","true")}catch{try{sessionStorage.setItem("safari_warning_dismissed","true")}catch{document.cookie="safari_warning_dismissed=true; max-age=2592000"}}};class Ad extends Gi.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,isSafariIssue:!1,safariSolution:null}}static getDerivedStateFromError(e){const t=_d()&&(e.message.includes("localStorage")||e.message.includes("sessionStorage")||e.message.includes("cookie")||e.message.includes("Clerk")||e.message.includes("authentication")),n=t?(e=>{const t=e?.message||e?.toString()||"";return t.includes("localStorage")||t.includes("sessionStorage")?{message:"Storage access blocked in Safari",solution:'Please disable "Prevent cross-site tracking" in Safari Settings > Privacy, or try using a different browser.'}:t.includes("cookie")||t.includes("Cookie")?{message:"Cookies are blocked in Safari",solution:'Please enable cookies in Safari Settings > Privacy > "Block all cookies" should be OFF.'}:t.includes("fetch")||t.includes("network")?{message:"Network request blocked by Safari",solution:"Please check Safari content blockers or try disabling extensions."}:t.includes("crypto")||t.includes("subtle")?{message:"Cryptography API not available",solution:"Please ensure you are using HTTPS or update Safari to the latest version."}:{message:"Authentication error in Safari",solution:'Please try: 1) Clear Safari cache and cookies, 2) Disable "Prevent cross-site tracking", 3) Use a different browser like Chrome or Firefox.'}})(e):null;return{hasError:!0,error:e,errorInfo:null,isSafariIssue:t,safariSolution:n}}componentDidCatch(e,t){console.error("Clerk authentication error:",e,t),window.Sentry&&window.Sentry.captureException(e,{contexts:{react:{componentStack:t.componentStack},browser:{safari:_d(),userAgent:navigator.userAgent}}}),this.setState({errorInfo:t})}handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};handleClearStorage=()=>{try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&(n.includes("clerk")||n.includes("__session"))&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")}),window.location.reload()}catch(e){console.error("Failed to clear storage:",e),alert("Failed to clear storage. Please try manually clearing your browser data.")}};render(){return this.state.hasError?bo.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:bo.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden",children:[bo.jsx("div",{className:"px-6 py-4 "+(this.state.isSafariIssue?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-red-500 to-pink-500"),children:bo.jsxs("div",{className:"flex items-center gap-3 text-white",children:[bo.jsx(xd,{size:24}),bo.jsx("h1",{className:"text-xl font-bold",children:this.state.isSafariIssue?"Safari Authentication Issue":"Authentication Error"})]})}),bo.jsxs("div",{className:"p-6 space-y-4",children:[this.state.isSafariIssue&&this.state.safariSolution?bo.jsxs(bo.Fragment,{children:[bo.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:[bo.jsx("p",{className:"text-sm font-medium text-orange-900 dark:text-orange-300 mb-2",children:this.state.safariSolution.message}),bo.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:this.state.safariSolution.solution})]}),bo.jsxs("div",{className:"space-y-2",children:[bo.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"For the best experience, try using:"}),bo.jsxs("div",{className:"flex gap-2",children:[bo.jsxs("a",{href:"https://www.google.com/chrome/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors text-sm",children:[bo.jsx(od,{size:16}),"Chrome"]}),bo.jsx("a",{href:"https://www.microsoft.com/edge",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/40 transition-colors text-sm",children:"Edge"})]})]})]}):bo.jsxs(bo.Fragment,{children:[bo.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"We encountered an error with the authentication system. This might be temporary."}),this.state.error&&bo.jsxs("details",{className:"text-sm",children:[bo.jsx("summary",{className:"cursor-pointer text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Technical details"}),bo.jsx("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto",children:this.state.error.message})]})]}),bo.jsxs("div",{className:"flex flex-col gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[bo.jsxs("button",{onClick:this.handleReload,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[bo.jsx(vd,{size:18}),"Try Again"]}),bo.jsx("button",{onClick:this.handleClearStorage,className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors text-sm",children:"Clear Storage & Retry"}),bo.jsxs("button",{onClick:this.handleGoHome,className:"w-full px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors flex items-center justify-center gap-2 text-sm",children:[bo.jsx(md,{size:16}),"Go to Homepage"]})]})]})]})}):this.props.children}}const Od=e=>{if(e)return"string"==typeof e?e:e instanceof Date?e.toISOString():void 0},Dd=()=>(new Date).toISOString();var Pd=function(e,t){return(Pd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Md=function(){return Md=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Md.apply(this,arguments)},Ld=Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},Rd=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Ud=function(e){return(Ud=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(e)},zd="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};const $d={__extends:N,__assign:Md,__rest:A,__decorate:O,__param:D,__esDecorate:P,__runInitializers:M,__propKey:L,__setFunctionName:R,__metadata:U,__awaiter:z,__generator:$,__createBinding:Ld,__exportStar:B,__values:F,__read:W,__spread:q,__spreadArrays:G,__spreadArray:V,__await:H,__asyncGenerator:Y,__asyncDelegator:K,__asyncValues:Z,__makeTemplateObject:J,__importStar:Q,__importDefault:X,__classPrivateFieldGet:ee,__classPrivateFieldSet:te,__classPrivateFieldIn:ne,__addDisposableResource:re,__disposeResources:ae,__rewriteRelativeImportExtension:se},Bd=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:re,get __assign(){return Md},__asyncDelegator:K,__asyncGenerator:Y,__asyncValues:Z,__await:H,__awaiter:z,__classPrivateFieldGet:ee,__classPrivateFieldIn:ne,__classPrivateFieldSet:te,__createBinding:Ld,__decorate:O,__disposeResources:ae,__esDecorate:P,__exportStar:B,__extends:N,__generator:$,__importDefault:X,__importStar:Q,__makeTemplateObject:J,__metadata:U,__param:D,__propKey:L,__read:W,__rest:A,__rewriteRelativeImportExtension:se,__runInitializers:M,__setFunctionName:R,__spread:q,__spreadArray:V,__spreadArrays:G,__values:F,default:$d},Symbol.toStringTag,{value:"Module"}));class Fd extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Wd extends Fd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qd extends Fd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gd extends Fd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vd,Hd;(Hd=Vd||(Vd={})).Any="any",Hd.ApNortheast1="ap-northeast-1",Hd.ApNortheast2="ap-northeast-2",Hd.ApSouth1="ap-south-1",Hd.ApSoutheast1="ap-southeast-1",Hd.ApSoutheast2="ap-southeast-2",Hd.CaCentral1="ca-central-1",Hd.EuCentral1="eu-central-1",Hd.EuWest1="eu-west-1",Hd.EuWest2="eu-west-2",Hd.EuWest3="eu-west-3",Hd.SaEast1="sa-east-1",Hd.UsEast1="us-east-1",Hd.UsWest1="us-west-1",Hd.UsWest2="us-west-2";class Yd{constructor(e,{headers:t={},customFetch:n,region:r=Vd.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>po(async()=>{const{default:e}=await Promise.resolve().then(()=>ch);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return z(this,arguments,void 0,function*(e,t={}){var n;try{const{headers:r,method:a,body:s,signal:i}=t;let o={},{region:c}=t;c||(c=this.region);const l=new URL(`${this.url}/${e}`);let u;c&&"any"!==c&&(o["x-region"]=c,l.searchParams.set("forceFunctionRegion",c)),s&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)?"undefined"!=typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=s):"string"==typeof s?(o["Content-Type"]="text/plain",u=s):"undefined"!=typeof FormData&&s instanceof FormData?u=s:(o["Content-Type"]="application/json",u=JSON.stringify(s)):u=s;const d=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:u,signal:i}).catch(e=>{if("AbortError"===e.name)throw e;throw new Wd(e)}),h=d.headers.get("x-relay-error");if(h&&"true"===h)throw new qd(d);if(!d.ok)throw new Gd(d);let p,g=(null!==(n=d.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return p="application/json"===g?yield d.json():"application/octet-stream"===g||"application/pdf"===g?yield d.blob():"text/event-stream"===g?d:"multipart/form-data"===g?yield d.formData():yield d.text(),{data:p,error:null,response:d}}catch(r){return r instanceof Error&&"AbortError"===r.name?{data:null,error:new Wd(r)}:{data:null,error:r,response:r instanceof Gd||r instanceof qd?r.context:void 0}}})}}var Kd={};const Zd=Yi(Bd);var Jd={},Qd={},Xd={},eh={},th={},nh=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const rh=nh.fetch,ah=nh.fetch.bind(nh),sh=nh.Headers,ih=nh.Request,oh=nh.Response,ch=Object.freeze(Object.defineProperty({__proto__:null,Headers:sh,Request:ih,Response:oh,default:ah,fetch:rh},Symbol.toStringTag,{value:"Module"})),lh=Yi(ch);var uh,dh,hh,ph,gh,mh,fh,yh={},vh=he();const bh=Ki(vh),wh=e({__proto__:null,default:bh},[vh]),{PostgrestClient:xh}=bh||wh;class kh{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,n=parseInt(t.replace(/^v/,"").split(".")[0]);return n>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}var _h,Sh,jh,Ih,Ch,Eh,Th,Nh,Ah,Oh,Dh;(Sh=_h||(_h={}))[Sh.connecting=0]="connecting",Sh[Sh.open=1]="open",Sh[Sh.closing=2]="closing",Sh[Sh.closed=3]="closed",(Ih=jh||(jh={})).closed="closed",Ih.errored="errored",Ih.joined="joined",Ih.joining="joining",Ih.leaving="leaving",(Eh=Ch||(Ch={})).close="phx_close",Eh.error="phx_error",Eh.join="phx_join",Eh.reply="phx_reply",Eh.leave="phx_leave",Eh.access_token="access_token",(Th||(Th={})).websocket="websocket",(Ah=Nh||(Nh={})).Connecting="connecting",Ah.Open="open",Ah.Closing="closing",Ah.Closed="closed";class Ph{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),a=t.getUint8(2);let s=this.HEADER_LENGTH+2;const i=n.decode(e.slice(s,s+r));s+=r;const o=n.decode(e.slice(s,s+a));return s+=a,{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(s,e.byteLength)))}}}class Mh{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Dh=Oh||(Oh={})).abstime="abstime",Dh.bool="bool",Dh.date="date",Dh.daterange="daterange",Dh.float4="float4",Dh.float8="float8",Dh.int2="int2",Dh.int4="int4",Dh.int4range="int4range",Dh.int8="int8",Dh.int8range="int8range",Dh.json="json",Dh.jsonb="jsonb",Dh.money="money",Dh.numeric="numeric",Dh.oid="oid",Dh.reltime="reltime",Dh.text="text",Dh.time="time",Dh.timestamp="timestamp",Dh.timestamptz="timestamptz",Dh.timetz="timetz",Dh.tsrange="tsrange",Dh.tstzrange="tstzrange";const Lh=(e,t,n={})=>{var r;const a=null!==(r=n.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((n,r)=>(n[r]=Rh(r,e,t,a),n),{}):{}},Rh=(e,t,n,r)=>{const a=t.find(t=>t.name===e),s=null==a?void 0:a.type,i=n[e];return s&&!r.includes(s)?Uh(s,i):zh(i)},Uh=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Wh(t,n)}switch(e){case Oh.bool:return $h(t);case Oh.float4:case Oh.float8:case Oh.int2:case Oh.int4:case Oh.int8:case Oh.numeric:case Oh.oid:return Bh(t);case Oh.json:case Oh.jsonb:return Fh(t);case Oh.timestamp:return qh(t);case Oh.abstime:case Oh.date:case Oh.daterange:case Oh.int4range:case Oh.int8range:case Oh.money:case Oh.reltime:case Oh.text:case Oh.time:case Oh.timestamptz:case Oh.timetz:case Oh.tsrange:case Oh.tstzrange:default:return zh(t)}},zh=e=>e,$h=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Bh=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Fh=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Wh=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch(a){r=s?s.split(","):[]}return r.map(e=>Uh(t,e))}return e},qh=e=>"string"==typeof e?e.replace(" ","T"):e,Gh=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Vh{constructor(e,t,n={},r=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Hh,Yh,Kh,Zh,Jh,Qh,Xh,ep;(Yh=Hh||(Hh={})).SYNC="sync",Yh.JOIN="join",Yh.LEAVE="leave";class tp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tp.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=tp.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=tp.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const a=this.cloneDeep(e),s=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const n=a[e];if(n){const r=t.map(e=>e.presence_ref),a=n.map(e=>e.presence_ref),s=t.filter(e=>a.indexOf(e.presence_ref)<0),c=n.filter(e=>r.indexOf(e.presence_ref)<0);s.length>0&&(i[e]=s),c.length>0&&(o[e]=c)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},n,r)}static syncDiff(e,t,n,r){const{joins:a,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const s=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),s.length>0){const n=e[t].map(e=>e.presence_ref),r=s.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,s,r)}),this.map(s,(t,n)=>{let a=e[t];if(!a)return;const s=n.map(e=>e.presence_ref);a=a.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,n),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Zh=Kh||(Kh={})).ALL="*",Zh.INSERT="INSERT",Zh.UPDATE="UPDATE",Zh.DELETE="DELETE",(Qh=Jh||(Jh={})).BROADCAST="broadcast",Qh.PRESENCE="presence",Qh.POSTGRES_CHANGES="postgres_changes",Qh.SYSTEM="system",(ep=Xh||(Xh={})).SUBSCRIBED="SUBSCRIBED",ep.TIMED_OUT="TIMED_OUT",ep.CLOSED="CLOSED",ep.CHANNEL_ERROR="CHANNEL_ERROR";class np{constructor(e,t={config:{}},n){var r,a;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=jh.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vh(this,Ch.join,this.params,this.timeout),this.rejoinTimer=new Mh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jh.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jh.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=jh.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jh.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=jh.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ch.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new tp(this),this.broadcastEndpointURL=Gh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==jh.closed){const{config:{broadcast:s,presence:i,private:o}}=this.params,c=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],l=!!this.bindings[Jh.PRESENCE]&&this.bindings[Jh.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),u={},d={broadcast:s,presence:Object.assign(Object.assign({},i),{enabled:l}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Xh.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Xh.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0,s=[];for(let n=0;n<a;n++){const a=r[n],{filter:{event:i,schema:o,table:c,filter:l}}=a,u=t&&t[n];if(!u||u.event!==i||u.schema!==o||u.table!==c||u.filter!==l)return this.unsubscribe(),this.state=jh.errored,void(null==e||e(Xh.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));s.push(Object.assign(Object.assign({},a),{id:u.id}))}return this.bindings.postgres_changes=s,void(e&&e(Xh.SUBSCRIBED))}null==e||e(Xh.SUBSCRIBED)}).receive("error",t=>{this.state=jh.errored,null==e||e(Xh.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Xh.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===jh.joined&&e===Jh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var r;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(c){}return Promise.reject(new Error(o))}async send(e,t={}){var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,a,s;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===s?void 0:s.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:s,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=jh.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ch.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new Vh(this,Ch.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jh.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),s}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Vh(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,a;const s=e.toLocaleLowerCase(),{close:i,error:o,leave:c,join:l}=Ch;if(n&&[i,o,c,l].indexOf(s)>=0&&n!==this._joinRef())return;let u=this._onMessage(s,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===s}).map(e=>e.callback(u,n)):null===(a=this.bindings[s])||void 0===a||a.filter(e=>{var n,r,a,i,o,c;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return s&&(null===(r=t.ids)||void 0===r?void 0:r.includes(s))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:a,errors:s}=e,i={schema:t,table:n,commit_timestamp:r,eventType:a,new:{},old:{},errors:s};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===jh.closed}_isJoined(){return this.state===jh.joined}_isJoining(){return this.state===jh.joining}_isLeaving(){return this.state===jh.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&np.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ch.close,{},e)}_onError(e){this._on(Ch.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jh.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Lh(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Lh(e.columns,e.old_record)),t}}const rp=()=>{},ap=[1e3,2e3,5e3,1e4];class sp{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rp,this.ref=0,this.reconnectTimer=null,this.logger=rp,this.conn=null,this.sendBuffer=[],this.serializer=new Ph,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>po(async()=>{const{default:e}=await Promise.resolve().then(()=>ch);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Th.websocket}`,this.httpEndpoint=Gh(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kh.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _h.connecting:return Nh.Connecting;case _h.open:return Nh.Open;case _h.closing:return Nh.Closing;default:return Nh.Closed}}isConnected(){return this.connectionState()===Nh.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new np(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:a}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${a})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},100)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:r,ref:a}=e,s=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${n} ${s}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ch.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.77.0"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(Ch.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Mh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,a,s,i,o,c,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null==e?void 0:e.timeout)&&void 0!==n?n:1e4,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:25e3,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(s=null==e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:rp,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>ap[e-1]||1e4,this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class ip extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}class op extends ip{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class cp extends ip{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const lp=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>po(async()=>{const{default:e}=await Promise.resolve().then(()=>ch);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},up=e=>{if(Array.isArray(e))return e.map(e=>up(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=up(n)}),t},dp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);class hp{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return z(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pe(e))return{data:null,error:e};throw e}})}}var pp;class gp{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[pp]="BlobDownloadBuilder",this.promise=null}asStream(){return new hp(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return z(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pe(e))return{data:null,error:e};throw e}})}}pp=Symbol.toStringTag;const mp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yp{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=lp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,r){return z(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},fp),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(a=n,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=n,i["cache-control"]=`max-age=${s.cacheControl}`,i["content-type"]=s.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield("PUT"==e?ye:fe)(this.fetch,`${this.url}/object/${l}`,a,Object.assign({headers:i},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:c,id:u.Id,fullPath:u.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pe(a))return{data:null,error:a};throw a}})}upload(e,t,n){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return z(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),s=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${s}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:fp.upsert},r),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType),{data:{path:a,fullPath:(yield ye(this.fetch,i.toString(),e,{headers:s})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(pe(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return z(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield fe(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),s=new URL(this.url+a.url),i=s.searchParams.get("token");if(!i)throw new ip("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}update(e,t,n){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return z(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}copy(e,t,n){return z(this,void 0,void 0,function*(){try{return{data:{path:(yield fe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return z(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield fe(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const s=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return z(this,void 0,void 0,function*(){try{const r=yield fe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}download(e,t){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"",s=this._getFinalPath(e);return new gp(()=>me(this.fetch,`${this.url}/${n}/${s}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return z(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield me(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:up(e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}exists(e){return z(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n){return z(this,void 0,void 0,function*(){return ge(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),undefined)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n)&&n instanceof cp){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${o}`)}}}remove(e){return z(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}list(e,t,n){return z(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},mp),t),{prefix:e||""});return{data:yield fe(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}listV2(e,t){return z(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield fe(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const vp="2.77.0",bp={"X-Client-Info":`storage-js/${vp}`};class wp{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const a=new URL(e);(null==r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bp),t),this.fetch=lp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return z(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield me(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}getBucket(e){return z(this,void 0,void 0,function*(){try{return{data:yield me(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}createBucket(e){return z(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield fe(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return z(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return z(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return z(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class xp{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bp),t),this.fetch=lp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return z(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}listBuckets(e){return z(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const n=t.toString(),r=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield me(this.fetch,r,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return z(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pe(t))return{data:null,error:t};throw t}})}}const kp={"X-Client-Info":`storage-js/${vp}`,"Content-Type":"application/json"};class _p extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}class Sp extends _p{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jp extends _p{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Ip,Cp;(Cp=Ip||(Ip={})).InternalError="InternalError",Cp.S3VectorConflictException="S3VectorConflictException",Cp.S3VectorNotFoundException="S3VectorNotFoundException",Cp.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",Cp.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",Cp.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";const Ep=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>po(async()=>{const{default:e}=await Promise.resolve().then(()=>ch);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Tp=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);class Np{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kp),t),this.fetch=Ep(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return z(this,void 0,void 0,function*(){try{return{data:(yield we(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}getIndex(e,t){return z(this,void 0,void 0,function*(){try{return{data:yield we(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}listIndexes(e){return z(this,void 0,void 0,function*(){try{return{data:yield we(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return z(this,void 0,void 0,function*(){try{return{data:(yield we(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}}class Ap{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kp),t),this.fetch=Ep(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return z(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield we(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}getVectors(e){return z(this,void 0,void 0,function*(){try{return{data:yield we(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}listVectors(e){return z(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield we(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}queryVectors(e){return z(this,void 0,void 0,function*(){try{return{data:yield we(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}deleteVectors(e){return z(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield we(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}}class Op{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kp),t),this.fetch=Ep(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return z(this,void 0,void 0,function*(){try{return{data:(yield we(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}getBucket(e){return z(this,void 0,void 0,function*(){try{return{data:yield we(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}listBuckets(){return z(this,arguments,void 0,function*(e={}){try{return{data:yield we(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}deleteBucket(e){return z(this,void 0,void 0,function*(){try{return{data:(yield we(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}}class Dp extends Op{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Pp(this.url,this.headers,e,this.fetch)}}class Pp extends Np{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return z(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return z(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return z(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return z(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Mp(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Mp extends Ap{constructor(e,t,n,r,a){super(e,t,a),this.vectorBucketName=n,this.indexName=r}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return z(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return z(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return z(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return z(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return z(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Lp extends wp{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new yp(this.url,this.headers,e,this.fetch)}get vectors(){return new Dp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xp(this.url+"/iceberg",this.headers,this.fetch)}}let Rp="";Rp="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Up={headers:{"X-Client-Info":`supabase-js-${Rp}/2.77.0`}},zp={schema:"public"},$p={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Bp={},Fp="2.77.0",Wp=3e4,qp={"X-Client-Info":`gotrue-js/${Fp}`},Gp="X-Supabase-Api-Version",Vp={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Hp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Yp extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}class Kp extends Yp{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class Zp extends Yp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Jp extends Yp{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Qp extends Jp{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Xp extends Jp{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eg extends Jp{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tg extends Jp{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ng extends Jp{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rg extends Jp{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}class ag extends Jp{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class sg extends Jp{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ig="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),og=" \t\n\r=".split(""),cg=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<og.length;t+=1)e[og[t].charCodeAt(0)]=-2;for(let t=0;t<ig.length;t+=1)e[ig[t].charCodeAt(0)]=t;return e})(),lg=()=>"undefined"!=typeof window&&"undefined"!=typeof document,ug={tested:!1,writable:!1},dg=()=>{if(!lg())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(ug.tested)return ug.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ug.tested=!0,ug.writable=!0}catch(t){ug.tested=!0,ug.writable=!1}return ug.writable},hg=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>po(async()=>{const{default:e}=await Promise.resolve().then(()=>ch);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},pg=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},gg=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},mg=async(e,t)=>{await e.removeItem(t)};class fg{constructor(){this.promise=new fg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}fg.promiseConstructor=Promise;const yg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,vg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,bg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wg=[502,503,504],xg=["global","local","others"];class kg{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=hg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=xg[0]){if(xg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xg.join(", ")}`);try{return await Le(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ze})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=A(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null==n?void 0:n.newEmail,delete r.newEmail),await Le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Be,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(xe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ze})}catch(t){if(xe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,a,s,i,o;try{const c={nextPage:null,lastPage:0,total:0},l=await Le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Fe});if(l.error)throw l.error;const u=await l.json(),d=null!==(s=l.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=l.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(xe(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Oe(e);try{return await Le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ze})}catch(t){if(xe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Oe(e);try{return await Le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ze})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Oe(e);try{return await Le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ze})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Oe(e.userId);try{const{data:t,error:n}=await Le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Oe(e.userId),Oe(e.id);try{return{data:await Le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,r,a,s,i,o;try{const c={nextPage:null,lastPage:0,total:0},l=await Le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Fe});if(l.error)throw l.error;const u=await l.json(),d=null!==(s=l.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(i=l.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(xe(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}}const _g=!!(globalThis&&dg()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Sg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jg extends Sg{}class Ig extends Error{constructor({message:e,code:t,cause:n,name:r}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(a=null!=r?r:n instanceof Error?n.name:void 0)&&void 0!==a?a:"Unknown Error",this.code=t}}class Cg extends Ig{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}const Eg=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}},Tg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Ng={userVerification:"preferred",hints:["security-key"]};class Ag{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:r},a){try{const{data:s,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!s)return{data:null,error:i};const o=null!=r?r:Eg.createNewAbortSignal();if("create"===s.webauthn.type){const{user:e}=s.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${n}`),e.displayName||(e.displayName=e.name)}switch(s.webauthn.type){case"create":{const t=function(e,t){return tt(Tg,e,t||{})}(s.webauthn.credential_options.publicKey,null==a?void 0:a.create),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cg("Browser returned unexpected credential type",t)}:{data:null,error:new Cg("Empty credential response",t)}}catch(t){return{data:null,error:He({error:t,options:e})}}}({publicKey:t,signal:o});return n?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return tt(Ng,e,t||{})}(s.webauthn.credential_options.publicKey,null==a?void 0:a.request),{data:n,error:r}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cg("Browser returned unexpected credential type",t)}:{data:null,error:new Cg("Empty credential response",t)}}catch(t){return{data:null,error:Ye({error:t,options:e})}}}(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:t,signal:o}));return n?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(s){return xe(s)?{data:null,error:s}:{data:null,error:new Zp("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}},a){if(!t)return{data:null,error:new Yp("rpId is required for WebAuthn authentication")};try{if(!et())return{data:null,error:new Zp("Browser does not support WebAuthn",null)};const{data:s,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:r},{request:a});if(!s)return{data:null,error:i};const{webauthn:o}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:n,credential_response:o.credential_response}})}catch(s){return xe(s)?{data:null,error:s}:{data:null,error:new Zp("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r},a){if(!t)return{data:null,error:new Yp("rpId is required for WebAuthn registration")};try{if(!et())return{data:null,error:new Zp("Browser does not support WebAuthn",null)};const{data:s,error:i}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(t=>{var n;return null===(n=t.data)||void 0===n?void 0:n.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:c}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:r},{create:a});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:n,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:c}}catch(s){return xe(s)?{data:null,error:s}:{data:null,error:new Zp("Unexpected error in register",s)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Og={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Dg={};class Pg{get jwks(){var e,t;return null!==(t=null===(e=Dg[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Dg[this.storageKey]=Object.assign(Object.assign({},Dg[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Dg[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Dg[this.storageKey]=Object.assign(Object.assign({},Dg[this.storageKey]),{cachedAt:e})}constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pg.nextInstanceID,Pg.nextInstanceID+=1;const r=Object.assign(Object.assign({},Og),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new kg({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=hg(r.fetch),this.lock=r.lock||nt,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:lg()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=qe:this.lock=nt,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ag(this)},this.persistSession?(r.storage?this.storage=r.storage:dg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=We(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=We(this.memoryStorage)),lg()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Fp}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),lg()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return xe(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xe(t)?{error:t}:{error:new Zp("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const a=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Re}),{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(a){if(xe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,r;try{let a;if("email"in e){const{email:n,password:r,options:s}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Ae(this.storage,this.storageKey)),a=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},xform:Re})}else{if(!("phone"in e))throw new eg("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;a=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(n=null==i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Re})}}const{data:s,error:i}=a;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,c=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(a){if(xe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:a}=e;t=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Ue})}else{if(!("phone"in e))throw new eg("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:a}=e;t=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Ue})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new Xp}}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,r,a,s,i,o,c,l,u,d;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{wallet:u,statement:d,options:g}=e;let m;if(lg())if("object"==typeof u)m=u;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");m=e.ethereum}else{if("object"!=typeof u||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=u}const f=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href),y=await m.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const v=Ge(y[0]);let b=null===(n=null==g?void 0:g.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!b){const e=await m.request({method:"eth_chainId"});b=parseInt(e,16)}h=function(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:s=new Date,nonce:i,notBefore:o,requestId:c,resources:l,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const p=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${Ge(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let g=`URI: ${d}\nVersion: ${h}\nChain ID: ${n}${i?`\nNonce: ${i}`:""}\nIssued At: ${s.toISOString()}`;if(a&&(g+=`\nExpiration Time: ${a.toISOString()}`),o&&(g+=`\nNot Before: ${o.toISOString()}`),c&&(g+=`\nRequest ID: ${c}`),l){let e="\nResources:";for(const t of l){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}g+=e}return`${p}\n${g}`}({domain:f.host,address:v,statement:d,uri:f.href,version:"1",chainId:b,nonce:null===(r=null==g?void 0:g.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(s=null===(a=null==g?void 0:g.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(i=null==g?void 0:g.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null==g?void 0:g.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(c=null==g?void 0:g.signInWithEthereum)||void 0===c?void 0:c.requestId,resources:null===(l=null==g?void 0:g.signInWithEthereum)||void 0===l?void 0:l.resources}),p=await m.request({method:"personal_sign",params:[Ve(h),v]})}try{const{data:t,error:n}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Re});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Xp}}catch(g){if(xe(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var t,n,r,a,s,i,o,c,l,u,d,h;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{wallet:d,statement:h,options:m}=e;let f;if(lg())if("object"==typeof d)f=d;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");f=e.solana}else{if("object"!=typeof d||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");f=d}const y=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in f&&f.signIn){const e=await f.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==m?void 0:m.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),h?{statement:h}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),g=t.signature}else{if(!("signMessage"in f&&"function"==typeof f.signMessage&&"publicKey"in f&&"object"==typeof f&&f.publicKey&&"toBase58"in f.publicKey&&"function"==typeof f.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${y.host} wants you to sign in with your Solana account:`,f.publicKey.toBase58(),...h?["",h,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(n=null==m?void 0:m.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==m?void 0:m.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...(null===(s=null==m?void 0:m.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...(null===(i=null==m?void 0:m.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...(null===(o=null==m?void 0:m.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...(null===(c=null==m?void 0:m.signInWithSolana)||void 0===c?void 0:c.requestId)?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...(null===(u=null===(l=null==m?void 0:m.signInWithSolana)||void 0===l?void 0:l.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await f.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=e}}try{const{data:t,error:n}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Ee(g)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Re});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new Xp}}catch(m){if(xe(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await gg(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Re});if(await mg(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new Xp}}catch(a){if(xe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:a,nonce:s}=e,i=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Re}),{data:o,error:c}=i;return c?{data:{user:null,session:null},error:c}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c}):{data:{user:null,session:null},error:new Xp}}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,a,s;try{if("email"in e){const{email:r,options:a}=e;let s=null,i=null;"pkce"===this.flowType&&([s,i]=await Ae(this.storage,this.storageKey));const{error:o}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(n=null==a?void 0:a.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:s,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(a=null==n?void 0:n.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(s=null==n?void 0:n.channel)&&void 0!==s?s:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new eg("You must provide either an email or phone number.")}catch(i){if(xe(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:s,error:i}=await Le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Re});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,c=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let a=null,s=null;return"pkce"===this.flowType&&([a,s]=await Ae(this.storage,this.storageKey)),await Le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:$e})}catch(a){if(xe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Qp;const{error:r}=await Le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(xe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:a}=e,{error:s}=await Le(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}if("phone"in e){const{phone:n,type:r,options:a}=e,{data:s,error:i}=await Le(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:i}}throw new eg("You must provide either an email or phone number and a type")}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await gg(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await gg(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=De()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ze}):await this._useSession(async e=>{var t,n,r;const{data:a,error:s}=e;if(s)throw s;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:ze}):{data:{user:null},error:new Qp}})}catch(t){if(xe(t))return function(e){return xe(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await mg(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new Qp;const s=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Ae(this.storage,this.storageKey));const{data:c,error:l}=await Le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:s.access_token,xform:ze});if(l)throw l;return s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(xe(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Qp;const t=Date.now()/1e3;let n=t,r=!0,a=null;const{payload:s}=Te(e.access_token);if(s.exp&&(n=s.exp,r=n<=t),r){const{data:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:s}=await this._getUser(e.access_token);if(s)throw s;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(xe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new Qp;const{data:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(xe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lg())throw new tg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new ng("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new tg("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ng("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:s,expires_in:i,expires_at:o,token_type:c}=e;if(!(a&&i&&s&&c))throw new tg("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(i);let d=l+u;o&&(d=parseInt(o));const h=d-l;1e3*h<=Wp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const p=d-u;l-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,l):l-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,l);const{data:g,error:m}=await this._getUser(a);if(m)throw m;const f={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:u,expires_at:d,refresh_token:s,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(n){if(xe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gg(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{error:a};const s=null===(n=r.session)||void 0===n?void 0:n.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!function(e){return xe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await mg(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await Ae(this.storage,this.storageKey,!0));try{return await Le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(xe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(xe(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,a,s,i;const{data:o,error:c}=t;if(c)throw c;const l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Le(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(i=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return lg()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(xe(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:r,data:{session:a}}=t;if(r)throw r;const{options:s,provider:i,token:o,access_token:c,nonce:l}=e,u=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null==a?void 0:a.access_token)&&void 0!==n?n:void 0,body:{provider:i,id_token:o,access_token:c,nonce:l,link_identity:!0,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:Re}),{data:d,error:h}=u;return h?{data:{user:null,session:null},error:h}:d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),{data:d,error:h}):{data:{user:null,session:null},error:new Xp}}catch(r){if(xe(r))return{data:{user:null,session:null},error:r};throw r}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)throw s;return await Le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=a.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Re})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&ke(t)&&Date.now()+n-a<Wp},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{const t=await n(s);if(!r(s,null))return void e(t)}catch(a){if(!r(s,a))return void t(a)}})()}))}catch(a){if(this._debug(t,"error",a),xe(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),lg()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await gg(this.storage,this.storageKey);if(a&&this.userStorage){let t=await gg(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await pg(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:De()}else if(a&&!a.user&&!a.user){const e=await gg(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await mg(this.storage,this.storageKey+"-user"),await pg(this.storage,this.storageKey,a)):a.user=De()}if(this._debug(n,"session from storage",a),!this._isValidSession(a))return this._debug(n,"session is not valid"),void(null!==a&&await this._removeSession());const s=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<9e4;if(this._debug(n,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),ke(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(n,"error",a),void console.error(a)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Qp;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new fg;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Qp;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),xe(a)){const e={data:null,error:a};return ke(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(a){r.push(a)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await pg(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Pe(e);await pg(this.storage,this.storageKey,r)}else{const e=Pe(t);await pg(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await mg(this.storage,this.storageKey),await mg(this.storage,this.storageKey+"-code-verifier"),await mg(this.storage,this.storageKey+"-user"),this.userStorage&&await mg(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lg()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wp);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Wp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Sg))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lg()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await Ae(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;return a?{data:null,error:a}:await Le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:a,error:s}=t;if(s)return{data:null,error:s};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:c}=await Le(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(n=null==a?void 0:a.session)||void 0===n?void 0:n.access_token});return c?{data:null,error:c}:("totp"===e.factorType&&"totp"===o.type&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(xe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Je(e.webauthn.credential_response):Qe(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await Le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(t){if(xe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:a}=t;if(a)return{data:null,error:a};const s=await Le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});if(s.error)return s;const{data:i}=s;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Ke(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Ze(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(xe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(a),"verified"===a.status&&r[a.factor_type].push(a);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Te(r.access_token);let i=null;s.aal&&(i=s.aal);let o=i;return(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2"),{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>r)return n;const{data:a,error:s}=await Le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,n=a.keys.find(t=>t.kid===e),n||null):null}async getClaims(e,t={}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:a,signature:s,raw:{header:i,payload:o}}=Te(n);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const c=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!c){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:a,header:r,signature:s},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!(await crypto.subtle.verify(l,u,s,function(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Ie(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}(`${i}.${o}`))))throw new sg("Invalid JWT signature");return{data:{claims:a,header:r,signature:s},error:null}}catch(n){if(xe(n))return{data:null,error:n};throw n}}}Pg.nextInstanceID=0;const Mg=Pg;class Lg extends Mg{constructor(e){super(e)}}class Rg{constructor(e,t,n){var r,a,s;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=t).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,c=function(e,t){var n,r;const{db:a,auth:s,realtime:i,global:o}=e,{db:c,auth:l,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},l),s),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:zp,realtime:Bp,auth:Object.assign(Object.assign({},$p),{storageKey:o}),global:Up});this.storageKey=null!==(r=c.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=c.global.headers)&&void 0!==a?a:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(s=c.auth)&&void 0!==s?s:{},this.headers,c.global.fetch),this.fetch=((e,t,n)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?ah:fetch),(...e)=>t(...e)})(n),a="undefined"==typeof Headers?sh:Headers;return async(n,s)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let c=new a(null==s?void 0:s.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),r(n,Object.assign(Object.assign({},s),{headers:c}))}})(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new xh(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Lp(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Yd(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,storageKey:s,flowType:i,lock:o,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lg({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,flowType:i,lock:o,debug:c,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new sp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}const Ug=(e,t,n)=>new Rg(e,t,n);!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);t&&parseInt(t[1],10)}();const zg=Ug("https://nqbacrjjgdjabygqtcah.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xYmFjcmpqZ2RqYWJ5Z3F0Y2FoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNDgxNjgsImV4cCI6MjA2NzkyNDE2OH0.teKfoCvodwO719cNddtlC7k-gWoHu_Ntd64mo6XkDq4",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1},global:{headers:{"x-client-info":"wealthtracker-web"}},realtime:{params:{eventsPerSecond:10}}});class $g{static async getUserProfile(e){if(!zg)return null;const{data:t,error:n}=await zg.from("user_profiles").select("*").eq("clerk_user_id",e).single();return n?(console.error("Error fetching user profile:",n),null):t}static async getAccounts(e){if(!zg)return[];const{data:t,error:n}=await zg.from("accounts").select("*").eq("user_id",e).order("created_at",{ascending:!0});return n?(console.error("Error fetching accounts:",n),[]):t||[]}static async createAccount(e,t){if(!zg)return null;const{data:n,error:r}=await zg.from("accounts").insert({user_id:e,name:t.name,type:t.type,balance:t.balance||0,currency:t.currency||"USD",institution:t.institution,is_active:!0}).select().single();return r?(console.error("Error creating account:",r),null):n}static async updateAccount(e,t){if(!zg)return null;const{data:n,error:r}=await zg.from("accounts").update(t).eq("id",e).select().single();return r?(console.error("Error updating account:",r),null):n}static async deleteAccount(e){if(!zg)return!1;const{error:t}=await zg.from("accounts").delete().eq("id",e);return!t||(console.error("Error deleting account:",t),!1)}static async getTransactions(e,t=100){if(!zg)return[];const{data:n,error:r}=await zg.from("transactions").select("*").eq("user_id",e).order("date",{ascending:!1}).limit(t);return r?(console.error("Error fetching transactions:",r),[]):n||[]}static async createTransaction(e,t){if(!zg)return null;const{data:n,error:r}=await zg.from("transactions").insert({user_id:e,account_id:t.accountId,date:t.date,description:t.description,amount:t.amount,type:t.type,category:t.category,notes:t.notes,tags:t.tags}).select().single();return r?(console.error("Error creating transaction:",r),null):n}static async updateTransaction(e,t){if(!zg)return null;const{data:n,error:r}=await zg.from("transactions").update(t).eq("id",e).select().single();return r?(console.error("Error updating transaction:",r),null):n}static async deleteTransaction(e){if(!zg)return!1;const{error:t}=await zg.from("transactions").delete().eq("id",e);return!t||(console.error("Error deleting transaction:",t),!1)}static async getBudgets(e){if(!zg)return[];const{data:t,error:n}=await zg.from("budgets").select("*").eq("user_id",e).eq("is_active",!0).order("category",{ascending:!0});return n?(console.error("Error fetching budgets:",n),[]):t||[]}static async createBudget(e,t){if(!zg)return null;const{data:n,error:r}=await zg.from("budgets").insert({user_id:e,name:t.name,category:t.category,amount:t.amount,period:t.period||"monthly",start_date:t.startDate,is_active:!0}).select().single();return r?(console.error("Error creating budget:",r),null):n}static async getGoals(e){if(!zg)return[];const{data:t,error:n}=await zg.from("goals").select("*").eq("user_id",e).order("target_date",{ascending:!0});return n?(console.error("Error fetching goals:",n),[]):t||[]}static async createGoal(e,t){if(!zg)return null;const{data:n,error:r}=await zg.from("goals").insert({user_id:e,name:t.name,description:t.description,target_amount:t.targetAmount,current_amount:t.currentAmount||0,target_date:t.targetDate,category:t.category}).select().single();return r?(console.error("Error creating goal:",r),null):n}static subscribeToAccounts(e,t){return zg?zg.channel("accounts_changes").on("postgres_changes",{event:"*",schema:"public",table:"accounts",filter:`user_id=eq.${e}`},t).subscribe():null}static subscribeToTransactions(e,t){return zg?zg.channel("transactions_changes").on("postgres_changes",{event:"*",schema:"public",table:"transactions",filter:`user_id=eq.${e}`},t).subscribe():null}static async importTransactions(e,t){if(!zg)return{success:0,failed:0};const n=await Promise.allSettled(t.map(t=>this.createTransaction(e,t)));return{success:n.filter(e=>"fulfilled"===e.status).length,failed:n.filter(e=>"rejected"===e.status).length}}}var Bg={exports:{}},Fg={exports:{}};const Wg=Yi(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var qg,Gg;const Vg=Ki(st()),Hg=new class{dbName;dbVersion;db=null;dbConfig;safariMode=!1;initPromise=null;constructor(){this.dbName="WealthTrackerDB",this.dbVersion=2,this.checkSafari(),this.dbConfig={name:this.dbName,version:this.dbVersion,stores:[{name:"documents",keyPath:"id",indexes:[{name:"transactionId",keyPath:"transactionId",unique:!1},{name:"accountId",keyPath:"accountId",unique:!1},{name:"type",keyPath:"type",unique:!1},{name:"uploadDate",keyPath:"uploadDate",unique:!1}]},{name:"documentBlobs",keyPath:"documentId"},{name:"cache",keyPath:"key",indexes:[{name:"expiry",keyPath:"expiry",unique:!1}]},{name:"largeData",keyPath:"key"},{name:"secureData",keyPath:"key"},{name:"offline-queue",keyPath:"id"},{name:"offline-data",keyPath:"id"},{name:"conflicts",keyPath:"id"},{name:"sync-meta",keyPath:"key"}]}}checkSafari(){const e=navigator.userAgent;this.safariMode=e.includes("Safari")&&!e.includes("Chrome")&&!e.includes("Chromium")}async init(){return this.initPromise||(this.initPromise=this._doInit()),this.initPromise}async _doInit(){return new Promise((e,t)=>{if(this.db)return void e();let n;try{n=indexedDB.open(this.dbName,this.dbVersion)}catch(r){return console.error("Failed to open IndexedDB:",r),void t(new Error("IndexedDB not available (possibly private browsing mode)"))}n.onerror=e=>{const n=e.target.error;console.error("IndexedDB error:",n),this.safariMode?t(new Error("IndexedDB failed in Safari. This might be due to private browsing mode or storage restrictions.")):t(new Error("Failed to open IndexedDB: "+(n?.message||"Unknown error")))},n.onsuccess=t=>{this.db=t.target.result,e()},n.onupgradeneeded=e=>{const t=e.target.result;this.dbConfig.stores.forEach(e=>{if(!t.objectStoreNames.contains(e.name)){const n=t.createObjectStore(e.name,{keyPath:e.keyPath});e.indexes?.forEach(e=>{n.createIndex(e.name,e.keyPath,{unique:e.unique||!1})})}})}})}async ensureDB(){if(!this.db)try{await this.init()}catch(e){if(console.error("Failed to initialize IndexedDB:",e),this.safariMode)throw new Error("IndexedDB not available in Safari. Please check browser settings or disable private browsing mode.");throw e}if(!this.db)throw new Error("Database initialization failed");return this.db}async add(e,t){const n=await this.ensureDB();return new Promise((r,a)=>{const s=n.transaction([e],"readwrite").objectStore(e).add(t);s.onsuccess=()=>r(),s.onerror=()=>a(new Error(`Failed to add data to ${e}`))})}async put(e,t){const n=await this.ensureDB();return new Promise((r,a)=>{const s=n.transaction([e],"readwrite").objectStore(e).put(t);s.onsuccess=()=>r(),s.onerror=()=>a(new Error(`Failed to put data to ${e}`))})}async get(e,t){const n=await this.ensureDB();return new Promise((r,a)=>{const s=n.transaction([e],"readonly").objectStore(e).get(t);s.onsuccess=()=>r(s.result),s.onerror=()=>a(new Error(`Failed to get data from ${e}`))})}async getAll(e){const t=await this.ensureDB();return new Promise((n,r)=>{const a=t.transaction([e],"readonly").objectStore(e).getAll();a.onsuccess=()=>n(a.result||[]),a.onerror=()=>r(new Error(`Failed to get all data from ${e}`))})}async getByIndex(e,t,n){const r=await this.ensureDB();return new Promise((a,s)=>{const i=r.transaction([e],"readonly").objectStore(e).index(t).getAll(n);i.onsuccess=()=>a(i.result||[]),i.onerror=()=>s(new Error(`Failed to get data by index from ${e}`))})}async delete(e,t){const n=await this.ensureDB();return new Promise((r,a)=>{const s=n.transaction([e],"readwrite").objectStore(e).delete(t);s.onsuccess=()=>r(),s.onerror=()=>a(new Error(`Failed to delete data from ${e}`))})}async clear(e){const t=await this.ensureDB();return new Promise((n,r)=>{const a=t.transaction([e],"readwrite").objectStore(e).clear();a.onsuccess=()=>n(),a.onerror=()=>r(new Error(`Failed to clear ${e}`))})}async count(e){const t=await this.ensureDB();return new Promise((n,r)=>{const a=t.transaction([e],"readonly").objectStore(e).count();a.onsuccess=()=>n(a.result),a.onerror=()=>r(new Error(`Failed to count items in ${e}`))})}async storeBlob(e,t){await this.put("documentBlobs",{documentId:e,blob:t,size:t.size,type:t.type,storedAt:new Date})}async getBlob(e){const t=await this.get("documentBlobs",e);return t?.blob}async setCache(e,t,n=60){const r=new Date;r.setMinutes(r.getMinutes()+n),await this.put("cache",{key:e,value:t,expiry:r.getTime(),createdAt:new Date})}async getCache(e){const t=await this.get("cache",e);if(t){if(!(t.expiry<Date.now()))return t.value;await this.delete("cache",e)}}async cleanCache(){const e=(await this.ensureDB()).transaction(["cache"],"readwrite").objectStore("cache").index("expiry"),t=Date.now();e.openCursor(IDBKeyRange.upperBound(t)).onsuccess=e=>{const t=e.target.result;t&&(t.delete(),t.continue())}}async getStorageInfo(){if("storage"in navigator&&"estimate"in navigator.storage){const e=await navigator.storage.estimate();return{usage:e.usage||0,quota:e.quota||0}}return{usage:0,quota:0}}async getAllKeys(e){const t=await this.ensureDB();return new Promise((n,r)=>{const a=t.transaction([e],"readonly").objectStore(e).getAllKeys();a.onsuccess=()=>n(a.result),a.onerror=()=>r(new Error(`Failed to get keys from ${e}`))})}async putBulk(e,t){const n=await this.ensureDB();return new Promise((r,a)=>{const s=n.transaction([e],"readwrite"),i=s.objectStore(e);let o=!1;t.forEach(({key:e,value:t})=>{i.put({...t,key:e}).onerror=()=>{o=!0,a(new Error(`Failed to put item with key ${e}`))}}),s.oncomplete=()=>{o||r()},s.onerror=()=>{a(new Error("Bulk put transaction failed"))}})}async clearStore(e){return this.clear(e)}close(){this.db&&(this.db.close(),this.db=null)}},Yg=new class{encryptionKey;storeName="secureData";compressionThreshold=10240;constructor(){this.encryptionKey=this.getOrCreateEncryptionKey()}getOrCreateEncryptionKey(){let e=sessionStorage.getItem("wt_enc_key");return e||(e=Vg.lib.WordArray.random(32).toString(),sessionStorage.setItem("wt_enc_key",e)),e}encrypt(e){const t=JSON.stringify(e);return Vg.AES.encrypt(t,this.encryptionKey).toString()}decrypt(e){try{const t=Vg.AES.decrypt(e,this.encryptionKey).toString(Vg.enc.Utf8);return JSON.parse(t)}catch(t){throw console.error("Decryption failed:",t),new Error("Failed to decrypt data")}}compress(e){return btoa(e)}decompress(e){return atob(e)}async setItem(e,t,n={}){const{encrypted:r=!0,expiryDays:a,compress:s=!1}=n;let i=t,o=!1;const c=JSON.stringify(t).length;s&&c>this.compressionThreshold&&(o=!0),r?i=this.encrypt(t):o&&(i=this.compress(JSON.stringify(t)));const l={data:i,timestamp:Date.now(),encrypted:r,compressed:o&&!r};a&&(l.expiry=Date.now()+24*a*60*60*1e3),await Hg.put(this.storeName,{key:e,...l})}async getItem(e){try{const t=await Hg.get(this.storeName,e);if(!t)return null;if(t.expiry&&Date.now()>t.expiry)return await this.removeItem(e),null;let n=t.data;return t.encrypted&&"string"==typeof n?n=this.decrypt(n):t.compressed&&"string"==typeof n&&(n=JSON.parse(this.decompress(n))),n}catch(t){return console.error("Error retrieving data:",t),null}}async removeItem(e){await Hg.delete(this.storeName,e)}async clear(){await Hg.clearStore(this.storeName)}async getAllKeys(){return await Hg.getAllKeys(this.storeName)}async setItems(e){const t=await Promise.all(e.map(async({key:e,value:t,options:n})=>{const{encrypted:r=!0,expiryDays:a,compress:s=!1}=n||{};let i=t,o=!1;const c=JSON.stringify(t).length;s&&c>this.compressionThreshold&&(o=!0),r?i=this.encrypt(t):o&&(i=this.compress(JSON.stringify(t)));const l={data:i,timestamp:Date.now(),encrypted:r,compressed:o&&!r};return a&&(l.expiry=Date.now()+24*a*60*60*1e3),{key:e,value:l}}));await Hg.putBulk(this.storeName,t)}async migrateFromLocalStorage(e){const t=[];for(const r of e){const e=localStorage.getItem(r);if(e)try{const n=JSON.parse(e);t.push({key:r,value:n,options:{encrypted:!0}})}catch(n){t.push({key:r,value:e,options:{encrypted:!0}})}}if(t.length>0){await this.setItems(t);for(const t of e)localStorage.removeItem(t)}}async cleanupExpiredData(){const e=await this.getAllKeys();for(const t of e){const e=await Hg.get(this.storeName,t);e?.expiry&&Date.now()>e.expiry&&await this.removeItem(t)}}async exportData(){const e=await this.getAllKeys(),t={};for(const n of e){const e=await this.getItem(n);null!==e&&(t[n]=e)}return t}async importData(e,t={}){const n=Object.entries(e).map(([e,n])=>({key:e,value:n,options:t}));await this.setItems(n)}async getStorageInfo(){if("storage"in navigator&&"estimate"in navigator.storage){const e=await navigator.storage.estimate(),t=e.usage||0,n=e.quota||0;return{usage:t,quota:n,percentUsed:n>0?t/n*100:0}}return{usage:0,quota:0,percentUsed:0}}},Kg="wealthtracker_accounts",Zg="wealthtracker_transactions",Jg="wealthtracker_budgets",Qg="wealthtracker_goals",Xg="wealthtracker_categories",em=new class{_isReady=!1;migrationCompleted=!1;get isReady(){return this._isReady}async init(){try{await Hg.init(),sessionStorage.getItem("wt_migration_completed")||(await this.migrateFromLocalStorage(),sessionStorage.setItem("wt_migration_completed","true")),this._isReady=!0,this.scheduleCleanup()}catch(e){console.error("Failed to initialize secure storage:",e),this._isReady=!0}}async migrateFromLocalStorage(){const e=[Kg,Zg,Jg,Qg,"wealthtracker_tags","wealthtracker_recurring",Xg,"wealthtracker_preferences","money_management_theme","money_management_accent_color","money_management_notifications","money_management_budget_alerts_enabled","money_management_alert_threshold","money_management_large_transaction_alerts_enabled","money_management_large_transaction_threshold"];for(let n=0;n<localStorage.length;n++){const t=localStorage.key(n);t&&(t.startsWith("wealthtracker_")||t.startsWith("money_management_"))&&(e.includes(t)||e.push(t))}try{await Yg.migrateFromLocalStorage(e),console.log("Migration completed successfully"),this.migrationCompleted=!0}catch(t){console.error("Migration failed:",t)}}async get(e){try{const t=await Yg.getItem(e);if(null!==t)return t;if(!this.migrationCompleted){const t=localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return t}}return null}catch(t){console.error(`Error getting ${e}:`,t);const n=localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch{return n}return null}}async set(e,t){try{const n=[Kg,Zg,Jg,Qg].includes(e)||e.includes("transaction")||e.includes("account")||e.includes("budget")||e.includes("financial");await Yg.setItem(e,t,{encrypted:n,expiryDays:n?void 0:30,compress:JSON.stringify(t).length>10240}),this.migrationCompleted&&localStorage.removeItem(e)}catch(n){console.error(`Error setting ${e}:`,n),localStorage.setItem(e,JSON.stringify(t))}}async remove(e){try{await Yg.removeItem(e),localStorage.removeItem(e)}catch(t){console.error(`Error removing ${e}:`,t),localStorage.removeItem(e)}}async clear(){try{await Yg.clear();const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&(n.startsWith("wealthtracker_")||n.startsWith("money_management_"))&&e.push(n)}e.forEach(e=>localStorage.removeItem(e))}catch(e){console.error("Error clearing storage:",e)}}scheduleCleanup(){setInterval(async()=>{try{await Yg.cleanupExpiredData(),await Hg.cleanCache()}catch(e){console.error("Cleanup error:",e)}},36e5),setTimeout(async()=>{try{await Yg.cleanupExpiredData(),await Hg.cleanCache()}catch(e){console.error("Initial cleanup error:",e)}},5e3)}async exportData(){return await Yg.exportData()}async importData(e){await Yg.importData(e,{encrypted:!0})}async getStorageInfo(){return await Yg.getStorageInfo()}},tm=Ug("https://nqbacrjjgdjabygqtcah.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xYmFjcmpqZ2RqYWJ5Z3F0Y2FoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNDgxNjgsImV4cCI6MjA2NzkyNDE2OH0.teKfoCvodwO719cNddtlC7k-gWoHu_Ntd64mo6XkDq4",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}}),nm=()=>null!==tm,rm=e=>e?.message?e.message:e?.details?e.details:e?.hint?e.hint:"An unexpected error occurred";class am{static async getOrCreateUser(e,t,n,r){if(!nm())return null;try{const{data:a,error:s}=await tm.from("users").select("*").eq("clerk_id",e).single();if(a)return a;if("PGRST116"===s?.code){const{data:a,error:s}=await tm.from("users").insert({clerk_id:e,email:t,first_name:n,last_name:r,subscription_tier:"free",subscription_status:"active",settings:{},preferences:{}}).select().single();if(s)throw console.error("Error creating user:",s),new Error(rm(s));return a}if(s)throw console.error("Error fetching user:",s),new Error(rm(s));return null}catch(a){throw console.error("UserService.getOrCreateUser error:",a),a}}static async updateUser(e,t){if(!nm())return null;try{const{data:n,error:r}=await tm.from("users").update(t).eq("clerk_id",e).select().single();if(r)throw console.error("Error updating user:",r),new Error(rm(r));return n}catch(n){throw console.error("UserService.updateUser error:",n),n}}static async updatePreferences(e,t){if(nm())try{const{error:n}=await tm.from("users").update({preferences:t}).eq("clerk_id",e);if(n)throw console.error("Error updating preferences:",n),new Error(rm(n))}catch(n){throw console.error("UserService.updatePreferences error:",n),n}else localStorage.setItem("wealthtracker_preferences",JSON.stringify(t))}static async updateSettings(e,t){if(nm())try{const{error:n}=await tm.from("users").update({settings:t}).eq("clerk_id",e);if(n)throw console.error("Error updating settings:",n),new Error(rm(n))}catch(n){throw console.error("UserService.updateSettings error:",n),n}else localStorage.setItem("wealthtracker_settings",JSON.stringify(t))}static async getUserByClerkId(e){if(!nm())return null;try{const{data:t,error:n}=await tm.from("users").select("*").eq("clerk_id",e).single();if(n){if("PGRST116"===n.code)return null;throw console.error("Error fetching user:",n),new Error(rm(n))}return t}catch(t){throw console.error("UserService.getUserByClerkId error:",t),t}}static async updateLastSync(e){if(nm())try{const{error:t}=await tm.from("users").update({last_sync_at:(new Date).toISOString()}).eq("clerk_id",e);if(t)throw console.error("Error updating last sync:",t),new Error(rm(t))}catch(t){throw console.error("UserService.updateLastSync error:",t),t}}}class sm{cache=new Map;CACHE_DURATION=3e5;currentClerkId=null;currentDatabaseId=null;async getDatabaseUserId(e){if(!e)return null;const t=this.cache.get(e);if(t&&Date.now()-t.timestamp<this.CACHE_DURATION)return t.databaseId;if(!nm()||!tm)return null;try{console.log("[UserIdService] Fetching database ID for Clerk ID:",e);const{data:t,error:n}=await tm.from("users").select("id").eq("clerk_id",e).single();return n?"PGRST116"===n.code?(console.log("[UserIdService] User not found for Clerk ID:",e),null):(console.error("[UserIdService] Error fetching user:",n),null):t?(this.cache.set(e,{clerkId:e,databaseId:t.id,timestamp:Date.now()}),console.log("[UserIdService] Found database ID:",t.id,"for Clerk ID:",e),t.id):(console.log("[UserIdService] No user found for Clerk ID:",e),null)}catch(n){return console.error("[UserIdService] Failed to get database user ID:",n),null}}async setCurrentUser(e,t){if(this.currentClerkId=e,t)this.currentDatabaseId=t,this.cache.set(e,{clerkId:e,databaseId:t,timestamp:Date.now()});else{const t=await this.getDatabaseUserId(e);this.currentDatabaseId=t}}getCurrentDatabaseUserId(){return this.currentDatabaseId}getCurrentClerkId(){return this.currentClerkId}getCurrentUserIds(){return{clerkId:this.currentClerkId,databaseId:this.currentDatabaseId}}clearCache(){this.cache.clear(),this.currentClerkId=null,this.currentDatabaseId=null}async ensureUserExists(e,t,n,r){try{let a=await this.getDatabaseUserId(e);if(!a){console.log("[UserIdService] User not found, creating new user");const s=await am.getOrCreateUser(e,t,n,r);s&&(a=s.id,this.cache.set(e,{clerkId:e,databaseId:a,timestamp:Date.now()}))}return a&&(this.currentClerkId=e,this.currentDatabaseId=a,console.log("[UserIdService] Current user set - Clerk ID:",e,"Database ID:",a)),a}catch(a){return console.error("[UserIdService] Failed to ensure user exists:",a),null}}debug(){console.log("  Cache entries:",Array.from(this.cache.entries()).map(([e,t])=>({clerkId:e,databaseId:t.databaseId,age:Math.round((Date.now()-t.timestamp)/1e3)+"s"})))}}const im=new sm,om=Object.freeze(Object.defineProperty({__proto__:null,UserIdService:sm,userIdService:im},Symbol.toStringTag,{value:"Module"})),cm=Ji("accounts/fetchFromSupabase",async(e,{rejectWithValue:t})=>{try{const e=await ot();if(!e)throw new Error("User not authenticated");const t=await $g.getAccounts(e);return await em.set("accounts",t),t}catch(n){console.error("Failed to fetch accounts from Supabase:",n);try{return await em.get("accounts")||[]}catch(r){return t("Failed to fetch accounts and no cached data available")}}}),lm=Ji("accounts/createInSupabase",async(e,{rejectWithValue:t,dispatch:n})=>{try{const t=await ot();if(!t)throw new Error("User not authenticated");const n=await $g.createAccount(t,e);if(!n)throw new Error("Failed to create account in Supabase");const r=await em.get("accounts")||[];return await em.set("accounts",[...r,n]),n}catch(r){console.error("Failed to create account in Supabase:",r);const t={...e,id:`temp-${crypto.randomUUID()}`,lastUpdated:new Date,updatedAt:new Date},n=await em.get("accounts")||[],a=await em.get("offline_accounts")||[];return await em.set("accounts",[...n,t]),await em.set("offline_accounts",[...a,t]),t}}),um=Ji("accounts/updateInSupabase",async({id:e,updates:t},{rejectWithValue:n})=>{try{const n=await $g.updateAccount(e,t);if(!n)throw new Error("Failed to update account in Supabase");const r=(await em.get("accounts")||[]).map(t=>t.id===e?n:t);return await em.set("accounts",r),n}catch(r){console.error("Failed to update account in Supabase:",r);const a=await em.get("accounts")||[],s=a.findIndex(t=>t.id===e);if(-1!==s){const n={...a[s],...t,updatedAt:new Date};a[s]=n,await em.set("accounts",a);const r=await em.get("offline_account_updates")||[];return await em.set("offline_account_updates",[...r,{id:e,updates:t}]),n}return n("Account not found")}}),dm=Ji("accounts/deleteFromSupabase",async(e,{rejectWithValue:t})=>{try{if(!(await $g.deleteAccount(e)))throw new Error("Failed to delete account from Supabase");const t=(await em.get("accounts")||[]).filter(t=>t.id!==e);return await em.set("accounts",t),e}catch(n){console.error("Failed to delete account from Supabase:",n);const t=(await em.get("accounts")||[]).filter(t=>t.id!==e);await em.set("accounts",t);const r=await em.get("offline_account_deletes")||[];return await em.set("offline_account_deletes",[...r,e]),e}}),hm=Ji("transactions/fetchFromSupabase",async(e=1e3,{rejectWithValue:t})=>{try{const t=await ot();if(!t)throw new Error("User not authenticated");const n=await $g.getTransactions(t,e);return await em.set("transactions",n),n}catch(n){console.error("Failed to fetch transactions from Supabase:",n);try{return await em.get("transactions")||[]}catch(r){return t("Failed to fetch transactions and no cached data available")}}}),pm=Ji("transactions/createInSupabase",async(e,{rejectWithValue:t})=>{try{const t=await ot();if(!t)throw new Error("User not authenticated");const n=await $g.createTransaction(t,e);if(!n)throw new Error("Failed to create transaction in Supabase");const r=await em.get("transactions")||[];return await em.set("transactions",[...r,n]),n}catch(n){console.error("Failed to create transaction in Supabase:",n);const t={...e,id:`temp-${crypto.randomUUID()}`},r=await em.get("transactions")||[],a=await em.get("offline_transactions")||[];return await em.set("transactions",[...r,t]),await em.set("offline_transactions",[...a,t]),t}}),gm=Ji("transactions/updateInSupabase",async({id:e,updates:t},{rejectWithValue:n})=>{try{const n=await $g.updateTransaction(e,t);if(!n)throw new Error("Failed to update transaction in Supabase");const r=(await em.get("transactions")||[]).map(t=>t.id===e?n:t);return await em.set("transactions",r),n}catch(r){console.error("Failed to update transaction in Supabase:",r);const a=await em.get("transactions")||[],s=a.findIndex(t=>t.id===e);if(-1!==s){const n={...a[s],...t};a[s]=n,await em.set("transactions",a);const r=await em.get("offline_transaction_updates")||[];return await em.set("offline_transaction_updates",[...r,{id:e,updates:t}]),n}return n("Transaction not found")}}),mm=Ji("transactions/deleteFromSupabase",async(e,{rejectWithValue:t})=>{try{if(!(await $g.deleteTransaction(e)))throw new Error("Failed to delete transaction from Supabase");const t=(await em.get("transactions")||[]).filter(t=>t.id!==e);return await em.set("transactions",t),e}catch(n){console.error("Failed to delete transaction from Supabase:",n);const t=(await em.get("transactions")||[]).filter(t=>t.id!==e);await em.set("transactions",t);const r=await em.get("offline_transaction_deletes")||[];return await em.set("offline_transaction_deletes",[...r,e]),e}}),fm=Ji("budgets/fetchFromSupabase",async(e,{rejectWithValue:t})=>{try{const e=await ot();if(!e)throw new Error("User not authenticated");const t=await $g.getBudgets(e);return await em.set("budgets",t),t}catch(n){console.error("Failed to fetch budgets from Supabase:",n);try{return await em.get("budgets")||[]}catch(r){return t("Failed to fetch budgets and no cached data available")}}}),ym=Ji("budgets/createInSupabase",async(e,{rejectWithValue:t})=>{try{const t=await ot();if(!t)throw new Error("User not authenticated");const n=await $g.createBudget(t,e);if(!n)throw new Error("Failed to create budget in Supabase");const r=await em.get("budgets")||[];return await em.set("budgets",[...r,n]),n}catch(n){console.error("Failed to create budget in Supabase:",n);const t={...e,id:`temp-${crypto.randomUUID()}`,createdAt:new Date,spent:0},r=await em.get("budgets")||[],a=await em.get("offline_budgets")||[];return await em.set("budgets",[...r,t]),await em.set("offline_budgets",[...a,t]),t}}),vm=Ji("goals/fetchFromSupabase",async(e,{rejectWithValue:t})=>{try{const e=await ot();if(!e)throw new Error("User not authenticated");const t=await $g.getGoals(e);return await em.set("goals",t),t}catch(n){console.error("Failed to fetch goals from Supabase:",n);try{return await em.get("goals")||[]}catch(r){return t("Failed to fetch goals and no cached data available")}}}),bm=Ji("goals/createInSupabase",async(e,{rejectWithValue:t})=>{try{const t=await ot();if(!t)throw new Error("User not authenticated");const n=await $g.createGoal(t,e);if(!n)throw new Error("Failed to create goal in Supabase");const r=await em.get("goals")||[];return await em.set("goals",[...r,n]),n}catch(n){console.error("Failed to create goal in Supabase:",n);const t={...e,id:`temp-${crypto.randomUUID()}`,createdAt:new Date,currentAmount:0},r=await em.get("goals")||[],a=await em.get("offline_goals")||[];return await em.set("goals",[...r,t]),await em.set("offline_goals",[...a,t]),t}}),wm=Ji("app/syncOfflineData",async(e,{dispatch:t,rejectWithValue:n})=>{try{if(!(await ot()))throw new Error("User not authenticated");const e=await em.get("offline_accounts")||[];for(const r of e)r.id.startsWith("temp-")&&await t(lm(r));const n=await em.get("offline_transactions")||[];for(const r of n)r.id.startsWith("temp-")&&await t(pm(r));return await em.remove("offline_accounts"),await em.remove("offline_transactions"),await em.remove("offline_budgets"),await em.remove("offline_goals"),!0}catch(r){return console.error("Failed to sync offline data:",r),n("Failed to sync offline data")}}),xm=Qi({name:"accounts",initialState:{accounts:[],loading:!1,error:null},reducers:{setAccounts:(e,t)=>{e.accounts=t.payload,e.error=null},addAccount:(e,t)=>{const n={...t.payload,id:crypto.randomUUID(),lastUpdated:Dd(),updatedAt:Dd()};e.accounts.push(n)},updateAccount:(e,t)=>{const n=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.accounts[n]={...e.accounts[n],...t.payload.updates,updatedAt:Dd()})},deleteAccount:(e,t)=>{e.accounts=e.accounts.filter(e=>e.id!==t.payload)},updateAccountBalance:(e,t)=>{const n=e.accounts.find(e=>e.id===t.payload.id);n&&(n.balance=t.payload.balance,n.updatedAt=Dd())},recalculateAllBalances:(e,t)=>{}},extraReducers:e=>{e.addCase(cm.pending,e=>{e.loading=!0,e.error=null}).addCase(cm.fulfilled,(e,t)=>{e.loading=!1,e.accounts=t.payload}).addCase(cm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load accounts"}).addCase(lm.pending,e=>{e.loading=!0,e.error=null}).addCase(lm.fulfilled,(e,t)=>{e.loading=!1,e.accounts=e.accounts.filter(e=>!(e.id.startsWith("temp-")&&e.name===t.payload.name)),e.accounts.push(t.payload)}).addCase(lm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to create account"}).addCase(um.pending,e=>{e.loading=!0,e.error=null}).addCase(um.fulfilled,(e,t)=>{e.loading=!1;const n=e.accounts.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.accounts[n]=t.payload)}).addCase(um.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to update account"}).addCase(dm.pending,e=>{e.loading=!0,e.error=null}).addCase(dm.fulfilled,(e,t)=>{e.loading=!1,e.accounts=e.accounts.filter(e=>e.id!==t.payload)}).addCase(dm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to delete account"})}}).reducer,km=Qi({name:"transactions",initialState:{transactions:[],loading:!1,error:null},reducers:{setTransactions:(e,t)=>{e.transactions=t.payload,e.error=null},addTransaction:(e,t)=>{const n={...t.payload,id:crypto.randomUUID(),date:Od(t.payload.date)||Dd()};e.transactions.push(n)},updateTransaction:(e,t)=>{const n=e.transactions.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.transactions[n]={...e.transactions[n],...t.payload.updates})},deleteTransaction:(e,t)=>{e.transactions=e.transactions.filter(e=>e.id!==t.payload)},bulkDeleteTransactions:(e,t)=>{const n=new Set(t.payload);e.transactions=e.transactions.filter(e=>!n.has(e.id))},bulkUpdateTransactions:(e,t)=>{const n=new Set(t.payload.ids);e.transactions=e.transactions.map(e=>n.has(e.id)?{...e,...t.payload.updates,updatedAt:Dd()}:e)}},extraReducers:e=>{e.addCase(hm.pending,e=>{e.loading=!0,e.error=null}).addCase(hm.fulfilled,(e,t)=>{e.loading=!1,e.transactions=t.payload}).addCase(hm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load transactions"}).addCase(pm.pending,e=>{e.loading=!0,e.error=null}).addCase(pm.fulfilled,(e,t)=>{e.loading=!1,e.transactions=e.transactions.filter(e=>!(e.id.startsWith("temp-")&&e.description===t.payload.description&&e.amount===t.payload.amount&&e.accountId===t.payload.accountId)),e.transactions.push(t.payload)}).addCase(pm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to create transaction"}).addCase(gm.pending,e=>{e.loading=!0,e.error=null}).addCase(gm.fulfilled,(e,t)=>{e.loading=!1;const n=e.transactions.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.transactions[n]=t.payload)}).addCase(gm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to update transaction"}).addCase(mm.pending,e=>{e.loading=!0,e.error=null}).addCase(mm.fulfilled,(e,t)=>{e.loading=!1,e.transactions=e.transactions.filter(e=>e.id!==t.payload)}).addCase(mm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to delete transaction"})}}),{deleteTransaction:_m}=km.actions,Sm=km.reducer,jm=Qi({name:"budgets",initialState:{budgets:[],loading:!1,error:null},reducers:{setBudgets:(e,t)=>{e.budgets=t.payload,e.error=null},addBudget:(e,t)=>{const n={...t.payload,id:crypto.randomUUID(),createdAt:Dd(),updatedAt:Dd()};e.budgets.push(n)},updateBudget:(e,t)=>{const n=e.budgets.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.budgets[n]={...e.budgets[n],...t.payload.updates,updatedAt:Dd()})},deleteBudget:(e,t)=>{e.budgets=e.budgets.filter(e=>e.id!==t.payload)},updateBudgetSpent:(e,t)=>{const n=e.budgets.find(e=>e.id===t.payload.id);n&&(n.spent=t.payload.spent,n.updatedAt=Dd())}},extraReducers:e=>{e.addCase(fm.pending,e=>{e.loading=!0,e.error=null}).addCase(fm.fulfilled,(e,t)=>{e.loading=!1,e.budgets=t.payload}).addCase(fm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load budgets"}).addCase(ym.pending,e=>{e.loading=!0,e.error=null}).addCase(ym.fulfilled,(e,t)=>{e.loading=!1,e.budgets=e.budgets.filter(e=>!(e.id.startsWith("temp-")&&e.category===t.payload.category)),e.budgets.push(t.payload)}).addCase(ym.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to create budget"})}}),{updateBudgetSpent:Im}=jm.actions,Cm=jm.reducer,Em=Ji("categories/load",async()=>await em.get("categories")||[]),Tm=Ji("categories/save",async e=>(await em.set("categories",e),e)),Nm=Qi({name:"categories",initialState:{categories:[],loading:!1,error:null},reducers:{setCategories:(e,t)=>{e.categories=t.payload,e.error=null},addCategory:(e,t)=>{const n={...t.payload,id:crypto.randomUUID()};e.categories.push(n)},updateCategory:(e,t)=>{const n=e.categories.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.categories[n]={...e.categories[n],...t.payload.updates})},deleteCategory:(e,t)=>{e.categories=e.categories.filter(e=>e.id!==t.payload).map(e=>e.parentId===t.payload?{...e,parentId:void 0}:e)}},extraReducers:e=>{e.addCase(Em.pending,e=>{e.loading=!0,e.error=null}).addCase(Em.fulfilled,(e,t)=>{e.loading=!1,e.categories=t.payload}).addCase(Em.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load categories"}).addCase(Tm.fulfilled,(e,t)=>{e.categories=t.payload})}}).reducer,Am=Qi({name:"goals",initialState:{goals:[],loading:!1,error:null},reducers:{setGoals:(e,t)=>{e.goals=t.payload,e.error=null},addGoal:(e,t)=>{const n={...t.payload,id:crypto.randomUUID(),createdAt:Dd(),updatedAt:Dd()};e.goals.push(n)},updateGoal:(e,t)=>{const n=e.goals.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.goals[n]={...e.goals[n],...t.payload.updates,updatedAt:Dd()})},deleteGoal:(e,t)=>{e.goals=e.goals.filter(e=>e.id!==t.payload)},updateGoalProgress:(e,t)=>{const n=e.goals.find(e=>e.id===t.payload.id);n&&(n.currentAmount=t.payload.currentAmount,n.updatedAt=Dd())}},extraReducers:e=>{e.addCase(vm.pending,e=>{e.loading=!0,e.error=null}).addCase(vm.fulfilled,(e,t)=>{e.loading=!1,e.goals=t.payload}).addCase(vm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load goals"}).addCase(bm.pending,e=>{e.loading=!0,e.error=null}).addCase(bm.fulfilled,(e,t)=>{e.loading=!1,e.goals=e.goals.filter(e=>!(e.id.startsWith("temp-")&&e.name===t.payload.name)),e.goals.push(t.payload)}).addCase(bm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to create goal"})}}),{updateGoalProgress:Om}=Am.actions,Dm=Am.reducer,Pm=Ji("tags/load",async()=>await em.get("tags")||[]),Mm=Ji("tags/save",async e=>(await em.set("tags",e),e)),Lm=Qi({name:"tags",initialState:{tags:[],loading:!1,error:null},reducers:{setTags:(e,t)=>{e.tags=t.payload,e.error=null},addTag:(e,t)=>{e.tags.includes(t.payload)||e.tags.push(t.payload)},removeTag:(e,t)=>{e.tags=e.tags.filter(e=>e!==t.payload)},addMultipleTags:(e,t)=>{const n=t.payload.filter(t=>!e.tags.includes(t));e.tags.push(...n)}},extraReducers:e=>{e.addCase(Pm.pending,e=>{e.loading=!0,e.error=null}).addCase(Pm.fulfilled,(e,t)=>{e.loading=!1,e.tags=t.payload}).addCase(Pm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load tags"}).addCase(Mm.fulfilled,(e,t)=>{e.tags=t.payload})}}),{addMultipleTags:Rm}=Lm.actions,Um=Lm.reducer,zm=Ji("recurringTransactions/load",async()=>await em.get("recurringTransactions")||[]),$m=Ji("recurringTransactions/save",async e=>(await em.set("recurringTransactions",e),e)),Bm=Qi({name:"recurringTransactions",initialState:{recurringTransactions:[],loading:!1,error:null},reducers:{setRecurringTransactions:(e,t)=>{e.recurringTransactions=t.payload,e.error=null},addRecurringTransaction:(e,t)=>{const n={...t.payload,id:crypto.randomUUID(),createdAt:Dd(),updatedAt:Dd()};e.recurringTransactions.push(n)},updateRecurringTransaction:(e,t)=>{const n=e.recurringTransactions.findIndex(e=>e.id===t.payload.id);-1!==n&&(e.recurringTransactions[n]={...e.recurringTransactions[n],...t.payload.updates,updatedAt:Dd()})},deleteRecurringTransaction:(e,t)=>{e.recurringTransactions=e.recurringTransactions.filter(e=>e.id!==t.payload)},updateLastProcessed:(e,t)=>{const n=e.recurringTransactions.find(e=>e.id===t.payload.id);n&&(n.lastProcessed=Od(t.payload.lastProcessed),n.updatedAt=Dd())}},extraReducers:e=>{e.addCase(zm.pending,e=>{e.loading=!0,e.error=null}).addCase(zm.fulfilled,(e,t)=>{e.loading=!1,e.recurringTransactions=t.payload}).addCase(zm.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to load recurring transactions"}).addCase($m.fulfilled,(e,t)=>{e.recurringTransactions=t.payload})}}).reducer,Fm=e=>{try{localStorage.setItem("preferences",JSON.stringify(e))}catch(t){console.error("Failed to save preferences:",t)}},Wm=Qi({name:"preferences",initialState:{theme:"auto",colorTheme:"green",currency:"GBP",compactView:!0,pageVisibility:{showBudget:!0,showGoals:!0,showAnalytics:!0},goalCelebration:!0,firstName:"",...(()=>{try{const e=localStorage.getItem("preferences");return e?JSON.parse(e):{}}catch{return{}}})()},reducers:{setTheme:(e,t)=>{e.theme=t.payload,Fm(e)},setColorTheme:(e,t)=>{e.colorTheme=t.payload,Fm(e)},setCurrency:(e,t)=>{e.currency=t.payload,Fm(e)},setCompactView:(e,t)=>{e.compactView=t.payload,Fm(e)},setPageVisibility:(e,t)=>{e.pageVisibility={...e.pageVisibility,...t.payload},Fm(e)},setGoalCelebration:(e,t)=>{e.goalCelebration=t.payload,Fm(e)},setFirstName:(e,t)=>{e.firstName=t.payload,Fm(e)},setThemeSchedule:(e,t)=>{e.themeSchedule=t.payload,Fm(e)},updatePreferences:(e,t)=>{Object.assign(e,t.payload),Fm(e)}}}).reducer,qm=e=>{try{const t=e.map(({action:e,...t})=>t);localStorage.setItem("notifications",JSON.stringify(t))}catch(t){console.error("Failed to save notifications:",t)}},Gm=(()=>{try{const e=localStorage.getItem("notifications");return e?JSON.parse(e):[]}catch{return[]}})(),Vm=Xi({reducer:{accounts:xm,transactions:Sm,budgets:Cm,categories:Nm,goals:Dm,tags:Um,recurringTransactions:Bm,preferences:Wm,notifications:Qi({name:"notifications",initialState:{notifications:Gm,unreadCount:Gm.filter(e=>!e.read).length},reducers:{addNotification:(e,t)=>{const n={...t.payload,id:crypto.randomUUID(),timestamp:Dd(),read:!1};e.notifications.unshift(n),e.unreadCount+=1,qm(e.notifications)},markAsRead:(e,t)=>{const n=e.notifications.find(e=>e.id===t.payload);n&&!n.read&&(n.read=!0,e.unreadCount-=1,qm(e.notifications))},markAllAsRead:e=>{e.notifications.forEach(e=>{e.read=!0}),e.unreadCount=0,qm(e.notifications)},removeNotification:(e,t)=>{const n=e.notifications.findIndex(e=>e.id===t.payload);-1!==n&&(e.notifications[n].read||(e.unreadCount-=1),e.notifications.splice(n,1),qm(e.notifications))},clearAllNotifications:e=>{e.notifications=[],e.unreadCount=0,qm(e.notifications)}}}).reducer,layout:Qi({name:"layout",initialState:{isWideMode:!1},reducers:{setWideMode:(e,t)=>{e.isWideMode=t.payload},toggleWideMode:e=>{e.isWideMode=!e.isWideMode}}}).reducer},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"],ignoredActionPaths:["meta.arg","payload.timestamp"],ignoredPaths:["items.dates"]}}),devTools:!1}),Hm=to,Ym=eo;var Km={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};const Zm=(e,t,n,r)=>{const a=Gi.forwardRef(({color:n="currentColor",size:a=24,stroke:s=2,title:i,className:o,children:c,...l},u)=>Gi.createElement("svg",{ref:u,...Km[e],width:a,height:a,className:["tabler-icon",`tabler-icon-${t}`,o].join(" "),strokeWidth:s,stroke:n,...l},[i&&Gi.createElement("title",{key:"svg-title"},i),...r.map(([e,t])=>Gi.createElement(e,t)),...Array.isArray(c)?c:[c]]));return a.displayName=`${n}`,a},Jm=Zm("outline","activity","Activity",[["path",{d:"M3 12h4l3 8l4 -16l3 8h4",key:"svg-0"}]]),Qm=Zm("outline","alert-circle","AlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Xm=Zm("outline","alert-triangle","AlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),ef=Zm("outline","archive","Archive",[["path",{d:"M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10",key:"svg-1"}],["path",{d:"M10 12l4 0",key:"svg-2"}]]),tf=Zm("outline","arrow-back","ArrowBack",[["path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1",key:"svg-0"}]]),nf=Zm("outline","arrow-down-right","ArrowDownRight",[["path",{d:"M7 7l10 10",key:"svg-0"}],["path",{d:"M17 8l0 9l-9 0",key:"svg-1"}]]),rf=Zm("outline","arrow-down","ArrowDown",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 13l-6 6",key:"svg-1"}],["path",{d:"M6 13l6 6",key:"svg-2"}]]),af=Zm("outline","arrow-left","ArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]),sf=Zm("outline","arrow-right","ArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),of=Zm("outline","arrow-up-right","ArrowUpRight",[["path",{d:"M17 7l-10 10",key:"svg-0"}],["path",{d:"M8 7l9 0l0 9",key:"svg-1"}]]),cf=Zm("outline","arrow-up","ArrowUp",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]]),lf=Zm("outline","arrows-left-right","ArrowsLeftRight",[["path",{d:"M21 17l-18 0",key:"svg-0"}],["path",{d:"M6 10l-3 -3l3 -3",key:"svg-1"}],["path",{d:"M3 7l18 0",key:"svg-2"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-3"}]]),uf=Zm("outline","arrows-maximize","ArrowsMaximize",[["path",{d:"M16 4l4 0l0 4",key:"svg-0"}],["path",{d:"M14 10l6 -6",key:"svg-1"}],["path",{d:"M8 20l-4 0l0 -4",key:"svg-2"}],["path",{d:"M4 20l6 -6",key:"svg-3"}],["path",{d:"M16 20l4 0l0 -4",key:"svg-4"}],["path",{d:"M14 14l6 6",key:"svg-5"}],["path",{d:"M8 4l-4 0l0 4",key:"svg-6"}],["path",{d:"M4 4l6 6",key:"svg-7"}]]),df=Zm("outline","arrows-minimize","ArrowsMinimize",[["path",{d:"M5 9l4 0l0 -4",key:"svg-0"}],["path",{d:"M3 3l6 6",key:"svg-1"}],["path",{d:"M5 15l4 0l0 4",key:"svg-2"}],["path",{d:"M3 21l6 -6",key:"svg-3"}],["path",{d:"M19 9l-4 0l0 -4",key:"svg-4"}],["path",{d:"M15 9l6 -6",key:"svg-5"}],["path",{d:"M19 15l-4 0l0 4",key:"svg-6"}],["path",{d:"M15 15l6 6",key:"svg-7"}]]),hf=Zm("outline","bell-off","BellOff",[["path",{d:"M9.346 5.353c.21 -.129 .428 -.246 .654 -.353a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3m-1 3h-13a4 4 0 0 0 2 -3v-3a6.996 6.996 0 0 1 1.273 -3.707",key:"svg-0"}],["path",{d:"M9 17v1a3 3 0 0 0 6 0v-1",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]),pf=Zm("outline","bell","Bell",[["path",{d:"M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6",key:"svg-0"}],["path",{d:"M9 17v1a3 3 0 0 0 6 0v-1",key:"svg-1"}]]),gf=Zm("outline","bold","Bold",[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]]),mf=Zm("outline","briefcase","Briefcase",[["path",{d:"M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M3 13a20 20 0 0 0 18 0",key:"svg-3"}]]),ff=Zm("outline","building-bank","BuildingBank",[["path",{d:"M3 21l18 0",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M5 6l7 -3l7 3",key:"svg-2"}],["path",{d:"M4 10l0 11",key:"svg-3"}],["path",{d:"M20 10l0 11",key:"svg-4"}],["path",{d:"M8 14l0 3",key:"svg-5"}],["path",{d:"M12 14l0 3",key:"svg-6"}],["path",{d:"M16 14l0 3",key:"svg-7"}]]),yf=Zm("outline","building","Building",[["path",{d:"M3 21l18 0",key:"svg-0"}],["path",{d:"M9 8l1 0",key:"svg-1"}],["path",{d:"M9 12l1 0",key:"svg-2"}],["path",{d:"M9 16l1 0",key:"svg-3"}],["path",{d:"M14 8l1 0",key:"svg-4"}],["path",{d:"M14 12l1 0",key:"svg-5"}],["path",{d:"M14 16l1 0",key:"svg-6"}],["path",{d:"M5 21v-16a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v16",key:"svg-7"}]]),vf=Zm("outline","bulb","Bulb",[["path",{d:"M3 12h1m8 -9v1m8 8h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7",key:"svg-0"}],["path",{d:"M9 16a5 5 0 1 1 6 0a3.5 3.5 0 0 0 -1 3a2 2 0 0 1 -4 0a3.5 3.5 0 0 0 -1 -3",key:"svg-1"}],["path",{d:"M9.7 17l4.6 0",key:"svg-2"}]]),bf=Zm("outline","calculator","Calculator",[["path",{d:"M4 3m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M8 14l0 .01",key:"svg-2"}],["path",{d:"M12 14l0 .01",key:"svg-3"}],["path",{d:"M16 14l0 .01",key:"svg-4"}],["path",{d:"M8 17l0 .01",key:"svg-5"}],["path",{d:"M12 17l0 .01",key:"svg-6"}],["path",{d:"M16 17l0 .01",key:"svg-7"}]]),wf=Zm("outline","calendar","Calendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]]),xf=Zm("outline","camera","Camera",[["path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),kf=Zm("outline","car","Car",[["path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5",key:"svg-2"}]]),_f=Zm("outline","cash","Cash",[["path",{d:"M7 15h-3a1 1 0 0 1 -1 -1v-8a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v3",key:"svg-0"}],["path",{d:"M7 9m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M12 14a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-2"}]]),Sf=Zm("outline","chart-bar","ChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]),jf=Zm("outline","chart-line","ChartLine",[["path",{d:"M4 19l16 0",key:"svg-0"}],["path",{d:"M4 15l4 -6l4 2l4 -5l4 4",key:"svg-1"}]]),If=Zm("outline","chart-pie","ChartPie",[["path",{d:"M10 3.2a9 9 0 1 0 10.8 10.8a1 1 0 0 0 -1 -1h-6.8a2 2 0 0 1 -2 -2v-7a.9 .9 0 0 0 -1 -.8",key:"svg-0"}],["path",{d:"M15 3.5a9 9 0 0 1 5.5 5.5h-4.5a1 1 0 0 1 -1 -1v-4.5",key:"svg-1"}]]),Cf=Zm("outline","check","Check",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),Ef=Zm("outline","chevron-down","ChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),Tf=Zm("outline","chevron-left","ChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]),Nf=Zm("outline","chevron-right","ChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),Af=Zm("outline","chevron-up","ChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),Of=Zm("outline","circle-check","CircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),Df=Zm("outline","circle-dot","CircleDot",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-1"}]]),Pf=Zm("outline","circle-plus","CirclePlus",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M9 12h6",key:"svg-1"}],["path",{d:"M12 9v6",key:"svg-2"}]]),Mf=Zm("outline","circle-x","CircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]),Lf=Zm("outline","clock","Clock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]),Rf=Zm("outline","code","Code",[["path",{d:"M7 8l-4 4l4 4",key:"svg-0"}],["path",{d:"M17 8l4 4l-4 4",key:"svg-1"}],["path",{d:"M14 4l-4 16",key:"svg-2"}]]),Uf=Zm("outline","copy","Copy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]),zf=Zm("outline","credit-card","CreditCard",[["path",{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M7 15l.01 0",key:"svg-2"}],["path",{d:"M11 15l2 0",key:"svg-3"}]]),$f=Zm("outline","currency-dollar","CurrencyDollar",[["path",{d:"M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2",key:"svg-0"}],["path",{d:"M12 3v3m0 12v3",key:"svg-1"}]]),Bf=Zm("outline","database","Database",[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]]),Ff=Zm("outline","deselect","Deselect",[["path",{d:"M12 8h3a1 1 0 0 1 1 1v3",key:"svg-0"}],["path",{d:"M16 16h-7a1 1 0 0 1 -1 -1v-7",key:"svg-1"}],["path",{d:"M12 20v.01",key:"svg-2"}],["path",{d:"M16 20v.01",key:"svg-3"}],["path",{d:"M8 20v.01",key:"svg-4"}],["path",{d:"M4 20v.01",key:"svg-5"}],["path",{d:"M4 16v.01",key:"svg-6"}],["path",{d:"M4 12v.01",key:"svg-7"}],["path",{d:"M4 8v.01",key:"svg-8"}],["path",{d:"M8 4v.01",key:"svg-9"}],["path",{d:"M12 4v.01",key:"svg-10"}],["path",{d:"M16 4v.01",key:"svg-11"}],["path",{d:"M20 4v.01",key:"svg-12"}],["path",{d:"M20 8v.01",key:"svg-13"}],["path",{d:"M20 12v.01",key:"svg-14"}],["path",{d:"M20 16v.01",key:"svg-15"}],["path",{d:"M3 3l18 18",key:"svg-16"}]]),Wf=Zm("outline","device-desktop","DeviceDesktop",[["path",{d:"M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z",key:"svg-0"}],["path",{d:"M7 20h10",key:"svg-1"}],["path",{d:"M9 16v4",key:"svg-2"}],["path",{d:"M15 16v4",key:"svg-3"}]]),qf=Zm("outline","device-floppy","DeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]),Gf=Zm("outline","download","Download",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),Vf=Zm("outline","eye-off","EyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]),Hf=Zm("outline","eye","Eye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]),Yf=Zm("outline","file-text","FileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]),Kf=Zm("outline","file-type-pdf","FileTypePdf",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4",key:"svg-1"}],["path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6",key:"svg-2"}],["path",{d:"M17 18h2",key:"svg-3"}],["path",{d:"M20 15h-3v6",key:"svg-4"}],["path",{d:"M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z",key:"svg-5"}]]),Zf=Zm("outline","filter","Filter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]),Jf=Zm("outline","fingerprint","Fingerprint",[["path",{d:"M18.9 7a8 8 0 0 1 1.1 5v1a6 6 0 0 0 .8 3",key:"svg-0"}],["path",{d:"M8 11a4 4 0 0 1 8 0v1a10 10 0 0 0 2 6",key:"svg-1"}],["path",{d:"M12 11v2a14 14 0 0 0 2.5 8",key:"svg-2"}],["path",{d:"M8 15a18 18 0 0 0 1.8 6",key:"svg-3"}],["path",{d:"M4.9 19a22 22 0 0 1 -.9 -7v-1a8 8 0 0 1 12 -6.95",key:"svg-4"}]]),Qf=Zm("outline","folder","Folder",[["path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2",key:"svg-0"}]]),Xf=Zm("outline","git-merge","GitMerge",[["path",{d:"M7 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M7 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M7 8l0 8",key:"svg-3"}],["path",{d:"M7 8a4 4 0 0 0 4 4h4",key:"svg-4"}]]),ey=Zm("outline","grip-vertical","GripVertical",[["path",{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]),ty=Zm("outline","hash","Hash",[["path",{d:"M5 9l14 0",key:"svg-0"}],["path",{d:"M5 15l14 0",key:"svg-1"}],["path",{d:"M11 4l-4 16",key:"svg-2"}],["path",{d:"M17 4l-4 16",key:"svg-3"}]]),ny=Zm("outline","home","Home",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]),ry=Zm("outline","info-circle","InfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]),ay=Zm("outline","italic","Italic",[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]]),sy=Zm("outline","key","Key",[["path",{d:"M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z",key:"svg-0"}],["path",{d:"M15 9h.01",key:"svg-1"}]]),iy=Zm("outline","keyboard","Keyboard",[["path",{d:"M2 6m0 2a2 2 0 0 1 2 -2h16a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-16a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M6 10l0 .01",key:"svg-1"}],["path",{d:"M10 10l0 .01",key:"svg-2"}],["path",{d:"M14 10l0 .01",key:"svg-3"}],["path",{d:"M18 10l0 .01",key:"svg-4"}],["path",{d:"M6 14l0 .01",key:"svg-5"}],["path",{d:"M18 14l0 .01",key:"svg-6"}],["path",{d:"M10 14l4 .01",key:"svg-7"}]]),oy=Zm("outline","layers-linked","LayersLinked",[["path",{d:"M19 8.268a2 2 0 0 1 1 1.732v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2h3",key:"svg-0"}],["path",{d:"M5 15.734a2 2 0 0 1 -1 -1.734v-8a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-3",key:"svg-1"}]]),cy=Zm("outline","layout-grid","LayoutGrid",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-3"}]]),ly=Zm("outline","link","Link",[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]]),uy=Zm("outline","list","List",[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]]),dy=Zm("outline","lock-open","LockOpen",[["path",{d:"M5 11m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 16m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-5a4 4 0 0 1 8 0",key:"svg-2"}]]),hy=Zm("outline","lock","Lock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]),py=Zm("outline","mail","Mail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),gy=Zm("outline","map-pin","MapPin",[["path",{d:"M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z",key:"svg-1"}]]),my=Zm("outline","maximize","Maximize",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]),fy=Zm("outline","menu-2","Menu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),yy=Zm("outline","minimize","Minimize",[["path",{d:"M15 19v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M15 5v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M5 15h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M5 9h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]),vy=Zm("outline","minus","Minus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]),by=Zm("outline","moon","Moon",[["path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z",key:"svg-0"}]]),wy=Zm("outline","palette","Palette",[["path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25",key:"svg-0"}],["path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}]]),xy=Zm("outline","paperclip","Paperclip",[["path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5",key:"svg-0"}]]),ky=Zm("outline","pencil","Pencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]),_y=Zm("outline","phone","Phone",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}]]),Sy=Zm("outline","photo","Photo",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]),jy=Zm("outline","pig-money","PigMoney",[["path",{d:"M15 11v.01",key:"svg-0"}],["path",{d:"M5.173 8.378a3 3 0 1 1 4.656 -1.377",key:"svg-1"}],["path",{d:"M16 4v3.803a6.019 6.019 0 0 1 2.658 3.197h1.341a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-1.342c-.336 .95 -.907 1.8 -1.658 2.473v2.027a1.5 1.5 0 0 1 -3 0v-.583a6.04 6.04 0 0 1 -1 .083h-4a6.04 6.04 0 0 1 -1 -.083v.583a1.5 1.5 0 0 1 -3 0v-2l0 -.027a6 6 0 0 1 4 -10.473h2.5l4.5 -3h0z",key:"svg-2"}]]),Iy=Zm("outline","player-play","PlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),Cy=Zm("outline","player-stop","PlayerStop",[["path",{d:"M5 5m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}]]),Ey=Zm("outline","plus","Plus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),Ty=Zm("outline","quote","Quote",[["path",{d:"M10 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5",key:"svg-0"}],["path",{d:"M19 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5",key:"svg-1"}]]),Ny=Zm("outline","refresh","Refresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),Ay=Zm("outline","school","School",[["path",{d:"M22 9l-10 -4l-10 4l10 4l10 -4v6",key:"svg-0"}],["path",{d:"M6 10.6v5.4a6 3 0 0 0 12 0v-5.4",key:"svg-1"}]]),Oy=Zm("outline","search","Search",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),Dy=Zm("outline","select-all","SelectAll",[["path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M12 20v.01",key:"svg-1"}],["path",{d:"M16 20v.01",key:"svg-2"}],["path",{d:"M8 20v.01",key:"svg-3"}],["path",{d:"M4 20v.01",key:"svg-4"}],["path",{d:"M4 16v.01",key:"svg-5"}],["path",{d:"M4 12v.01",key:"svg-6"}],["path",{d:"M4 8v.01",key:"svg-7"}],["path",{d:"M4 4v.01",key:"svg-8"}],["path",{d:"M8 4v.01",key:"svg-9"}],["path",{d:"M12 4v.01",key:"svg-10"}],["path",{d:"M16 4v.01",key:"svg-11"}],["path",{d:"M20 4v.01",key:"svg-12"}],["path",{d:"M20 8v.01",key:"svg-13"}],["path",{d:"M20 12v.01",key:"svg-14"}],["path",{d:"M20 16v.01",key:"svg-15"}],["path",{d:"M20 20v.01",key:"svg-16"}]]),Py=Zm("outline","send","Send",[["path",{d:"M10 14l11 -11",key:"svg-0"}],["path",{d:"M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5",key:"svg-1"}]]),My=Zm("outline","settings-cog","SettingsCog",[["path",{d:"M12.003 21c-.732 .001 -1.465 -.438 -1.678 -1.317a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c.886 .215 1.325 .957 1.318 1.694",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M19.001 15.5v1.5",key:"svg-3"}],["path",{d:"M19.001 21v1.5",key:"svg-4"}],["path",{d:"M22.032 17.25l-1.299 .75",key:"svg-5"}],["path",{d:"M17.27 20l-1.3 .75",key:"svg-6"}],["path",{d:"M15.97 17.25l1.3 .75",key:"svg-7"}],["path",{d:"M20.733 20l1.3 .75",key:"svg-8"}]]),Ly=Zm("outline","settings","Settings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),Ry=Zm("outline","shield","Shield",[["path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3",key:"svg-0"}]]),Uy=Zm("outline","sort-descending","SortDescending",[["path",{d:"M4 6l9 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l7 0",key:"svg-2"}],["path",{d:"M15 15l3 3l3 -3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]),zy=Zm("outline","star","Star",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]),$y=Zm("outline","sun","Sun",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7",key:"svg-1"}]]),By=Zm("outline","tag","Tag",[["path",{d:"M7.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M3 6v5.172a2 2 0 0 0 .586 1.414l7.71 7.71a2.41 2.41 0 0 0 3.408 0l5.592 -5.592a2.41 2.41 0 0 0 0 -3.408l-7.71 -7.71a2 2 0 0 0 -1.414 -.586h-5.172a3 3 0 0 0 -3 3z",key:"svg-1"}]]),Fy=Zm("outline","target","Target",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),Wy=Zm("outline","toggle-left","ToggleLeft",[["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M2 6m0 6a6 6 0 0 1 6 -6h8a6 6 0 0 1 6 6v0a6 6 0 0 1 -6 6h-8a6 6 0 0 1 -6 -6z",key:"svg-1"}]]),qy=Zm("outline","toggle-right","ToggleRight",[["path",{d:"M16 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M2 6m0 6a6 6 0 0 1 6 -6h8a6 6 0 0 1 6 6v0a6 6 0 0 1 -6 6h-8a6 6 0 0 1 -6 -6z",key:"svg-1"}]]),Gy=Zm("outline","tool","Tool",[["path",{d:"M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5",key:"svg-0"}]]),Vy=Zm("outline","trash","Trash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]),Hy=Zm("outline","trending-down","TrendingDown",[["path",{d:"M3 7l6 6l4 -4l8 8",key:"svg-0"}],["path",{d:"M21 10l0 7l-7 0",key:"svg-1"}]]),Yy=Zm("outline","trending-up","TrendingUp",[["path",{d:"M3 17l6 -6l4 4l8 -8",key:"svg-0"}],["path",{d:"M14 7l7 0l0 7",key:"svg-1"}]]),Ky=Zm("outline","unlink","Unlink",[["path",{d:"M17 22v-2",key:"svg-0"}],["path",{d:"M9 15l6 -6",key:"svg-1"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-2"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-3"}],["path",{d:"M20 17h2",key:"svg-4"}],["path",{d:"M2 7h2",key:"svg-5"}],["path",{d:"M7 2v2",key:"svg-6"}]]),Zy=Zm("outline","upload","Upload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),Jy=Zm("outline","user","User",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]),Qy=Zm("outline","users","Users",[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]]),Xy=Zm("outline","volume","Volume",[["path",{d:"M15 8a5 5 0 0 1 0 8",key:"svg-0"}],["path",{d:"M17.7 5a9 9 0 0 1 0 14",key:"svg-1"}],["path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5",key:"svg-2"}]]),ev=Zm("outline","wallet","Wallet",[["path",{d:"M17 8v-3a1 1 0 0 0 -1 -1h-10a2 2 0 0 0 0 4h12a1 1 0 0 1 1 1v3m0 4v3a1 1 0 0 1 -1 1h-12a2 2 0 0 1 -2 -2v-12",key:"svg-0"}],["path",{d:"M20 12v4h-4a2 2 0 0 1 0 -4h4",key:"svg-1"}]]),tv=Zm("outline","wand","Wand",[["path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3",key:"svg-0"}],["path",{d:"M15 6l3 3",key:"svg-1"}],["path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-2"}],["path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-3"}]]),nv=Zm("outline","wifi-off","WifiOff",[["path",{d:"M12 18l.01 0",key:"svg-0"}],["path",{d:"M9.172 15.172a4 4 0 0 1 5.656 0",key:"svg-1"}],["path",{d:"M6.343 12.343a7.963 7.963 0 0 1 3.864 -2.14m4.163 .155a7.965 7.965 0 0 1 3.287 2",key:"svg-2"}],["path",{d:"M3.515 9.515a12 12 0 0 1 3.544 -2.455m3.101 -.92a12 12 0 0 1 10.325 3.374",key:"svg-3"}],["path",{d:"M3 3l18 18",key:"svg-4"}]]),rv=Zm("outline","wifi","Wifi",[["path",{d:"M12 18l.01 0",key:"svg-0"}],["path",{d:"M9.172 15.172a4 4 0 0 1 5.656 0",key:"svg-1"}],["path",{d:"M6.343 12.343a8 8 0 0 1 11.314 0",key:"svg-2"}],["path",{d:"M3.515 9.515c4.686 -4.687 12.284 -4.687 17 0",key:"svg-3"}]]),av=Zm("outline","world","World",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]]),sv=Zm("outline","x","X",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]),iv=(e,t)=>{const n=({size:t=20,color:n="currentColor",className:r="",onClick:a,title:s,style:i,strokeWidth:o=2,"data-testid":c})=>bo.jsx(e,{size:t,color:n,stroke:o,className:`transition-colors duration-200 ${a?"cursor-pointer hover:opacity-80":""} ${r}`,onClick:a,style:i,"aria-label":s,"data-testid":c});return n.displayName=t,n},ov=iv(ny,"HomeIcon"),cv=iv(Ly,"SettingsIcon"),lv=iv(My,"Settings2Icon"),uv=iv(ev,"WalletIcon"),dv=iv(zf,"CreditCardIcon"),hv=iv(yf,"Building2Icon");iv(ff,"LandmarkIcon");const pv=iv(Sf,"BarChart3Icon"),gv=iv(jf,"LineChartIcon"),mv=iv(If,"PieChartIcon"),fv=iv(Yy,"TrendingUpIcon"),yv=iv(Hy,"TrendingDownIcon"),vv=iv(Ey,"PlusIcon"),bv=iv(ky,"EditIcon"),wv=iv(Vy,"DeleteIcon"),xv=iv(sv,"XIcon"),kv=iv(Cf,"CheckIcon"),_v=iv(Cf,"CheckIcon2"),Sv=iv(Of,"CheckCircleIcon"),jv=iv(Mf,"XCircleIcon"),Iv=iv(Nf,"ChevronRightIcon"),Cv=iv(Ef,"ChevronDownIcon"),Ev=iv(Tf,"ChevronLeftIcon"),Tv=iv(Af,"ChevronUpIcon"),Nv=iv(af,"ArrowLeftIcon"),Av=iv(sf,"ArrowRightIcon"),Ov=iv(cf,"ArrowUpIcon"),Dv=iv(rf,"ArrowDownIcon"),Pv=iv(of,"ArrowUpRightIcon"),Mv=iv(nf,"ArrowDownRightIcon"),Lv=iv(lf,"ArrowRightLeftIcon"),Rv=iv(Qm,"AlertCircleIcon"),Uv=iv(Xm,"AlertTriangleIcon"),zv=iv(ry,"InfoIcon"),$v=iv(_f,"BanknoteIcon"),Bv=iv(jy,"PiggyBankIcon"),Fv=iv($f,"DollarSignIcon"),Wv=iv(fy,"MenuIcon"),qv=iv(Oy,"SearchIcon"),Gv=iv(Zf,"FilterIcon"),Vv=iv(Hf,"EyeIcon"),Hv=iv(Vf,"EyeOffIcon"),Yv=iv(Gf,"DownloadIcon"),Kv=iv(Zy,"UploadIcon"),Zv=iv(Ny,"RefreshCwIcon"),Jv=iv(Uf,"CopyIcon"),Qv=iv(ly,"LinkIcon"),Xv=iv(ey,"GripVerticalIcon"),eb=iv(Bf,"DatabaseIcon"),tb=iv(By,"TagIcon"),nb=iv(ty,"HashIcon"),rb=iv(Qf,"FolderIcon"),ab=iv(ef,"ArchiveIcon"),sb=iv(Yf,"FileTextIcon"),ib=iv(Fy,"TargetIcon"),ob=iv(Fy,"GoalIcon"),cb=iv(wf,"CalendarIcon"),lb=iv(Lf,"ClockIcon"),ub=iv(Jy,"UserIcon"),db=iv(Qy,"UsersIcon"),hb=iv(hy,"LockIcon"),pb=iv(dy,"UnlockIcon"),gb=iv(Ry,"ShieldIcon"),mb=iv(sy,"KeyIcon"),fb=iv(iy,"KeyboardIcon"),yb=iv(Jf,"FingerprintIcon"),vb=iv(Wf,"MonitorIcon"),bb=iv(Wf,"ComputerIcon"),wb=iv(_y,"PhoneIcon"),xb=iv(xf,"CameraIcon"),kb=iv(by,"MoonIcon"),_b=iv($y,"SunIcon"),Sb=iv(wy,"PaletteIcon"),jb=iv(pf,"BellIcon"),Ib=iv(hf,"BellOffIcon"),Cb=iv(py,"MailIcon"),Eb=iv(Py,"SendIcon"),Tb=iv(mf,"BriefcaseIcon"),Nb=iv(yf,"BuildingIcon"),Ab=iv(ff,"BankIcon"),Ob=iv(Ay,"GraduationCapIcon"),Db=iv(kf,"CarIcon"),Pb=iv(gy,"MapPinIcon"),Mb=iv(av,"GlobeIcon"),Lb=iv(zy,"StarIcon"),Rb=iv(bf,"CalculatorIcon");iv(vy,"MinusIcon");const Ub=iv(qf,"SaveIcon"),zb=iv(oy,"LayersIcon"),$b=iv(cy,"GridIcon"),Bb=iv(tv,"MagicWandIcon"),Fb=iv(Xy,"VolumeIcon"),Wb=iv(Iy,"PlayIcon"),qb=iv(Cy,"StopIcon"),Gb=iv(Xf,"MergeIcon");iv(Dy,"SelectAllIcon"),iv(Ff,"DeselectAllIcon");const Vb=iv(Ky,"UnlinkIcon"),Hb=iv(Gy,"WrenchIcon"),Yb=iv(tf,"UndoIcon"),Kb=iv(Jm,"ActivityIcon"),Zb=iv(rv,"WifiIcon"),Jb=iv(nv,"WifiOffIcon"),Qb=iv(Ny,"LoadingIcon"),Xb=iv(vf,"LightbulbIcon");iv(Kf,"PdfIcon");const ew=iv(xy,"PaperclipIcon"),tw=iv(gf,"BoldIcon"),nw=iv(ay,"ItalicIcon"),rw=iv(uy,"ListIcon"),aw=iv(Ty,"QuoteIcon"),sw=iv(Sy,"ImageIcon"),iw=iv(Rf,"CodeIcon"),ow=iv(Wy,"ToggleLeftIcon"),cw=iv(qy,"ToggleRightIcon");iv(my,"MaximizeIcon"),iv(yy,"MinimizeIcon"),iv(uf,"ExpandIcon"),iv(df,"ShrinkIcon");const lw=iv(Df,"CircleDotIcon"),uw=iv(Pf,"PlusCircleIcon"),dw=iv(Ny,"RepeatIcon"),hw=iv(Uy,"SortIcon"),pw=iv(vf,"LeafIcon"),gw=wv,mw=lb,fw=zv,yw=vb,vw=Zv,bw=jv,ww=Uv,xw=xv,kw=Nv,_w=fv,Sw=yv,jw=Rv,Iw=Sv,Cw=bb,Ew="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Tw=globalThis,Nw="9.46.0",Aw={},Ow={enable:function(){gt().enabled=!0},disable:function(){gt().enabled=!1},isEnabled:ht,log:function(...e){pt("log",...e)},warn:function(...e){pt("warn",...e)},error:function(...e){pt("error",...e)}},Dw=Object.prototype.toString;let Pw;const Mw="_sentrySpan";class Lw{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:bt(),sampleRand:Math.random()}}clone(){const e=new Lw;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,wt(e,xt(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&function(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(Pw??(Pw=function(){const{performance:e}=Tw;if(!e?.now||!e.timeOrigin)return yt;const t=e.timeOrigin;return()=>(t+e.now())/1e3}()))(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ft()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof Lw?t.getScopeData():function(e){return"[object Object]"===Dw.call(e)}(t)?e:void 0,{tags:r,extra:a,user:s,contexts:i,level:o,fingerprint:c=[],propagationContext:l}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...a},this._contexts={...this._contexts,...i},s&&Object.keys(s).length&&(this._user=s),o&&(this._level=o),c.length&&(this._fingerprint=c),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,wt(this,void 0),this._attachments=[],this.setPropagationContext({traceId:bt(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:yt(),...e,message:e.message?mt(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:xt(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=vt(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||ft();if(!this._client)return Ew&&Ow.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n?.event_id||ft();if(!this._client)return Ew&&Ow.warn("No client configured on scope - will not capture message!"),r;const a=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:a,...n,event_id:r},this),r}captureEvent(e,t){const n=t?.event_id||ft();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Ew&&Ow.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class Rw{constructor(e,t){let n,r;n=e||new Lw,r=t||new Lw,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(a){throw this._popScope(),a}return r=n,Boolean(r?.then&&"function"==typeof r.then)?n.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),n);var r}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1||!this._stack.pop())}}const Uw=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/,zw=["user","level","extra","contexts","tags","fingerprint","propagationContext"],$w=Tw,Bw="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Fw="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ww={componentStack:null,error:null,eventId:null};class qw extends Gi.Component{constructor(e){super(e),this.state=Ww,this._openFallbackReportDialog=!0;const t=Tt();t&&e.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=t.on("afterSendEvent",t=>{!t.type&&this._lastEventId&&t.event_id===this._lastEventId&&At({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,t){const{componentStack:n}=t,{beforeCapture:r,onError:a,showDialog:s,dialogOptions:i}=this.props;Et(o=>{r&&r(o,e,n);const c=null!=this.props.handled?this.props.handled:!!this.props.fallback,l=Ot(e,t,{mechanism:{handled:c}});a&&a(e,n,l),s&&(this._lastEventId=l,this._openFallbackReportDialog&&At({...i,eventId:l})),this.setState({error:e,componentStack:n,eventId:l})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:t,eventId:n}=this.state,{onUnmount:r}=this.props;r&&(this.state===Ww?r(null,null,null):r(e,t,n)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:e}=this.props,{error:t,componentStack:n,eventId:r}=this.state;e&&e(t,n,r),this.setState(Ww)}render(){const{fallback:e,children:t}=this.props,n=this.state;if(null===n.componentStack)return"function"==typeof t?t():t;const r="function"==typeof e?Gi.createElement(e,{error:n.error,componentStack:n.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:n.eventId}):e;return Gi.isValidElement(r)?r:(e&&Fw&&Ow.warn("fallback did not produce a valid ReactElement"),null)}}const Gw=qw;class Vw extends Gi.Component{constructor(e){super(e),this.state={hasError:!1},this.handlePopState=this.handlePopState.bind(this)}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t),this.setState({errorInfo:t}),function(e,t){console.error("Error captured:",e,t)}(e,{componentStack:t.componentStack,props:this.props}),this.props.onError&&this.props.onError(e,t)}componentDidMount(){window.addEventListener("popstate",this.handlePopState),window.addEventListener("hashchange",this.handlePopState),this.interceptHistoryMethods()}componentWillUnmount(){window.removeEventListener("popstate",this.handlePopState),window.removeEventListener("hashchange",this.handlePopState),this.restoreHistoryMethods()}originalPushState;originalReplaceState;interceptHistoryMethods=()=>{this.originalPushState=window.history.pushState,this.originalReplaceState=window.history.replaceState,window.history.pushState=(...e)=>{this.originalPushState?.apply(window.history,e),this.handlePopState()},window.history.replaceState=(...e)=>{this.originalReplaceState?.apply(window.history,e),this.handlePopState()}};restoreHistoryMethods=()=>{this.originalPushState&&(window.history.pushState=this.originalPushState),this.originalReplaceState&&(window.history.replaceState=this.originalReplaceState)};handlePopState=()=>{this.state.hasError&&setTimeout(()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},0)};componentDidUpdate(e){this.props.resetKey!==e.resetKey&&this.state.hasError&&this.setState({hasError:!1,error:void 0,errorInfo:void 0})}render(){return this.state.hasError?this.props.fallback||bo.jsx("div",{className:"min-h-[400px] flex items-center justify-center p-4",children:bo.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 text-center",children:[bo.jsx("div",{className:"flex justify-center mb-6",children:bo.jsx("div",{className:"w-20 h-20 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center",children:bo.jsx(Uv,{size:40,className:"text-red-600 dark:text-red-400"})})}),bo.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Oops! Something went wrong"}),bo.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:this.state.error?.message||"An unexpected error occurred. Please try again."}),!1,bo.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[bo.jsxs("button",{onClick:()=>this.setState({hasError:!1,error:void 0,errorInfo:void 0}),className:"flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:[bo.jsx(Zv,{size:18}),"Try Again"]}),bo.jsxs("button",{onClick:()=>window.location.href="/",className:"flex items-center justify-center gap-2 px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[bo.jsx(ov,{size:18}),"Go Home"]})]})]})}):this.props.children}}const Hw=[];for(let eN=0;eN<256;++eN)Hw.push((eN+256).toString(16).slice(1));let Yw;const Kw=new Uint8Array(16),Zw={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},Jw=Gi.createContext(void 0),Qw=Gi.createContext(void 0),Xw=Gi.createContext(void 0),ex=Gi.createContext(void 0),tx=Gi.createContext(void 0),nx=Gi.createContext(void 0),rx=Gi.createContext(void 0),ax={groceries:{min:20,max:80,frequency:3,cards:["5","6"]},restaurants:{min:25,max:120,frequency:2,cards:["5","6"]},transport:{min:15,max:50,frequency:2,cards:["5","6"]},shopping:{min:30,max:200,frequency:1,cards:["5","6"]},entertainment:{min:20,max:100,frequency:1,cards:["5","6"]},online:{min:15,max:150,frequency:2,cards:["5","6"]},coffee:{min:3,max:8,frequency:5,cards:["5","6"]},subscriptions:{min:9.99,max:19.99,frequency:.25,cards:["6"]},fuel:{min:50,max:80,frequency:.5,cards:["5"]}},sx={groceries:"Groceries",restaurants:"Dining Out",transport:"Transport",shopping:"Shopping",entertainment:"Entertainment",online:"Online Shopping",coffee:"Coffee Shops",subscriptions:"Subscriptions",fuel:"Fuel"},ix={groceries:["Tesco","Sainsbury's","Waitrose","ASDA","Morrisons","Lidl","Aldi"],restaurants:["Pizza Express","Nando's","Wagamama","The Ivy","Dishoom","Franco Manca"],transport:["Uber","TfL","National Rail","Addison Lee","Citymapper"],shopping:["John Lewis","M&S","Zara","H&M","Next","Selfridges","ASOS"],entertainment:["Odeon","Vue Cinema","National Theatre","O2 Arena","Ticketmaster"],online:["Amazon","eBay","Argos","Currys","Apple Store"],coffee:["Pret","Starbucks","Costa","Nero","Gail's"],subscriptions:["Netflix","Spotify","Amazon Prime","Disney+","Apple Music"],fuel:["Shell","BP","Esso","Texaco"]},ox=[{description:"Council Tax",amount:180,category:"Bills"},{description:"Gas & Electric",amount:150,category:"Utilities"},{description:"Water Bill",amount:45,category:"Utilities"},{description:"Internet & Phone",amount:55,category:"Utilities"},{description:"Mobile Phone",amount:35,category:"Bills"},{description:"Home Insurance",amount:65,category:"Insurance"},{description:"Life Insurance",amount:45,category:"Insurance"},{description:"Car Insurance",amount:85,category:"Insurance"},{description:"Gym Membership",amount:55,category:"Health & Fitness"}],cx=new Date("2024-07-01"),lx=e=>e.map(e=>({ticker:e.symbol,name:e.name,shares:e.quantity,value:e.quantity*e.purchasePrice,averageCost:e.averageCost||e.purchasePrice,currentPrice:e.currentPrice,marketValue:e.currentValue,gain:e.currentValue-e.quantity*e.purchasePrice,gainPercent:(e.currentValue-e.quantity*e.purchasePrice)/(e.quantity*e.purchasePrice)*100,currency:"GBP",lastUpdated:e.lastUpdated})),ux=()=>[{id:"inv1",accountId:"9",symbol:"LLOY.L",name:"Lloyds Banking Group",quantity:2e4,purchasePrice:.54,purchaseDate:cx,currentPrice:.56,lastUpdated:new Date,currentValue:2e4*.56,averageCost:.54,createdAt:cx},{id:"inv2",accountId:"9",symbol:"BARC.L",name:"Barclays",quantity:3e3,purchasePrice:2.1,purchaseDate:cx,currentPrice:2.15,lastUpdated:new Date,currentValue:6450,averageCost:2.1,createdAt:cx},{id:"inv3",accountId:"9",symbol:"BP.L",name:"BP",quantity:2e3,purchasePrice:4.85,purchaseDate:cx,currentPrice:4.9,lastUpdated:new Date,currentValue:9800,averageCost:4.85,createdAt:cx},{id:"inv4",accountId:"9",symbol:"GSK.L",name:"GlaxoSmithKline",quantity:800,purchasePrice:16.5,purchaseDate:cx,currentPrice:16.75,lastUpdated:new Date,currentValue:13400,averageCost:16.5,createdAt:cx},{id:"inv5",accountId:"9",symbol:"AAPL",name:"Apple Inc",quantity:100,purchasePrice:154.72,purchaseDate:cx,currentPrice:158.5,lastUpdated:new Date,currentValue:15850,averageCost:154.72,createdAt:cx},{id:"inv6",accountId:"9",symbol:"MSFT",name:"Microsoft Corp",quantity:50,purchasePrice:355.9,purchaseDate:cx,currentPrice:365,lastUpdated:new Date,currentValue:18250,averageCost:355.9,createdAt:cx},{id:"inv7",accountId:"9",symbol:"GOOGL",name:"Alphabet Inc",quantity:100,purchasePrice:142.52,purchaseDate:cx,currentPrice:145,lastUpdated:new Date,currentValue:14500,averageCost:142.52,createdAt:cx},{id:"inv8",accountId:"9",symbol:"NVDA",name:"NVIDIA Corp",quantity:100,purchasePrice:96.06,purchaseDate:cx,currentPrice:98.5,lastUpdated:new Date,currentValue:9850,averageCost:96.06,createdAt:cx},{id:"inv9",accountId:"9",symbol:"VWRL",name:"Vanguard FTSE All-World ETF",quantity:250,purchasePrice:108.5,purchaseDate:cx,currentPrice:110,lastUpdated:new Date,currentValue:27500,averageCost:108.5,createdAt:cx},{id:"inv10",accountId:"9",symbol:"SMT",name:"Scottish Mortgage Trust",quantity:2e3,purchasePrice:8.45,purchaseDate:cx,currentPrice:8.6,lastUpdated:new Date,currentValue:17200,averageCost:8.45,createdAt:cx},{id:"inv11",accountId:"9",symbol:"CTY",name:"City of London Investment Trust",quantity:1500,purchasePrice:4.25,purchaseDate:cx,currentPrice:4.3,lastUpdated:new Date,currentValue:6450,averageCost:4.25,createdAt:cx}];class dx{static async getAccounts(e){if(!nm())return await em.get(Kg)||[];try{const{data:t,error:n}=await tm.from("accounts").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!0});if(n)throw console.error("Error fetching accounts:",n),new Error(rm(n));return t||[]}catch(t){return console.error("AccountService.getAccounts error:",t),await em.get(Kg)||[]}}static async createAccount(e,t){if(!nm()){const e={...t,id:crypto.randomUUID(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},n=await em.get(Kg)||[];return n.push(e),await em.set(Kg,n),e}try{const n="current"===t.type?"checking":t.type,r="current"===n?"checking":n,a={user_id:e,name:t.name,type:r||"checking",currency:t.currency||"GBP",balance:t.balance||0,initial_balance:t.initialBalance||t.balance||0,is_active:void 0===t.isActive||t.isActive,institution:t.institution||null,icon:t.icon||null,color:t.color||null};console.log("Creating account with data:",a);const{data:s,error:i}=await tm.from("accounts").insert(a).select().single();if(i)throw console.error("Error creating account:",i),new Error(rm(i));return console.log("Account created successfully:",s),s}catch(n){throw console.error("AccountService.createAccount error:",n),n}}static async updateAccount(e,t){if(!nm()){const n=await em.get(Kg)||[],r=n.findIndex(t=>t.id===e);if(-1===r)throw new Error("Account not found");return n[r]={...n[r],...t,updated_at:(new Date).toISOString()},await em.set(Kg,n),n[r]}try{const{data:n,error:r}=await tm.from("accounts").update(t).eq("id",e).select().single();if(r)throw console.error("Error updating account:",r),new Error(rm(r));return n}catch(n){throw console.error("AccountService.updateAccount error:",n),n}}static async deleteAccount(e){if(!nm()){const t=(await em.get(Kg)||[]).filter(t=>t.id!==e);return void(await em.set(Kg,t))}try{const{error:t}=await tm.from("accounts").update({is_active:!1}).eq("id",e);if(t)throw console.error("Error deleting account:",t),new Error(rm(t))}catch(t){throw console.error("AccountService.deleteAccount error:",t),t}}static async getAccountById(e){if(!nm())return(await em.get(Kg)||[]).find(t=>t.id===e)||null;try{const{data:t,error:n}=await tm.from("accounts").select("*").eq("id",e).single();if(n){if("PGRST116"===n.code)return null;throw console.error("Error fetching account:",n),new Error(rm(n))}return t}catch(t){throw console.error("AccountService.getAccountById error:",t),t}}static async updateBalance(e,t){if(!nm()){const n=await em.get(Kg)||[],r=n.findIndex(t=>t.id===e);return void(-1!==r&&(n[r].balance=t,n[r].updated_at=(new Date).toISOString(),await em.set(Kg,n)))}try{const{error:n}=await tm.from("accounts").update({balance:t}).eq("id",e);if(n)throw console.error("Error updating balance:",n),new Error(rm(n))}catch(n){throw console.error("AccountService.updateBalance error:",n),n}}static async recalculateBalance(e){if(!nm()){const t=(await em.get(Zg)||[]).filter(t=>t.account_id===e).reduce((e,t)=>e+t.amount,0);return await this.updateBalance(e,t),t}try{const{data:t}=await tm.from("accounts").select("initial_balance").eq("id",e).single(),{data:n}=await tm.from("transactions").select("amount").eq("account_id",e),r=n?.reduce((e,t)=>e+t.amount,0)||0,a=(t?.initial_balance||0)+r;return await this.updateBalance(e,a),a}catch(t){throw console.error("AccountService.recalculateBalance error:",t),t}}static async getTotalBalance(e){if(!nm())return(await em.get(Kg)||[]).reduce((e,t)=>e+(t.balance||0),0);try{const{data:t,error:n}=await tm.from("accounts").select("balance").eq("user_id",e).eq("is_active",!0);if(n)throw console.error("Error fetching total balance:",n),new Error(rm(n));return t?.reduce((e,t)=>e+(t.balance||0),0)||0}catch(t){throw console.error("AccountService.getTotalBalance error:",t),t}}static subscribeToAccounts(e,t){if(!nm())return()=>{};const n=tm.channel(`accounts:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"accounts",filter:`user_id=eq.${e}`},t).subscribe();return()=>{n.unsubscribe()}}}class hx{static async getTransactions(e){if(!nm())return await em.get(Zg)||[];try{const{data:t,error:n}=await tm.from("transactions").select("*").eq("user_id",e).order("date",{ascending:!1});if(n)throw console.error("Error fetching transactions:",n),new Error(rm(n));return t||[]}catch(t){return console.error("TransactionService.getTransactions error:",t),await em.get(Zg)||[]}}static async createTransaction(e,t){if(!nm()){const e={...t,id:crypto.randomUUID(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},n=await em.get(Zg)||[];return n.push(e),await em.set(Zg,n),e}try{const{data:n,error:r}=await tm.from("transactions").insert({...t,user_id:e}).select().single();if(r)throw console.error("Error creating transaction:",r),new Error(rm(r));return await this.updateAccountBalance(t.account_id,t.amount),n}catch(n){throw console.error("TransactionService.createTransaction error:",n),n}}static async updateTransaction(e,t){if(!nm()){const n=await em.get(Zg)||[],r=n.findIndex(t=>t.id===e);if(-1===r)throw new Error("Transaction not found");return n[r]={...n[r],...t,updated_at:(new Date).toISOString()},await em.set(Zg,n),n[r]}try{const{data:n}=await tm.from("transactions").select("amount, account_id").eq("id",e).single(),{data:r,error:a}=await tm.from("transactions").update(t).eq("id",e).select().single();if(a)throw console.error("Error updating transaction:",a),new Error(rm(a));if(n&&void 0!==t.amount&&t.amount!==n.amount){const e=t.amount-n.amount;await this.updateAccountBalance(n.account_id,e)}return r}catch(n){throw console.error("TransactionService.updateTransaction error:",n),n}}static async deleteTransaction(e){if(!nm()){const t=(await em.get(Zg)||[]).filter(t=>t.id!==e);return void(await em.set(Zg,t))}try{const{data:t}=await tm.from("transactions").select("amount, account_id").eq("id",e).single(),{error:n}=await tm.from("transactions").delete().eq("id",e);if(n)throw console.error("Error deleting transaction:",n),new Error(rm(n));t&&await this.updateAccountBalance(t.account_id,-t.amount)}catch(t){throw console.error("TransactionService.deleteTransaction error:",t),t}}static async getTransactionsByDateRange(e,t,n){if(!nm())return(await em.get(Zg)||[]).filter(e=>{const r=new Date(e.date);return r>=t&&r<=n});try{const{data:r,error:a}=await tm.from("transactions").select("*").eq("user_id",e).gte("date",t.toISOString()).lte("date",n.toISOString()).order("date",{ascending:!1});if(a)throw console.error("Error fetching transactions by date range:",a),new Error(rm(a));return r||[]}catch(r){throw console.error("TransactionService.getTransactionsByDateRange error:",r),r}}static async getTransactionsByAccount(e){if(!nm())return(await em.get(Zg)||[]).filter(t=>t.account_id===e);try{const{data:t,error:n}=await tm.from("transactions").select("*").eq("account_id",e).order("date",{ascending:!1});if(n)throw console.error("Error fetching transactions by account:",n),new Error(rm(n));return t||[]}catch(t){throw console.error("TransactionService.getTransactionsByAccount error:",t),t}}static async getTransactionsByCategory(e){if(!nm())return(await em.get(Zg)||[]).filter(t=>t.category===e);try{const{data:t,error:n}=await tm.from("transactions").select("*").eq("category_id",e).order("date",{ascending:!1});if(n)throw console.error("Error fetching transactions by category:",n),new Error(rm(n));return t||[]}catch(t){throw console.error("TransactionService.getTransactionsByCategory error:",t),t}}static async bulkCreateTransactions(e,t){if(!nm()){const e=t.map(e=>({...e,id:crypto.randomUUID(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})),n=await em.get(Zg)||[];return n.push(...e),await em.set(Zg,n),e}try{const n=t.map(t=>({...t,user_id:e})),{data:r,error:a}=await tm.from("transactions").insert(n).select();if(a)throw console.error("Error bulk creating transactions:",a),new Error(rm(a));for(const e of r||[])await this.updateAccountBalance(e.account_id,e.amount);return r||[]}catch(n){throw console.error("TransactionService.bulkCreateTransactions error:",n),n}}static async updateAccountBalance(e,t){if(nm())try{const{data:n}=await tm.from("accounts").select("balance").eq("id",e).single();if(n){const r=(n.balance||0)+t;await tm.from("accounts").update({balance:r}).eq("id",e)}}catch(n){console.error("Error updating account balance:",n)}}static subscribeToTransactions(e,t){if(!nm())return()=>{};const n=tm.channel(`transactions:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"transactions",filter:`user_id=eq.${e}`},t).subscribe();return()=>{n.unsubscribe()}}}class px{static async initialize(e,t,n,r){if(nm())try{console.log("[DataService] Initializing for Clerk ID:",e);const a=await im.ensureUserExists(e,t,n,r);a?console.log("[DataService] User initialized with database ID:",a):console.warn("[DataService] No database ID returned from userIdService")}catch(a){console.error("[DataService] Failed to initialize user:",a)}}static async loadAppData(){im.getCurrentDatabaseUserId();try{const[e,t,n,r,a]=await Promise.all([this.getAccounts(),this.getTransactions(),this.getBudgets(),this.getGoals(),this.getCategories()]);return{accounts:e,transactions:t,budgets:n,goals:r,categories:a}}catch(e){return console.error("Error loading app data:",e),{accounts:[],transactions:[],budgets:[],goals:[],categories:[]}}}static async getAccounts(){const e=im.getCurrentDatabaseUserId();return e&&nm()?dx.getAccounts(e):await em.get(Kg)||[]}static async createAccount(e){const t=im.getCurrentDatabaseUserId();if(t&&nm())return dx.createAccount(t,e);const n={...e,id:crypto.randomUUID()},r=await this.getAccounts();return r.push(n),await em.set(Kg,r),n}static async updateAccount(e,t){if(im.getCurrentDatabaseUserId()&&nm())return dx.updateAccount(e,t);const n=await this.getAccounts(),r=n.findIndex(t=>t.id===e);if(-1===r)throw new Error("Account not found");return n[r]={...n[r],...t},await em.set(Kg,n),n[r]}static async deleteAccount(e){if(im.getCurrentDatabaseUserId()&&nm())return dx.deleteAccount(e);const t=(await this.getAccounts()).filter(t=>t.id!==e);await em.set(Kg,t)}static async getTransactions(){const e=im.getCurrentDatabaseUserId();return e&&nm()?hx.getTransactions(e):await em.get(Zg)||[]}static async createTransaction(e){const t=im.getCurrentDatabaseUserId();if(t&&nm())return hx.createTransaction(t,e);const n={...e,id:crypto.randomUUID()},r=await this.getTransactions();return r.push(n),await em.set(Zg,r),await this.updateAccountBalance(e.accountId,e.amount),n}static async updateTransaction(e,t){if(im.getCurrentDatabaseUserId()&&nm())return hx.updateTransaction(e,t);const n=await this.getTransactions(),r=n.findIndex(t=>t.id===e);if(-1===r)throw new Error("Transaction not found");const a=n[r].amount,s=n[r].accountId;return n[r]={...n[r],...t},await em.set(Zg,n),void 0!==t.amount&&t.amount!==a&&await this.updateAccountBalance(s,-a+t.amount),n[r]}static async deleteTransaction(e){if(im.getCurrentDatabaseUserId()&&nm())return hx.deleteTransaction(e);const t=await this.getTransactions(),n=t.find(t=>t.id===e);n&&await this.updateAccountBalance(n.accountId,-n.amount);const r=t.filter(t=>t.id!==e);await em.set(Zg,r)}static async getBudgets(){return await em.get(Jg)||[]}static async getGoals(){return await em.get(Qg)||[]}static async getCategories(){return await em.get(Xg)||[]}static async updateAccountBalance(e,t){if(im.getCurrentDatabaseUserId()&&nm())return;const n=await this.getAccounts(),r=n.find(t=>t.id===e);r&&(r.balance=(r.balance||0)+t,await em.set(Kg,n))}static subscribeToUpdates(e){const t=im.getCurrentDatabaseUserId();if(!t||!nm())return()=>{};const n=[];return e.onAccountUpdate&&n.push(dx.subscribeToAccounts(t,e.onAccountUpdate)),e.onTransactionUpdate&&n.push(hx.subscribeToTransactions(t,e.onTransactionUpdate)),()=>{n.forEach(e=>e())}}static isUsingSupabase(){return null!==im.getCurrentDatabaseUserId()&&nm()}static getUserIds(){return im.getCurrentUserIds()}static async refreshData(){return this.loadAppData()}}class gx{static instance;syncQueue=[];syncStatus={isOnline:!0,isSyncing:!1,lastSyncTime:null,pendingChanges:0,syncErrors:[]};syncInterval=null;userId=null;isInitialized=!1;constructor(){"undefined"!=typeof window&&(window.addEventListener("online",()=>this.handleOnline()),window.addEventListener("offline",()=>this.handleOffline()))}static getInstance(){return gx.instance||(gx.instance=new gx),gx.instance}async initialize(e){if(!this.isInitialized||this.userId!==e){this.userId=e;try{const t=await this.loadLocalData();console.log("[AutoSync] Local data loaded:",{accounts:t.accounts.length,transactions:t.transactions.length});const n=await this.checkCloudData(e);console.log("[AutoSync] Cloud data exists:",n),!n&&this.hasLocalData(t)?(console.log("[AutoSync] Performing silent migration..."),await this.migrateToCloud(e,t)):n&&this.hasLocalData(t)&&(console.log("[AutoSync] Merging local and cloud data..."),await this.mergeData(e,t)),await this.convertLocalToCache(),this.startContinuousSync(),this.isInitialized=!0,console.log("[AutoSync] Initialization complete")}catch(t){console.error("[AutoSync] Initialization failed:",t)}}}async checkCloudData(e){if(!zg)return!1;try{const t=await im.getDatabaseUserId(e);if(!t)return!1;const{data:n}=await zg.from("accounts").select("id").eq("user_id",t).limit(1);return n&&n.length>0}catch(t){return console.error("[AutoSync] Error checking cloud data:",t),!1}}async loadLocalData(){const[e,t,n,r,a]=await Promise.all([em.get(Kg)||[],em.get(Zg)||[],em.get(Jg)||[],em.get(Qg)||[],em.get(Xg)||[]]);return{accounts:e,transactions:t,budgets:n,goals:r,categories:a}}hasLocalData(e){return e.accounts.length>0||e.transactions.length>0||e.budgets.length>0||e.goals.length>0}async migrateToCloud(e,t){if(zg)try{const n=await this.ensureUserExists(e);if(!n)throw new Error("Failed to create user in database");if(t.accounts.length>0){const e=t.accounts.map(e=>({user_id:n,name:e.name,type:"current"===e.type?"checking":e.type,balance:e.balance||0,currency:e.currency||"GBP",institution:e.institution||null,is_active:!1!==e.isActive,initial_balance:e.initialBalance||e.balance||0,created_at:e.createdAt||(new Date).toISOString(),updated_at:e.updatedAt||(new Date).toISOString()})),{error:r}=await zg.from("accounts").insert(e);r?console.error("[AutoSync] Failed to migrate accounts:",r):console.log("[AutoSync] Migrated",e.length,"accounts")}if(t.transactions.length>0){const{data:e}=await zg.from("accounts").select("id, name").eq("user_id",n);if(e){const r=new Map(e.map(e=>[t.accounts.find(t=>t.name===e.name)?.id,e.id])),a=t.transactions.filter(e=>r.has(e.accountId)).map(e=>({user_id:n,account_id:r.get(e.accountId),amount:e.amount,description:e.description,date:e.date,category:e.category,subcategory:e.subcategory||null,type:e.type,is_recurring:e.isRecurring||!1,notes:e.notes||null,tags:e.tags||[],created_at:e.createdAt||(new Date).toISOString()}));if(a.length>0){const e=100;for(let t=0;t<a.length;t+=e){const n=a.slice(t,t+e),{error:r}=await zg.from("transactions").insert(n);r&&console.error("[AutoSync] Failed to migrate transaction batch:",r)}console.log("[AutoSync] Migrated",a.length,"transactions")}}}localStorage.setItem("autoSyncMigrationComplete","true"),localStorage.setItem("autoSyncMigrationDate",(new Date).toISOString()),console.log("[AutoSync] Silent migration complete")}catch(n){console.error("[AutoSync] Migration failed:",n)}}async ensureUserExists(e){if(!zg)return null;try{let t=await im.getDatabaseUserId(e);return t||(t=await im.ensureUserExists(e,"user@example.com",void 0,void 0),t||(console.error("[AutoSync] Failed to create user"),null))}catch(t){return console.error("[AutoSync] Error ensuring user exists:",t),null}}async mergeData(e,t){}async convertLocalToCache(){localStorage.setItem("primaryStorage","cloud")}startContinuousSync(){this.syncInterval=setInterval(()=>{this.processSyncQueue()},5e3)}stopSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null)}queueOperation(e,t,n){const r={id:crypto.randomUUID(),type:e,entity:t,data:n,timestamp:Date.now(),retries:0,status:"pending"};this.syncQueue.push(r),this.syncStatus.pendingChanges=this.syncQueue.filter(e=>"pending"===e.status).length,this.syncStatus.isOnline&&this.processSyncQueue()}async processSyncQueue(){if(this.syncStatus.isSyncing||!this.syncStatus.isOnline)return;const e=this.syncQueue.filter(e=>"pending"===e.status);if(0!==e.length){this.syncStatus.isSyncing=!0;for(const n of e)try{n.status="syncing",await this.syncItem(n),n.status="completed",this.syncQueue=this.syncQueue.filter(e=>e.id!==n.id)}catch(t){console.error("[AutoSync] Sync failed for item:",n,t),n.status="pending",n.retries++,n.retries>3&&(this.syncStatus.syncErrors.push(`Failed to sync ${n.entity}: ${t}`),this.syncQueue=this.syncQueue.filter(e=>e.id!==n.id))}this.syncStatus.isSyncing=!1,this.syncStatus.lastSyncTime=new Date,this.syncStatus.pendingChanges=this.syncQueue.filter(e=>"pending"===e.status).length}}async syncItem(e){if(!zg||!this.userId)throw new Error("Not initialized");const t=await im.getDatabaseUserId(this.userId);if(!t)throw new Error("User not found");const n=`${e.entity}s`;switch(e.type){case"CREATE":if(e.data.id&&36===e.data.id.length)return;await zg.from(n).insert({...e.data,user_id:t});break;case"UPDATE":await zg.from(n).update(e.data).eq("id",e.data.id).eq("user_id",user.id);break;case"DELETE":await zg.from(n).delete().eq("id",e.data.id).eq("user_id",user.id)}}handleOnline(){this.syncStatus.isOnline=!0,this.processSyncQueue()}handleOffline(){this.syncStatus.isOnline=!1}getSyncStatus(){return{...this.syncStatus}}}const mx=gx.getInstance();var fx,yx,vx=9e15,bx=1e9,wx="0123456789abcdef",xx="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",kx="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",_x={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-vx,maxE:vx,crypto:!1},Sx=!0,jx="[DecimalError] ",Ix=jx+"Invalid argument: ",Cx=jx+"Precision limit exceeded",Ex=jx+"crypto unavailable",Tx="[object Decimal]",Nx=Math.floor,Ax=Math.pow,Ox=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Dx=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Px=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Mx=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Lx=1e7,Rx=xx.length-1,Ux=kx.length-1,zx={toStringTag:Tx};zx.absoluteValue=zx.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),an(e)},zx.ceil=function(){return an(new this.constructor(this),this.e+1,2)},zx.clampedTo=zx.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(Ix+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},zx.comparedTo=zx.cmp=function(e){var t,n,r,a,s=this,i=s.d,o=(e=new s.constructor(e)).d,c=s.s,l=e.s;if(!i||!o)return c&&l?c!==l?c:i===o?0:!i^c<0?1:-1:NaN;if(!i[0]||!o[0])return i[0]?c:o[0]?-l:0;if(c!==l)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(t=0,n=(r=i.length)<(a=o.length)?r:a;t<n;++t)if(i[t]!==o[t])return i[t]>o[t]^c<0?1:-1;return r===a?0:r>a^c<0?1:-1},zx.cosine=zx.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,a;if(t.isZero())return t;(r=t.d.length)<32?a=(1/wn(4,n=Math.ceil(r/3))).toString():(n=16,a="2.3283064365386962890625e-10"),e.precision+=n,t=bn(e,1,t.times(a),new e(1));for(var s=n;s--;){var i=t.times(t);t=i.times(i).minus(i).times(8).plus(1)}return e.precision-=n,t}(r,xn(r,n)),r.precision=e,r.rounding=t,an(2==yx||3==yx?n.neg():n,e,t,!0)):new r(1):new r(NaN)},zx.cubeRoot=zx.cbrt=function(){var e,t,n,r,a,s,i,o,c,l,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(Sx=!1,(s=u.s*Ax(u.s*u,1/3))&&Math.abs(s)!=1/0?r=new d(s.toString()):(n=en(u.d),(s=((e=u.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=Ax(n,1/3),e=Nx((e+1)/3)-(e%3==(e<0?-1:2)),(r=new d(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=u.s),i=(e=d.precision)+3;;)if(l=(c=(o=r).times(o).times(o)).plus(u),r=$x(l.plus(u).times(o),l.plus(c),i+2,1),en(o.d).slice(0,i)===(n=en(r.d)).slice(0,i)){if("9999"!=(n=n.slice(i-3,i+1))&&(a||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(an(r,e+1,1),t=!r.times(r).times(r).eq(u));break}if(!a&&(an(o,e+1,0),o.times(o).times(o).eq(u))){r=o;break}i+=4,a=1}return Sx=!0,an(r,e,d.rounding,t)},zx.decimalPlaces=zx.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-Nx(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},zx.dividedBy=zx.div=function(e){return $x(this,new this.constructor(e))},zx.dividedToIntegerBy=zx.divToInt=function(e){var t=this.constructor;return an($x(this,new t(e),0,1,1),t.precision,t.rounding)},zx.equals=zx.eq=function(e){return 0===this.cmp(e)},zx.floor=function(){return an(new this.constructor(this),this.e+1,3)},zx.greaterThan=zx.gt=function(e){return this.cmp(e)>0},zx.greaterThanOrEqualTo=zx.gte=function(e){var t=this.cmp(e);return 1==t||0===t},zx.hyperbolicCosine=zx.cosh=function(){var e,t,n,r,a,s=this,i=s.constructor,o=new i(1);if(!s.isFinite())return new i(s.s?1/0:NaN);if(s.isZero())return o;n=i.precision,r=i.rounding,i.precision=n+Math.max(s.e,s.sd())+4,i.rounding=1,(a=s.d.length)<32?t=(1/wn(4,e=Math.ceil(a/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=bn(i,1,s.times(t),new i(1),!0);for(var c,l=e,u=new i(8);l--;)c=s.times(s),s=o.minus(c.times(u.minus(c.times(u))));return an(s,i.precision=n,i.rounding=r,!0)},zx.hyperbolicSine=zx.sinh=function(){var e,t,n,r,a=this,s=a.constructor;if(!a.isFinite()||a.isZero())return new s(a);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(a.e,a.sd())+4,s.rounding=1,(r=a.d.length)<3)a=bn(s,2,a,a,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,a=bn(s,2,a=a.times(1/wn(5,e)),a,!0);for(var i,o=new s(5),c=new s(16),l=new s(20);e--;)i=a.times(a),a=a.times(o.plus(i.times(c.times(i).plus(l))))}return s.precision=t,s.rounding=n,an(a,t,n,!0)},zx.hyperbolicTangent=zx.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,$x(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},zx.inverseCosine=zx.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,a=t.rounding;return-1!==n?0===n?e.isNeg()?ln(t,r,a):new t(0):new t(NaN):e.isZero()?ln(t,r+4,a).times(.5):(t.precision=r+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=r,t.rounding=a,e.times(2))},zx.inverseHyperbolicCosine=zx.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Sx=!1,n=n.times(n).minus(1).sqrt().plus(n),Sx=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},zx.inverseHyperbolicSine=zx.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Sx=!1,n=n.times(n).plus(1).sqrt().plus(n),Sx=!0,r.precision=e,r.rounding=t,n.ln())},zx.inverseHyperbolicTangent=zx.atanh=function(){var e,t,n,r,a=this,s=a.constructor;return a.isFinite()?a.e>=0?new s(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(e=s.precision,t=s.rounding,r=a.sd(),Math.max(r,e)<2*-a.e-1?an(new s(a),e,t,!0):(s.precision=n=r-a.e,a=$x(a.plus(1),new s(1).minus(a),n+e,1),s.precision=e+4,s.rounding=1,a=a.ln(),s.precision=e,s.rounding=t,a.times(.5))):new s(NaN)},zx.inverseSine=zx.asin=function(){var e,t,n,r,a=this,s=a.constructor;return a.isZero()?new s(a):(t=a.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=ln(s,n+4,r).times(.5)).s=a.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,a=a.div(new s(1).minus(a.times(a)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,a.times(2)))},zx.inverseTangent=zx.atan=function(){var e,t,n,r,a,s,i,o,c,l=this,u=l.constructor,d=u.precision,h=u.rounding;if(l.isFinite()){if(l.isZero())return new u(l);if(l.abs().eq(1)&&d+4<=Ux)return(i=ln(u,d+4,h).times(.25)).s=l.s,i}else{if(!l.s)return new u(NaN);if(d+4<=Ux)return(i=ln(u,d+4,h).times(.5)).s=l.s,i}for(u.precision=o=d+10,u.rounding=1,e=n=Math.min(28,o/7+2|0);e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Sx=!1,t=Math.ceil(o/7),r=1,c=l.times(l),i=new u(l),a=l;-1!==e;)if(a=a.times(c),s=i.minus(a.div(r+=2)),a=a.times(c),void 0!==(i=s.plus(a.div(r+=2))).d[t])for(e=t;i.d[e]===s.d[e]&&e--;);return n&&(i=i.times(2<<n-1)),Sx=!0,an(i,u.precision=d,u.rounding=h,!0)},zx.isFinite=function(){return!!this.d},zx.isInteger=zx.isInt=function(){return!!this.d&&Nx(this.e/7)>this.d.length-2},zx.isNaN=function(){return!this.s},zx.isNegative=zx.isNeg=function(){return this.s<0},zx.isPositive=zx.isPos=function(){return this.s>0},zx.isZero=function(){return!!this.d&&0===this.d[0]},zx.lessThan=zx.lt=function(e){return this.cmp(e)<0},zx.lessThanOrEqualTo=zx.lte=function(e){return this.cmp(e)<1},zx.logarithm=zx.log=function(e){var t,n,r,a,s,i,o,c,l=this,u=l.constructor,d=u.precision,h=u.rounding;if(null==e)e=new u(10),t=!0;else{if(n=(e=new u(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new u(n&&!n[0]?-1/0:1!=l.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(a=n[0];a%10==0;)a/=10;s=1!==a}if(Sx=!1,i=fn(l,o=d+5),r=t?cn(u,o+10):fn(e,o),nn((c=$x(i,r,o,1)).d,a=d,h))do{if(i=fn(l,o+=10),r=t?cn(u,o+10):fn(e,o),c=$x(i,r,o,1),!s){+en(c.d).slice(a+1,a+15)+1==1e14&&(c=an(c,d+1,0));break}}while(nn(c.d,a+=10,h));return Sx=!0,an(c,d,h)},zx.minus=zx.sub=function(e){var t,n,r,a,s,i,o,c,l,u,d,h,p=this,g=p.constructor;if(e=new g(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new g(e.d||p.s!==e.s?p:NaN):e=new g(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(l=p.d,h=e.d,o=g.precision,c=g.rounding,!l[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!l[0])return new g(3===c?-0:0);e=new g(p)}return Sx?an(e,o,c):e}if(n=Nx(e.e/7),u=Nx(p.e/7),l=l.slice(),s=u-n){for((d=s<0)?(t=l,s=-s,i=h.length):(t=h,n=u,i=l.length),s>(r=Math.max(Math.ceil(o/7),i)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((d=(r=l.length)<(i=h.length))&&(i=r),r=0;r<i;r++)if(l[r]!=h[r]){d=l[r]<h[r];break}s=0}for(d&&(t=l,l=h,h=t,e.s=-e.s),i=l.length,r=h.length-i;r>0;--r)l[i++]=0;for(r=h.length;r>s;){if(l[--r]<h[r]){for(a=r;a&&0===l[--a];)l[a]=Lx-1;--l[a],l[r]+=Lx}l[r]-=h[r]}for(;0===l[--i];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(e.d=l,e.e=on(l,n),Sx?an(e,o,c):e):new g(3===c?-0:0)},zx.modulo=zx.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?an(new r(n),r.precision,r.rounding):(Sx=!1,9==r.modulo?(t=$x(n,e.abs(),0,3,1)).s*=e.s:t=$x(n,e,0,r.modulo,1),t=t.times(e),Sx=!0,n.minus(t))},zx.naturalExponential=zx.exp=function(){return mn(this)},zx.naturalLogarithm=zx.ln=function(){return fn(this)},zx.negated=zx.neg=function(){var e=new this.constructor(this);return e.s=-e.s,an(e)},zx.plus=zx.add=function(e){var t,n,r,a,s,i,o,c,l,u,d=this,h=d.constructor;if(e=new h(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new h(e.d||d.s===e.s?d:NaN)):e=new h(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(l=d.d,u=e.d,o=h.precision,c=h.rounding,!l[0]||!u[0])return u[0]||(e=new h(d)),Sx?an(e,o,c):e;if(s=Nx(d.e/7),r=Nx(e.e/7),l=l.slice(),a=s-r){for(a<0?(n=l,a=-a,i=u.length):(n=u,r=s,i=l.length),a>(i=(s=Math.ceil(o/7))>i?s+1:i+1)&&(a=i,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for((i=l.length)-(a=u.length)<0&&(a=i,n=u,u=l,l=n),t=0;a;)t=(l[--a]=l[a]+u[a]+t)/Lx|0,l[a]%=Lx;for(t&&(l.unshift(t),++r),i=l.length;0==l[--i];)l.pop();return e.d=l,e.e=on(l,r),Sx?an(e,o,c):e},zx.precision=zx.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Ix+e);return n.d?(t=un(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},zx.round=function(){var e=this,t=e.constructor;return an(new t(e),e.e+1,t.rounding)},zx.sine=zx.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:bn(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=bn(e,2,t=t.times(1/wn(5,n)),t);for(var a,s=new e(5),i=new e(16),o=new e(20);n--;)a=t.times(t),t=t.times(s.plus(a.times(i.times(a).minus(o))));return t}(r,xn(r,n)),r.precision=e,r.rounding=t,an(yx>2?n.neg():n,e,t,!0)):new r(NaN)},zx.squareRoot=zx.sqrt=function(){var e,t,n,r,a,s,i=this,o=i.d,c=i.e,l=i.s,u=i.constructor;if(1!==l||!o||!o[0])return new u(!l||l<0&&(!o||o[0])?NaN:o?i:1/0);for(Sx=!1,0==(l=Math.sqrt(+i))||l==1/0?(((t=en(o)).length+c)%2==0&&(t+="0"),l=Math.sqrt(t),c=Nx((c+1)/2)-(c<0||c%2),r=new u(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new u(l.toString()),n=(c=u.precision)+3;;)if(r=(s=r).plus($x(i,s,n+2,1)).times(.5),en(s.d).slice(0,n)===(t=en(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(a||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(an(r,c+1,1),e=!r.times(r).eq(i));break}if(!a&&(an(s,c+1,0),s.times(s).eq(i))){r=s;break}n+=4,a=1}return Sx=!0,an(r,c,u.rounding,e)},zx.tangent=zx.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=$x(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,an(2==yx||4==yx?n.neg():n,e,t,!0)):new r(NaN)},zx.times=zx.mul=function(e){var t,n,r,a,s,i,o,c,l,u=this,d=u.constructor,h=u.d,p=(e=new d(e)).d;if(e.s*=u.s,!(h&&h[0]&&p&&p[0]))return new d(!e.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:h&&p?0*e.s:e.s/0);for(n=Nx(u.e/7)+Nx(e.e/7),(c=h.length)<(l=p.length)&&(s=h,h=p,p=s,i=c,c=l,l=i),s=[],r=i=c+l;r--;)s.push(0);for(r=l;--r>=0;){for(t=0,a=c+r;a>r;)o=s[a]+p[r]*h[a-r-1]+t,s[a--]=o%Lx|0,t=o/Lx|0;s[a]=(s[a]+t)%Lx|0}for(;!s[--i];)s.pop();return t?++n:s.shift(),e.d=s,e.e=on(s,n),Sx?an(e,d.precision,d.rounding):e},zx.toBinary=function(e,t){return kn(this,2,e,t)},zx.toDecimalPlaces=zx.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(tn(e,0,bx),void 0===t?t=r.rounding:tn(t,0,8),an(n,e+n.e+1,t))},zx.toExponential=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=sn(r,!0):(tn(e,0,bx),void 0===t?t=a.rounding:tn(t,0,8),n=sn(r=an(new a(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},zx.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return void 0===e?n=sn(a):(tn(e,0,bx),void 0===t?t=s.rounding:tn(t,0,8),n=sn(r=an(new s(a),e+a.e+1,t),!1,e+r.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n},zx.toFraction=function(e){var t,n,r,a,s,i,o,c,l,u,d,h,p=this,g=p.d,m=p.constructor;if(!g)return new m(p);if(l=n=new m(1),r=c=new m(0),i=(s=(t=new m(r)).e=un(g)-p.e-1)%7,t.d[0]=Ax(10,i<0?7+i:i),null==e)e=s>0?t:l;else{if(!(o=new m(e)).isInt()||o.lt(l))throw Error(Ix+o);e=o.gt(t)?s>0?t:l:o}for(Sx=!1,o=new m(en(g)),u=m.precision,m.precision=s=7*g.length*2;d=$x(o,t,0,1,1),1!=(a=n.plus(d.times(r))).cmp(e);)n=r,r=a,a=l,l=c.plus(d.times(a)),c=a,a=t,t=o.minus(d.times(a)),o=a;return a=$x(e.minus(n),r,0,1,1),c=c.plus(a.times(l)),n=n.plus(a.times(r)),c.s=l.s=p.s,h=$x(l,r,s,1).minus(p).abs().cmp($x(c,n,s,1).minus(p).abs())<1?[l,r]:[c,n],m.precision=u,Sx=!0,h},zx.toHexadecimal=zx.toHex=function(e,t){return kn(this,16,e,t)},zx.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:tn(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Sx=!1,n=$x(n,e,0,t,1).times(e),Sx=!0,an(n)):(e.s=n.s,n=e),n},zx.toNumber=function(){return+this},zx.toOctal=function(e,t){return kn(this,8,e,t)},zx.toPower=zx.pow=function(e){var t,n,r,a,s,i,o=this,c=o.constructor,l=+(e=new c(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new c(Ax(+o,l));if((o=new c(o)).eq(1))return o;if(r=c.precision,s=c.rounding,e.eq(1))return an(o,r,s);if((t=Nx(e.e/7))>=e.d.length-1&&(n=l<0?-l:l)<=9007199254740991)return a=hn(c,o,n,r),e.s<0?new c(1).div(a):an(a,r,s);if((i=o.s)<0){if(t<e.d.length-1)return new c(NaN);if(1&e.d[t]||(i=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=i,o}return(t=0!=(n=Ax(+o,l))&&isFinite(n)?new c(n+"").e:Nx(l*(Math.log("0."+en(o.d))/Math.LN10+o.e+1)))>c.maxE+1||t<c.minE-1?new c(t>0?i/0:0):(Sx=!1,c.rounding=o.s=1,n=Math.min(12,(t+"").length),(a=mn(e.times(fn(o,r+n)),r)).d&&nn((a=an(a,r+5,1)).d,r,s)&&(t=r+10,+en((a=an(mn(e.times(fn(o,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(a=an(a,r+1,0))),a.s=i,Sx=!0,c.rounding=s,an(a,r,s))},zx.toPrecision=function(e,t){var n,r=this,a=r.constructor;return void 0===e?n=sn(r,r.e<=a.toExpNeg||r.e>=a.toExpPos):(tn(e,1,bx),void 0===t?t=a.rounding:tn(t,0,8),n=sn(r=an(new a(r),e,t),e<=r.e||r.e<=a.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},zx.toSignificantDigits=zx.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(tn(e,1,bx),void 0===t?t=n.rounding:tn(t,0,8)),an(new n(this),e,t)},zx.toString=function(){var e=this,t=e.constructor,n=sn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},zx.truncated=zx.trunc=function(){return an(new this.constructor(this),this.e+1,1)},zx.valueOf=zx.toJSON=function(){var e=this,t=e.constructor,n=sn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var $x=function(){function e(e,t,n){var r,a=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+a,e[s]=r%n|0,a=r/n|0;return a&&e.unshift(a),e}function t(e,t,n,r){var a,s;if(n!=r)s=n>r?1:-1;else for(a=s=0;a<n;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function n(e,t,n,r){for(var a=0;n--;)e[n]-=a,a=e[n]<t[n]?1:0,e[n]=a*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,a,s,i,o,c){var l,u,d,h,p,g,m,f,y,v,b,w,x,k,_,S,j,I,C,E,T=r.constructor,N=r.s==a.s?1:-1,A=r.d,O=a.d;if(!(A&&A[0]&&O&&O[0]))return new T(r.s&&a.s&&(A?!O||A[0]!=O[0]:O)?A&&0==A[0]||!O?0*N:N/0:NaN);for(c?(p=1,u=r.e-a.e):(c=Lx,p=7,u=Nx(r.e/p)-Nx(a.e/p)),C=O.length,j=A.length,v=(y=new T(N)).d=[],d=0;O[d]==(A[d]||0);d++);if(O[d]>(A[d]||0)&&u--,null==s?(k=s=T.precision,i=T.rounding):k=o?s+(r.e-a.e)+1:s,k<0)v.push(1),g=!0;else{if(k=k/p+2|0,d=0,1==C){for(h=0,O=O[0],k++;(d<j||h)&&k--;d++)_=h*c+(A[d]||0),v[d]=_/O|0,h=_%O|0;g=h||d<j}else{for((h=c/(O[0]+1)|0)>1&&(O=e(O,h,c),A=e(A,h,c),C=O.length,j=A.length),S=C,w=(b=A.slice(0,C)).length;w<C;)b[w++]=0;(E=O.slice()).unshift(0),I=O[0],O[1]>=c/2&&++I;do{h=0,(l=t(O,b,C,w))<0?(x=b[0],C!=w&&(x=x*c+(b[1]||0)),(h=x/I|0)>1?(h>=c&&(h=c-1),1==(l=t(m=e(O,h,c),b,f=m.length,w=b.length))&&(h--,n(m,C<f?E:O,f,c))):(0==h&&(l=h=1),m=O.slice()),(f=m.length)<w&&m.unshift(0),n(b,m,w,c),-1==l&&(l=t(O,b,C,w=b.length))<1&&(h++,n(b,C<w?E:O,w,c)),w=b.length):0===l&&(h++,b=[0]),v[d++]=h,l&&b[0]?b[w++]=A[S]||0:(b=[A[S]],w=1)}while((S++<j||void 0!==b[0])&&k--);g=void 0!==b[0]}v[0]||v.shift()}if(1==p)y.e=u,fx=g;else{for(d=1,h=v[0];h>=10;h/=10)d++;y.e=d+u*p-1,an(y,o?s+y.e+1:s,i,g)}return y}}();zx[Symbol.for("nodejs.util.inspect.custom")]=zx.toString,zx[Symbol.toStringTag]="Decimal";var Bx=zx.constructor=function e(t){function n(e){var t,r,a,s=this;if(!(s instanceof n))return new n(e);if(s.constructor=n,Wn(e))return s.s=e.s,void(Sx?!e.d||e.e>n.maxE?(s.e=NaN,s.d=null):e.e<n.minE?(s.e=0,s.d=[0]):(s.e=e.e,s.d=e.d.slice()):(s.e=e.e,s.d=e.d?e.d.slice():e.d));if("number"==(a=typeof e)){if(0===e)return s.s=1/e<0?-1:1,s.e=0,void(s.d=[0]);if(e<0?(e=-e,s.s=-1):s.s=1,e===~~e&&e<1e7){for(t=0,r=e;r>=10;r/=10)t++;return void(Sx?t>n.maxE?(s.e=NaN,s.d=null):t<n.minE?(s.e=0,s.d=[0]):(s.e=t,s.d=[e]):(s.e=t,s.d=[e]))}return 0*e!=0?(e||(s.s=NaN),s.e=NaN,void(s.d=null)):vn(s,e.toString())}if("string"===a)return 45===(r=e.charCodeAt(0))?(e=e.slice(1),s.s=-1):(43===r&&(e=e.slice(1)),s.s=1),Mx.test(e)?vn(s,e):function(e,t){var n,r,a,s,i,o,c,l,u;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Mx.test(t))return vn(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Dx.test(t))n=16,t=t.toLowerCase();else if(Ox.test(t))n=2;else{if(!Px.test(t))throw Error(Ix+t);n=8}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),i=(s=t.indexOf("."))>=0,r=e.constructor,i&&(s=(o=(t=t.replace(".","")).length)-s,a=hn(r,new r(n),s,2*s)),s=u=(l=rn(t,n,Lx)).length-1;0===l[s];--s)l.pop();return s<0?new r(0*e.s):(e.e=on(l,u),e.d=l,Sx=!1,i&&(e=$x(e,a,4*o)),c&&(e=e.times(Math.abs(c)<54?Ax(2,c):Bx.pow(2,c))),Sx=!0,e)}(s,e);if("bigint"===a)return e<0?(e=-e,s.s=-1):s.s=1,vn(s,e.toString());throw Error(Ix+e)}var r,a,s;if(n.prototype=zx,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=Ln,n.clone=e,n.isDecimal=Wn,n.abs=Sn,n.acos=jn,n.acosh=In,n.add=Cn,n.asin=En,n.asinh=Tn,n.atan=Nn,n.atanh=An,n.atan2=On,n.cbrt=Dn,n.ceil=Pn,n.clamp=Mn,n.cos=Rn,n.cosh=Un,n.div=zn,n.exp=$n,n.floor=Bn,n.hypot=Fn,n.ln=qn,n.log=Gn,n.log10=Hn,n.log2=Vn,n.max=Yn,n.min=Kn,n.mod=Zn,n.mul=Jn,n.pow=Qn,n.random=Xn,n.round=er,n.sign=tr,n.sin=nr,n.sinh=rr,n.sqrt=ar,n.sub=sr,n.sum=ir,n.tan=or,n.tanh=cr,n.trunc=lr,void 0===t&&(t={}),t&&!0!==t.defaults)for(s=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<s.length;)t.hasOwnProperty(a=s[r++])||(t[a]=this[a]);return n.config(t),n}(_x);xx=new Bx(xx),kx=new Bx(kx),Bx.config({precision:20,rounding:Bx.ROUND_HALF_UP,toExpPos:9,toExpNeg:-9});const Fx=Gi.createContext(void 0),Wx=new class{rules=[];budgetAlertConfig={warningThreshold:80,dangerThreshold:100,enableMonthlyReset:!0,enableProjectedOverspend:!0,enableCategoryComparison:!0};transactionAlertConfig={largeTransactionThreshold:500,unusualSpendingEnabled:!0,duplicateDetectionEnabled:!0,recurringDetectionEnabled:!0,merchantChangeAlerts:!0};goalCelebrationConfig={enableMilestones:!0,milestonePercentages:[25,50,75,100],enableStreaks:!0,enableBadges:!0,enableSoundEffects:!1,enableProgressReminders:!0};constructor(){this.loadConfig(),this.loadRules()}loadConfig(){this.budgetAlertConfig={warningThreshold:80,dangerThreshold:100,enableMonthlyReset:!0,enableProjectedOverspend:!0,enableCategoryComparison:!0,...this.loadFromStorage("notificationService_budgetConfig")},this.transactionAlertConfig={largeTransactionThreshold:500,unusualSpendingEnabled:!0,duplicateDetectionEnabled:!0,merchantAlertEnabled:!1,foreignTransactionEnabled:!0,...this.loadFromStorage("notificationService_transactionConfig")},this.goalCelebrationConfig={milestonePercentages:[25,50,75,100],enableCompletionCelebration:!0,enableMilestoneNotifications:!0,enableProgressReminders:!0,...this.loadFromStorage("notificationService_goalConfig")}}loadRules(){const e=this.loadFromStorage("notificationService_rules");this.rules=Array.isArray(e)?e:this.getDefaultRules()}loadFromStorage(e){try{const t=localStorage.getItem(e);if(!t)return{};const n=JSON.parse(t);return"object"!=typeof n||null===n||Array.isArray(n)?{}:n}catch{return{}}}saveToStorage(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}getDefaultRules(){return[{id:"budget-warning",name:"Budget Warning Alert",type:"budget",enabled:!0,conditions:[{field:"percentage_spent",operator:"greater_than",value:this.budgetAlertConfig.warningThreshold,description:`Spent more than ${this.budgetAlertConfig.warningThreshold}% of budget`}],actions:[{type:"show_notification",config:{title:"Budget Warning",message:"You're approaching your budget limit",actionButton:{label:"View Budget",action:"/budget"}}}],priority:"medium",cooldown:60,created:new Date},{id:"budget-exceeded",name:"Budget Exceeded Alert",type:"budget",enabled:!0,conditions:[{field:"percentage_spent",operator:"greater_than",value:this.budgetAlertConfig.dangerThreshold,description:"Exceeded budget limit"}],actions:[{type:"show_notification",config:{title:"Budget Exceeded!",message:"You've exceeded your budget for this category",actionButton:{label:"Review Spending",action:"/budget"}}}],priority:"high",cooldown:30,created:new Date},{id:"large-transaction",name:"Large Transaction Alert",type:"transaction",enabled:!0,conditions:[{field:"amount",operator:"greater_than",value:this.transactionAlertConfig.largeTransactionThreshold,description:`Transaction amount exceeds \xa3${this.transactionAlertConfig.largeTransactionThreshold}`}],actions:[{type:"show_notification",config:{title:"Large Transaction Detected",message:"A large transaction was recorded",actionButton:{label:"Review Transaction",action:"/transactions"}}}],priority:"medium",cooldown:5,created:new Date},{id:"goal-milestone",name:"Goal Milestone Celebration",type:"goal",enabled:!0,conditions:[{field:"percentage_complete",operator:"percentage_of",value:this.goalCelebrationConfig.milestonePercentages,description:"Goal milestone reached"}],actions:[{type:"show_notification",config:{title:"\ud83c\udf89 Goal Milestone Reached!",message:"Congratulations on your progress!",actionButton:{label:"View Goals",action:"/goals"}}}],priority:"medium",cooldown:60,created:new Date},{id:"goal-completed",name:"Goal Completion Celebration",type:"goal",enabled:!0,conditions:[{field:"percentage_complete",operator:"greater_than",value:100,description:"Goal completed"}],actions:[{type:"show_notification",config:{title:"\ud83c\udfc6 Goal Completed!",message:"Amazing! You've reached your goal!",actionButton:{label:"Celebrate",action:"/goals"}}}],priority:"high",cooldown:0,created:new Date}]}checkBudgetAlerts(e,t,n){const r=[],a=new Date;return e.forEach(e=>{const s=this.calculateBudgetSpent(e,t),i=e.amount>0?s/e.amount*100:0;this.rules.filter(e=>"budget"===e.type&&e.enabled&&this.shouldTriggerRule(e,a)).forEach(t=>{if(this.evaluateConditions(t.conditions,{percentage_spent:i,amount_spent:s,budget_amount:e.amount,category:e.category,period:e.period})){const o=n.find(t=>t.name===e.category),c=this.createNotificationFromRule(t,{categoryName:e.category,categoryColor:o?.color||"#6B7280",percentage:Math.round(i),spent:s,budget:e.amount,period:e.period});c&&(r.push(c),this.updateRuleLastTriggered(t.id,a))}})}),r}checkTransactionAlerts(e,t){const n=[],r=new Date;if(this.rules.filter(e=>"transaction"===e.type&&e.enabled&&this.shouldTriggerRule(e,r)).forEach(t=>{if(this.evaluateConditions(t.conditions,{amount:e.amount,description:e.description,category:e.category,type:e.type,date:e.date})){const a=this.createNotificationFromRule(t,{amount:e.amount,description:e.description,category:e.category});a&&(n.push(a),this.updateRuleLastTriggered(t.id,r))}}),this.transactionAlertConfig.duplicateDetectionEnabled){const r=this.checkDuplicateTransaction(e,t);r&&n.push(r)}return n}checkGoalProgress(e,t){const n=[];return e.forEach(e=>{const r=this.calculateGoalProgress(e),a=t?.find(t=>t.id===e.id),s=a?this.calculateGoalProgress(a):0;if(this.goalCelebrationConfig.enableMilestoneNotifications){const t=this.checkGoalMilestone(e,r,s);t&&n.push(t)}if(this.goalCelebrationConfig.enableCompletionCelebration&&r>=100&&s<100){const t=this.createGoalCompletionNotification(e);t&&n.push(t)}}),n}checkGoalMilestone(e,t,n){const r=this.goalCelebrationConfig.milestonePercentages;for(const a of r)if(t>=a&&n<a&&a<100)return{id:`goal-milestone-${e.id}-${a}`,type:"success",title:`\ud83c\udfaf ${a}% Goal Progress!`,message:`You're ${a}% of the way to "${e.name}"! Keep it up!`,timestamp:new Date,read:!1,action:{label:"View Goal",onClick:()=>{window.location.href="/goals"}}};return null}createGoalCompletionNotification(e){return{id:`goal-completed-${e.id}`,type:"success",title:"\ud83c\udfc6 Goal Achieved!",message:`Congratulations! You've completed "${e.name}"! Time to celebrate! \ud83c\udf89`,timestamp:new Date,read:!1,action:{label:"View Achievement",onClick:()=>{window.location.href="/goals"}}}}checkDuplicateTransaction(e,t){return t.filter(t=>t.id!==e.id&&Math.abs(t.amount-e.amount)<.01&&t.description===e.description&&Math.abs(new Date(t.date).getTime()-new Date(e.date).getTime())<864e5).length>0?{id:`duplicate-transaction-${e.id}`,type:"warning",title:"Possible Duplicate Transaction",message:`Similar transaction detected: ${e.description} (\xa3${e.amount})`,timestamp:new Date,read:!1,action:{label:"Review Transactions",onClick:()=>{window.location.href="/transactions"}}}:null}calculateBudgetSpent(e,t){const n=new Date;let r,a;return"monthly"===e.period?(r=new Date(n.getFullYear(),n.getMonth(),1),a=new Date(n.getFullYear(),n.getMonth()+1,0)):(r=new Date(n.getFullYear(),0,1),a=new Date(n.getFullYear(),11,31)),t.filter(t=>{const n=new Date(t.date);return t.category===e.category&&"expense"===t.type&&n>=r&&n<=a}).reduce((e,t)=>e+t.amount,0)}calculateGoalProgress(e){return e.targetAmount<=0?0:Math.min(e.currentAmount/e.targetAmount*100,100)}shouldTriggerRule(e,t){return!e.cooldown||!e.lastTriggered||t.getTime()-e.lastTriggered.getTime()>=60*e.cooldown*1e3}evaluateConditions(e,t){return e.every(e=>{const n=t[e.field];switch(e.operator){case"equals":return n===e.value;case"greater_than":return"number"==typeof n&&"number"==typeof e.value&&n>e.value;case"less_than":return"number"==typeof n&&"number"==typeof e.value&&n<e.value;case"contains":return String(n).toLowerCase().includes(String(e.value).toLowerCase());case"percentage_of":return Array.isArray(e.value)&&"number"==typeof n?e.value.some(e=>"number"==typeof e&&Math.abs(n-e)<1):"number"==typeof n&&"number"==typeof e.value&&Math.abs(n-e.value)<1;default:return!1}})}createNotificationFromRule(e,t){const n=e.actions.find(e=>"show_notification"===e.type);if(!n)return null;const r=this.interpolateString(n.config.title,t),a=this.interpolateString(n.config.message,t);return{id:`rule-${e.id}-${Date.now()}`,type:this.mapPriorityToType(e.priority),title:r,message:a,timestamp:new Date,read:!1,action:n.config.actionButton?{label:n.config.actionButton.label,onClick:()=>{n.config.actionButton&&(window.location.href=n.config.actionButton.action)}}:void 0}}interpolateString(e,t){return e.replace(/\{(\w+)\}/g,(e,n)=>{const r=t[n];return"number"==typeof r&&n.includes("amount")?new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(r):String(r||e)})}mapPriorityToType(e){switch(e){case"urgent":case"high":return"error";case"medium":return"warning";default:return"info"}}updateRuleLastTriggered(e,t){const n=this.rules.find(t=>t.id===e);n&&(n.lastTriggered=t,this.saveRules())}saveRules(){this.saveToStorage("notificationService_rules",JSON.parse(JSON.stringify(this.rules)))}updateBudgetConfig(e){this.budgetAlertConfig={...this.budgetAlertConfig,...e},this.saveToStorage("notificationService_budgetConfig",JSON.parse(JSON.stringify(this.budgetAlertConfig)))}updateTransactionConfig(e){this.transactionAlertConfig={...this.transactionAlertConfig,...e},this.saveToStorage("notificationService_transactionConfig",JSON.parse(JSON.stringify(this.transactionAlertConfig)))}updateGoalConfig(e){this.goalCelebrationConfig={...this.goalCelebrationConfig,...e},this.saveToStorage("notificationService_goalConfig",JSON.parse(JSON.stringify(this.goalCelebrationConfig)))}getRules(){return[...this.rules]}addRule(e){const t={...e,id:`rule-${Date.now()}`,created:new Date};return this.rules.push(t),this.saveRules(),t}updateRule(e,t){const n=this.rules.findIndex(t=>t.id===e);return-1!==n&&(this.rules[n]={...this.rules[n],...t},this.saveRules(),!0)}deleteRule(e){const t=this.rules.findIndex(t=>t.id===e);return-1!==t&&(this.rules.splice(t,1),this.saveRules(),!0)}getBudgetConfig(){return{...this.budgetAlertConfig}}getTransactionConfig(){return{...this.transactionAlertConfig}}getGoalConfig(){return{...this.goalCelebrationConfig}}},qx=Gi.createContext(void 0),Gx="#f9fafb",Vx="#f3f4f6",Hx="#e5e7eb",Yx="#d1d5db",Kx="#9ca3af",Zx="#6b7280",Jx="#4b5563",Qx="#374151",Xx="#1f2937",ek="#111827",tk="#93c5fd",nk="#60a5fa",rk="#3b82f6",ak="#2563eb",sk="#1d4ed8",ik="#86efac",ok="#4ade80",ck="#22c55e",lk="#16a34a",uk="#15803d",dk="#166534",hk="#f87171",pk="#dc2626",gk="#d8b4fe",mk="#c084fc",fk="#a855f7",yk="#9333ea",vk="#7c3aed",bk="#6b21a8",wk={xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem"},xk={thin:"100",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800"},kk={none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2"},_k={0:"0px",px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem"},Sk={none:"0px",sm:"0.125rem",DEFAULT:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},jk={none:"none",sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",DEFAULT:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)",inner:"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)"},Ik={fast:"150ms",normal:"300ms",slow:"500ms"},Ck={linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)",inOut:"cubic-bezier(0.4, 0, 0.2, 1)"},Ek={background:{primary:Gx,secondary:"#ffffff",tertiary:Vx,elevated:"#ffffff",overlay:"rgba(0, 0, 0, 0.5)"},surface:{primary:"#ffffff",secondary:Gx,tertiary:Vx,inverse:ek},text:{primary:ek,secondary:Qx,tertiary:Zx,inverse:"#ffffff",link:ak,disabled:Kx},border:{primary:Hx,secondary:Yx,tertiary:Vx,focus:rk},interactive:{primary:ak,primaryHover:sk,primaryActive:"#1e40af",secondary:Jx,secondaryHover:Qx,secondaryActive:Xx},status:{success:lk,successBackground:"#f0fdf4",warning:"#ca8a04",warningBackground:"#fefce8",error:pk,errorBackground:"#fef2f2",info:ak,infoBackground:"#eff6ff"},financial:{income:lk,expense:pk,transfer:ak,investment:yk,savings:uk}},Tk={background:{primary:ek,secondary:Xx,tertiary:"#030712",elevated:Xx,overlay:"rgba(0, 0, 0, 0.7)"},surface:{primary:Xx,secondary:Qx,tertiary:ek,inverse:Gx},text:{primary:Gx,secondary:Yx,tertiary:Kx,inverse:ek,link:nk,disabled:Zx},border:{primary:Qx,secondary:Jx,tertiary:Xx,focus:nk},interactive:{primary:rk,primaryHover:nk,primaryActive:ak,secondary:Kx,secondaryHover:Yx,secondaryActive:Zx},status:{success:ok,successBackground:`${"#14532d"}20`,warning:"#facc15",warningBackground:`${"#713f12"}20`,error:hk,errorBackground:`${"#7f1d1d"}20`,info:nk,infoBackground:`${"#1e3a8a"}20`},financial:{income:ok,expense:hk,transfer:nk,investment:mk,savings:ck}},Nk={lightBlue:{id:"lightBlue",name:"Light Blue",description:"Clean and professional light theme",isDark:!1,colors:Ek},darkBlue:{id:"darkBlue",name:"Dark Blue",description:"Modern dark theme with blue accents",isDark:!0,colors:Tk},lightGreen:{id:"lightGreen",name:"Light Green",description:"Fresh and calming light theme",isDark:!1,colors:{...Ek,interactive:{primary:lk,primaryHover:uk,primaryActive:dk,secondary:ck,secondaryHover:lk,secondaryActive:uk},border:{...Ek.border,focus:ck}}},darkGreen:{id:"darkGreen",name:"Dark Green",description:"Nature-inspired dark theme",isDark:!0,colors:{...Tk,interactive:{primary:ck,primaryHover:ok,primaryActive:lk,secondary:ok,secondaryHover:ik,secondaryActive:ck},border:{...Tk.border,focus:ok}}},lightPurple:{id:"lightPurple",name:"Light Purple",description:"Creative and vibrant light theme",isDark:!1,colors:{...Ek,interactive:{primary:yk,primaryHover:vk,primaryActive:bk,secondary:fk,secondaryHover:yk,secondaryActive:vk},border:{...Ek.border,focus:fk}}},darkPurple:{id:"darkPurple",name:"Dark Purple",description:"Rich and elegant dark theme",isDark:!0,colors:{...Tk,interactive:{primary:fk,primaryHover:mk,primaryActive:yk,secondary:mk,secondaryHover:gk,secondaryActive:fk},border:{...Tk.border,focus:mk}}},highContrastLight:{id:"highContrastLight",name:"High Contrast Light",description:"Maximum readability light theme",isDark:!1,colors:{...Ek,background:{primary:"#ffffff",secondary:"#ffffff",tertiary:"#f5f5f5",elevated:"#ffffff",overlay:"rgba(0, 0, 0, 0.7)"},text:{primary:"#000000",secondary:Xx,tertiary:Qx,inverse:"#ffffff",link:sk,disabled:Zx},border:{primary:"#000000",secondary:Xx,tertiary:Jx,focus:sk}}},highContrastDark:{id:"highContrastDark",name:"High Contrast Dark",description:"Maximum readability dark theme",isDark:!0,colors:{...Tk,background:{primary:"#000000",secondary:"#0a0a0a",tertiary:"#000000",elevated:"#141414",overlay:"rgba(0, 0, 0, 0.9)"},text:{primary:"#ffffff",secondary:Hx,tertiary:Yx,inverse:"#000000",link:tk,disabled:Zx},border:{primary:"#ffffff",secondary:Yx,tertiary:Kx,focus:tk}}}},Ak=Gi.createContext(null);class Ok{static mapClerkUser(e){return{id:e.id,email:e.primaryEmailAddress?.emailAddress||"",name:e.fullName||void 0,imageUrl:e.imageUrl,createdAt:new Date(e.createdAt),lastSignIn:new Date(e.lastSignInAt||e.createdAt),emailVerified:"verified"===e.primaryEmailAddress?.verification?.status,hasPasskey:e.passkeyUsernames?.length>0,hasMFA:e.totpEnabled||e.backupCodeEnabled||e.twoFactorEnabled}}static hasEnhancedSecurity(e){return e.hasPasskey||e.hasMFA}static getSecurityScore(e){let t=0;return e.emailVerified&&(t+=30),e.hasPasskey&&(t+=40),e.hasMFA&&(t+=30),t}static getSecurityRecommendations(e){const t=[];return e.emailVerified||t.push("Verify your email address for better account recovery"),e.hasPasskey||t.push("Enable passkey login for instant, secure access"),e.hasMFA||t.push("Add an authenticator app for extra security"),t}static formatLastSignIn(e){const t=(new Date).getTime()-e.getTime(),n=Math.floor(t/36e5);if(n<1)return"Just now";if(n<24)return`${n} hour${n>1?"s":""} ago`;const r=Math.floor(n/24);return r<7?`${r} day${r>1?"s":""} ago`:e.toLocaleDateString()}}const Dk=Gi.createContext(void 0),Pk=Ji("app/loadAllData",async(e,{dispatch:t})=>{try{await Promise.all([t(cm()),t(hm(1e3)),t(Em()),t(fm()),t(vm()),t(Pm()),t(zm())]),t(wm())}catch(n){console.error("Failed to load data from Supabase:",n)}});Ji("app/addTransaction",async(e,{getState:t,dispatch:n})=>{const r=await n(pm(e));if(pm.fulfilled.match(r)){const a=r.payload,s=t();if(e.accountId){const t=s.accounts.accounts.find(t=>t.id===e.accountId);if(t){const r=jr([...s.transactions.transactions,a],e.accountId,t.openingBalance||0);n(um({id:e.accountId,updates:{balance:r}}))}}if("expense"===e.type&&e.category){const t=s.budgets.budgets.filter(t=>t.category===e.category&&Cr(e.date,t));for(const e of t){const t=Ir([...s.transactions.transactions,a],e);n(Im({id:e.id,spent:t}))}}Er(a,s,n),e.tags&&e.tags.length>0&&n(Rm(e.tags))}}),Ji("app/updateTransaction",async({id:e,updates:t},{getState:n,dispatch:r})=>{const a=n().transactions.transactions.find(t=>t.id===e);if(!a)return;const s=await r(gm({id:e,updates:t}));if(gm.fulfilled.match(s)){const e=s.payload,i=n(),o=new Set([a.accountId,t.accountId].filter(Boolean));for(const t of o){if(!t)continue;const e=i.accounts.accounts.find(e=>e.id===t);if(e){const n=jr(i.transactions.transactions,t,e.openingBalance||0);r(um({id:t,updates:{balance:n}}))}}!function(e,t,n,r){const a=new Set;"expense"===e.type&&e.category&&n.budgets.budgets.filter(t=>t.category===e.category&&Cr(e.date,t)).forEach(e=>a.add(e.id)),"expense"===t.type&&t.category&&n.budgets.budgets.filter(e=>e.category===t.category&&Cr(t.date,e)).forEach(e=>a.add(e.id));for(const s of a){const e=n.budgets.budgets.find(e=>e.id===s);if(e){const t=Ir(n.transactions.transactions,e);r(Im({id:s,spent:t}))}}}(a,e,i,r),Er(e,i,r),t.tags&&r(Rm(t.tags))}}),Ji("app/deleteTransaction",async(e,{getState:t,dispatch:n})=>{const r=t().transactions.transactions.find(t=>t.id===e);if(!r)return;const a=await n(mm(e));if(mm.fulfilled.match(a)){const e=t();if(r.accountId){const t=e.accounts.accounts.find(e=>e.id===r.accountId);if(t){const a=jr(e.transactions.transactions,r.accountId,t.openingBalance||0);n(um({id:r.accountId,updates:{balance:a}}))}}if("expense"===r.type&&r.category){const t=e.budgets.budgets.filter(e=>e.category===r.category&&Cr(r.date,e));for(const r of t){const t=Ir(e.transactions.transactions,r);n(Im({id:r.id,spent:t}))}}Er(r,e,n)}});var Mk,Lk="https://js.stripe.com",Rk="".concat(Lk,"/").concat("basil","/stripe.js"),Uk=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,zk=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,$k=function(e){return Uk.test(e)||zk.test(e)},Bk=function(e){var t=document.createElement("script");t.src="".concat(Rk).concat("");var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},Fk=null,Wk=null,qk=null,Gk=function(){return Mk||(Mk=(e=null,null!==Fk?Fk:(Fk=new Promise(function(t,n){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Lk,'"]')),t=0;t<e.length;t++){var n=e[t];if($k(n.src))return n}return null}();if(r&&e);else if(r){if(r&&null!==qk&&null!==Wk){var a;r.removeEventListener("load",qk),r.removeEventListener("error",Wk),null===(a=r.parentNode)||void 0===a||a.removeChild(r),r=Bk()}}else r=Bk();qk=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),Wk=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",qk),r.addEventListener("error",Wk)}catch(s){return void n(s)}else t(null)})).catch(function(e){return Fk=null,Promise.reject(e)})).catch(function(e){return Mk=null,Promise.reject(e)}));var e};Promise.resolve().then(function(){return Gk()}).catch(function(e){});class Vk{static stripe=null;static getStripe(){if(!this.stripe)throw new Error("Stripe publishable key not found in environment variables");return this.stripe}static getSubscriptionPlans(){return[{id:"free",name:"Free",tier:"free",description:"Perfect for getting started with personal finance",price:0,currency:"gbp",interval:"month",stripePriceId:"",features:["5 accounts maximum","100 transactions per month","3 budgets","3 financial goals","Basic reporting","Mobile app access"],maxAccounts:5,maxTransactions:100,maxBudgets:3,maxGoals:3,advancedReports:!1,csvExport:!1,apiAccess:!1,prioritySupport:!1},{id:"premium",name:"Premium",tier:"premium",description:"Advanced features for serious financial management",price:7.99,currency:"gbp",interval:"month",stripePriceId:"",features:["Unlimited accounts","Unlimited transactions","Unlimited budgets","Unlimited goals","Advanced analytics","CSV export","Investment tracking","Bill reminders","Email support"],isPopular:!0,maxAccounts:-1,maxTransactions:-1,maxBudgets:-1,maxGoals:-1,advancedReports:!0,csvExport:!0,apiAccess:!1,prioritySupport:!1},{id:"pro",name:"Pro",tier:"pro",description:"Professional-grade tools for power users and businesses",price:15.99,currency:"gbp",interval:"month",stripePriceId:"",features:["Everything in Premium","API access","Custom reports","Advanced forecasting","Multi-currency support","Priority support","Custom categories","Bulk operations","White-label options"],maxAccounts:-1,maxTransactions:-1,maxBudgets:-1,maxGoals:-1,advancedReports:!0,csvExport:!0,apiAccess:!0,prioritySupport:!0}]}static getFeatureLimits(e){const t=this.getSubscriptionPlans().find(t=>t.tier===e);return t?{maxAccounts:t.maxAccounts||5,maxTransactions:t.maxTransactions||100,maxBudgets:t.maxBudgets||3,maxGoals:t.maxGoals||3,advancedReports:t.advancedReports||!1,csvExport:t.csvExport||!1,apiAccess:t.apiAccess||!1,prioritySupport:t.prioritySupport||!1}:{maxAccounts:5,maxTransactions:100,maxBudgets:3,maxGoals:3,advancedReports:!1,csvExport:!1,apiAccess:!1,prioritySupport:!1}}static hasFeatureAccess(e,t){const n=this.getFeatureLimits(e);return!0===n[t]||-1===n[t]}static isWithinLimits(e,t,n){const r=this.getFeatureLimits(e)[n];return-1===r||t<r}static async createCheckoutSession(e,t){try{const n=await fetch("http://localhost:3000/api/subscriptions/create-checkout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({planType:e,successUrl:`${window.location.origin}/subscription?success=true`,cancelUrl:`${window.location.origin}/subscription`})});if(!n.ok){const e=await n.json();throw new Error(e.error||`Failed to create checkout: ${n.statusText}`)}return(await n.json()).data}catch(n){throw console.error("Error creating checkout session:",n),n}}static async createSubscription(e){throw new Error("Use createCheckoutSession instead")}static async updateSubscription(e,t){try{const n=await fetch(`/api/subscriptions/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to update subscription: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Error updating subscription:",n),n}}static async cancelSubscription(e,t=!0){return this.updateSubscription(e,{cancelAtPeriodEnd:t})}static async getSubscriptionPreview(e,t){try{const n=await fetch(`/api/subscriptions/${e}/preview?priceId=${t}`);if(!n.ok)throw new Error(`Failed to get subscription preview: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Error getting subscription preview:",n),n}}static async getCurrentSubscription(e){try{if(!e)return console.warn("No authentication token provided"),null;const t=await fetch("http://localhost:3000/api/subscriptions/status",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(404===t.status)return null;if(!t.ok)throw new Error(`Failed to get current subscription: ${t.statusText}`);const n=await t.json();return n.success&&n.data.hasSubscription?{id:n.data.subscriptionId,userId:"",tier:n.data.planType,status:n.data.status,stripeCustomerId:n.data.customerId,stripeSubscriptionId:n.data.subscriptionId,currentPeriodStart:n.data.currentPeriodStart,currentPeriodEnd:n.data.currentPeriodEnd,trialEnd:n.data.trialEnd,cancelAtPeriodEnd:n.data.cancelAtPeriodEnd}:null}catch(t){throw console.error("Error getting current subscription:",t),t}}static async getBillingHistory(){try{const e=await fetch("/api/billing/history");if(!e.ok)throw new Error(`Failed to get billing history: ${e.statusText}`);return await e.json()}catch(e){throw console.error("Error getting billing history:",e),e}}static async addPaymentMethod(e){try{const t=await fetch("/api/billing/payment-methods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentMethodId:e})});if(!t.ok)throw new Error(`Failed to add payment method: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error adding payment method:",t),t}}static async setDefaultPaymentMethod(e){try{const t=await fetch(`/api/billing/payment-methods/${e}/default`,{method:"PUT"});if(!t.ok)throw new Error(`Failed to set default payment method: ${t.statusText}`)}catch(t){throw console.error("Error setting default payment method:",t),t}}static async removePaymentMethod(e){try{const t=await fetch(`/api/billing/payment-methods/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to remove payment method: ${t.statusText}`)}catch(t){throw console.error("Error removing payment method:",t),t}}static async createPortalSession(){try{const e=await fetch("/api/billing/portal",{method:"POST"});if(!e.ok)throw new Error(`Failed to create portal session: ${e.statusText}`);const{url:t}=await e.json();return t}catch(e){throw console.error("Error creating portal session:",e),e}}static formatPrice(e,t="usd"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t.toUpperCase()}).format(e)}static getPlanByTier(e){return this.getSubscriptionPlans().find(t=>t.tier===e)}static isUpgrade(e,t){const n=["free","premium","pro"],r=n.indexOf(e);return n.indexOf(t)>r}static isDowngrade(e,t){const n=["free","premium","pro"],r=n.indexOf(e);return n.indexOf(t)<r}}class Hk{static async getCurrentSubscription(e){try{const{data:t,error:n}=await zg.from("subscriptions").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(1).single();if(n&&"PGRST116"!==n.code)throw n;return t?{id:t.id,userId:t.user_id,tier:t.tier,status:t.status,stripeCustomerId:t.stripe_customer_id,stripeSubscriptionId:t.stripe_subscription_id,stripePriceId:t.stripe_price_id,currentPeriodStart:t.current_period_start?new Date(t.current_period_start):void 0,currentPeriodEnd:t.current_period_end?new Date(t.current_period_end):void 0,trialStart:t.trial_start?new Date(t.trial_start):void 0,trialEnd:t.trial_end?new Date(t.trial_end):void 0,cancelledAt:t.cancelled_at?new Date(t.cancelled_at):void 0,cancelAtPeriodEnd:t.cancel_at_period_end,createdAt:new Date(t.created_at),updatedAt:new Date(t.updated_at)}:null}catch(t){throw console.error("Error getting current subscription:",t),t}}static async upsertSubscription(e){try{const t={user_id:e.userId,stripe_subscription_id:e.stripeSubscriptionId,stripe_customer_id:e.stripeCustomerId,stripe_price_id:e.stripePriceId,tier:e.tier,status:e.status,current_period_start:e.currentPeriodStart?.toISOString(),current_period_end:e.currentPeriodEnd?.toISOString(),trial_start:e.trialStart?.toISOString(),trial_end:e.trialEnd?.toISOString(),cancelled_at:e.cancelledAt?.toISOString(),cancel_at_period_end:e.cancelAtPeriodEnd},{data:n,error:r}=await zg.from("subscriptions").upsert(t,{onConflict:"stripe_subscription_id"}).select().single();if(r)throw r;return{id:n.id,userId:n.user_id,tier:n.tier,status:n.status,stripeCustomerId:n.stripe_customer_id,stripeSubscriptionId:n.stripe_subscription_id,stripePriceId:n.stripe_price_id,currentPeriodStart:n.current_period_start?new Date(n.current_period_start):void 0,currentPeriodEnd:n.current_period_end?new Date(n.current_period_end):void 0,trialStart:n.trial_start?new Date(n.trial_start):void 0,trialEnd:n.trial_end?new Date(n.trial_end):void 0,cancelledAt:n.cancelled_at?new Date(n.cancelled_at):void 0,cancelAtPeriodEnd:n.cancel_at_period_end,createdAt:new Date(n.created_at),updatedAt:new Date(n.updated_at)}}catch(t){throw console.error("Error upserting subscription:",t),t}}static async getSubscriptionUsage(e){try{const{data:t,error:n}=await zg.from("subscription_usage").select("*").eq("user_id",e).single();if(n&&"PGRST116"!==n.code)throw n;if(!t){const{data:t,error:n}=await zg.from("subscription_usage").insert({user_id:e,accounts_count:0,transactions_count:0,budgets_count:0,goals_count:0}).select().single();if(n)throw n;return{accounts:t.accounts_count,transactions:t.transactions_count,budgets:t.budgets_count,goals:t.goals_count,lastCalculated:new Date(t.last_calculated)}}return{accounts:t.accounts_count,transactions:t.transactions_count,budgets:t.budgets_count,goals:t.goals_count,lastCalculated:new Date(t.last_calculated)}}catch(t){throw console.error("Error getting subscription usage:",t),t}}static async updateSubscriptionUsage(e,t){try{const n={last_calculated:(new Date).toISOString()};void 0!==t.accounts&&(n.accounts_count=t.accounts),void 0!==t.transactions&&(n.transactions_count=t.transactions),void 0!==t.budgets&&(n.budgets_count=t.budgets),void 0!==t.goals&&(n.goals_count=t.goals);const{error:r}=await zg.from("subscription_usage").upsert({user_id:e,...n},{onConflict:"user_id"});if(r)throw r}catch(n){throw console.error("Error updating subscription usage:",n),n}}static async refreshUsageCounts(e){try{const{error:t}=await zg.rpc("update_usage_counts",{p_user_id:e});if(t)throw t}catch(t){throw console.error("Error refreshing usage counts:",t),t}}static async hasFeatureAccess(e,t){try{const{data:n,error:r}=await zg.rpc("has_feature_access",{p_user_id:e,p_feature:t});if(r)throw r;return n}catch(n){return console.error("Error checking feature access:",n),!1}}static async getPaymentMethods(e){try{const{data:t,error:n}=await zg.from("payment_methods").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return(t||[]).map(e=>({id:e.stripe_payment_method_id,last4:e.last4,brand:e.brand,expiryMonth:e.expiry_month,expiryYear:e.expiry_year,isDefault:e.is_default}))}catch(t){throw console.error("Error getting payment methods:",t),t}}static async addPaymentMethod(e,t){try{const{error:n}=await zg.from("payment_methods").insert({user_id:e,stripe_payment_method_id:t.id,last4:t.last4,brand:t.brand,expiry_month:t.expiryMonth,expiry_year:t.expiryYear,is_default:!1});if(n)throw n}catch(n){throw console.error("Error adding payment method:",n),n}}static async setDefaultPaymentMethod(e,t){try{await zg.from("payment_methods").update({is_default:!1}).eq("user_id",e);const{error:n}=await zg.from("payment_methods").update({is_default:!0}).eq("user_id",e).eq("stripe_payment_method_id",t);if(n)throw n}catch(n){throw console.error("Error setting default payment method:",n),n}}static async removePaymentMethod(e,t){try{const{error:n}=await zg.from("payment_methods").delete().eq("user_id",e).eq("stripe_payment_method_id",t);if(n)throw n}catch(n){throw console.error("Error removing payment method:",n),n}}static async getInvoices(e){try{const{data:t,error:n}=await zg.from("invoices").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return(t||[]).map(e=>({id:e.stripe_invoice_id,amount:parseFloat(e.amount),currency:e.currency,status:e.status,paidAt:e.paid_at?new Date(e.paid_at):void 0,dueDate:e.due_date?new Date(e.due_date):void 0,invoiceUrl:e.invoice_url,invoicePdf:e.invoice_pdf,description:e.description,createdAt:new Date(e.created_at)}))}catch(t){throw console.error("Error getting invoices:",t),t}}static async addInvoice(e,t){try{const{error:n}=await zg.from("invoices").insert({user_id:e,stripe_invoice_id:t.id,amount:t.amount,currency:t.currency,status:t.status,paid_at:t.paidAt?.toISOString(),due_date:t.dueDate?.toISOString(),invoice_url:t.invoiceUrl,invoice_pdf:t.invoicePdf,description:t.description});if(n)throw n}catch(n){throw console.error("Error adding invoice:",n),n}}static async createUserProfile(e,t,n){try{const{error:r}=await zg.from("user_profiles").insert({clerk_user_id:e,email:t,full_name:n,subscription_tier:"free",subscription_status:"active"});if(r&&"23505"!==r.code)throw r}catch(r){throw console.error("Error creating user profile:",r),r}}static async getUserProfile(e){try{const{data:t,error:n}=await zg.from("user_profiles").select("*").eq("clerk_user_id",e).single();if(n)throw n;return t}catch(t){throw console.error("Error getting user profile:",t),t}}}class Yk{static stripe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Date.now();return Gk().then(function(e){return function(e,t,n){if(null===e)return null;t[0].match(/^pk_test/);var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})}(r,n),r}(e,t,r)})}("");static async createSubscription(e){try{throw new Error("Subscription creation requires a backend API. This demo shows the frontend components only. In production, implement the following backend endpoints:\n- POST /api/subscriptions (create subscription)\n- PATCH /api/subscriptions/:id (update subscription)\n- GET /api/subscriptions/current (get current subscription)\n- POST /api/billing/portal (create portal session)")}catch(t){throw console.error("Error creating subscription:",t),t}}static async updateSubscription(e,t){try{throw new Error("Subscription updates require a backend API. See createSubscription method for implementation guidance.")}catch(n){throw console.error("Error updating subscription:",n),n}}static async getCurrentSubscription(e){try{const t=await Hk.getUserProfile(e);return t?await Hk.getCurrentSubscription(t.id):null}catch(t){return console.error("Error getting current subscription:",t),null}}static async getBillingHistory(e){try{const t=await Hk.getUserProfile(e);if(!t)throw new Error("User profile not found");const[n,r]=await Promise.all([Hk.getPaymentMethods(t.id),Hk.getInvoices(t.id)]),a=await Hk.getCurrentSubscription(t.id);return{invoices:r,paymentMethods:n,nextBillingDate:a?.currentPeriodEnd,totalPaid:r.filter(e=>"paid"===e.status).reduce((e,t)=>e+t.amount,0)}}catch(t){throw console.error("Error getting billing history:",t),t}}static async createPortalSession(){try{throw new Error("Customer portal requires a backend API endpoint.\nImplement POST /api/billing/portal that:\n1. Gets user from session\n2. Creates Stripe portal session\n3. Returns portal URL")}catch(e){throw console.error("Error creating portal session:",e),e}}static async createDemoSubscription(e,t){try{const n=await Hk.getUserProfile(e);if(!n)throw new Error("User profile not found");const r={userId:n.id,tier:t,status:"trialing",stripeCustomerId:`cus_demo_${Date.now()}`,stripeSubscriptionId:`sub_demo_${Date.now()}`,stripePriceId:"premium"===t?"price_premium":"price_pro",trialStart:new Date,trialEnd:new Date(Date.now()+12096e5),currentPeriodStart:new Date,currentPeriodEnd:new Date(Date.now()+2592e6),cancelAtPeriodEnd:!1};return await Hk.upsertSubscription(r)}catch(n){throw console.error("Error creating demo subscription:",n),n}}static async cancelDemoSubscription(e){try{const t=await Hk.getUserProfile(e);if(!t)throw new Error("User profile not found");const n=await Hk.getCurrentSubscription(t.id);if(!n)throw new Error("No subscription found");const r={...n,status:"cancelled",cancelledAt:new Date,cancelAtPeriodEnd:!0};return await Hk.upsertSubscription(r)}catch(t){throw console.error("Error canceling demo subscription:",t),t}}static async initializeUserProfile(e,t,n){try{await Hk.createUserProfile(e,t,n);const r=await Hk.getUserProfile(e);r&&await Hk.refreshUsageCounts(r.id)}catch(r){console.error("Error initializing user profile:",r)}}static async checkFeatureAccess(e,t){try{const n=await Hk.getUserProfile(e);return!!n&&await Hk.hasFeatureAccess(n.id,t)}catch(n){return console.error("Error checking feature access:",n),!1}}static async getUsageInfo(e){try{const t=await Hk.getUserProfile(e);if(!t)throw new Error("User profile not found");const[n,r]=await Promise.all([Hk.getCurrentSubscription(t.id),Hk.getSubscriptionUsage(t.id)]);return{subscription:n,usage:r,tier:n?.tier||"free"}}catch(t){throw console.error("Error getting usage info:",t),t}}}const Kk=Gi.createContext(void 0),Zk=({size:e=20,color:t="currentColor",hoverColor:n,onClick:r,className:a="",title:s,children:i,viewBox:o="0 0 24 24",style:c,strokeWidth:l,"data-testid":u})=>{const[d,h]=Vi.useState(!1);return bo.jsxs("svg",{width:e,height:e,viewBox:o,fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:r,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:`transition-all duration-200 ${r?"cursor-pointer":""} ${a}`,style:{color:d&&n?n:t,...c},strokeWidth:l,role:r?"button":s?"img":void 0,"aria-label":s,"data-testid":u,children:[s&&bo.jsx("title",{children:s}),i]})},Jk=e=>bo.jsxs(Zk,{...e,children:[bo.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none"}),bo.jsx("path",{d:"M12 16V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),bo.jsx("path",{d:"M12 8H12.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),Qk={required:"This field is required","Description is required":"Please enter a description for this transaction","Amount must be greater than 0":"Please enter a valid amount greater than zero","Category is required":"Please select a category for this transaction","Invalid account ID":"Please select a valid account","Date must be in YYYY-MM-DD format":"Please enter a valid date","Invalid decimal number":"Please enter a valid number (e.g., 10.50)","Notes must be less than 1000 characters":"Your notes are too long. Please keep them under 1000 characters","Description must be less than 500 characters":"Description is too long. Please keep it under 500 characters","Account not found":"The selected account no longer exists. Please refresh and try again","Insufficient balance":"This account doesn't have enough funds for this transaction","Account is locked":"This account is currently locked. Please unlock it in Account Settings",NetworkError:"Connection problem. Please check your internet and try again","Failed to fetch":"Unable to connect to the server. Please try again","Network request failed":"Connection lost. Your changes will be saved when you're back online",timeout:"This is taking longer than expected. Please try again",Unauthorized:"Your session has expired. Please sign in again",Forbidden:"You don't have permission to perform this action","Invalid credentials":"The email or password you entered is incorrect","Email already exists":"An account with this email already exists","unique constraint":"This item already exists. Please use a different name","foreign key constraint":"This item is being used elsewhere and cannot be deleted",SQLITE_BUSY:"The database is busy. Please wait a moment and try again","File too large":"This file is too large. Please choose a file under 5MB","Invalid file type":"This file type is not supported. Please use JPG, PNG, or PDF","Upload failed":"Unable to upload the file. Please try again","Something went wrong":"An unexpected error occurred. Please try again","Invalid input":"Please check your input and try again","Operation failed":"Unable to complete this action. Please try again"},Xk=Gi.createContext(void 0),e_={dashboard:"Dashboard",transactions:"Transactions",accounts:"Accounts",budget:"Budget",goals:"Goals",investments:"Investments","enhanced-investments":"Investment Analytics",analytics:"Analytics","ai-analytics":"AI Analytics","custom-reports":"Custom Reports","tax-planning":"Tax Planning",household:"Household","business-features":"Business Features","financial-planning":"Financial Planning","data-intelligence":"Data Intelligence",summaries:"Summaries",settings:"Settings",app:"App Settings",data:"Data Management",categories:"Categories",tags:"Tags",security:"Security","enhanced-import":"Enhanced Import","export-manager":"Export Manager",documents:"Documents","open-banking":"Open Banking",reconciliation:"Reconciliation","ai-features":"AI Features"},t_=[{href:"#main-content",label:"Skip to main content"},{href:"#navigation",label:"Skip to navigation"},{href:"#search",label:"Skip to search"}],n_=({links:e=t_})=>bo.jsx("nav",{className:"skip-links","aria-label":"Skip links",children:e.map((e,t)=>bo.jsx("a",{href:e.href,className:"skip-link",style:{marginLeft:t>0?"8px":"0"},children:e.label},e.href))}),r_=(e,t)=>t.some(t=>e instanceof t);let a_,s_;const i_=new WeakMap,o_=new WeakMap,c_=new WeakMap;let l_={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return i_.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};const u_=e=>c_.get(e),d_=["get","getKey","getAll","getAllKeys","count"],h_=["put","add","delete","clear"],p_=new Map;Jr(e=>({...e,get:(t,n,r)=>ea(t,n)||e.get(t,n,r),has:(t,n)=>!!ea(t,n)||e.has(t,n)}));const g_=["continue","continuePrimaryKey","advance"],m_={},f_=new WeakMap,y_=new WeakMap,v_={get(e,t){if(!g_.includes(t))return e[t];let n=m_[t];return n||(n=m_[t]=function(...e){f_.set(this,y_.get(this)[t](...e))}),n}};Jr(e=>({...e,get:(t,n,r)=>na(t,n)?ta:e.get(t,n,r),has:(t,n)=>na(t,n)||e.has(t,n)}));const b_=new class{db=null;syncInProgress=!1;DB_NAME="WealthTrackerOffline";DB_VERSION=1;async init(){this.db||(this.db=await function(e,t,{blocked:n,upgrade:r,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=Xr(i);return r&&i.addEventListener("upgradeneeded",e=>{r(Xr(i.result),e.oldVersion,e.newVersion,Xr(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}(this.DB_NAME,this.DB_VERSION,{upgrade(e){if(!e.objectStoreNames.contains("transactions")){const t=e.createObjectStore("transactions",{keyPath:"id"});t.createIndex("by-date","date"),t.createIndex("by-sync-status","syncStatus")}e.objectStoreNames.contains("accounts")||e.createObjectStore("accounts",{keyPath:"id"}),e.objectStoreNames.contains("budgets")||e.createObjectStore("budgets",{keyPath:"id"}),e.objectStoreNames.contains("goals")||e.createObjectStore("goals",{keyPath:"id"}),e.objectStoreNames.contains("offlineQueue")||e.createObjectStore("offlineQueue",{keyPath:"id"}),e.objectStoreNames.contains("conflicts")||e.createObjectStore("conflicts",{keyPath:"id"})}}),this.setupEventListeners())}setupEventListeners(){window.addEventListener("online",()=>{this.syncOfflineData()}),document.addEventListener("visibilitychange",()=>{!document.hidden&&navigator.onLine&&this.syncOfflineData()}),"serviceWorker"in navigator&&"SyncManager"in window&&navigator.serviceWorker.ready.then(e=>e.sync.register("sync-offline-data")).catch(e=>{console.error("Failed to register background sync:",e)})}async saveTransaction(e,t=!1){this.db||await this.init();const n=this.db.transaction(["transactions","offlineQueue"],"readwrite");await n.objectStore("transactions").put({...e,syncStatus:t?"pending":"synced"}),t&&await n.objectStore("offlineQueue").put({id:`transaction-${e.id}-${Date.now()}`,type:"create",entity:"transaction",data:e,timestamp:Date.now(),retries:0}),await n.done}async getTransactions(e){this.db||await this.init();const t=await this.db.getAll("transactions");return e?t.filter(t=>t.accountId===e):t}async updateTransaction(e,t,n=!1){this.db||await this.init();const r=this.db.transaction(["transactions","offlineQueue"],"readwrite"),a=await r.objectStore("transactions").get(e);if(a){const s={...a,...t,syncStatus:n?"pending":"synced"};await r.objectStore("transactions").put(s),n&&await r.objectStore("offlineQueue").put({id:`transaction-${e}-${Date.now()}`,type:"update",entity:"transaction",data:s,timestamp:Date.now(),retries:0})}await r.done}async deleteTransaction(e,t=!1){this.db||await this.init();const n=this.db.transaction(["transactions","offlineQueue"],"readwrite");await n.objectStore("transactions").delete(e),t&&await n.objectStore("offlineQueue").put({id:`transaction-${e}-${Date.now()}`,type:"delete",entity:"transaction",data:{id:e},timestamp:Date.now(),retries:0}),await n.done}async syncOfflineData(){if(!this.syncInProgress&&navigator.onLine){this.syncInProgress=!0;try{this.db||await this.init();const t=await this.db.getAll("offlineQueue");t.sort((e,t)=>e.timestamp-t.timestamp),console.log(`Syncing ${t.length} offline items`);for(const n of t)try{await this.syncQueueItem(n),await this.db.delete("offlineQueue",n.id)}catch(e){console.error(`Failed to sync item ${n.id}:`,e),n.retries+=1,n.lastError=e instanceof Error?e.message:"Unknown error",n.retries>3?(await this.handleSyncConflict(n),await this.db.delete("offlineQueue",n.id)):await this.db.put("offlineQueue",n)}window.dispatchEvent(new CustomEvent("offline-sync-complete",{detail:{itemsSynced:t.length}}))}finally{this.syncInProgress=!1}}}async syncQueueItem(e){const t=`/api/${e.entity}${"delete"===e.type?`/${e.data.id}`:""}`,n="create"===e.type?"POST":"update"===e.type?"PUT":"DELETE",r=await fetch(t,{method:n,headers:{"Content-Type":"application/json"},body:"delete"!==e.type?JSON.stringify(e.data):void 0});if(!r.ok)throw new Error(`Sync failed: ${r.statusText}`);"transaction"===e.entity&&"delete"!==e.type&&await this.db.put("transactions",{...e.data,syncStatus:"synced"})}async handleSyncConflict(e){this.db||await this.init(),await this.db.put("conflicts",{id:`conflict-${e.id}`,entity:e.entity,localData:e.data,serverData:null,timestamp:Date.now(),resolved:!1}),window.dispatchEvent(new CustomEvent("offline-sync-conflict",{detail:{entity:e.entity,data:e.data}}))}async getConflicts(){return this.db||await this.init(),this.db.getAll("conflicts")}async resolveConflict(e,t){this.db||await this.init();const n=await this.db.get("conflicts",e);n&&("local"===t&&await this.db.put("offlineQueue",{id:`resolved-${e}`,type:"update",entity:n.entity,data:n.localData,timestamp:Date.now(),retries:0}),n.resolved=!0,await this.db.put("conflicts",n))}async clearOldData(e=30){this.db||await this.init();const t=new Date;t.setDate(t.getDate()-e);const n=this.db.transaction(["transactions"],"readwrite"),r=await n.objectStore("transactions").getAll();for(const a of r)new Date(a.date)<t&&"synced"===a.syncStatus&&await n.objectStore("transactions").delete(a.id);await n.done}async getOfflineQueueCount(){return this.db||await this.init(),this.db.count("offlineQueue")}async clearOfflineData(){this.db||await this.init();const e=["transactions","accounts","budgets","goals","offlineQueue","conflicts"],t=this.db.transaction(e,"readwrite");for(const n of e)await t.objectStore(n).clear();await t.done}},w_={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CLERK_PUBLISHABLE_KEY:"pk_test_bWF0dXJlLXJhdHRsZXNuYWtlLTc1LmNsZXJrLmFjY291bnRzLmRldiQ",VITE_SENTRY_DSN:"",VITE_STRIPE_PUBLISHABLE_KEY:"",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xYmFjcmpqZ2RqYWJ5Z3F0Y2FoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIzNDgxNjgsImV4cCI6MjA2NzkyNDE2OH0.teKfoCvodwO719cNddtlC7k-gWoHu_Ntd64mo6XkDq4",VITE_SUPABASE_SERVICE_ROLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xYmFjcmpqZ2RqYWJ5Z3F0Y2FoIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MjM0ODE2OCwiZXhwIjoyMDY3OTI0MTY4fQ.mEya-U5K8xmO_xa3Ts-3aiTVNha1CU3FGCpQrSZ_Oy4",VITE_SUPABASE_URL:"https://nqbacrjjgdjabygqtcah.supabase.co"},x_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));let k_=null;const __=new class{OFFLINE_QUEUE_STORE="offline-queue";OFFLINE_DATA_STORE="offline-data";CONFLICT_STORE="conflicts";SYNC_META_STORE="sync-metadata";syncInProgress=!1;offlineState={isOffline:!navigator.onLine,pendingChanges:0,lastSync:null,syncInProgress:!1};constructor(){this.initializeOfflineDetection(),this.initializeStores()}initializeOfflineDetection(){window.addEventListener("online",()=>this.handleOnline()),window.addEventListener("offline",()=>this.handleOffline()),setInterval(()=>this.checkConnectivity(),3e4)}async initializeStores(){try{await Hg.put("offline-queue",{id:"init",initialized:!0}),await Hg.put("offline-data",{id:"init",initialized:!0}),await Hg.put("conflicts",{id:"init",initialized:!0}),await Hg.put("sync-meta",{key:"lastSync",timestamp:null})}catch(e){console.error("[OfflineStorage] Failed to initialize stores:",e)}}async checkConnectivity(){try{return(await fetch("/api/health",{method:"HEAD",cache:"no-cache"})).ok}catch{return!1}}async handleOnline(){this.offlineState.isOffline=!1,this.notifyStateChange(),await this.syncOfflineData()}handleOffline(){this.offlineState.isOffline=!0,this.notifyStateChange(),this.cacheEssentialData()}async queueOfflineOperation(e){const t={...e,id:crypto.randomUUID(),timestamp:Date.now(),synced:!1,retries:0};return await Hg.put(this.OFFLINE_QUEUE_STORE,t),this.offlineState.pendingChanges++,this.notifyStateChange(),this.offlineState.isOffline||this.syncOfflineData(),t.id}async getPendingOperations(){const e=await Hg.getAllKeys(this.OFFLINE_QUEUE_STORE),t=[];for(const n of e)if("init"!==n){const e=await Hg.get(this.OFFLINE_QUEUE_STORE,n);e&&!e.synced&&t.push(e)}return t.sort((e,t)=>e.timestamp-t.timestamp)}async syncOfflineData(){if(!this.syncInProgress&&!this.offlineState.isOffline){this.syncInProgress=!0,this.offlineState.syncInProgress=!0,this.notifyStateChange();try{const t=await this.getPendingOperations();console.log(`[OfflineStorage] Syncing ${t.length} operations`);for(const n of t)try{await this.syncOperation(n),n.synced=!0,await Hg.put(this.OFFLINE_QUEUE_STORE,n.id,n),await Hg.delete(this.OFFLINE_QUEUE_STORE,n.id),this.offlineState.pendingChanges--}catch(e){console.error(`[OfflineStorage] Failed to sync operation ${n.id}:`,e),409===e.status?await this.handleConflict(n,e.data):(n.retries++,n.error=e.message,n.retries>=3?console.error(`[OfflineStorage] Operation ${n.id} failed after 3 retries`):await Hg.put(this.OFFLINE_QUEUE_STORE,n))}this.offlineState.lastSync=new Date,await Hg.put(this.SYNC_META_STORE,{key:"lastSync",timestamp:this.offlineState.lastSync.toISOString()})}finally{this.syncInProgress=!1,this.offlineState.syncInProgress=!1,this.notifyStateChange()}}}async syncOperation(e){const t=this.getEndpoint(e),n=this.getMethod(e),r=await fetch(t,{method:n,headers:{"Content-Type":"application/json","X-Offline-Sync":"true","X-Client-Timestamp":e.timestamp.toString()},body:"DELETE"!==n?JSON.stringify(e.data):void 0});if(!r.ok){const e=await r.json();throw{status:r.status,data:e}}return r.json()}getEndpoint(e){const t="/api",n=e.data?.id;switch(e.entity){case"transaction":return"create"===e.type?`${t}/transactions`:`${t}/transactions/${n}`;case"account":return"create"===e.type?`${t}/accounts`:`${t}/accounts/${n}`;case"budget":return"create"===e.type?`${t}/budgets`:`${t}/budgets/${n}`;case"goal":return"create"===e.type?`${t}/goals`:`${t}/goals/${n}`;default:throw new Error(`Unknown entity type: ${e.entity}`)}}getMethod(e){switch(e.type){case"create":return"POST";case"update":return"PUT";case"delete":return"DELETE";default:throw new Error(`Unknown operation type: ${e.type}`)}}async handleConflict(e,t){const n={id:crypto.randomUUID(),operationId:e.id,clientData:e.data,serverData:t,entity:e.entity,timestamp:Date.now(),resolved:!1};await Hg.put(this.CONFLICT_STORE,n),this.notifyConflict(n);const r=await this.autoResolveConflict(e,t);r.resolved&&(e.data=r.resolved,await this.syncOperation(e),n.resolved=!0,await Hg.put(this.CONFLICT_STORE,n))}async autoResolveConflict(e,t){const n=e.data;switch(e.entity){case"transaction":return this.resolveTransactionConflict(n,t);case"account":return this.resolveAccountConflict(n,t);case"budget":return this.resolveBudgetConflict(n,t);default:return{client:n,server:t,resolved:null,strategy:"manual"}}}resolveTransactionConflict(e,t){return e.date!==t.date?{client:e,server:t,resolved:new Date(e.date).getTime()>new Date(t.date).getTime()?e:t,strategy:"client-wins"}:{client:e,server:t,resolved:null,strategy:"manual"}}resolveAccountConflict(e,t){const n=e.balance-e.originalBalance;return{client:e,server:t,resolved:{...t,balance:t.balance+n},strategy:"merge"}}resolveBudgetConflict(e,t){return{client:e,server:t,resolved:{...t,amount:Math.min(e.amount,t.amount),spent:Math.max(e.spent||0,t.spent||0)},strategy:"merge"}}async cacheEssentialData(){const e=[{key:"accounts",url:"/api/accounts"},{key:"transactions",url:"/api/transactions?limit=100"},{key:"categories",url:"/api/categories"},{key:"budgets",url:"/api/budgets"},{key:"tags",url:"/api/tags"}];for(const{key:n,url:r}of e)try{const e=await fetch(r);if(e.ok){const t=await e.json();await Hg.put(this.OFFLINE_DATA_STORE,{id:n,...t})}}catch(t){console.error(`[OfflineStorage] Failed to cache ${n}:`,t)}}async getCachedData(e){return await Hg.get(this.OFFLINE_DATA_STORE,e)}getOfflineState(){return{...this.offlineState}}async getConflicts(){const e=await Hg.getAllKeys(this.CONFLICT_STORE),t=[];for(const n of e)if("init"!==n){const e=await Hg.get(this.CONFLICT_STORE,n);e&&!e.resolved&&t.push(e)}return t}async resolveConflict(e,t){const n=await Hg.get(this.CONFLICT_STORE,e);if(!n)throw new Error("Conflict not found");const r=await Hg.get(this.OFFLINE_QUEUE_STORE,n.operationId);r&&(r.data=t,await this.syncOperation(r)),n.resolved=!0,n.resolutionData=t,await Hg.put(this.CONFLICT_STORE,n)}async clearOfflineData(){await Hg.clearStore(this.OFFLINE_QUEUE_STORE),await Hg.clearStore(this.OFFLINE_DATA_STORE),await Hg.clearStore(this.CONFLICT_STORE),this.offlineState.pendingChanges=0,this.offlineState.lastSync=null,this.notifyStateChange()}notifyStateChange(){window.dispatchEvent(new CustomEvent("offline-state-change",{detail:this.getOfflineState()}))}notifyConflict(e){window.dispatchEvent(new CustomEvent("sync-conflict",{detail:e}))}},S_=()=>{const[e,t]=Vi.useState(__.getOfflineState());return Vi.useEffect(()=>{const e=e=>{t(e.detail)};return window.addEventListener("offline-state-change",e),()=>window.removeEventListener("offline-state-change",e)},[]),e},j_=()=>({queue:Vi.useCallback(e=>__.queueOfflineOperation(e),[]),sync:Vi.useCallback(()=>__.syncOfflineData(),[]),getConflicts:Vi.useCallback(()=>__.getConflicts(),[]),resolveConflict:Vi.useCallback((e,t)=>__.resolveConflict(e,t),[])}),I_=()=>{const e=S_(),{sync:t,getConflicts:n}=j_(),[r,a]=Vi.useState([]),[s,i]=Vi.useState(!1);return Vi.useEffect(()=>{const e=async()=>{const e=await n();a(e)};e();const t=()=>e();return window.addEventListener("sync-conflict",t),()=>window.removeEventListener("sync-conflict",t)},[n]),e.isOffline||0!==e.pendingChanges||0!==r.length?bo.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:bo.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 min-w-[280px]",children:[bo.jsxs("div",{className:"flex items-center justify-between mb-3",children:[bo.jsx("div",{className:"flex items-center gap-2",children:e.isOffline?bo.jsxs(bo.Fragment,{children:[bo.jsx(Jb,{className:"h-5 w-5 text-red-500"}),bo.jsx("span",{className:"font-medium text-red-700 dark:text-red-400",children:"Offline Mode"})]}):bo.jsxs(bo.Fragment,{children:[bo.jsx(Zb,{className:"h-5 w-5 text-green-500"}),bo.jsx("span",{className:"font-medium text-green-700 dark:text-green-400",children:"Online"})]})}),e.pendingChanges>0&&bo.jsx("button",{onClick:async()=>{try{await t()}catch(e){console.error("Sync failed:",e)}},disabled:e.isOffline||e.syncInProgress,className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",title:"Sync now",children:bo.jsx(Zv,{className:"h-4 w-4 "+(e.syncInProgress?"animate-spin":"")})})]}),bo.jsxs("div",{className:"space-y-2 text-sm",children:[e.isOffline&&bo.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your changes will be saved locally and synced when you're back online."}),e.pendingChanges>0&&bo.jsxs("div",{className:"flex items-center justify-between",children:[bo.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending changes:"}),bo.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:e.pendingChanges})]}),r.length>0&&bo.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400",children:[bo.jsx(Rv,{className:"h-4 w-4"}),bo.jsxs("span",{children:[r.length," conflict",r.length>1?"s":""," need resolution"]})]}),e.lastSync&&bo.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Last synced: ",new Date(e.lastSync).toLocaleTimeString()]})]}),(e.pendingChanges>0||r.length>0)&&bo.jsxs(bo.Fragment,{children:[bo.jsxs("button",{onClick:()=>i(!s),className:"mt-3 text-xs text-blue-600 dark:text-blue-400 hover:underline",children:[s?"Hide":"Show"," details"]}),s&&bo.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[r.length>0&&bo.jsxs("div",{className:"mb-3",children:[bo.jsx("h4",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Conflicts:"}),bo.jsx("div",{className:"space-y-1",children:r.map(e=>bo.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center justify-between",children:[bo.jsxs("span",{children:[e.entity," conflict"]}),bo.jsx("button",{className:"text-blue-600 dark:text-blue-400 hover:underline",onClick:()=>{window.dispatchEvent(new CustomEvent("open-conflict-resolver",{detail:e}))},children:"Resolve"})]},e.id))})]}),bo.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:e.isOffline?"Working offline. Changes saved locally.":e.syncInProgress?"Syncing...":"Ready to sync"})]})]})]})}):null},C_=({isOpen:e,onClose:t,onSuccess:n})=>{const{queue:r}=j_(),{categories:a}=function(){const e=Gi.useContext(ex);if(!e)throw new Error("useCategories must be used within CategoryProvider");return e}(),{accounts:s}=function(){const e=Gi.useContext(Jw);if(!e)throw new Error("useAccounts must be used within AccountProvider");return e}(),[i,o]=Vi.useState({description:"",amount:"",type:"expense",category:"",accountId:"",date:(new Date).toISOString().split("T")[0],tags:[],notes:""}),[c,l]=Vi.useState(!1),[u,d]=Vi.useState(!1),[h,p]=Vi.useState(null);return e?bo.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:bo.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[bo.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b dark:border-gray-700 p-4",children:[bo.jsxs("div",{className:"flex items-center justify-between mb-2",children:[bo.jsx("h2",{className:"text-lg font-semibold",children:"Add Transaction (Offline)"}),bo.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"\u2715"})]}),bo.jsxs("div",{className:"flex items-center gap-2 text-sm text-orange-600 dark:text-orange-400",children:[bo.jsx(Jb,{className:"h-4 w-4"}),bo.jsx("span",{children:"Will sync when back online"})]})]}),u?bo.jsxs("div",{className:"p-8 text-center",children:[bo.jsx(Sv,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),bo.jsx("h3",{className:"text-lg font-medium mb-2",children:"Transaction Queued!"}),bo.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your transaction will be synced when you're back online."})]}):bo.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i.description&&i.amount&&i.category&&i.accountId){l(!0),p(null);try{const e={id:`offline-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,description:i.description,amount:parseFloat(i.amount)*("expense"===i.type?-1:1),category:i.category,accountId:i.accountId,date:i.date,tags:i.tags,notes:i.notes,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),isOffline:!0};await r({type:"create",entity:"transaction",data:e}),d(!0),setTimeout(()=>{o({description:"",amount:"",type:"expense",category:"",accountId:"",date:(new Date).toISOString().split("T")[0],tags:[],notes:""}),d(!1),n&&n(),t()},1500)}catch(a){p(a.message||"Failed to queue transaction")}finally{l(!1)}}else p("Please fill in all required fields")},className:"p-4 space-y-4",children:[h&&bo.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg text-sm text-red-700 dark:text-red-300",children:[bo.jsx(Rv,{className:"h-4 w-4"}),h]}),bo.jsxs("div",{className:"flex gap-2",children:[bo.jsx("button",{type:"button",onClick:()=>o({...i,type:"expense"}),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors "+("expense"===i.type?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"Expense"}),bo.jsx("button",{type:"button",onClick:()=>o({...i,type:"income"}),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors "+("income"===i.type?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:"Income"})]}),bo.jsxs("div",{children:[bo.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Description ",bo.jsx("span",{className:"text-red-500",children:"*"})]}),bo.jsxs("div",{className:"relative",children:[bo.jsx(sb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),bo.jsx("input",{type:"text",value:i.description,onChange:e=>o({...i,description:e.target.value}),className:"w-full pl-10 pr-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"What did you spend on?",required:!0})]})]}),bo.jsxs("div",{children:[bo.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Amount ",bo.jsx("span",{className:"text-red-500",children:"*"})]}),bo.jsxs("div",{className:"relative",children:[bo.jsx(Fv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),bo.jsx("input",{type:"number",step:"0.01",value:i.amount,onChange:e=>o({...i,amount:e.target.value}),className:"w-full pl-10 pr-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",placeholder:"0.00",required:!0})]})]}),bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),bo.jsxs("div",{className:"relative",children:[bo.jsx(cb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),bo.jsx("input",{type:"date",value:i.date,onChange:e=>o({...i,date:e.target.value}),className:"w-full pl-10 pr-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600"})]})]}),bo.jsxs("div",{children:[bo.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Category ",bo.jsx("span",{className:"text-red-500",children:"*"})]}),bo.jsxs("select",{value:i.category,onChange:e=>o({...i,category:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0,children:[bo.jsx("option",{value:"",children:"Select a category"}),a.map(e=>bo.jsxs("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]})]}),bo.jsxs("div",{children:[bo.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Account ",bo.jsx("span",{className:"text-red-500",children:"*"})]}),bo.jsxs("select",{value:i.accountId,onChange:e=>o({...i,accountId:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",required:!0,children:[bo.jsx("option",{value:"",children:"Select an account"}),s.map(e=>bo.jsxs("option",{value:e.id,children:[e.name," (",aa(e.balance),")"]},e.id))]})]}),bo.jsxs("div",{children:[bo.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),bo.jsx("textarea",{value:i.notes,onChange:e=>o({...i,notes:e.target.value}),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",rows:3,placeholder:"Add any additional notes..."})]}),bo.jsxs("div",{className:"flex gap-3 pt-4",children:[bo.jsx("button",{type:"button",onClick:t,className:"flex-1 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),bo.jsx("button",{type:"submit",disabled:c,className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Queuing...":"Add Transaction"})]})]})]})}):null},E_=()=>{const e=S_(),[t,n]=Vi.useState(!1);return e.isOffline||0!==e.pendingChanges?bo.jsxs(bo.Fragment,{children:[bo.jsx("button",{onClick:()=>n(!0),className:"fixed bottom-20 right-4 z-40 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all transform hover:scale-110",title:"Add transaction (offline)",children:bo.jsxs("div",{className:"relative",children:[bo.jsx(uw,{className:"h-6 w-6"}),e.isOffline&&bo.jsx(Jb,{className:"absolute -top-2 -right-2 h-4 w-4 text-orange-400"})]})}),bo.jsx(C_,{isOpen:t,onClose:()=>n(!1),onSuccess:()=>{}})]}):null},T_=6048e5,N_=6e4,A_=36e5,O_=43200,D_=Symbol.for("constructDateFrom");let P_={};const M_={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},L_={date:Da({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Da({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Da({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},R_={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},U_={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Pa({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Pa({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Pa({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Pa({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Pa({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},z_={ordinalNumber:($_={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match($_.matchPattern);if(!n)return null;const r=n[0],a=e.match($_.parsePattern);if(!a)return null;let s=$_.valueCallback?$_.valueCallback(a[0]):a[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:Ma({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Ma({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ma({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Ma({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var $_;const B_={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=M_[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:L_,formatRelative:(e,t,n,r)=>R_[e],localize:U_,match:z_,options:{weekStartsOn:0,firstWeekContainsDate:1}},F_={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Ra("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Ra(n+1,2)},d:(e,t)=>Ra(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Ra(e.getHours()%12||12,t.length),H:(e,t)=>Ra(e.getHours(),t.length),m:(e,t)=>Ra(e.getMinutes(),t.length),s:(e,t)=>Ra(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Ra(Math.trunc(r*Math.pow(10,n-3)),t.length)}},W_={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return F_.y(e,t)},Y:function(e,t,n,r){const a=La(e,r),s=a>0?a:1-a;return"YY"===t?Ra(s%100,2):"Yo"===t?n.ordinalNumber(s,{unit:"year"}):Ra(s,t.length)},R:function(e,t){return Ra(Sa(e),t.length)},u:function(e,t){return Ra(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ra(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ra(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return F_.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Ra(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=function(e,t){const n=wa(e,t?.in),r=+ka(n,t)-+function(e,t){const n=xa(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=La(e,t),s=ba(t?.in||e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),ka(s,t)}(n,t);return Math.round(r/T_)+1}(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Ra(a,t.length)},I:function(e,t,n){const r=function(e,t){const n=wa(e,t?.in),r=+_a(n)-+function(e){const t=Sa(e,void 0),n=ba(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),_a(n)}(n);return Math.round(r/T_)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Ra(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):F_.d(e,t)},D:function(e,t,n){const r=function(e){const t=wa(e,undefined);return Ea(t,Oa(t))+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Ra(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Ra(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Ra(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return Ra(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return F_.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):F_.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ra(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Ra(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):F_.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):F_.s(e,t)},S:function(e,t){return F_.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return za(r);case"XXXX":case"XX":return $a(r);default:return $a(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return za(r);case"xxxx":case"xx":return $a(r);default:return $a(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ua(r,":");default:return"GMT"+$a(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ua(r,":");default:return"GMT"+$a(r,":")}},t:function(e,t,n){return Ra(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Ra(+e,t.length)}},q_=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},G_=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},V_={p:G_,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return q_(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",q_(r,t)).replace("{{time}}",G_(a,t))}},H_=/^D+$/,Y_=/^Y+$/,K_=["D","DD","YY","YYYY"],Z_=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,J_=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Q_=/^'([^]*?)'?$/,X_=/''/g,eS=/[a-zA-Z]/;var tS,nS={exports:{}},rS=nS.exports,aS=qa();const sS={account:[{field:"balance",strategy:"serverWins"},{field:"name",strategy:"newer"},{field:"type",strategy:"newer"},{field:"currency",strategy:"newer"},{field:"is_active",strategy:"serverWins"}],transaction:[{field:"amount",strategy:"newer"},{field:"description",strategy:"newer"},{field:"category",strategy:"newer"},{field:"date",strategy:"newer"},{field:"cleared",strategy:"max"},{field:"tags",strategy:"union"},{field:"notes",strategy:"concat"},{field:"reconciled",strategy:"max"}],budget:[{field:"amount",strategy:"min"},{field:"spent",strategy:"sum"},{field:"category",strategy:"newer"},{field:"period",strategy:"newer"},{field:"rollover",strategy:"newer"}],goal:[{field:"targetAmount",strategy:"newer"},{field:"currentAmount",strategy:"sum"},{field:"deadline",strategy:"newer"},{field:"name",strategy:"newer"},{field:"achieved",strategy:"max"}]};class iS{static analyzeConflict(e,t,n,r,a){if(aS.isEqual(t,n))return{hasConflict:!1,conflictingFields:[],nonConflictingFields:[],canAutoResolve:!0,suggestedResolution:"merge",mergedData:t,confidence:100};const s=this.getChangedFields(t,n),i=this.categorizeChanges(e,t,n,s,r,a);return i.canAutoResolve&&(i.mergedData=this.performSmartMerge(e,t,n,i,r,a)),i}static getChangedFields(e,t){const n=new Set([...Object.keys(e),...Object.keys(t)]),r=[];for(const a of n)["id","user_id","created_at","sync_version"].includes(a)||aS.isEqual(e[a],t[a])||r.push(a);return r}static categorizeChanges(e,t,n,r,a,s){const i=[],o=[];let c=!0,l=100;for(const d of r){const r=t[d],a=n[d];if(this.isNonConflictingChange(d,r,a,e))o.push(d);else{i.push(d);const t=this.getMergeRule(e,d);t&&"manual"!==t.strategy?l=Math.max(0,l-10):(c=!1,l=0)}}let u="manual";return 0===r.length?(u="merge",l=100):0===i.length?(u="merge",l=95):c?(u="merge",l=Math.max(l,70)):a>s?(u="client",l=50):(u="server",l=50),{hasConflict:i.length>0,conflictingFields:i,nonConflictingFields:o,canAutoResolve:c,suggestedResolution:u,confidence:l}}static isNonConflictingChange(e,t,n,r){return null==t&&null!=n||null!=t&&null==n||!(!Array.isArray(t)||!Array.isArray(n))||!!["notes","description","memo"].includes(e)||"boolean"==typeof t&&"boolean"==typeof n}static getMergeRule(e,t){const n=sS[e];if(n)return n.find(e=>e.field===t)}static performSmartMerge(e,t,n,r,a,s){const i={...n};for(const o of r.nonConflictingFields){const r=t[o],c=n[o];i[o]=this.mergeFieldValue(o,r,c,e,a,s)}for(const o of r.conflictingFields){const r=this.getMergeRule(e,o);i[o]=r?this.applyMergeRule(r,t[o],n[o],a,s):a>s?t[o]:n[o]}return i.updated_at=Math.max(a,s),i}static mergeFieldValue(e,t,n,r,a,s){if(null==t)return n;if(null==n)return t;if(Array.isArray(t)&&Array.isArray(n))return[...new Set([...t,...n])];if(["notes","description","memo"].includes(e)){if(t===n)return t;const e=new Date(a).toLocaleString();return new Date(s).toLocaleString(),`${n}\n---\n[Added ${e}]: ${t}`}return"boolean"==typeof t&&"boolean"==typeof n?t||n:a>s?t:n}static applyMergeRule(e,t,n,r,a){if(e.condition&&!e.condition(t,n))return n;switch(e.strategy){case"newer":return r>a?t:n;case"older":return r<a?t:n;case"sum":return(Number(t)||0)+(Number(n)||0);case"min":return Math.min(Number(t)||0,Number(n)||0);case"max":return Math.max(Number(t)||0,Number(n)||0);case"concat":return t===n?t:`${n}\n${t}`;case"union":return Array.isArray(t)&&Array.isArray(n)?[...new Set([...t,...n])]:n;case"clientWins":return t;default:return n}}static generateConflictSummary(e){if(!e.hasConflict)return"No conflicts detected - changes can be merged automatically.";const t=[];return e.conflictingFields.length>0&&t.push(`Conflicting fields: ${e.conflictingFields.join(", ")}`),e.nonConflictingFields.length>0&&t.push(`Compatible changes: ${e.nonConflictingFields.join(", ")}`),e.canAutoResolve?t.push(`Automatic resolution available (${e.confidence}% confidence)`):t.push("Manual resolution required"),t.join("\n")}static requiresUserIntervention(e,t){const n=t?.autoResolveThreshold||70;if(e.confidence<n)return!0;const r=["amount","balance","targetAmount"];return!!(e.conflictingFields.some(e=>r.includes(e))&&e.confidence<90)||!e.canAutoResolve}}const oS=({isOpen:e,onClose:t,conflict:n,analysis:r,onResolve:a})=>{const[s,i]=Gi.useState("merge"),[o,c]=Gi.useState({}),[l,u]=Gi.useState(!1),[d,h]=Gi.useState(null),[p,g]=Gi.useState(!1);if(Gi.useEffect(()=>{if(n&&!r){const e=iS.analyzeConflict(n.entity,n.clientData,n.serverData,n.clientTimestamp||Date.now(),n.serverTimestamp||Date.now());h(e),e.canAutoResolve&&e.mergedData?i("merge"):i("client"===e.suggestedResolution?"client":"server")}else r&&(h(r),r.canAutoResolve&&r.mergedData&&i("merge"))},[n,r]),!n||!d)return null;const m=(e,t)=>null==t?"(empty)":e.includes("amount")||e.includes("balance")||"spent"===e?aa(t):e.includes("date")||e.includes("_at")?Ba(new Date(t),"PP"):Array.isArray(t)?t.join(", ")||"(none)":"boolean"==typeof t?t?"Yes":"No":String(t);return bo.jsx(fa,{isOpen:e,onClose:t,title:"Resolve Data Sync Conflict",maxWidth:"max-w-3xl",children:bo.jsxs("div",{className:"space-y-6",children:[d.canAutoResolve&&bo.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[bo.jsx(cS,{className:"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),bo.jsxs("div",{className:"flex-1",children:[bo.jsx("h3",{className:"font-medium text-green-900 dark:text-green-100",children:"Smart Resolution Available"}),bo.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:["We can automatically merge these changes with ",d.confidence,"% confidence.",d.conflictingFields.length>0&&` ${d.conflictingFields.length} field(s) have conflicts but can be resolved intelligently.`]})]})]}),!d.canAutoResolve&&bo.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[bo.jsx(Uv,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),bo.jsxs("div",{className:"flex-1",children:[bo.jsx("h3",{className:"font-medium text-amber-900 dark:text-amber-100",children:"Manual Resolution Required"}),bo.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1",children:["This ",n.entity," was modified in incompatible ways. Please review the changes and choose how to resolve."]})]})]}),bo.jsxs("div",{className:"space-y-3",children:[bo.jsxs("div",{className:"flex items-center justify-between",children:[bo.jsx("h4",{className:"font-medium",children:"Resolution Strategy"}),bo.jsxs("button",{onClick:()=>g(!p),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[p?"Hide":"Show"," Advanced Options"]})]}),bo.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[d.canAutoResolve&&bo.jsxs("button",{onClick:()=>i("merge"),className:"p-3 rounded-lg border-2 transition-all "+("merge"===s?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:[bo.jsx(Gb,{className:"h-6 w-6 mx-auto mb-2 text-purple-600 dark:text-purple-400"}),bo.jsx("div",{className:"text-sm font-medium",children:"Smart Merge"}),bo.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Intelligently combine changes"})]}),bo.jsxs("button",{onClick:()=>i("client"),className:"p-3 rounded-lg border-2 transition-all "+("client"===s?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:[bo.jsx("div",{className:"text-2xl mb-2",children:"\ud83d\udcbb"}),bo.jsx("div",{className:"text-sm font-medium",children:"Keep Your Version"}),bo.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use your local changes"})]}),bo.jsxs("button",{onClick:()=>i("server"),className:"p-3 rounded-lg border-2 transition-all "+("server"===s?"border-green-500 bg-green-50 dark:bg-green-900/30":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:[bo.jsx("div",{className:"text-2xl mb-2",children:"\u2601\ufe0f"}),bo.jsx("div",{className:"text-sm font-medium",children:"Keep Server Version"}),bo.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use server changes"})]})]})]}),bo.jsx("div",{className:"max-h-96 overflow-y-auto",children:(()=>{const e=new Set([...Object.keys(n.clientData||{}),...Object.keys(n.serverData||{})]),t=Array.from(e).filter(e=>!["id","user_id","created_at","updated_at","sync_version"].includes(e));return bo.jsx("div",{className:"space-y-2",children:t.map(e=>{const t=n.clientData?.[e],r=n.serverData?.[e],a=t!==r,i=d.conflictingFields.includes(e),l=o[e]||(d.mergedData?.[e]===t?"client":"server");return bo.jsxs("div",{className:"border rounded-lg p-3 "+(a?i?"border-amber-300 bg-amber-50 dark:border-amber-700 dark:bg-amber-900/20":"border-blue-300 bg-blue-50 dark:border-blue-700 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"),children:[bo.jsxs("div",{className:"flex items-center justify-between mb-2",children:[bo.jsx("span",{className:"font-medium text-sm capitalize",children:e.replace(/_/g," ")}),a&&bo.jsxs("div",{className:"flex items-center gap-2",children:[i?bo.jsx("span",{className:"text-xs px-2 py-1 bg-amber-200 text-amber-800 dark:bg-amber-800 dark:text-amber-200 rounded",children:"Conflict"}):bo.jsx("span",{className:"text-xs px-2 py-1 bg-green-200 text-green-800 dark:bg-green-800 dark:text-green-200 rounded",children:"Compatible"}),p&&bo.jsxs("button",{onClick:()=>(e=>{c(t=>({...t,[e]:"client"===t[e]?"server":"client"}))})(e),className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:["Use ","client"===l?"Server":"Your"," Version"]})]})]}),bo.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[bo.jsxs("div",{className:"p-2 rounded "+("client"===l&&a?"bg-blue-100 dark:bg-blue-900/30 ring-2 ring-blue-400":"bg-gray-50 dark:bg-gray-800"),children:[bo.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Your Version"}),bo.jsx("div",{className:"font-mono text-xs",children:m(e,t)})]}),bo.jsxs("div",{className:"p-2 rounded "+("server"===l&&a?"bg-green-100 dark:bg-green-900/30 ring-2 ring-green-400":"bg-gray-50 dark:bg-gray-800"),children:[bo.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Server Version"}),bo.jsx("div",{className:"font-mono text-xs",children:m(e,r)})]})]}),"merge"===s&&d.mergedData&&a&&bo.jsxs("div",{className:"mt-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded",children:[bo.jsxs("div",{className:"text-xs text-purple-700 dark:text-purple-300 mb-1 flex items-center gap-1",children:[bo.jsx(cS,{className:"h-3 w-3"}),"Smart Merge Result:"]}),bo.jsx("div",{className:"font-mono text-xs",children:m(e,d.mergedData[e])})]})]},e)})})})()}),"merge"===s&&d.mergedData&&bo.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:bo.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:iS.generateConflictSummary(d)})}),bo.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t dark:border-gray-700",children:[bo.jsx("button",{onClick:t,disabled:l,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:"Cancel"}),bo.jsx("button",{onClick:async()=>{u(!0);try{let e;if("merge"===s)if(p&&Object.keys(o).length>0){e={...n.serverData};for(const[t,r]of Object.entries(o))e[t]="client"===r?n.clientData[t]:n.serverData[t]}else e=d.mergedData;else e="client"===s?n.clientData:n.serverData;await a(s,e),t()}catch(e){console.error("Failed to resolve conflict:",e)}finally{u(!1)}},disabled:l,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?bo.jsx(bo.Fragment,{children:"Resolving..."}):bo.jsxs(bo.Fragment,{children:[bo.jsx(kv,{className:"h-4 w-4"}),"Apply ","merge"===s?"Smart Merge":"Resolution"]})})]})]})})},cS=({className:e})=>bo.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:bo.jsx("path",{d:"M7 11L6 8l-3-1 3-1 1-3 1 3 3 1-3 1-1 3zm5 8l-1-2.5L8.5 15l2.5-1 1-2.5 1 2.5 2.5 1-2.5 1.5L12 19zm7-15l-1 3-3 1 3 1 1 3 1-3 3-1-3-1-1-3z"})}),lS=new class{socket=null;clientId;syncQueue=[];conflicts=[];vectorClocks=new Map;listeners=new Map;syncStatus={isConnected:!1,isSyncing:!1,pendingOperations:0,conflicts:[]};syncInterval=null;reconnectAttempts=0;maxReconnectAttempts=5;baseReconnectDelay=1e3;constructor(){this.clientId=this.getOrCreateClientId(),this.loadQueueFromStorage(),this.initializeSync()}getOrCreateClientId(){let e=localStorage.getItem("syncClientId");return e||(e=Pt(),localStorage.setItem("syncClientId",e)),e}loadQueueFromStorage(){try{const e=localStorage.getItem("syncQueue");if(e){const t=JSON.parse(e);this.syncQueue=t.map(e=>({operation:e.operation,retryCount:0,maxRetries:3})),this.syncStatus.pendingOperations=this.syncQueue.length}}catch(e){console.error("Failed to load sync queue:",e)}}saveQueueToStorage(){try{localStorage.setItem("syncQueue",JSON.stringify(this.syncQueue))}catch(e){console.error("Failed to save sync queue:",e)}}initializeSync(){}connect(){}getAuthToken(){return localStorage.getItem("authToken")}setupSocketListeners(){this.socket&&(this.socket.on("connect",()=>{this.syncStatus.isConnected=!0,this.reconnectAttempts=0,this.emit("status-changed",this.syncStatus),this.processSyncQueue()}),this.socket.on("disconnect",()=>{this.syncStatus.isConnected=!1,this.emit("status-changed",this.syncStatus)}),this.socket.on("sync-update",e=>{this.handleRemoteUpdate(e)}),this.socket.on("sync-conflict",e=>{this.handleConflict(e)}),this.socket.on("sync-ack",e=>{this.handleSyncAck(e)}),this.socket.on("error",e=>{console.error("Sync socket error:",e),this.syncStatus.error=e.message,this.emit("status-changed",this.syncStatus)}))}handleConnectionError(){if(this.reconnectAttempts++,this.reconnectAttempts<this.maxReconnectAttempts){const e=this.baseReconnectDelay*Math.pow(2,this.reconnectAttempts);setTimeout(()=>this.connect(),e)}else console.error("Max reconnection attempts reached, running in offline mode"),this.syncStatus.error="Unable to connect to sync server",this.emit("status-changed",this.syncStatus)}startSyncInterval(){this.syncInterval=setInterval(()=>{this.syncQueue.length>0&&this.syncStatus.isConnected&&!this.syncStatus.isSyncing&&this.processSyncQueue()},5e3)}async queueOperation(e,t,n,r){const a={operation:{id:Pt(),type:e,entity:t,entityId:n,data:r,timestamp:Date.now(),clientId:this.clientId,version:this.getNextVersion(n)},retryCount:0,maxRetries:3};this.syncQueue.push(a),this.syncStatus.pendingOperations=this.syncQueue.length,this.saveQueueToStorage(),this.emit("status-changed",this.syncStatus),this.syncStatus.isConnected&&!this.syncStatus.isSyncing&&this.processSyncQueue()}async processSyncQueue(){if(0===this.syncQueue.length||!this.socket||!this.syncStatus.isConnected)return;this.syncStatus.isSyncing=!0,this.emit("status-changed",this.syncStatus);const e=this.syncQueue.slice(0,10);for(const n of e)try{await this.sendOperation(n.operation),this.syncQueue=this.syncQueue.filter(e=>e.operation.id!==n.operation.id)}catch(t){console.error("Failed to send operation:",t),n.retryCount++,n.retryCount>=n.maxRetries&&(console.error("Operation failed after max retries:",n.operation),this.syncQueue=this.syncQueue.filter(e=>e.operation.id!==n.operation.id),this.emit("sync-failed",n.operation))}this.syncStatus.isSyncing=!1,this.syncStatus.pendingOperations=this.syncQueue.length,this.syncStatus.lastSyncTime=new Date,this.saveQueueToStorage(),this.emit("status-changed",this.syncStatus)}sendOperation(e){return new Promise((t,n)=>{if(!this.socket)return void n(new Error("Socket not connected"));const r=setTimeout(()=>{n(new Error("Operation timeout"))},1e4);this.socket.emit("sync-operation",e,e=>{clearTimeout(r),e.success?t():n(new Error(e.error))})})}handleRemoteUpdate(e){const t=this.getVersion(e.entityId);if(t&&t>=e.version){const n={id:Pt(),localOperation:{...e,version:t},remoteOperation:e};this.handleConflict(n)}else this.applyRemoteOperation(e),this.updateVectorClock(e.entityId,e.clientId,e.version)}handleConflict(e){const t=iS.analyzeConflict(e.localOperation.entity,e.localOperation.data,e.remoteOperation.data,e.localOperation.timestamp,e.remoteOperation.timestamp);if(!iS.requiresUserIntervention(t)&&t.canAutoResolve)t.mergedData&&(this.applyMergedData(e.localOperation.entity,e.localOperation.entityId,t.mergedData),this.updateVectorClock(e.localOperation.entityId,e.remoteOperation.clientId,Math.max(e.localOperation.version,e.remoteOperation.version)+1)),this.emit("conflict-auto-resolved",{conflict:e,analysis:t,resolution:"merge"});else if(this.conflicts.push(e),this.syncStatus.conflicts=this.conflicts,this.emit("status-changed",this.syncStatus),this.emit("conflict-detected",{conflict:e,analysis:t}),t.confidence>=50&&"manual"!==t.suggestedResolution){const n=this.autoResolveConflict(e,t);n&&this.resolveConflict(e.id,n,t.mergedData)}}autoResolveConflict(e,t){if(t&&t.suggestedResolution)switch(t.suggestedResolution){case"client":return"local";case"server":return"remote";case"merge":return t.mergedData?"merge":null;default:return null}return e.localOperation.timestamp>e.remoteOperation.timestamp?"local":(e.remoteOperation.timestamp,e.localOperation.timestamp,"remote")}resolveConflict(e,t,n){const r=this.conflicts.find(t=>t.id===e);if(r){switch(r.resolution=t,t){case"local":this.queueOperation(r.localOperation.type,r.localOperation.entity,r.localOperation.entityId,r.localOperation.data);break;case"remote":this.applyRemoteOperation(r.remoteOperation);break;case"merge":n&&(r.mergedData=n,this.applyMergedData(r.remoteOperation.entity,r.remoteOperation.entityId,n))}this.conflicts=this.conflicts.filter(t=>t.id!==e),this.syncStatus.conflicts=this.conflicts,this.emit("status-changed",this.syncStatus)}}applyRemoteOperation(e){this.emit(`remote-${e.type.toLowerCase()}`,{entity:e.entity,entityId:e.entityId,data:e.data})}applyMergedData(e,t,n){this.emit("remote-merge",{entity:e,entityId:t,data:n})}handleSyncAck(e){this.syncQueue=this.syncQueue.filter(t=>t.operation.id!==e),this.syncStatus.pendingOperations=this.syncQueue.length,this.saveQueueToStorage(),this.emit("status-changed",this.syncStatus)}getVersion(e){const t=this.vectorClocks.get(e);if(!t)return null;let n=0;for(const r of Object.values(t))n=Math.max(n,r);return n}getNextVersion(e){return(this.getVersion(e)||0)+1}updateVectorClock(e,t,n){let r=this.vectorClocks.get(e);r||(r={},this.vectorClocks.set(e,r)),r[t]=n}on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){const n=this.listeners.get(e);n&&n.delete(t)}emit(e,t){const n=this.listeners.get(e);n&&n.forEach(e=>e(t))}getStatus(){return{...this.syncStatus}}forceSync(){this.syncStatus.isConnected&&!this.syncStatus.isSyncing&&this.processSyncQueue()}clearQueue(){this.syncQueue=[],this.syncStatus.pendingOperations=0,this.saveQueueToStorage(),this.emit("status-changed",this.syncStatus)}getConflicts(){return[...this.conflicts]}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),this.syncStatus.isConnected=!1,this.emit("status-changed",this.syncStatus)}},{entries:uS,setPrototypeOf:dS,isFrozen:hS,getPrototypeOf:pS,getOwnPropertyDescriptor:gS}=Object;let{freeze:mS,seal:fS,create:yS}=Object,{apply:vS,construct:bS}="undefined"!=typeof Reflect&&Reflect;mS||(mS=function(e){return e}),fS||(fS=function(e){return e}),vS||(vS=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return e.apply(t,r)}),bS||(bS=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const wS=Ga(Array.prototype.forEach),xS=Ga(Array.prototype.lastIndexOf),kS=Ga(Array.prototype.pop),_S=Ga(Array.prototype.push),SS=Ga(Array.prototype.splice),jS=Ga(String.prototype.toLowerCase),IS=Ga(String.prototype.toString),CS=Ga(String.prototype.match),ES=Ga(String.prototype.replace),TS=Ga(String.prototype.indexOf),NS=Ga(String.prototype.trim),AS=Ga(Object.prototype.hasOwnProperty),OS=Ga(RegExp.prototype.test),DS=(PS=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bS(PS,t)});var PS;const MS=mS(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),LS=mS(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),RS=mS(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),US=mS(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),zS=mS(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$S=mS(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),BS=mS(["#text"]),FS=mS(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),WS=mS(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qS=mS(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),GS=mS(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),VS=fS(/\{\{[\w\W]*|[\w\W]*\}\}/gm),HS=fS(/<%[\w\W]*|[\w\W]*%>/gm),YS=fS(/\$\{[\w\W]*/gm),KS=fS(/^data-[\-\w.\u00B7-\uFFFF]+$/),ZS=fS(/^aria-[\-\w]+$/),JS=fS(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),QS=fS(/^(?:\w+script|data):/i),XS=fS(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ej=fS(/^html$/i),tj=fS(/^[a-z][.\w]*(-[.\w]+)+$/i);var nj=Object.freeze({__proto__:null,ARIA_ATTR:ZS,ATTR_WHITESPACE:XS,CUSTOM_ELEMENT:tj,DATA_ATTR:KS,DOCTYPE_NAME:ej,ERB_EXPR:HS,IS_ALLOWED_URI:JS,IS_SCRIPT_OR_DATA:QS,MUSTACHE_EXPR:VS,TMPLIT_EXPR:YS});var rj=function e(){function t(e,t,n){wS(e,e=>{e.call(r,t,n,Te)})}let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const r=t=>e(t);if(r.version="3.3.0",r.removed=[],!n||!n.document||9!==n.document.nodeType||!n.Element)return r.isSupported=!1,r;let{document:a}=n;const s=a,i=s.currentScript,{DocumentFragment:o,HTMLTemplateElement:c,Node:l,Element:u,NodeFilter:d,NamedNodeMap:h=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:g,trustedTypes:m}=n,f=u.prototype,y=Ka(f,"cloneNode"),v=Ka(f,"remove"),b=Ka(f,"nextSibling"),w=Ka(f,"childNodes"),x=Ka(f,"parentNode");if("function"==typeof c){const e=a.createElement("template");e.content&&e.content.ownerDocument&&(a=e.content.ownerDocument)}let k,_="";const{implementation:S,createNodeIterator:j,createDocumentFragment:I,getElementsByTagName:C}=a,{importNode:E}=s;let T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};r.isSupported="function"==typeof uS&&"function"==typeof x&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:N,ERB_EXPR:A,TMPLIT_EXPR:O,DATA_ATTR:D,ARIA_ATTR:P,IS_SCRIPT_OR_DATA:M,ATTR_WHITESPACE:L,CUSTOM_ELEMENT:R}=nj;let{IS_ALLOWED_URI:U}=nj,z=null;const $=Va({},[...MS,...LS,...RS,...zS,...BS]);let B=null;const F=Va({},[...FS,...WS,...qS,...GS]);let W=Object.seal(yS(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,G=null;const V=Object.seal(yS(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let H=!0,Y=!0,K=!1,Z=!0,J=!1,Q=!0,X=!1,ee=!1,te=!1,ne=!1,re=!1,ae=!1,se=!0,ie=!1,oe=!0,ce=!1,le={},ue=null;const de=Va({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let he=null;const pe=Va({},["audio","video","img","source","image","track"]);let ge=null;const me=Va({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fe="http://www.w3.org/1998/Math/MathML",ye="http://www.w3.org/2000/svg",ve="http://www.w3.org/1999/xhtml";let be=ve,we=!1,xe=null;const ke=Va({},[fe,ye,ve],IS);let _e=Va({},["mi","mo","mn","ms","mtext"]),Se=Va({},["annotation-xml"]);const je=Va({},["title","style","font","a","script"]);let Ie=null;const Ce=["application/xhtml+xml","text/html"];let Ee=null,Te=null;const Ne=a.createElement("form"),Ae=function(e){return e instanceof RegExp||e instanceof Function},Oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Te||Te!==e){if(e&&"object"==typeof e||(e={}),e=Ya(e),Ie=-1===Ce.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Ee="application/xhtml+xml"===Ie?IS:jS,z=AS(e,"ALLOWED_TAGS")?Va({},e.ALLOWED_TAGS,Ee):$,B=AS(e,"ALLOWED_ATTR")?Va({},e.ALLOWED_ATTR,Ee):F,xe=AS(e,"ALLOWED_NAMESPACES")?Va({},e.ALLOWED_NAMESPACES,IS):ke,ge=AS(e,"ADD_URI_SAFE_ATTR")?Va(Ya(me),e.ADD_URI_SAFE_ATTR,Ee):me,he=AS(e,"ADD_DATA_URI_TAGS")?Va(Ya(pe),e.ADD_DATA_URI_TAGS,Ee):pe,ue=AS(e,"FORBID_CONTENTS")?Va({},e.FORBID_CONTENTS,Ee):de,q=AS(e,"FORBID_TAGS")?Va({},e.FORBID_TAGS,Ee):Ya({}),G=AS(e,"FORBID_ATTR")?Va({},e.FORBID_ATTR,Ee):Ya({}),le=!!AS(e,"USE_PROFILES")&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,K=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Z=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,J=e.SAFE_FOR_TEMPLATES||!1,Q=!1!==e.SAFE_FOR_XML,X=e.WHOLE_DOCUMENT||!1,ne=e.RETURN_DOM||!1,re=e.RETURN_DOM_FRAGMENT||!1,ae=e.RETURN_TRUSTED_TYPE||!1,te=e.FORCE_BODY||!1,se=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,ce=e.IN_PLACE||!1,U=e.ALLOWED_URI_REGEXP||JS,be=e.NAMESPACE||ve,_e=e.MATHML_TEXT_INTEGRATION_POINTS||_e,Se=e.HTML_INTEGRATION_POINTS||Se,W=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ae(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ae(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(W.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(Y=!1),re&&(ne=!0),le&&(z=Va({},BS),B=[],!0===le.html&&(Va(z,MS),Va(B,FS)),!0===le.svg&&(Va(z,LS),Va(B,WS),Va(B,GS)),!0===le.svgFilters&&(Va(z,RS),Va(B,WS),Va(B,GS)),!0===le.mathMl&&(Va(z,zS),Va(B,qS),Va(B,GS))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?V.tagCheck=e.ADD_TAGS:(z===$&&(z=Ya(z)),Va(z,e.ADD_TAGS,Ee))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?V.attributeCheck=e.ADD_ATTR:(B===F&&(B=Ya(B)),Va(B,e.ADD_ATTR,Ee))),e.ADD_URI_SAFE_ATTR&&Va(ge,e.ADD_URI_SAFE_ATTR,Ee),e.FORBID_CONTENTS&&(ue===de&&(ue=Ya(ue)),Va(ue,e.FORBID_CONTENTS,Ee)),oe&&(z["#text"]=!0),X&&Va(z,["html","head","body"]),z.table&&(Va(z,["tbody"]),delete q.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw DS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw DS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=e.TRUSTED_TYPES_POLICY,_=k.createHTML("")}else void 0===k&&(k=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML:e=>e,createScriptURL:e=>e})}catch(s){return null}}(m,i)),null!==k&&"string"==typeof _&&(_=k.createHTML(""));mS&&mS(e),Te=e}},De=Va({},[...LS,...RS,...US]),Pe=Va({},[...zS,...$S]),Me=function(e){_S(r.removed,{element:e});try{x(e).removeChild(e)}catch(t){v(e)}},Le=function(e,t){try{_S(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(n){_S(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ne||re)try{Me(t)}catch(n){}else try{t.setAttribute(e,"")}catch(n){}},Re=function(e){let t=null,n=null;if(te)e="<remove></remove>"+e;else{const t=CS(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Ie&&be===ve&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=k?k.createHTML(e):e;if(be===ve)try{t=(new g).parseFromString(r,Ie)}catch(i){}if(!t||!t.documentElement){t=S.createDocument(be,"template",null);try{t.documentElement.innerHTML=we?_:r}catch(i){}}const s=t.body||t.documentElement;return e&&n&&s.insertBefore(a.createTextNode(n),s.childNodes[0]||null),be===ve?C.call(t,X?"html":"body")[0]:X?t.documentElement:s},Ue=function(e){return j.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},ze=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof h)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},$e=function(e){return"function"==typeof l&&e instanceof l},Be=function(e){let n=null;if(t(T.beforeSanitizeElements,e,null),ze(e))return Me(e),!0;const a=Ee(e.nodeName);if(t(T.uponSanitizeElement,e,{tagName:a,allowedTags:z}),Q&&e.hasChildNodes()&&!$e(e.firstElementChild)&&OS(/<[/\w!]/g,e.innerHTML)&&OS(/<[/\w!]/g,e.textContent))return Me(e),!0;if(7===e.nodeType)return Me(e),!0;if(Q&&8===e.nodeType&&OS(/<[/\w]/g,e.data))return Me(e),!0;if(!(V.tagCheck instanceof Function&&V.tagCheck(a))&&(!z[a]||q[a])){if(!q[a]&&We(a)){if(W.tagNameCheck instanceof RegExp&&OS(W.tagNameCheck,a))return!1;if(W.tagNameCheck instanceof Function&&W.tagNameCheck(a))return!1}if(oe&&!ue[a]){const t=x(e)||e.parentNode,n=w(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r){const a=y(n[r],!0);a.__removalCount=(e.__removalCount||0)+1,t.insertBefore(a,b(e))}}return Me(e),!0}return e instanceof u&&!function(e){let t=x(e);t&&t.tagName||(t={namespaceURI:be,tagName:"template"});const n=jS(e.tagName),r=jS(t.tagName);return!!xe[e.namespaceURI]&&(e.namespaceURI===ye?t.namespaceURI===ve?"svg"===n:t.namespaceURI===fe?"svg"===n&&("annotation-xml"===r||_e[r]):Boolean(De[n]):e.namespaceURI===fe?t.namespaceURI===ve?"math"===n:t.namespaceURI===ye?"math"===n&&Se[r]:Boolean(Pe[n]):e.namespaceURI===ve?!(t.namespaceURI===ye&&!Se[r])&&!(t.namespaceURI===fe&&!_e[r])&&!Pe[n]&&(je[n]||!De[n]):!("application/xhtml+xml"!==Ie||!xe[e.namespaceURI]))}(e)?(Me(e),!0):"noscript"!==a&&"noembed"!==a&&"noframes"!==a||!OS(/<\/no(script|embed|frames)/i,e.innerHTML)?(J&&3===e.nodeType&&(n=e.textContent,wS([N,A,O],e=>{n=ES(n,e," ")}),e.textContent!==n&&(_S(r.removed,{element:e.cloneNode()}),e.textContent=n)),t(T.afterSanitizeElements,e,null),!1):(Me(e),!0)},Fe=function(e,t,n){if(se&&("id"===t||"name"===t)&&(n in a||n in Ne))return!1;if(Y&&!G[t]&&OS(D,t));else if(H&&OS(P,t));else if(V.attributeCheck instanceof Function&&V.attributeCheck(t,e));else if(!B[t]||G[t]){if(!(We(e)&&(W.tagNameCheck instanceof RegExp&&OS(W.tagNameCheck,e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(e))&&(W.attributeNameCheck instanceof RegExp&&OS(W.attributeNameCheck,t)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(t,e))||"is"===t&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&OS(W.tagNameCheck,n)||W.tagNameCheck instanceof Function&&W.tagNameCheck(n))))return!1}else if(ge[t]);else if(OS(U,ES(n,L,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==TS(n,"data:")||!he[e])if(K&&!OS(M,ES(n,L,"")));else if(n)return!1;return!0},We=function(e){return"annotation-xml"!==e&&CS(e,R)},qe=function(e){t(T.beforeSanitizeAttributes,e,null);const{attributes:n}=e;if(!n||ze(e))return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let s=n.length;for(;s--;){const o=n[s],{name:c,namespaceURI:l,value:u}=o,d=Ee(c),h=u;let p="value"===c?h:NS(h);if(a.attrName=d,a.attrValue=p,a.keepAttr=!0,a.forceKeepAttr=void 0,t(T.uponSanitizeAttribute,e,a),p=a.attrValue,!ie||"id"!==d&&"name"!==d||(Le(c,e),p="user-content-"+p),Q&&OS(/((--!?|])>)|<\/(style|title|textarea)/i,p)){Le(c,e);continue}if("attributename"===d&&CS(p,"href")){Le(c,e);continue}if(a.forceKeepAttr)continue;if(!a.keepAttr){Le(c,e);continue}if(!Z&&OS(/\/>/i,p)){Le(c,e);continue}J&&wS([N,A,O],e=>{p=ES(p,e," ")});const g=Ee(e.nodeName);if(Fe(g,d,p)){if(k&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(l);else switch(m.getAttributeType(g,d)){case"TrustedHTML":p=k.createHTML(p);break;case"TrustedScriptURL":p=k.createScriptURL(p)}if(p!==h)try{l?e.setAttributeNS(l,c,p):e.setAttribute(c,p),ze(e)?Me(e):kS(r.removed)}catch(i){Le(c,e)}}else Le(c,e)}t(T.afterSanitizeAttributes,e,null)},Ge=function e(n){let r=null;const a=Ue(n);for(t(T.beforeSanitizeShadowDOM,n,null);r=a.nextNode();)t(T.uponSanitizeShadowNode,r,null),Be(r),qe(r),r.content instanceof o&&e(r.content);t(T.afterSanitizeShadowDOM,n,null)};return r.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,a=null,i=null,c=null;if(we=!e,we&&(e="\x3c!--\x3e"),"string"!=typeof e&&!$e(e)){if("function"!=typeof e.toString)throw DS("toString is not a function");if("string"!=typeof(e=e.toString()))throw DS("dirty is not a string, aborting")}if(!r.isSupported)return e;if(ee||Oe(t),r.removed=[],"string"==typeof e&&(ce=!1),ce){if(e.nodeName){const t=Ee(e.nodeName);if(!z[t]||q[t])throw DS("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)n=Re("\x3c!----\x3e"),a=n.ownerDocument.importNode(e,!0),1===a.nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?n=a:n.appendChild(a);else{if(!ne&&!J&&!X&&-1===e.indexOf("<"))return k&&ae?k.createHTML(e):e;if(n=Re(e),!n)return ne?null:ae?_:""}n&&te&&Me(n.firstChild);const u=Ue(ce?e:n);for(;i=u.nextNode();)Be(i),qe(i),i.content instanceof o&&Ge(i.content);if(ce)return e;if(ne){if(re)for(c=I.call(n.ownerDocument);n.firstChild;)c.appendChild(n.firstChild);else c=n;return(B.shadowroot||B.shadowrootmode)&&(c=E.call(s,c,!0)),c}let d=X?n.outerHTML:n.innerHTML;return X&&z["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&OS(ej,n.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+d),J&&wS([N,A,O],e=>{d=ES(d,e," ")}),k&&ae?k.createHTML(d):d},r.setConfig=function(){Oe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),ee=!0},r.clearConfig=function(){Te=null,ee=!1},r.isValidAttribute=function(e,t,n){Te||Oe({});const r=Ee(e),a=Ee(t);return Fe(r,a,n)},r.addHook=function(e,t){"function"==typeof t&&_S(T[e],t)},r.removeHook=function(e,t){if(void 0!==t){const n=xS(T[e],t);return-1===n?void 0:SS(T[e],n,1)[0]}return kS(T[e])},r.removeHooks=function(e){T[e]=[]},r.removeAllHooks=function(){T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},r}();const aj=Object.freeze(Object.defineProperty({__proto__:null,default:rj},Symbol.toStringTag,{value:"Module"})),sj=new class{subscriptions=new Map;connectionState={isConnected:!1,isReconnecting:!1,lastConnected:null,lastDisconnected:null,connectionCount:0};connectionCallbacks=new Set;reconnectTimeout=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;isInitialized=!1;initialize(){!this.isInitialized&&zg&&(this.isInitialized=!0,this.setupConnectionMonitoring())}setupConnectionMonitoring(){zg&&this.handleConnectionChange(!0)}handleConnectionChange(e){const t=new Date,n=this.connectionState.isConnected;this.connectionState={...this.connectionState,isConnected:e,isReconnecting:!1,lastConnected:e?t:this.connectionState.lastConnected,lastDisconnected:e?this.connectionState.lastDisconnected:t,connectionCount:e&&!n?this.connectionState.connectionCount+1:this.connectionState.connectionCount},e&&this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,this.reconnectAttempts=0),e||this.reconnectTimeout||this.scheduleReconnect(),this.notifyConnectionCallbacks()}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return;this.connectionState.isReconnecting=!0,this.notifyConnectionCallbacks();const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts);this.reconnectTimeout=setTimeout(()=>{this.reconnectAttempts++,this.reconnectAllSubscriptions()},e)}reconnectAllSubscriptions(){zg&&Array.from(this.subscriptions.keys()).forEach(e=>{const t=this.subscriptions.get(e);if(t){t.unsubscribe(),this.subscriptions.delete(e);const[n,r]=e.split(":");this.reestablishSubscription(n,r)}})}reestablishSubscription(e,t){}async subscribeToAccounts(e,t,n={}){if(!zg||!e)return null;let r=e;if(e.startsWith("user_")){const t=await im.getDatabaseUserId(e);if(!t)return console.error("[RealtimeService] Could not resolve database ID for Clerk ID:",e),null;r=t}const a=`accounts:${r}`;this.unsubscribe(a);const s=zg.channel(`accounts_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"accounts",filter:`user_id=eq.${r}`},e=>{const n={eventType:e.eventType,new:e.new,old:e.old,table:e.table,schema:e.schema};t(n)}).subscribe((e,t)=>{"SUBSCRIBED"===e?this.handleConnectionChange(!0):"CHANNEL_ERROR"!==e&&"TIMED_OUT"!==e||(console.error(`Accounts subscription error: ${t?.message||e}`),this.handleConnectionChange(!1))});return this.subscriptions.set(a,s),a}async subscribeToTransactions(e,t,n={}){if(!zg||!e)return null;let r=e;if(e.startsWith("user_")){const t=await im.getDatabaseUserId(e);if(!t)return console.error("[RealtimeService] Could not resolve database ID for Clerk ID:",e),null;r=t}const a=`transactions:${r}`;this.unsubscribe(a);const s=zg.channel(`transactions_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"transactions",filter:`user_id=eq.${r}`},e=>{const n={eventType:e.eventType,new:e.new,old:e.old,table:e.table,schema:e.schema};t(n)}).subscribe((e,t)=>{"SUBSCRIBED"===e?this.handleConnectionChange(!0):"CHANNEL_ERROR"!==e&&"TIMED_OUT"!==e||(console.error(`Transactions subscription error: ${t?.message||e}`),this.handleConnectionChange(!1))});return this.subscriptions.set(a,s),a}async subscribeToBudgets(e,t,n={}){if(!zg||!e)return null;let r=e;if(e.startsWith("user_")){const t=await im.getDatabaseUserId(e);if(!t)return console.error("[RealtimeService] Could not resolve database ID for Clerk ID:",e),null;r=t}const a=`budgets:${r}`;this.unsubscribe(a);const s=zg.channel(`budgets_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"budgets",filter:`user_id=eq.${r}`},e=>{const n={eventType:e.eventType,new:e.new,old:e.old,table:e.table,schema:e.schema};t(n)}).subscribe((e,t)=>{"SUBSCRIBED"===e?this.handleConnectionChange(!0):"CHANNEL_ERROR"!==e&&"TIMED_OUT"!==e||(console.error(`Budgets subscription error: ${t?.message||e}`),this.handleConnectionChange(!1))});return this.subscriptions.set(a,s),a}async subscribeToGoals(e,t,n={}){if(!zg||!e)return null;let r=e;if(e.startsWith("user_")){const t=await im.getDatabaseUserId(e);if(!t)return console.error("[RealtimeService] Could not resolve database ID for Clerk ID:",e),null;r=t}const a=`goals:${r}`;this.unsubscribe(a);const s=zg.channel(`goals_${r}`).on("postgres_changes",{event:"*",schema:"public",table:"goals",filter:`user_id=eq.${userId}`},e=>{const n={eventType:e.eventType,new:e.new,old:e.old,table:e.table,schema:e.schema};t(n)}).subscribe((e,t)=>{"SUBSCRIBED"===e?this.handleConnectionChange(!0):"CHANNEL_ERROR"!==e&&"TIMED_OUT"!==e||(console.error(`Goals subscription error: ${t?.message||e}`),this.handleConnectionChange(!1))});return this.subscriptions.set(a,s),a}unsubscribe(e){const t=this.subscriptions.get(e);t&&(t.unsubscribe(),this.subscriptions.delete(e))}unsubscribeAll(){this.subscriptions.forEach((e,t)=>{e.unsubscribe()}),this.subscriptions.clear(),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.connectionState.isConnected=!1,this.connectionState.isReconnecting=!1,this.notifyConnectionCallbacks()}onConnectionChange(e){return this.connectionCallbacks.add(e),e(this.connectionState),()=>{this.connectionCallbacks.delete(e)}}notifyConnectionCallbacks(){this.connectionCallbacks.forEach(e=>{try{e(this.connectionState)}catch(t){console.error("Error in connection callback:",t)}})}getConnectionState(){return{...this.connectionState}}getSubscriptionCount(){return this.subscriptions.size}forceReconnect(){this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.reconnectAttempts=0,this.scheduleReconnect()}destroy(){this.unsubscribeAll(),this.connectionCallbacks.clear(),this.isInitialized=!1,this.reconnectAttempts=0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)}},ij=[{to:"/",icon:ov,label:"Home"},{to:"/accounts",icon:uv,label:"Accounts"},{to:"/transactions",icon:pv,label:"Transactions"},{to:"/budget",icon:fv,label:"Budget"},{to:"/goals",icon:cv,label:"Goals"}],oj=e=>bo.jsxs(Zk,{...e,children:[bo.jsx("path",{d:"M12 5V19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),bo.jsx("path",{d:"M5 12H19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});let cj=null;const lj={GBP:"\xa3",USD:"$",EUR:"\u20ac",CAD:"$",AUD:"$",JPY:"\xa5",CHF:"CHF",CNY:"\xa5",INR:"\u20b9",NZD:"$"},uj={GBP:1,USD:1.25,EUR:1.176470588},dj=[{code:"GBP",name:"British Pound",symbol:"\xa3"},{code:"USD",name:"US Dollar",symbol:"$"},{code:"EUR",name:"Euro",symbol:"\u20ac"},{code:"CAD",name:"Canadian Dollar",symbol:"$"},{code:"AUD",name:"Australian Dollar",symbol:"$"},{code:"JPY",name:"Japanese Yen",symbol:"\xa5"},{code:"CHF",name:"Swiss Franc",symbol:"CHF"},{code:"CNY",name:"Chinese Yuan",symbol:"\xa5"},{code:"INR",name:"Indian Rupee",symbol:"\u20b9"},{code:"NZD",name:"New Zealand Dollar",symbol:"$"}];class hj extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class pj extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const gj={},mj=Symbol("evaluating"),fj="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{},yj=vs(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}}),vj=new Set(["string","number","symbol"]),bj={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},wj=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,ys,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},xj=ms("$ZodError",wj),kj=ms("$ZodError",wj,{Parent:Error}),_j=e=>(t,n,r,a)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new hj;if(i.issues.length){const t=new(a?.Err??e)(i.issues.map(e=>Ps(e,s,fs())));throw fj(t,a?.callee),t}return i.value},Sj=e=>async(t,n,r,a)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const t=new(a?.Err??e)(i.issues.map(e=>Ps(e,s,fs())));throw fj(t,a?.callee),t}return i.value},jj=e=>(t,n,r)=>{const a=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},a);if(s instanceof Promise)throw new hj;return s.issues.length?{success:!1,error:new(e??xj)(s.issues.map(e=>Ps(e,a,fs())))}:{success:!0,data:s.value}},Ij=jj(kj),Cj=e=>async(t,n,r)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},a);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(e=>Ps(e,a,fs())))}:{success:!0,data:s.value}},Ej=Cj(kj),Tj=e=>(t,n,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return _j(e)(t,n,a)},Nj=e=>(t,n,r)=>_j(e)(t,n,r),Aj=e=>async(t,n,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Sj(e)(t,n,a)},Oj=e=>async(t,n,r)=>Sj(e)(t,n,r),Dj=e=>(t,n,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return jj(e)(t,n,a)},Pj=e=>(t,n,r)=>jj(e)(t,n,r),Mj=e=>async(t,n,r)=>{const a=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Cj(e)(t,n,a)},Lj=e=>async(t,n,r)=>Cj(e)(t,n,r),Rj=/^[cC][^\s-]{8,}$/,Uj=/^[0-9a-z]+$/,zj=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$j=/^[0-9a-vA-V]{20}$/,Bj=/^[A-Za-z0-9]{27}$/,Fj=/^[a-zA-Z0-9_-]{21}$/,Wj=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,qj=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Gj=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Vj=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Hj=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Yj=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Kj=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Zj=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Jj=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Qj=/^[A-Za-z0-9_-]*$/,Xj=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,eI=/^\+(?:[0-9]){6,14}[0-9]$/,tI="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",nI=new RegExp(`^${tI}$`),rI=/^-?\d+$/,aI=/^-?\d+(?:\.\d+)?/,sI=/^(?:true|false)$/i,iI=/^[^A-Z]*$/,oI=/^[^a-z]*$/,cI=ms("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),lI={number:"number",bigint:"bigint",object:"date"},uI=ms("$ZodCheckLessThan",(e,t)=>{cI.init(e,t);const n=lI[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),dI=ms("$ZodCheckGreaterThan",(e,t)=>{cI.init(e,t);const n=lI[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),hI=ms("$ZodCheckMultipleOf",(e,t)=>{cI.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let a=(r.split(".")[1]||"").length;if(0===a&&/\d?e-\d?/.test(r)){const e=r.match(/\d?e-(\d?)/);e?.[1]&&(a=Number.parseInt(e[1]))}const s=n>a?n:a;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),pI=ms("$ZodCheckNumberFormat",(e,t)=>{cI.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[a,s]=bj[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=a,r.maximum=s,n&&(r.pattern=rI)}),e._zod.check=i=>{const o=i.value;if(n){if(!Number.isInteger(o))return void i.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?i.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):i.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}o<a&&i.issues.push({origin:"number",input:o,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),o>s&&i.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:e})}}),gI=ms("$ZodCheckMaxLength",(e,t)=>{var n;cI.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!bs(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const a=Ms(r);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),mI=ms("$ZodCheckMinLength",(e,t)=>{var n;cI.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!bs(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const a=Ms(r);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),fI=ms("$ZodCheckLengthEquals",(e,t)=>{var n;cI.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!bs(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,a=r.length;if(a===t.length)return;const s=Ms(r),i=a>t.length;n.issues.push({origin:s,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),yI=ms("$ZodCheckStringFormat",(e,t)=>{var n,r;cI.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),vI=ms("$ZodCheckRegex",(e,t)=>{yI.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),bI=ms("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=iI),yI.init(e,t)}),wI=ms("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=oI),yI.init(e,t)}),xI=ms("$ZodCheckIncludes",(e,t)=>{cI.init(e,t);const n=Es(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),kI=ms("$ZodCheckStartsWith",(e,t)=>{cI.init(e,t);const n=new RegExp(`^${Es(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),_I=ms("$ZodCheckEndsWith",(e,t)=>{cI.init(e,t);const n=new RegExp(`.*${Es(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),SI=ms("$ZodCheckOverwrite",(e,t)=>{cI.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class jI{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const a of r)this.content.push(a)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const II={major:4,minor:1,patch:12},CI=ms("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=II;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const a of r)for(const t of a._zod.onattach)t(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,a=As(e);for(const s of t){if(s._zod.def.when){if(!s._zod.def.when(e))continue}else if(a)continue;const t=e.issues.length,i=s._zod.check(e);if(i instanceof Promise&&!1===n?.async)throw new hj;if(r||i instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await i,e.issues.length!==t&&(a||(a=As(e,t)))});else{if(e.issues.length===t)continue;a||(a=As(e,t))}}return r?r.then(()=>e):e},n=(n,a,s)=>{if(As(n))return n.aborted=!0,n;const i=t(a,r,s);if(i instanceof Promise){if(!1===s.async)throw new hj;return i.then(t=>e._zod.parse(t,s))}return e._zod.parse(i,s)};e._zod.run=(a,s)=>{if(s.skipChecks)return e._zod.parse(a,s);if("backward"===s.direction){const t=e._zod.parse({value:a.value,issues:[]},{...s,skipChecks:!0});return t instanceof Promise?t.then(e=>n(e,a,s)):n(t,a,s)}const i=e._zod.parse(a,s);if(i instanceof Promise){if(!1===s.async)throw new hj;return i.then(e=>t(e,r,s))}return t(i,r,s)}}e["~standard"]={validate:t=>{try{const n=Ij(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return Ej(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),EI=ms("$ZodString",(e,t)=>{var n;CI.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(a){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),TI=ms("$ZodStringFormat",(e,t)=>{yI.init(e,t),EI.init(e,t)}),NI=ms("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=qj),TI.init(e,t)}),AI=ms("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Gj(e))}else t.pattern??(t.pattern=Gj());TI.init(e,t)}),OI=ms("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Vj),TI.init(e,t)}),DI=ms("$ZodURL",(e,t)=>{TI.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),a=new URL(r);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Xj.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(t.normalize?n.value=a.href:n.value=r)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),PI=ms("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),TI.init(e,t)}),MI=ms("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Fj),TI.init(e,t)}),LI=ms("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Rj),TI.init(e,t)}),RI=ms("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Uj),TI.init(e,t)}),UI=ms("$ZodULID",(e,t)=>{t.pattern??(t.pattern=zj),TI.init(e,t)}),zI=ms("$ZodXID",(e,t)=>{t.pattern??(t.pattern=$j),TI.init(e,t)}),$I=ms("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Bj),TI.init(e,t)}),BI=ms("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=Rs({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${tI}T(?:${r})$`)}(t)),TI.init(e,t)}),FI=ms("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=nI),TI.init(e,t)}),WI=ms("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=function(e){return new RegExp(`^${Rs(e)}$`)}(t)),TI.init(e,t)}),qI=ms("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Wj),TI.init(e,t)}),GI=ms("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Hj),TI.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),VI=ms("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Yj),TI.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),HI=ms("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Kj),TI.init(e,t)}),YI=ms("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Zj),TI.init(e,t),e._zod.check=n=>{const r=n.value.split("/");try{if(2!==r.length)throw new Error;const[e,t]=r;if(!t)throw new Error;const n=Number(t);if(`${n}`!==t)throw new Error;if(n<0||n>128)throw new Error;new URL(`http://[${e}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}}),KI=ms("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Jj),TI.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Us(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}}),ZI=ms("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Qj),TI.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{(function(e){if(!Qj.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return Us(t.padEnd(4*Math.ceil(t.length/4),"="))})(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),JI=ms("$ZodE164",(e,t)=>{t.pattern??(t.pattern=eI),TI.init(e,t)}),QI=ms("$ZodJWT",(e,t)=>{TI.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const a=JSON.parse(atob(r));return!("typ"in a&&"JWT"!==a?.typ||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),XI=ms("$ZodNumber",(e,t)=>{CI.init(e,t),e._zod.pattern=e._zod.bag.pattern??aI,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(i){}const a=n.value;if("number"==typeof a&&!Number.isNaN(a)&&Number.isFinite(a))return n;const s="number"==typeof a?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...s?{received:s}:{}}),n}}),eC=ms("$ZodNumber",(e,t)=>{pI.init(e,t),XI.init(e,t)}),tC=ms("$ZodBoolean",(e,t)=>{CI.init(e,t),e._zod.pattern=sI,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(s){}const a=n.value;return"boolean"==typeof a||n.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),n}}),nC=ms("$ZodUnknown",(e,t)=>{CI.init(e,t),e._zod.parse=e=>e}),rC=ms("$ZodNever",(e,t)=>{CI.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),aC=ms("$ZodArray",(e,t)=>{CI.init(e,t),e._zod.parse=(n,r)=>{const a=n.value;if(!Array.isArray(a))return n.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),n;n.value=Array(a.length);const s=[];for(let e=0;e<a.length;e++){const i=a[e],o=t.element._zod.run({value:i,issues:[]},r);o instanceof Promise?s.push(o.then(t=>zs(t,n,e))):zs(o,n,e)}return s.length?Promise.all(s).then(()=>n):n}}),sC=ms("$ZodObject",(e,t)=>{CI.init(e,t);const n=Object.getOwnPropertyDescriptor(t,"shape");if(!n?.get){const e=t.shape;Object.defineProperty(t,"shape",{get:()=>{const n={...e};return Object.defineProperty(t,"shape",{value:n}),n}})}const r=vs(()=>Bs(t));xs(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n});const a=js,s=t.catchall;let i;e._zod.parse=(t,n)=>{i??(i=r.value);const o=t.value;if(!a(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};const c=[],l=i.shape;for(const e of i.keys){const r=l[e]._zod.run({value:o[e],issues:[]},n);r instanceof Promise?c.push(r.then(n=>$s(n,t,e,o))):$s(r,t,e,o)}return s?Fs(c,o,t,n,r.value,e):c.length?Promise.all(c).then(()=>t):t}}),iC=ms("$ZodObjectJIT",(e,t)=>{sC.init(e,t);const n=e._zod.parse,r=vs(()=>Bs(t));let a;const s=js,i=!gj.jitless,o=i&&yj.value,c=t.catchall;let l;e._zod.parse=(u,d)=>{l??(l=r.value);const h=u.value;return s(h)?i&&o&&!1===d?.async&&!0!==d.jitless?(a||(a=(e=>{const t=new jI(["shape","payload","ctx"]),n=r.value,a=e=>{const t=Ss(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const s=Object.create(null);let i=0;for(const r of n.keys)s[r]="key_"+i++;t.write("const newResult = {};");for(const r of n.keys){const e=s[r],n=Ss(r);t.write(`const ${e} = ${a(r)};`),t.write(`\n        if (${e}.issues.length) {\n          payload.issues = payload.issues.concat(${e}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${n}, ...iss.path] : [${n}]\n          })));\n        }\n        \n        \n        if (${e}.value === undefined) {\n          if (${n} in input) {\n            newResult[${n}] = undefined;\n          }\n        } else {\n          newResult[${n}] = ${e}.value;\n        }\n        \n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const o=t.compile();return(t,n)=>o(e,t,n)})(t.shape)),u=a(u,d),c?Fs([],h,u,d,l,e):u):n(u,d):(u.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),u)}}),oC=ms("$ZodUnion",(e,t)=>{CI.init(e,t),xs(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),xs(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),xs(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),xs(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>ws(e.source)).join("|")})$`)}});const n=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(a,s)=>{if(n)return r(a,s);let i=!1;const o=[];for(const e of t.options){const t=e._zod.run({value:a.value,issues:[]},s);if(t instanceof Promise)o.push(t),i=!0;else{if(0===t.issues.length)return t;o.push(t)}}return i?Promise.all(o).then(t=>Ws(t,a,e,s)):Ws(o,a,e,s)}}),cC=ms("$ZodIntersection",(e,t)=>{CI.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,a=t.left._zod.run({value:r,issues:[]},n),s=t.right._zod.run({value:r,issues:[]},n);return a instanceof Promise||s instanceof Promise?Promise.all([a,s]).then(([t,n])=>Gs(e,t,n)):Gs(e,a,s)}}),lC=ms("$ZodEnum",(e,t)=>{CI.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(e=>vj.has(typeof e)).map(e=>"string"==typeof e?Es(e):e.toString()).join("|")})$`),e._zod.parse=(t,a)=>{const s=t.value;return r.has(s)||t.issues.push({code:"invalid_value",values:n,input:s,inst:e}),t}}),uC=ms("$ZodTransform",(e,t)=>{CI.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new pj(e.constructor.name);const a=t.transform(n.value,n);if(r.async)return(a instanceof Promise?a:Promise.resolve(a)).then(e=>(n.value=e,n));if(a instanceof Promise)throw new hj;return n.value=a,n}}),dC=ms("$ZodOptional",(e,t)=>{CI.init(e,t),e._zod.optin="optional",e._zod.optout="optional",xs(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),xs(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${ws(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>{if("optional"===t.innerType._zod.optin){const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(t=>Vs(t,e.value)):Vs(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,n)}}),hC=ms("$ZodNullable",(e,t)=>{CI.init(e,t),xs(e._zod,"optin",()=>t.innerType._zod.optin),xs(e._zod,"optout",()=>t.innerType._zod.optout),xs(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${ws(e.source)}|null)$`):void 0}),xs(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),pC=ms("$ZodDefault",(e,t)=>{CI.init(e,t),e._zod.optin="optional",xs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>Hs(e,t)):Hs(r,t)}}),gC=ms("$ZodPrefault",(e,t)=>{CI.init(e,t),e._zod.optin="optional",xs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>("backward"===n.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),mC=ms("$ZodNonOptional",(e,t)=>{CI.init(e,t),xs(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{const a=t.innerType._zod.run(n,r);return a instanceof Promise?a.then(t=>Ys(t,e)):Ys(a,e)}}),fC=ms("$ZodCatch",(e,t)=>{CI.init(e,t),xs(e._zod,"optin",()=>t.innerType._zod.optin),xs(e._zod,"optout",()=>t.innerType._zod.optout),xs(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>Ps(e,n,fs()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>Ps(e,n,fs()))},input:e.value}),e.issues=[]),e)}}),yC=ms("$ZodPipe",(e,t)=>{CI.init(e,t),xs(e._zod,"values",()=>t.in._zod.values),xs(e._zod,"optin",()=>t.in._zod.optin),xs(e._zod,"optout",()=>t.out._zod.optout),xs(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,n)=>{if("backward"===n.direction){const r=t.out._zod.run(e,n);return r instanceof Promise?r.then(e=>Ks(e,t.in,n)):Ks(r,t.in,n)}const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>Ks(e,t.out,n)):Ks(r,t.out,n)}}),vC=ms("$ZodReadonly",(e,t)=>{CI.init(e,t),xs(e._zod,"propValues",()=>t.innerType._zod.propValues),xs(e._zod,"values",()=>t.innerType._zod.values),xs(e._zod,"optin",()=>t.innerType._zod.optin),xs(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{if("backward"===n.direction)return t.innerType._zod.run(e,n);const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Zs):Zs(r)}}),bC=ms("$ZodCustom",(e,t)=>{cI.init(e,t),CI.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,a=t.fn(r);if(a instanceof Promise)return a.then(t=>Js(t,n,r,e));Js(a,n,r,e)}});class wC{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};delete n.id;const r={...n,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}const xC=Qs(),kC=ms("ZodISODateTime",(e,t)=>{BI.init(e,t),qC.init(e,t)}),_C=ms("ZodISODate",(e,t)=>{FI.init(e,t),qC.init(e,t)}),SC=ms("ZodISOTime",(e,t)=>{WI.init(e,t),qC.init(e,t)}),jC=ms("ZodISODuration",(e,t)=>{qI.init(e,t),qC.init(e,t)}),IC=(e,t)=>{xj.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t=e=>e.message){const n={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code&&a.errors.length)a.errors.map(e=>r({issues:e}));else if("invalid_key"===a.code)r({issues:a.issues});else if("invalid_element"===a.code)r({issues:a.issues});else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){const n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(e),n}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const n={},r=[];for(const a of e.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,ys,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,ys,2)}},isEmpty:{get:()=>0===e.issues.length}})},CC=ms("ZodError",IC),EC=ms("ZodError",IC,{Parent:Error}),TC=_j(EC),NC=Sj(EC),AC=jj(EC),OC=Cj(EC),DC=Tj(EC),PC=Nj(EC),MC=Aj(EC),LC=Oj(EC),RC=Dj(EC),UC=Pj(EC),zC=Mj(EC),$C=Lj(EC),BC=ms("ZodType",(e,t)=>(CI.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(_s(t,{checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,n)=>Ts(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>TC(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>AC(e,t,n),e.parseAsync=async(t,n)=>NC(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>OC(e,t,n),e.spa=e.safeParseAsync,e.encode=(t,n)=>DC(e,t,n),e.decode=(t,n)=>PC(e,t,n),e.encodeAsync=async(t,n)=>MC(e,t,n),e.decodeAsync=async(t,n)=>LC(e,t,n),e.safeEncode=(t,n)=>RC(e,t,n),e.safeDecode=(t,n)=>UC(e,t,n),e.safeEncodeAsync=async(t,n)=>zC(e,t,n),e.safeDecodeAsync=async(t,n)=>$C(e,t,n),e.refine=(t,n)=>e.check(function(e,t={}){return function(e,t,n){return new TE({type:"custom",check:"custom",fn:t,...Ns(n)})}(0,e,t)}(t,n)),e.superRefine=t=>e.check(function(e){const t=function(e){const t=new cI({check:"custom",...Ns(void 0)});return t._zod.check=e,t}(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(Ls(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(Ls(r))}},e(n.value,n)));return t}(t)),e.overwrite=t=>e.check(ci(t)),e.optional=()=>yi(e),e.nullable=()=>vi(e),e.nullish=()=>yi(vi(e)),e.nonoptional=t=>function(e,t){return new jE({type:"nonoptional",innerType:e,...Ns(t)})}(e,t),e.array=()=>gi(e),e.or=t=>function(e){return new yE({type:"union",options:e,...Ns(void 0)})}([e,t]),e.and=t=>new vE({type:"intersection",left:e,right:t}),e.transform=t=>bi(e,new wE({type:"transform",transform:t})),e.default=t=>{return n=t,new _E({type:"default",innerType:e,get defaultValue(){return"function"==typeof n?n():Cs(n)}});var n},e.prefault=t=>{return n=t,new SE({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof n?n():Cs(n)}});var n},e.catch=t=>{return new IE({type:"catch",innerType:e,catchValue:"function"==typeof(n=t)?n:()=>n});var n},e.pipe=t=>bi(e,t),e.readonly=()=>new EE({type:"readonly",innerType:e}),e.describe=t=>{const n=e.clone();return xC.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>xC.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return xC.get(e);const n=e.clone();return xC.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),FC=ms("_ZodString",(e,t)=>{EI.init(e,t),BC.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new vI({check:"string_format",format:"regex",...Ns(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new xI({check:"string_format",format:"includes",...Ns(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new kI({check:"string_format",format:"starts_with",...Ns(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new _I({check:"string_format",format:"ends_with",...Ns(t),suffix:e})}(...t)),e.min=(...t)=>e.check(ii(...t)),e.max=(...t)=>e.check(si(...t)),e.length=(...t)=>e.check(oi(...t)),e.nonempty=(...t)=>e.check(ii(1,...t)),e.lowercase=t=>e.check(function(e){return new bI({check:"string_format",format:"lowercase",...Ns(e)})}(t)),e.uppercase=t=>e.check(function(e){return new wI({check:"string_format",format:"uppercase",...Ns(e)})}(t)),e.trim=()=>e.check(ci(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return ci(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(ci(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(ci(e=>e.toUpperCase()))}),WC=ms("ZodString",(e,t)=>{EI.init(e,t),FC.init(e,t),e.email=t=>e.check(function(e,t){return new GC({type:"string",format:"email",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.url=t=>e.check(function(e,t){return new YC({type:"string",format:"url",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.jwt=t=>e.check(function(e,t){return new lE({type:"string",format:"jwt",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.emoji=t=>e.check(function(e,t){return new KC({type:"string",format:"emoji",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.guid=t=>e.check(Xs(VC,t)),e.uuid=t=>e.check(function(e,t){return new HC({type:"string",format:"uuid",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.uuidv4=t=>e.check(function(e,t){return new HC({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ns(t)})}(0,t)),e.uuidv6=t=>e.check(function(e,t){return new HC({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ns(t)})}(0,t)),e.uuidv7=t=>e.check(function(e,t){return new HC({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ns(t)})}(0,t)),e.nanoid=t=>e.check(function(e,t){return new ZC({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.guid=t=>e.check(Xs(VC,t)),e.cuid=t=>e.check(function(e,t){return new JC({type:"string",format:"cuid",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.cuid2=t=>e.check(function(e,t){return new QC({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.ulid=t=>e.check(function(e,t){return new XC({type:"string",format:"ulid",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.base64=t=>e.check(function(e,t){return new iE({type:"string",format:"base64",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.base64url=t=>e.check(function(e,t){return new oE({type:"string",format:"base64url",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.xid=t=>e.check(function(e,t){return new eE({type:"string",format:"xid",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.ksuid=t=>e.check(function(e,t){return new tE({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.ipv4=t=>e.check(function(e,t){return new nE({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.ipv6=t=>e.check(function(e,t){return new rE({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.cidrv4=t=>e.check(function(e,t){return new aE({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.cidrv6=t=>e.check(function(e,t){return new sE({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.e164=t=>e.check(function(e,t){return new cE({type:"string",format:"e164",check:"string_format",abort:!1,...Ns(t)})}(0,t)),e.datetime=t=>e.check(function(e){return function(e,t){return new kC({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ns(t)})}(0,e)}(t)),e.date=t=>e.check(function(e){return function(e,t){return new _C({type:"string",format:"date",check:"string_format",...Ns(t)})}(0,e)}(t)),e.time=t=>e.check(function(e){return function(e,t){return new SC({type:"string",format:"time",check:"string_format",precision:null,...Ns(t)})}(0,e)}(t)),e.duration=t=>e.check(function(e){return function(e,t){return new jC({type:"string",format:"duration",check:"string_format",...Ns(t)})}(0,e)}(t))}),qC=ms("ZodStringFormat",(e,t)=>{TI.init(e,t),FC.init(e,t)}),GC=ms("ZodEmail",(e,t)=>{OI.init(e,t),qC.init(e,t)}),VC=ms("ZodGUID",(e,t)=>{NI.init(e,t),qC.init(e,t)}),HC=ms("ZodUUID",(e,t)=>{AI.init(e,t),qC.init(e,t)}),YC=ms("ZodURL",(e,t)=>{DI.init(e,t),qC.init(e,t)}),KC=ms("ZodEmoji",(e,t)=>{PI.init(e,t),qC.init(e,t)}),ZC=ms("ZodNanoID",(e,t)=>{MI.init(e,t),qC.init(e,t)}),JC=ms("ZodCUID",(e,t)=>{LI.init(e,t),qC.init(e,t)}),QC=ms("ZodCUID2",(e,t)=>{RI.init(e,t),qC.init(e,t)}),XC=ms("ZodULID",(e,t)=>{UI.init(e,t),qC.init(e,t)}),eE=ms("ZodXID",(e,t)=>{zI.init(e,t),qC.init(e,t)}),tE=ms("ZodKSUID",(e,t)=>{$I.init(e,t),qC.init(e,t)}),nE=ms("ZodIPv4",(e,t)=>{GI.init(e,t),qC.init(e,t)}),rE=ms("ZodIPv6",(e,t)=>{VI.init(e,t),qC.init(e,t)}),aE=ms("ZodCIDRv4",(e,t)=>{HI.init(e,t),qC.init(e,t)}),sE=ms("ZodCIDRv6",(e,t)=>{YI.init(e,t),qC.init(e,t)}),iE=ms("ZodBase64",(e,t)=>{KI.init(e,t),qC.init(e,t)}),oE=ms("ZodBase64URL",(e,t)=>{ZI.init(e,t),qC.init(e,t)}),cE=ms("ZodE164",(e,t)=>{JI.init(e,t),qC.init(e,t)}),lE=ms("ZodJWT",(e,t)=>{QI.init(e,t),qC.init(e,t)}),uE=ms("ZodNumber",(e,t)=>{XI.init(e,t),BC.init(e,t),e.gt=(t,n)=>e.check(ni(t,n)),e.gte=(t,n)=>e.check(ri(t,n)),e.min=(t,n)=>e.check(ri(t,n)),e.lt=(t,n)=>e.check(ei(t,n)),e.lte=(t,n)=>e.check(ti(t,n)),e.max=(t,n)=>e.check(ti(t,n)),e.int=t=>e.check(di(t)),e.safe=t=>e.check(di(t)),e.positive=t=>e.check(ni(0,t)),e.nonnegative=t=>e.check(ri(0,t)),e.negative=t=>e.check(ei(0,t)),e.nonpositive=t=>e.check(ti(0,t)),e.multipleOf=(t,n)=>e.check(ai(t,n)),e.step=(t,n)=>e.check(ai(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null}),dE=ms("ZodNumberFormat",(e,t)=>{eC.init(e,t),uE.init(e,t)}),hE=ms("ZodBoolean",(e,t)=>{tC.init(e,t),BC.init(e,t)}),pE=ms("ZodUnknown",(e,t)=>{nC.init(e,t),BC.init(e,t)}),gE=ms("ZodNever",(e,t)=>{rC.init(e,t),BC.init(e,t)}),mE=ms("ZodArray",(e,t)=>{aC.init(e,t),BC.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(ii(t,n)),e.nonempty=t=>e.check(ii(1,t)),e.max=(t,n)=>e.check(si(t,n)),e.length=(t,n)=>e.check(oi(t,n)),e.unwrap=()=>e.element}),fE=ms("ZodObject",(e,t)=>{iC.init(e,t),BC.init(e,t),xs(e,"shape",()=>t.shape),e.keyof=()=>fi(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:pi()}),e.loose=()=>e.clone({...e._zod.def,catchall:pi()}),e.strict=()=>{return e.clone({...e._zod.def,catchall:function(e,t){return new gE({type:"never",...Ns(t)})}(0,t)});var t},e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!Is(t))throw new Error("Invalid input to extend: expected a plain object");const n=e._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=_s(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return ks(this,"shape",n),n},checks:[]});return Ts(e,r)}(e,t),e.safeExtend=t=>function(e,t){if(!Is(t))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return ks(this,"shape",n),n},checks:e._zod.def.checks};return Ts(e,n)}(e,t),e.merge=t=>function(e,t){const n=_s(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return ks(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Ts(e,n)}(e,t),e.pick=t=>function(e,t){const n=e._zod.def;return Ts(e,_s(e._zod.def,{get shape(){const e={};for(const r in t){if(!(r in n.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=n.shape[r])}return ks(this,"shape",e),e},checks:[]}))}(e,t),e.omit=t=>function(e,t){const n=e._zod.def,r=_s(e._zod.def,{get shape(){const r={...e._zod.def.shape};for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return ks(this,"shape",r),r},checks:[]});return Ts(e,r)}(e,t),e.partial=(...t)=>function(e,t,n){const r=_s(t._zod.def,{get shape(){const r=t._zod.def.shape,a={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(a[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)a[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return ks(this,"shape",a),a},checks:[]});return Ts(t,r)}(xE,e,t[0]),e.required=(...t)=>function(e,t,n){const r=_s(t._zod.def,{get shape(){const r=t._zod.def.shape,a={...r};if(n)for(const t in n){if(!(t in a))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(a[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)a[t]=new e({type:"nonoptional",innerType:r[t]});return ks(this,"shape",a),a},checks:[]});return Ts(t,r)}(jE,e,t[0])}),yE=ms("ZodUnion",(e,t)=>{oC.init(e,t),BC.init(e,t),e.options=t.options}),vE=ms("ZodIntersection",(e,t)=>{cC.init(e,t),BC.init(e,t)}),bE=ms("ZodEnum",(e,t)=>{lC.init(e,t),BC.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const a={};for(const s of e){if(!n.has(s))throw new Error(`Key ${s} not found in enum`);a[s]=t.entries[s]}return new bE({...t,checks:[],...Ns(r),entries:a})},e.exclude=(e,r)=>{const a={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete a[t]}return new bE({...t,checks:[],...Ns(r),entries:a})}}),wE=ms("ZodTransform",(e,t)=>{uC.init(e,t),BC.init(e,t),e._zod.parse=(n,r)=>{if("backward"===r.direction)throw new pj(e.constructor.name);n.addIssue=r=>{if("string"==typeof r)n.issues.push(Ls(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),n.issues.push(Ls(t))}};const a=t.transform(n.value,n);return a instanceof Promise?a.then(e=>(n.value=e,n)):(n.value=a,n)}}),xE=ms("ZodOptional",(e,t)=>{dC.init(e,t),BC.init(e,t),e.unwrap=()=>e._zod.def.innerType}),kE=ms("ZodNullable",(e,t)=>{hC.init(e,t),BC.init(e,t),e.unwrap=()=>e._zod.def.innerType}),_E=ms("ZodDefault",(e,t)=>{pC.init(e,t),BC.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),SE=ms("ZodPrefault",(e,t)=>{gC.init(e,t),BC.init(e,t),e.unwrap=()=>e._zod.def.innerType}),jE=ms("ZodNonOptional",(e,t)=>{mC.init(e,t),BC.init(e,t),e.unwrap=()=>e._zod.def.innerType}),IE=ms("ZodCatch",(e,t)=>{fC.init(e,t),BC.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),CE=ms("ZodPipe",(e,t)=>{yC.init(e,t),BC.init(e,t),e.in=t.in,e.out=t.out}),EE=ms("ZodReadonly",(e,t)=>{vC.init(e,t),BC.init(e,t),e.unwrap=()=>e._zod.def.innerType}),TE=ms("ZodCustom",(e,t)=>{bC.init(e,t),BC.init(e,t)}),NE={ALLOWED_TAGS:[],ALLOWED_ATTR:[],ALLOW_DATA_ATTR:!1,KEEP_CONTENT:!0},AE=e=>e?rj.sanitize(e,NE):"",OE=e=>{if(!e)return"";let t=rj.sanitize(e,NE);return t=t.replace(/\[([^\]]+)\]\(((?:[^)(]|\([^)]*\))*)\)/gi,(e,t,n)=>{const r=n.toLowerCase().trim();return r.startsWith("javascript:")||r.startsWith("data:")||r.startsWith("vbscript:")?`[${t}]()`:e}),t};"undefined"!=typeof window&&rj.addHook("afterSanitizeAttributes",e=>{"target"in e&&"_blank"===e.getAttribute("target")&&e.setAttribute("rel","noopener noreferrer")});const DE=li().refine(e=>{try{return new Bx(e),!0}catch{return!1}},{message:"Invalid decimal number"}),PE=mi({id:li().uuid().optional(),date:li().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be in YYYY-MM-DD format"),description:li().min(1,"Description is required").max(500,"Description must be less than 500 characters").transform(e=>AE(e.trim())),amount:DE.refine(e=>new Bx(e).abs().gt(0),{message:"Amount must be greater than 0"}),type:fi(["income","expense"]),category:li().min(1,"Category is required"),subcategory:li().optional(),accountId:li().uuid("Invalid account ID"),tags:gi(li().transform(e=>AE(e))).optional(),notes:li().max(1e3,"Notes must be less than 1000 characters").transform(e=>e?OE(e):e).optional(),attachments:gi(li()).optional(),isRecurring:hi().optional(),recurringId:li().uuid().optional(),location:mi({latitude:ui().min(-90).max(90).optional(),longitude:ui().min(-180).max(180).optional(),address:li().optional()}).optional(),merchant:li().max(200,"Merchant name must be less than 200 characters").optional(),paymentMethod:fi(["cash","credit","debit","transfer","check","other"]).optional(),status:fi(["pending","cleared","reconciled"]).optional(),taxDeductible:hi().optional(),createdAt:li().optional(),updatedAt:li().optional()}),ME=mi({id:li().uuid().optional(),name:li().min(1,"Account name is required").max(100,"Account name must be less than 100 characters").transform(e=>AE(e.trim())),type:fi(["checking","savings","credit_card","investment","loan","asset","other"]),balance:DE,currency:li().length(3,"Currency must be a 3-letter code").toUpperCase().default("USD"),institution:li().max(200,"Institution name must be less than 200 characters").transform(e=>e?AE(e):e).optional(),accountNumber:li().max(50,"Account number must be less than 50 characters").transform(e=>e?AE(e):e).optional(),isActive:hi().default(!0),color:li().regex(/^#[0-9A-Fa-f]{6}$/,"Color must be a valid hex code").optional(),notes:li().max(1e3,"Notes must be less than 1000 characters").transform(e=>e?OE(e):e).optional(),createdAt:li().optional(),updatedAt:li().optional()}),LE=mi({id:li().uuid().optional(),name:li().min(1,"Budget name is required").max(100,"Budget name must be less than 100 characters").transform(e=>AE(e.trim())),category:li().min(1,"Category is required"),amount:DE.refine(e=>new Bx(e).gte(0),{message:"Budget amount must be non-negative"}),period:fi(["daily","weekly","monthly","quarterly","yearly"]),startDate:li().regex(/^\d{4}-\d{2}-\d{2}$/,"Start date must be in YYYY-MM-DD format"),endDate:li().regex(/^\d{4}-\d{2}-\d{2}$/,"End date must be in YYYY-MM-DD format").optional(),alertThreshold:ui().min(0,"Alert threshold must be between 0 and 100").max(100,"Alert threshold must be between 0 and 100").optional(),notes:li().max(1e3,"Notes must be less than 1000 characters").optional(),isActive:hi().default(!0),createdAt:li().optional(),updatedAt:li().optional()}),RE=mi({id:li().uuid().optional(),name:li().min(1,"Goal name is required").max(100,"Goal name must be less than 100 characters").transform(e=>e.trim()),targetAmount:DE.refine(e=>new Bx(e).gt(0),{message:"Target amount must be greater than 0"}),currentAmount:DE.default("0"),targetDate:li().regex(/^\d{4}-\d{2}-\d{2}$/,"Target date must be in YYYY-MM-DD format"),category:fi(["emergency_fund","vacation","home","car","education","retirement","other"]),priority:fi(["low","medium","high"]),description:li().max(500,"Description must be less than 500 characters").optional(),isActive:hi().default(!0),createdAt:li().optional(),updatedAt:li().optional()}),UE=mi({id:li().uuid().optional(),name:li().min(1,"Category name is required").max(50,"Category name must be less than 50 characters").transform(e=>e.trim()),type:fi(["income","expense","both"]),color:li().regex(/^#[0-9A-Fa-f]{6}$/,"Color must be a valid hex code").optional(),icon:li().max(50,"Icon name must be less than 50 characters").optional(),parentId:li().uuid().optional(),isActive:hi().default(!0),order:ui().int().min(0).optional()}),zE=mi({id:li().uuid().optional(),name:li().min(1,"Tag name is required").max(30,"Tag name must be less than 30 characters").transform(e=>e.trim().toLowerCase()),color:li().regex(/^#[0-9A-Fa-f]{6}$/,"Color must be a valid hex code").optional()}),$E=mi({date:li(),description:li(),amount:li(),category:li().optional(),accountName:li().optional(),notes:li().optional(),tags:li().optional()});mi({defaultCurrency:li().length(3,"Currency must be a 3-letter code").toUpperCase(),numberFormat:fi(["1,234.56","1.234,56","1 234.56","1 234,56"]),showCurrencySymbol:hi()}),mi({emailNotifications:hi(),pushNotifications:hi(),budgetAlerts:hi(),goalReminders:hi(),billReminders:hi(),alertThreshold:ui().min(0).max(100)});const BE=li().email("Invalid email address").max(255,"Email must be less than 255 characters"),FE=li().min(8,"Password must be at least 8 characters").max(100,"Password must be less than 100 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character");class WE{static validateTransaction(e){return PE.parse(e)}static validateAccount(e){return ME.parse(e)}static validateBudget(e){return LE.parse(e)}static validateGoal(e){return RE.parse(e)}static validateCategory(e){return UE.parse(e)}static validateTag(e){return zE.parse(e)}static validateCsvImportRow(e){return $E.parse(e)}static validateEmail(e){return BE.parse(e)}static validatePassword(e){return FE.parse(e)}static safeValidate(e,t){const n=e.safeParse(t);return n.success?{success:!0,data:n.data}:{success:!1,errors:n.error}}static formatErrors(e){const t={};return e.issues.forEach(e=>{const n=e.path.join("."),r=this.getUserFriendlyValidationMessage(e.message,n);t[n]=r}),t}static getUserFriendlyValidationMessage(e,t){const n={Required:`Please enter a ${t}`,"String must contain at least 1 character(s)":`Please enter a ${t}`,"Invalid uuid":"Please select a valid option","Invalid decimal number":"Please enter a valid number (e.g., 10.50)","Amount must be greater than 0":"Amount must be greater than zero","Date must be in YYYY-MM-DD format":"Please select a valid date"};if(n[e])return n[e];for(const[r,a]of Object.entries(n))if(e.includes(r))return a;return e}static sanitizeString(e,t=1e3){return AE(e).substring(0,t)}static validateFileName(e){const t=(e=>{if(!e)return"";let t=e.replace(/\.\./g,"");return t=t.replace(/[^a-zA-Z0-9._\- ]/g,""),t.length>255&&(t=t.substring(0,255)),t})(e);if(!t||"."===t||".."===t)throw new Error("Invalid file name");return t}static validateDateRange(e,t){const n=new Date(e),r=new Date(t);if(isNaN(n.getTime())||isNaN(r.getTime()))throw new Error("Invalid date format");if(n>r)throw new Error("Start date must be before end date");return!0}static validateAmount(e){try{const t=new Bx(e);if(t.isNaN()||!t.isFinite())throw new Error("Invalid amount");return t}catch{throw new Error("Invalid amount format")}}}const qE=()=>"undefined"!=typeof window&&"true"===new URLSearchParams(window.location.search).get("demo"),GE=[{id:Pt(),name:"Main Checking",type:"checking",balance:"5234.56",currency:"USD",institution:"Demo Bank",accountNumber:"****1234",isActive:!0,createdAt:new Date("2024-01-01").toISOString(),updatedAt:(new Date).toISOString()},{id:Pt(),name:"Savings Account",type:"savings",balance:"25000.00",currency:"USD",institution:"Demo Bank",accountNumber:"****5678",isActive:!0,createdAt:new Date("2024-01-01").toISOString(),updatedAt:(new Date).toISOString()},{id:Pt(),name:"Investment Portfolio",type:"investment",balance:"45678.90",currency:"USD",institution:"Demo Investments",accountNumber:"****9012",isActive:!0,createdAt:new Date("2024-01-01").toISOString(),updatedAt:(new Date).toISOString(),holdings:[{id:Pt(),symbol:"AAPL",name:"Apple Inc.",shares:50,costBasis:7500,currentPrice:185.5,marketValue:9275,value:9275,assetType:"stock",allocation:20.3},{id:Pt(),symbol:"GOOGL",name:"Alphabet Inc.",shares:25,costBasis:3250,currentPrice:140.25,marketValue:3506.25,value:3506.25,assetType:"stock",allocation:7.7},{id:Pt(),symbol:"MSFT",name:"Microsoft Corporation",shares:30,costBasis:10200,currentPrice:380.75,marketValue:11422.5,value:11422.5,assetType:"stock",allocation:25},{id:Pt(),symbol:"VTI",name:"Vanguard Total Stock Market ETF",shares:40,costBasis:8800,currentPrice:235.4,marketValue:9416,value:9416,assetType:"etf",allocation:20.6},{id:Pt(),symbol:"BND",name:"Vanguard Total Bond Market ETF",shares:100,costBasis:7800,currentPrice:74.95,marketValue:7495,value:7495,assetType:"etf",allocation:16.4},{id:Pt(),symbol:"CASH",name:"Cash & Money Market",shares:1,costBasis:4563.15,currentPrice:4563.15,marketValue:4563.15,value:4563.15,assetType:"cash",allocation:10}]},{id:Pt(),name:"Credit Card",type:"credit",balance:"-2345.67",currency:"USD",institution:"Demo Credit",accountNumber:"****3456",isActive:!0,createdAt:new Date("2024-01-01").toISOString(),updatedAt:(new Date).toISOString()}],VE=["Whole Foods Market","Starbucks Coffee","Uber Ride","Netflix Subscription","Amazon Purchase","Electric Bill","Doctor Visit","Online Course","Flight Booking","Car Insurance","Stock Purchase","Monthly Salary","Target Store","Gas Station","Spotify Premium","Gym Membership","Restaurant Dinner","Grocery Store","Phone Bill","Internet Service"],HE=(e=50)=>{const t=[],n=new Date;for(let r=0;r<e;r++){const e=Math.floor(90*Math.random()),r=new Date(n);r.setDate(r.getDate()-e);const a=Math.random()>.2,s=a?-(500*Math.random()+10).toFixed(2):(3e3*Math.random()+1e3).toFixed(2),i=ZE.filter(e=>"expense"===e.type),o=ZE.find(e=>"income"===e.type),c=a?i[Math.floor(Math.random()*i.length)]:o,l=c?.id||"cat-other",u=c?.name||"Other";t.push({id:Pt(),date:r.toISOString().split("T")[0],description:VE[Math.floor(Math.random()*VE.length)],amount:s.toString(),category:l,categoryName:u,accountId:GE[Math.floor(Math.random()*GE.length)].id,type:parseFloat(s)<0?"expense":"income",isRecurring:Math.random()>.9,isPending:Math.random()>.95,tags:Math.random()>.7?["tagged"]:[],notes:Math.random()>.8?"Sample transaction note":"",createdAt:r.toISOString(),updatedAt:r.toISOString()})}return t.sort((e,t)=>t.date.localeCompare(e.date))},YE=[{id:Pt(),name:"Monthly Expenses",category:"Groceries",amount:"600.00",spent:"423.50",period:"monthly",startDate:(new Date).toISOString().split("T")[0],endDate:null,isActive:!0},{id:Pt(),name:"Dining Out",category:"Restaurants",amount:"400.00",spent:"312.75",period:"monthly",startDate:(new Date).toISOString().split("T")[0],endDate:null,isActive:!0},{id:Pt(),name:"Entertainment",category:"Entertainment",amount:"200.00",spent:"145.00",period:"monthly",startDate:(new Date).toISOString().split("T")[0],endDate:null,isActive:!0},{id:Pt(),name:"Transportation",category:"Transportation",amount:"300.00",spent:"389.00",period:"monthly",startDate:(new Date).toISOString().split("T")[0],endDate:null,isActive:!0}],KE=[{id:Pt(),name:"Emergency Fund",targetAmount:"10000.00",currentAmount:"6500.00",deadline:new Date(Date.now()+15552e6).toISOString().split("T")[0],category:"savings",priority:"high",isActive:!0},{id:Pt(),name:"Vacation Fund",targetAmount:"5000.00",currentAmount:"2100.00",deadline:new Date(Date.now()+10368e6).toISOString().split("T")[0],category:"travel",priority:"medium",isActive:!0},{id:Pt(),name:"New Car Down Payment",targetAmount:"8000.00",currentAmount:"3200.00",deadline:new Date(Date.now()+31536e6).toISOString().split("T")[0],category:"purchase",priority:"low",isActive:!0}],ZE=[{id:"cat-groceries",name:"Groceries",color:"#10b981",icon:"\ud83d\uded2",type:"expense"},{id:"cat-restaurants",name:"Restaurants",color:"#f59e0b",icon:"\ud83c\udf7d\ufe0f",type:"expense"},{id:"cat-transportation",name:"Transportation",color:"#3b82f6",icon:"\ud83d\ude97",type:"expense"},{id:"cat-entertainment",name:"Entertainment",color:"#8b5cf6",icon:"\ud83c\udfac",type:"expense"},{id:"cat-shopping",name:"Shopping",color:"#ec4899",icon:"\ud83d\udecd\ufe0f",type:"expense"},{id:"cat-bills",name:"Bills & Utilities",color:"#ef4444",icon:"\ud83d\udcf1",type:"expense"},{id:"cat-healthcare",name:"Healthcare",color:"#06b6d4",icon:"\ud83c\udfe5",type:"expense"},{id:"cat-education",name:"Education",color:"#6366f1",icon:"\ud83d\udcda",type:"expense"},{id:"cat-travel",name:"Travel",color:"#0ea5e9",icon:"\u2708\ufe0f",type:"expense"},{id:"cat-insurance",name:"Insurance",color:"#84cc16",icon:"\ud83d\udee1\ufe0f",type:"expense"},{id:"cat-investments",name:"Investments",color:"#14b8a6",icon:"\ud83d\udcc8",type:"both"},{id:"cat-salary",name:"Salary",color:"#22c55e",icon:"\ud83d\udcb0",type:"income"}],JE=[{id:Pt(),name:"Netflix Subscription",amount:"-15.99",category:"Entertainment",frequency:"monthly",nextDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],accountId:GE[0].id,isActive:!0},{id:Pt(),name:"Spotify Premium",amount:"-9.99",category:"Entertainment",frequency:"monthly",nextDate:new Date(Date.now()+10368e5).toISOString().split("T")[0],accountId:GE[0].id,isActive:!0},{id:Pt(),name:"Gym Membership",amount:"-49.99",category:"Healthcare",frequency:"monthly",nextDate:new Date(Date.now()+2592e5).toISOString().split("T")[0],accountId:GE[0].id,isActive:!0},{id:Pt(),name:"Salary",amount:"3500.00",category:"Salary",frequency:"monthly",nextDate:new Date(Date.now()+1296e6).toISOString().split("T")[0],accountId:GE[0].id,isActive:!0}],QE=()=>qE()?bo.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-500 text-black text-center py-2 px-4",children:bo.jsxs("div",{className:"flex items-center justify-center gap-2",children:[bo.jsx("span",{className:"text-xl",children:"\ud83c\udfad"}),bo.jsx("span",{className:"font-semibold",children:"Demo Mode Active"}),bo.jsx("span",{className:"text-sm",children:"- Using sample data for UI/UX testing"}),bo.jsx("a",{href:"/",className:"ml-4 text-sm underline hover:no-underline",onClick:()=>{const e=new URL(window.location.href);e.searchParams.delete("demo"),window.location.href=e.toString()},children:"Exit Demo"})]})}):null,XE=[{name:"Tesco",logo:"\ud83d\uded2",color:"#005EB8",keywords:["tesco","tesco express","tesco metro","tesco extra"]},{name:"Sainsbury's",logo:"\ud83d\uded2",color:"#FF7200",keywords:["sainsbury","sainsburys","sainsbury's"]},{name:"ASDA",logo:"\ud83d\uded2",color:"#7DC242",keywords:["asda"]},{name:"Morrisons",logo:"\ud83d\uded2",color:"#FFD700",keywords:["morrison","morrisons"]},{name:"Waitrose",logo:"\ud83d\uded2",color:"#81B93F",keywords:["waitrose"]},{name:"Aldi",logo:"\ud83d\uded2",color:"#00559F",keywords:["aldi"]},{name:"Lidl",logo:"\ud83d\uded2",color:"#0050AA",keywords:["lidl"]},{name:"Co-op",logo:"\ud83d\uded2",color:"#00B1E7",keywords:["co-op","coop","cooperative"]},{name:"M&S",logo:"\ud83d\uded2",color:"#000000",keywords:["m&s","marks spencer","marks and spencer","marks & spencer"]},{name:"TfL",logo:"\ud83d\ude87",color:"#DC241F",keywords:["tfl","transport for london","london underground","oyster"]},{name:"National Rail",logo:"\ud83d\ude82",color:"#C00000",keywords:["national rail","trainline","rail","railway"]},{name:"Uber",logo:"\ud83d\ude97",color:"#000000",keywords:["uber"]},{name:"Addison Lee",logo:"\ud83d\ude95",color:"#E30613",keywords:["addison lee"]},{name:"British Airways",logo:"\u2708\ufe0f",color:"#2E5C99",keywords:["british airways","ba.com"]},{name:"EasyJet",logo:"\u2708\ufe0f",color:"#FF6600",keywords:["easyjet"]},{name:"Ryanair",logo:"\u2708\ufe0f",color:"#073590",keywords:["ryanair"]},{name:"Shell",logo:"\u26fd",color:"#DD1D21",keywords:["shell"]},{name:"BP",logo:"\u26fd",color:"#006F51",keywords:["bp","british petroleum"]},{name:"Esso",logo:"\u26fd",color:"#CE1126",keywords:["esso"]},{name:"Texaco",logo:"\u26fd",color:"#FF0000",keywords:["texaco"]},{name:"McDonald's",logo:"\ud83c\udf54",color:"#FFC72C",keywords:["mcdonald","mcdonalds","mcd"]},{name:"KFC",logo:"\ud83c\udf57",color:"#F40027",keywords:["kfc","kentucky fried chicken"]},{name:"Burger King",logo:"\ud83c\udf54",color:"#D62300",keywords:["burger king"]},{name:"Subway",logo:"\ud83e\udd6a",color:"#008C15",keywords:["subway"]},{name:"Greggs",logo:"\ud83e\udd50",color:"#00539F",keywords:["greggs"]},{name:"Pret",logo:"\u2615",color:"#862633",keywords:["pret","pret a manger"]},{name:"Costa",logo:"\u2615",color:"#6C1F45",keywords:["costa","costa coffee"]},{name:"Starbucks",logo:"\u2615",color:"#00704A",keywords:["starbucks"]},{name:"Nando's",logo:"\ud83c\udf57",color:"#DC241F",keywords:["nando","nandos"]},{name:"Pizza Hut",logo:"\ud83c\udf55",color:"#ED1C24",keywords:["pizza hut"]},{name:"Domino's",logo:"\ud83c\udf55",color:"#006491",keywords:["domino","dominos"]},{name:"Wagamama",logo:"\ud83c\udf5c",color:"#ED1C24",keywords:["wagamama"]},{name:"Amazon",logo:"\ud83d\udce6",color:"#FF9900",keywords:["amazon","amzn"]},{name:"Argos",logo:"\ud83d\udecd\ufe0f",color:"#ED1B24",keywords:["argos"]},{name:"John Lewis",logo:"\ud83c\udfec",color:"#000000",keywords:["john lewis","johnlewis"]},{name:"Next",logo:"\ud83d\udc55",color:"#000000",keywords:["next","next retail"]},{name:"Primark",logo:"\ud83d\udc57",color:"#0066B3",keywords:["primark"]},{name:"H&M",logo:"\ud83d\udc54",color:"#E50010",keywords:["h&m","h & m","hennes"]},{name:"Zara",logo:"\ud83d\udc57",color:"#000000",keywords:["zara"]},{name:"Boots",logo:"\ud83d\udc8a",color:"#005EB8",keywords:["boots"]},{name:"Superdrug",logo:"\ud83d\udc84",color:"#E6007E",keywords:["superdrug"]},{name:"Netflix",logo:"\ud83d\udcfa",color:"#E50914",keywords:["netflix"]},{name:"Spotify",logo:"\ud83c\udfb5",color:"#1DB954",keywords:["spotify"]},{name:"Disney+",logo:"\ud83c\udfac",color:"#113CCF",keywords:["disney","disney+","disney plus"]},{name:"Amazon Prime",logo:"\ud83d\udcfa",color:"#00A8E1",keywords:["amazon prime","prime video"]},{name:"Sky",logo:"\ud83d\udce1",color:"#0072C9",keywords:["sky"]},{name:"BT",logo:"\ud83d\udcde",color:"#5514B4",keywords:["bt","british telecom"]},{name:"Virgin Media",logo:"\ud83d\udcf6",color:"#ED1A3B",keywords:["virgin media","virgin"]},{name:"EE",logo:"\ud83d\udcf1",color:"#00B5B0",keywords:["ee","everything everywhere"]},{name:"O2",logo:"\ud83d\udcf1",color:"#0019A5",keywords:["o2"]},{name:"Three",logo:"\ud83d\udcf1",color:"#EE2E7B",keywords:["three","3 mobile"]},{name:"Vodafone",logo:"\ud83d\udcf1",color:"#E60000",keywords:["vodafone"]},{name:"British Gas",logo:"\ud83d\udd25",color:"#0396D6",keywords:["british gas"],domain:"britishgas.co.uk"},{name:"E.ON",logo:"\u26a1",color:"#E2001A",keywords:["eon","e.on"],domain:"eonenergy.com"},{name:"EDF",logo:"\u26a1",color:"#0066CC",keywords:["edf","edf energy"],domain:"edfenergy.com"},{name:"Thames Water",logo:"\ud83d\udca7",color:"#0082CA",keywords:["thames water"],domain:"thameswater.co.uk"},{name:"Council Tax",logo:"\ud83c\udfdb\ufe0f",color:"#2B3E50",keywords:["council tax","council"]},{name:"Barclays",logo:"\ud83c\udfe6",color:"#00AEEF",keywords:["barclays"]},{name:"HSBC",logo:"\ud83c\udfe6",color:"#DB0011",keywords:["hsbc"]},{name:"Lloyds",logo:"\ud83c\udfe6",color:"#024731",keywords:["lloyds"]},{name:"NatWest",logo:"\ud83c\udfe6",color:"#5A287F",keywords:["natwest"]},{name:"Santander",logo:"\ud83c\udfe6",color:"#EC0000",keywords:["santander"]},{name:"Halifax",logo:"\ud83c\udfe6",color:"#005EB8",keywords:["halifax"]},{name:"Nationwide",logo:"\ud83c\udfe6",color:"#1B3A6B",keywords:["nationwide"]},{name:"PayPal",logo:"\ud83d\udcb3",color:"#003087",keywords:["paypal"]},{name:"ATM",logo:"\ud83c\udfe7",color:"#4A90E2",keywords:["atm","cash machine","cashpoint"]},{name:"PureGym",logo:"\ud83d\udcaa",color:"#E4002B",keywords:["puregym","pure gym"],domain:"puregym.com"},{name:"David Lloyd",logo:"\ud83c\udfc3",color:"#003DA5",keywords:["david lloyd"],domain:"davidlloyd.co.uk"},{name:"Virgin Active",logo:"\ud83c\udfcb\ufe0f",color:"#ED1A3B",keywords:["virgin active"],domain:"virginactive.co.uk"},{name:"Google",logo:"\ud83d\udd0d",color:"#4285F4",keywords:["google"]},{name:"Apple",logo:"\ud83c\udf4e",color:"#000000",keywords:["apple","app store","itunes"]},{name:"Microsoft",logo:"\ud83d\udcbb",color:"#0078D4",keywords:["microsoft"]},{name:"Restaurant",logo:"\ud83c\udf7d\ufe0f",color:"#FF6B6B",keywords:["restaurant","dining","food"]},{name:"Groceries",logo:"\ud83d\uded2",color:"#4ECDC4",keywords:["grocery","supermarket"]},{name:"Transport",logo:"\ud83d\ude8c",color:"#45B7D1",keywords:["transport","travel","bus","train"]},{name:"Shopping",logo:"\ud83d\udecd\ufe0f",color:"#96CEB4",keywords:["shop","retail","store"]},{name:"Bills",logo:"\ud83d\udccb",color:"#DDA0DD",keywords:["bill","utility","payment"]},{name:"Entertainment",logo:"\ud83c\udfad",color:"#FF6B9D",keywords:["cinema","theatre","entertainment"]},{name:"Health",logo:"\ud83c\udfe5",color:"#66D9EF",keywords:["pharmacy","doctor","health","medical"]}],eT={"amazon.com":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iI0ZGOTgwMCIgZD0iTTM3LDM1LjVjLTYuNiw0LjItMTUuNCw2LjUtMjMuNCw2LjVDOC40LDQyLDMuOSw0MC4xLDAuOSwzNy4yYy0wLjItMC4yLDAtMC40LDAuMi0wLjNDNC4yLDM5LDguOCw0MCwxMy41LDQwYzMuMSwwLDYuNi0wLjUsOS45LTEuNkMzMS4yLDM1LjksMzcuNywzNC40LDM3LDM1LjV6IE00MS4zLDMxLjNjLTAuMy0wLjQtMi4xLTAuMi0yLjksMC4xYy0wLjIsMC4xLTAuMywwLjQtMC4xLDAuNWMwLjksMi43LDIuOCwyLDMuNCwxLjVDNDIuMywzMyw0Mi4yLDMxLjcsNDEuMywzMS4zeiBNMjAuNywxNy45YzAsMi41LDAsNC43LTEuMiw2LjljLTAuOCwxLjUtMi4xLDIuNC0zLjUsMi40Yy0xLjksMC0zLjEtMS41LTMuMS0zLjZjMC0xNi43LDguMy0xOS43LDguMy0xOS43VjE3Ljl6IE0yNy40LDMxLjNjLTAuNC0wLjQtMS0wLjQtMS41LTAuMWMtMi4xLDEuNy0yLjUsMi42LTMuNiwzLjNjLTEuNCwxLjQtMywxLjgtNC42LDEuOGMtMi4zLDAtNC4xLTEuNS00LjEtNC40YzAtMy43LDIuMy01LjIsNi00LjJ2LTFjMC0xLjUtMC4xLTMuMi0xLTQuNGMtMC42LTAuOS0xLjktMS40LTMuMS0xLjRjLTIuMSwwLTQsMS4xLTQuNCwzLjNjLTAuMSwwLjUtMC40LDEtMC45LDFsLTUuMS0wLjZDNS4xLDIwLjIsNS42LDE5LjksNiwxOS41YzEuOC0zLjMsNS00LjMsOC42LTQuM2MxLjksMCw0LjMsMC41LDUuOCwyYzEuOCwxLjgsMS42LDQuMiwxLjYsNi44djYuMmMwLDEuOSwwLjgsMi43LDEuNSwzLjdjMC4zLDAuMywwLjMsMC44LDAsMUMyMy4xLDI4LjMsMjQuNCwyOS45LDI3LjQsMzEuM3oiLz48L3N2Zz4=","netflix.com":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iI0I3MUMxQyIgZD0iTTEzIDloOHYzMGgtOHoiLz48cGF0aCBmaWxsPSIjRTUzOTM1IiBkPSJNMjcgOWg4djMwaC04eiIvPjxwYXRoIGZpbGw9IiNGRjU3MjIiIGQ9Ik0xMyA5bDE0IDE0VjloLTd6Ii8+PHBhdGggZmlsbD0iI0U1MzkzNSIgZD0iTTI3IDM5TDEzIDI1djE0aDd6Ii8+PC9zdmc+","spotify.com":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjAiIGZpbGw9IiMxREI5NTQiLz48cGF0aCBmaWxsPSIjMTkxNDE0IiBkPSJNMzAuOCAxOS45Yy00LjUtMS45LTkuNS0yLTE0LjItMC41Yy0wLjYgMC4yLTEuMi0wLjEtMS40LTAuN2MtMC4yLTAuNiAwLjEtMS4yIDAuNy0xLjRjNS4zLTEuNiAxMC44LTEuNCAxNS44IDAuNmMwLjYgMC4yIDAuOSAwLjggMC43IDEuNEMzMiAxOS42IDMxLjQgMjAuMSAzMC44IDE5Ljl6TTI5LjIgMjUuNWMtMC41IDAuMy0xLjEgMC4xLTEuNC0wLjRjLTEuNi0yLjItNC4yLTMuMy02LjktMy40Yy0yLTAuMS0zLjkgMC4zLTUuNyAxLjFjLTAuNSAwLjItMS4xLTAuMS0xLjMtMC42Yy0wLjItMC41IDAuMS0xLjEgMC42LTEuM2MyLjEtMC45IDQuMy0xLjQgNi42LTEuMmMzLjIgMC4xIDYuMSAxLjMgOCwzLjlDMjkuNCAyNC40IDI5LjUgMjUuMSAyOS4yIDI1LjV6IE0yOCAzMC4zYy0wLjQgMC4yLTAuOSAwLjEtMS4xLTAuM2MtMS4yLTEuNy0zLjItMi42LTUuMi0yLjdjLTEuNS0wLjEtMi45IDAuMi00LjMgMC44Yy0wLjQgMC4yLTAuOSAwLTEtMC40Yy0wLjItMC40IDAtMC45IDAuNC0xYzEuNi0wLjcgMy4zLTEuMSA1LjEtMC45YzIuNCAwLjEgNC42IDEuMiA2LjEgMy4yQzI4LjIgMjkuNSAyOC4yIDMwLjEgMjggMzAuM3oiLz48L3N2Zz4=","apple.com":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iIzQyQTVGNSIgZD0iTTM1LjMgMTAuN2MtMS44IDIuMy00LjcgMy42LTcuNSAzLjVjLTAuNC0yLjkgMS03LjYgMi44LTkuOWMxLjgtMi4zIDQuOS0zLjkgNy40LTRDMzguMSAzLjIgMzcuMSA4LjQgMzUuMyAxMC43eiIvPjxwYXRoIGZpbGw9IiM0MjQyNDIiIGQ9Ik0zOC4yIDE2LjRjLTEuNi0wLjktMy40LTEuNC01LjMtMS40Yy0yLjYgMC00LjUgMC45LTUuOCAxLjdjLTAuNyAwLjQtMS4zIDAuOC0xLjcgMC45Yy0wLjQtMC4yLTAuOS0wLjUtMS42LTAuOWMtMS41LTAuOS0zLjUtMS44LTYuNC0xLjhjLTMuNiAwLTYuNyAyLjItOC41IDUuN2MtMi41IDQuOS0yLjEgMTEuNCAxLjkgMTguMWMxLjkgMy4yIDQuNSA3LjEgNy45IDcuMmMwIDAsMCAwIDAuMSAwYzEuNSAwIDIuNS0wLjUgMy40LTAuOWMxLTAuNSAxLjktMC45IDMuNC0wLjljMS41IDAgMi40IDAuNCAzLjQgMC45YzAuOSAwLjQgMS45IDAuOSAzLjQgMC45YzAuMSAwIDAuMSAwIDAuMiAwYzMuNC0wLjEgNi00LjEgNy45LTcuM2MxLjItMiAyLTMuOCAyLjUtNS4xYyAyLjMtMiA0LjUtMi43IDUuMy0yLjd6Ii8+PC9zdmc+","tesco.com":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0iIzAwNUVCOCIvPjx0ZXh0IHg9IjI0IiB5PSIzMiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlRFU0NPPC90ZXh0Pjwvc3ZnPg==","sainsburys.co.uk":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0iI0ZGNzIwMCIvPjx0ZXh0IHg9IjI0IiB5PSIzMiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjI0IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlM8L3RleHQ+PC9zdmc+","mcdonalds.com":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iI0ZGQzEwNyIgZD0iTTEyIDEwYzAtMi4yIDEuOC00IDQtNHM0IDEuOCA0IDR2MjhoLTh6bTE2IDBjMC0yLjIgMS44LTQgNC00czQgMS44IDQgNHYyOGgtOHoiLz48L3N2Zz4=","starbucks.com":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PGNpcmNsZSBjeD0iMjQiIGN5PSIyNCIgcj0iMjAiIGZpbGw9IiMwMDcwNEEiLz48Y2lyY2xlIGN4PSIyNCIgY3k9IjI0IiByPSIxNiIgZmlsbD0id2hpdGUiLz48Y2lyY2xlIGN4PSIyNCIgY3k9IjI0IiByPSIxMiIgZmlsbD0iIzAwNzA0QSIvPjwvc3ZnPg==","uber.com":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iOCIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IHg9IjI0IiB5PSIzMiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4IiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlViZXI8L3RleHQ+PC9zdmc+"},tT=new class{merchantMap=new Map;logoCache=new Map;logoFetchPromises=new Map;constructor(){XE.forEach(e=>{e.keywords.forEach(t=>{this.merchantMap.set(t.toLowerCase(),e)})}),this.loadCachedLogos()}loadCachedLogos(){try{const e=localStorage.getItem("merchantLogos");if(e){const t=JSON.parse(e);Object.entries(t).forEach(([e,t])=>{this.logoCache.set(e,t)})}}catch(e){console.error("Error loading cached logos:",e)}}saveCachedLogos(){try{const e=Object.fromEntries(this.logoCache);localStorage.setItem("merchantLogos",JSON.stringify(e))}catch(e){console.error("Error saving cached logos:",e)}}async fetchLogoUrl(e){if(eT[e])return eT[e];if(this.logoCache.has(e)){const t=this.logoCache.get(e);return""===t?null:t}if(this.logoFetchPromises.has(e))return this.logoFetchPromises.get(e);const t=(async()=>{try{const t=`https://logo.clearbit.com/${e}`,n=`https://www.google.com/s2/favicons?domain=${e}&sz=64`,r=`https://icons.duckduckgo.com/ip3/${e}.ico`;return new Promise(a=>{let s=0;const i=[t,n,r],o=()=>{if(s>=i.length)return this.logoCache.set(e,""),this.saveCachedLogos(),void a(null);const t=i[s],n=new Image;0===s&&(n.crossOrigin="anonymous");const r=setTimeout(()=>{n.src="",s++,o()},3e3);n.onload=()=>{clearTimeout(r),console.log(`Successfully loaded ${0===s?"logo":"favicon"} for ${e}`),this.logoCache.set(e,t),this.saveCachedLogos(),a(t)},n.onerror=()=>{clearTimeout(r),console.warn(`${["Clearbit logo","Google favicon","DuckDuckGo favicon"][s]} failed for ${e}${s<i.length-1?", trying next...":", will use emoji"}`),s++,o()},n.src=t};o()})}catch(t){console.error(`Error fetching logo for ${e}:`,t)}return null})();return this.logoFetchPromises.set(e,t),t.finally(()=>{this.logoFetchPromises.delete(e)}),t}getMerchantInfo(e){const t=e.toLowerCase().replace(/^(card purchase|direct debit|standing order|bank transfer|pos|contactless|online)[\s-]*/i,"").replace(/[*#\d]/g,"").trim();for(const[r,a]of Array.from(this.merchantMap.entries()))if(t.includes(r))return a;const n=t.split(/[\s-,]/);for(const r of n)if(r.length>2){const e=this.merchantMap.get(r);if(e)return e}return t.includes("fuel")||t.includes("petrol")?{name:"Fuel",logo:"\u26fd",color:"#FF6347",keywords:[]}:t.includes("taxi")||t.includes("cab")?{name:"Taxi",logo:"\ud83d\ude95",color:"#FFD700",keywords:[]}:t.includes("parking")?{name:"Parking",logo:"\ud83c\udd7f\ufe0f",color:"#4169E1",keywords:[]}:t.includes("coffee")?{name:"Coffee",logo:"\u2615",color:"#6F4E37",keywords:[]}:t.includes("pub")||t.includes("bar")?{name:"Pub",logo:"\ud83c\udf7a",color:"#8B4513",keywords:[]}:null}getAllMerchants(){const e=new Map;return XE.forEach(t=>{e.has(t.name)||e.set(t.name,t)}),Array.from(e.values())}async preloadCommonLogos(){["amazon.com","netflix.com","spotify.com","apple.com","tesco.com","sainsburys.co.uk","asda.com","mcdonalds.com","starbucks.com","uber.com"].forEach(e=>{this.fetchLogoUrl(e).catch(()=>{})})}},nT=new class{metrics=[];observer=null;reportCallback=null;isInitialized=!1;thresholds={LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25},FCP:{good:1800,poor:3e3},TTFB:{good:800,poor:1800},INP:{good:200,poor:500}};init(e){this.isInitialized||(this.reportCallback=e||null,this.isInitialized=!0,"undefined"!=typeof window&&(this.observeWebVitals(),this.measureCustomMetrics(),this.setupResourceObserver(),this.trackBundleSize()))}observeWebVitals(){if("PerformanceObserver"in window){try{new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];this.recordMetric("LCP",n.startTime,"LCP")}).observe({entryTypes:["largest-contentful-paint"]})}catch(e){}try{new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"first-input"===e.name&&this.recordMetric("FID",e.processingStart-e.startTime,"FID")})}).observe({entryTypes:["first-input"]})}catch(e){}try{let e=0;new PerformanceObserver(t=>{for(const n of t.getEntries())n.hadRecentInput||(e+=n.value);this.recordMetric("CLS",e,"CLS")}).observe({entryTypes:["layout-shift"]})}catch(e){}try{new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"first-contentful-paint"===e.name&&this.recordMetric("FCP",e.startTime,"FCP")})}).observe({entryTypes:["paint"]})}catch(e){}}if(window.performance&&window.performance.timing){const e=window.performance.timing,t=e.responseStart-e.navigationStart;t>0&&this.recordMetric("TTFB",t,"TTFB")}if("PerformanceEventTiming"in window){let t=0;const n=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.duration>t&&(t=e.duration,this.recordMetric("INP",t,"INP"))})});try{n.observe({entryTypes:["event"]})}catch(e){}}}recordMetric(e,t,n){const r=this.getRating(t,n),a={name:e,value:Math.round(t),rating:r,timestamp:Date.now()};this.metrics.push(a),this.sendToAnalytics(a)}getRating(e,t){const n=this.thresholds[t];return n?e<=n.good?"good":e<=n.poor?"needs-improvement":"poor":"good"}measureCustomMetrics(){if("complete"===document.readyState){const e=performance.now();this.recordMetric("TTI",e,"FCP")}else window.addEventListener("load",()=>{const e=performance.now();this.recordMetric("TTI",e,"FCP")});performance.now();const e=()=>{performance.now(),this.isInitialized&&requestAnimationFrame(e)};requestAnimationFrame(e)}setupResourceObserver(){if(!("PerformanceObserver"in window))return;const e=new PerformanceObserver(e=>{const t=e.getEntries().filter(e=>e.duration>1e3);t.length>0&&console.warn("[Performance] Slow resources detected:",t.map(e=>({name:e.name,duration:Math.round(e.duration),type:e.initiatorType})))});try{e.observe({entryTypes:["resource"]})}catch(t){}}async trackBundleSize(){if(!("navigator"in window)||!("connection"in navigator))return;const e=Array.from(document.scripts);((await Promise.all(e.filter(e=>e.src).map(async e=>{try{const t=(await fetch(e.src,{method:"HEAD"})).headers.get("content-length");return{url:e.src,size:t?parseInt(t):0}}catch{return{url:e.src,size:0}}}))).reduce((e,t)=>e+t.size,0)/1048576).toFixed(2)}sendToAnalytics(e){if("undefined"!=typeof window&&"gtag"in window&&window.gtag("event","performance",{metric_name:e.name,metric_value:e.value,metric_rating:e.rating}),this.reportCallback){const t={metrics:[e],timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent};this.reportCallback(t)}}getMetrics(){return[...this.metrics]}getSummary(){const e={};return this.metrics.forEach(t=>{(!e[t.name]||t.timestamp>e[t.name].timestamp)&&(e[t.name]=t)}),{metrics:Object.values(e),score:this.calculatePerformanceScore(e),recommendations:this.getRecommendations(e)}}calculatePerformanceScore(e){let t=0,n=0;return Object.entries({LCP:.25,FID:.25,CLS:.25,FCP:.15,TTFB:.1}).forEach(([r,a])=>{const s=e[r];if(s){const e="good"===s.rating?100:"needs-improvement"===s.rating?50:0;t+=e*a,n+=a}}),n>0?Math.round(t/n):0}getRecommendations(e){const t=[];return"good"!==e.LCP?.rating&&t.push("Optimize largest contentful paint: Consider lazy loading images, optimizing server response time, and using a CDN"),"good"!==e.FID?.rating&&t.push("Improve first input delay: Break up long tasks, use web workers, and optimize JavaScript execution"),"good"!==e.CLS?.rating&&t.push("Reduce layout shift: Set size attributes on images/videos, avoid inserting content above existing content"),"good"!==e.FCP?.rating&&t.push("Speed up first contentful paint: Minimize render-blocking resources, inline critical CSS"),"good"!==e.TTFB?.rating&&t.push("Reduce server response time: Use caching, optimize database queries, consider a CDN"),t}recordCustomMetric(e,t){this.metrics.push({name:e,value:t,rating:"good",timestamp:Date.now()})}mark(e){performance.mark(e)}measure(e,t,n){try{const r=performance.measure(e,t,n);this.recordCustomMetric(e,r.duration)}catch(r){console.error("Performance measurement failed:",r)}}clear(){this.metrics=[]}exportMetrics(){return{metrics:this.getMetrics(),summary:this.getSummary(),timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent,connection:navigator.connection||{}}}destroy(){this.isInitialized=!1,this.observer?.disconnect(),this.clear()}};let rT=null;const aT=new class{scheduledReports=[];templates=[];constructor(){this.loadData(),this.initializeDefaultTemplates()}loadData(){try{const e=localStorage.getItem("scheduled-reports");e&&(this.scheduledReports=JSON.parse(e).map(e=>({...e,nextRun:new Date(e.nextRun),createdAt:new Date(e.createdAt),lastRun:e.lastRun?new Date(e.lastRun):void 0,options:{...e.options,startDate:new Date(e.options.startDate),endDate:new Date(e.options.endDate)}})));const t=localStorage.getItem("export-templates");t&&(this.templates=JSON.parse(t).map(e=>({...e,createdAt:new Date(e.createdAt),options:{...e.options,startDate:new Date(e.options.startDate),endDate:new Date(e.options.endDate)}})))}catch(e){console.error("Error loading export data:",e)}}saveData(){try{localStorage.setItem("scheduled-reports",JSON.stringify(this.scheduledReports)),localStorage.setItem("export-templates",JSON.stringify(this.templates))}catch(e){console.error("Error saving export data:",e)}}initializeDefaultTemplates(){if(0===this.templates.length){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0),r=[{id:"monthly-summary",name:"Monthly Summary",description:"Complete monthly financial summary with charts and transactions",options:{startDate:t,endDate:n,format:"pdf",includeCharts:!0,includeTransactions:!0,includeAccounts:!0,includeInvestments:!0,includeBudgets:!0,groupBy:"category"},isDefault:!0,createdAt:new Date},{id:"transaction-report",name:"Transaction Report",description:"Detailed transaction listing for specified period",options:{startDate:t,endDate:n,format:"csv",includeCharts:!1,includeTransactions:!0,includeAccounts:!1,includeInvestments:!1,includeBudgets:!1,groupBy:"none"},isDefault:!0,createdAt:new Date},{id:"investment-portfolio",name:"Investment Portfolio",description:"Investment portfolio overview with performance charts",options:{startDate:new Date(e.getFullYear(),0,1),endDate:e,format:"pdf",includeCharts:!0,includeTransactions:!1,includeAccounts:!1,includeInvestments:!0,includeBudgets:!1,groupBy:"none"},isDefault:!0,createdAt:new Date}];this.templates=r,this.saveData()}}getTemplates(){return this.templates.sort((e,t)=>e.isDefault&&!t.isDefault?-1:!e.isDefault&&t.isDefault?1:e.name.localeCompare(t.name))}createTemplate(e){const t={...e,id:Date.now().toString(),createdAt:new Date};return this.templates.push(t),this.saveData(),t}updateTemplate(e,t){const n=this.templates.findIndex(t=>t.id===e);return-1===n?null:(this.templates[n]={...this.templates[n],...t},this.saveData(),this.templates[n])}deleteTemplate(e){const t=this.templates.findIndex(t=>t.id===e);return-1!==t&&(this.templates.splice(t,1),this.saveData(),!0)}getScheduledReports(){return this.scheduledReports.sort((e,t)=>e.nextRun.getTime()-t.nextRun.getTime())}createScheduledReport(e){const t=this.calculateNextRun(e.frequency),n={...e,id:Date.now().toString(),nextRun:t,createdAt:new Date};return this.scheduledReports.push(n),this.saveData(),n}updateScheduledReport(e,t){const n=this.scheduledReports.findIndex(t=>t.id===e);if(-1===n)return null;const r={...this.scheduledReports[n],...t};return t.frequency&&(r.nextRun=this.calculateNextRun(t.frequency)),this.scheduledReports[n]=r,this.saveData(),r}deleteScheduledReport(e){const t=this.scheduledReports.findIndex(t=>t.id===e);return-1!==t&&(this.scheduledReports.splice(t,1),this.saveData(),!0)}calculateNextRun(e){const t=new Date,n=new Date(t);switch(e){case"daily":n.setDate(t.getDate()+1);break;case"weekly":n.setDate(t.getDate()+7);break;case"monthly":n.setMonth(t.getMonth()+1);break;case"quarterly":n.setMonth(t.getMonth()+3)}return n.setHours(9,0,0,0),n}async exportToCSV(e,t={}){const{startDate:n,endDate:r,groupBy:a="none"}=t;let s=e;n&&r&&(s=e.filter(e=>{const t="date"in e?e.date:"createdAt"in e?e.createdAt:new Date;return t>=n&&t<=r}));const i=this.groupData(s,a);if(Array.isArray(i))return this.arrayToCSV(i);{const e=Object.entries(i).map(([e,t])=>({Group:e,Count:Array.isArray(t)?t.length:1,Total:this.calculateGroupTotal(t)}));return this.arrayToCSV(e)}}async exportToPDF(e,t){if(!rT){const e=await po(()=>import("./chunk-Drd-K-oK.js").then(e=>e.j),[]);rT=e.jsPDF}const n=new rT;let r=20;if(n.setFontSize(20),n.text(t.customTitle||"Financial Report",20,r),r+=10,n.setFontSize(12),n.text(`Period: ${this.formatDate(t.startDate)} - ${this.formatDate(t.endDate)}`,20,r),r+=20,t.logoUrl)try{n.addImage(t.logoUrl,"PNG",150,10,40,20)}catch(a){}return e.accounts&&t.includeAccounts&&(r=await this.addAccountsSummaryToPDF(n,e.accounts,r)),e.transactions&&t.includeTransactions&&(r=await this.addTransactionsSummaryToPDF(n,e.transactions,r,t)),e.investments&&t.includeInvestments&&(r=await this.addInvestmentsSummaryToPDF(n,e.investments,r)),e.budgets&&t.includeBudgets&&(r=await this.addBudgetsSummaryToPDF(n,e.budgets,r)),t.includeCharts&&await this.addChartsToPDF(n,e,r),n.output("arraybuffer")}async addAccountsSummaryToPDF(e,t,n){e.setFontSize(16),e.text("Accounts Summary",20,n),n+=10,e.setFontSize(10),t.forEach(t=>{e.text(`${t.name}: ${this.formatCurrency(t.balance)}`,20,n),n+=5});const r=t.reduce((e,t)=>e.plus(t.balance),new Bx(0));return e.setFontSize(12),e.text(`Total Balance: ${this.formatCurrency(r.toNumber())}`,20,n+5),n+20}async addTransactionsSummaryToPDF(e,t,n,r){e.setFontSize(16),e.text("Transactions Summary",20,n),n+=10;const a=t.filter(e=>e.date>=r.startDate&&e.date<=r.endDate).reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return e.setFontSize(10),Object.entries(a).forEach(([t,r])=>{const a=r.reduce((e,t)=>e.plus(Math.abs(t.amount)),new Bx(0));e.text(`${t}: ${r.length} transactions, ${this.formatCurrency(a.toNumber())}`,20,n),n+=5}),n+15}async addInvestmentsSummaryToPDF(e,t,n){return e.setFontSize(16),e.text("Investments Summary",20,n),n+=10,e.setFontSize(10),t.forEach(t=>{const r=new Bx(t.currentValue||0),a=new Bx(t.costBasis||t.quantity*t.purchasePrice),s=r.minus(a),i=a.gt(0)?s.div(a).mul(100):new Bx(0);e.text(`${t.symbol}: ${this.formatCurrency(r.toNumber())} (${s.gte(0)?"+":""}${i.toFixed(2)}%)`,20,n),n+=5}),n+15}async addBudgetsSummaryToPDF(e,t,n){return e.setFontSize(16),e.text("Budget Summary",20,n),n+=10,e.setFontSize(10),t.forEach(t=>{const r=new Bx(t.spent||0),a=new Bx(t.budgeted);a.minus(r);const s=a.gt(0)?r.div(a).mul(100):new Bx(0);e.text(`${t.category}: ${this.formatCurrency(r.toNumber())} / ${this.formatCurrency(a.toNumber())} (${s.toFixed(1)}%)`,20,n),n+=5}),n+15}async addChartsToPDF(e,t,n){e.setFontSize(14),e.text("Charts would be rendered here from DOM elements",20,n)}groupData(e,t){return"none"===t?e:e.reduce((e,n)=>{let r;switch(t){case"category":r=("category"in n?n.category:void 0)||"Uncategorized";break;case"account":r=("accountId"in n?n.accountId:"account"in n?n.account:void 0)||"Unknown";break;case"month":{const e=("date"in n?n.date:"createdAt"in n?n.createdAt:void 0)||new Date,t=e instanceof Date?e:new Date(e);r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;break}default:r="All"}return e[r]||(e[r]=[]),e[r].push(n),e},{})}calculateGroupTotal(e){return e.reduce((e,t)=>{let n=0;return"amount"in t?n=t.amount:"balance"in t?n=t.balance:"currentValue"in t&&(n=t.currentValue||0),e+Math.abs(n)},0)}arrayToCSV(e){if(0===e.length)return"";const t=Object.keys(e[0]);return[t.join(","),...e.map(e=>t.map(t=>{const n=e[t];return"string"==typeof n&&(n.includes(",")||n.includes('"'))?`"${n.replace(/"/g,'""')}"`:n}).join(","))].join("\n")}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}formatDate(e){return e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async sendScheduledReport(e){const t=this.scheduledReports.find(t=>t.id===e);if(!t||!t.isActive)return!1;try{return console.log(`Sending scheduled report "${t.name}" to ${t.email}`),t.lastRun=new Date,t.nextRun=this.calculateNextRun(t.frequency),this.saveData(),!0}catch(n){return console.error("Error sending scheduled report:",n),!1}}getDueReports(){const e=new Date;return this.scheduledReports.filter(t=>t.isActive&&t.nextRun<=e)}exportToQIF(e){let t="";for(const n of e.accounts){t+="!Account\n",t+=`N${n.name}\n`,t+=`T${this.mapAccountType(n.type)}\n`,t+=`$${n.balance.toFixed(2)}\n`,t+="^\n";const r=e.transactions.filter(e=>e.accountId===n.id);if(r.length>0){t+=`!Type:${this.mapAccountType(n.type)}\n`;for(const e of r){const n=new Date(e.date);t+=`D${(n.getMonth()+1).toString().padStart(2,"0")}/${n.getDate().toString().padStart(2,"0")}/${n.getFullYear()}\n`,t+=`T${"expense"===e.type?"-":""}${e.amount.toFixed(2)}\n`,t+=`P${e.description||""}\n`,t+=`L${e.category||"Uncategorized"}\n`,e.note&&(t+=`M${e.note}\n`),t+="^\n"}}}return t}exportToOFX(e){const t=(new Date).toISOString().replace(/[-:]/g,"").split(".")[0];let n=`OFXHEADER:100\nDATA:OFXSGML\nVERSION:103\nSECURITY:NONE\nENCODING:USASCII\nCHARSET:1252\nCOMPRESSION:NONE\nOLDFILEUID:NONE\nNEWFILEUID:${t}\n\n<OFX>\n<SIGNONMSGSRSV1>\n<SONRS>\n<STATUS>\n<CODE>0\n<SEVERITY>INFO\n</STATUS>\n<DTSERVER>${t}\n<LANGUAGE>ENG\n</SONRS>\n</SIGNONMSGSRSV1>\n<BANKMSGSRSV1>\n<STMTTRNRS>\n<TRNUID>${t}\n<STATUS>\n<CODE>0\n<SEVERITY>INFO\n</STATUS>\n`;for(const r of e.accounts){const a=e.transactions.filter(e=>e.accountId===r.id);n+=`<STMTRS>\n<CURDEF>USD\n<BANKACCTFROM>\n<BANKID>123456789\n<ACCTID>${r.id}\n<ACCTTYPE>${this.mapOFXAccountType(r.type)}\n</BANKACCTFROM>\n<BANKTRANLIST>\n<DTSTART>${t}\n<DTEND>${t}\n`;for(const e of a){const t=new Date(e.date).toISOString().replace(/[-:]/g,"").split(".")[0],r="expense"===e.type?`-${e.amount}`:`${e.amount}`;n+=`<STMTTRN>\n<TRNTYPE>${"expense"===e.type?"DEBIT":"CREDIT"}\n<DTPOSTED>${t}\n<TRNAMT>${r}\n<FITID>${e.id}\n<NAME>${e.description||""}\n<MEMO>${e.note||""}\n</STMTTRN>\n`}n+=`</BANKTRANLIST>\n<LEDGERBAL>\n<BALAMT>${r.balance}\n<DTASOF>${t}\n</LEDGERBAL>\n</STMTRS>\n`}return n+="</STMTTRNRS>\n</BANKMSGSRSV1>\n</OFX>",n}mapAccountType(e){return{current:"Bank",checking:"Bank",savings:"Bank",credit:"CCard",loan:"Liability",investment:"Investment",other:"Bank"}[e]||"Bank"}mapOFXAccountType(e){return{current:"CHECKING",checking:"CHECKING",savings:"SAVINGS",credit:"CREDITLINE",loan:"LOAN",investment:"INVESTMENT",other:"CHECKING"}[e]||"CHECKING"}async exportData(e,t){const{format:n}=t;switch(n){case"csv":return this.exportToCSV(e,t);case"pdf":return await this.exportToPDF(e,t);case"xlsx":return await this.exportToExcel(e,t);case"json":return JSON.stringify(e,null,2);case"qif":if(!e.transactions||!e.accounts)throw new Error("QIF export requires transactions and accounts data");return this.exportToQIF({transactions:e.transactions,accounts:e.accounts});case"ofx":if(!e.transactions||!e.accounts)throw new Error("OFX export requires transactions and accounts data");return this.exportToOFX({transactions:e.transactions,accounts:e.accounts});default:throw new Error(`Unsupported export format: ${n}`)}}};var sT={};const iT=new class{BACKUP_CONFIG_KEY="money_management_backup_config";BACKUP_HISTORY_KEY="money_management_backup_history";MAX_HISTORY_ENTRIES=30;async initializeBackups(){if(this.getBackupConfig().enabled)if("periodicSync"in self.registration)try{"granted"===(await navigator.permissions.query({name:"periodic-background-sync"})).state?await this.registerPeriodicSync():(console.log("[AutomaticBackup] Periodic sync permission not granted"),this.setupFallbackScheduler())}catch(e){console.error("[AutomaticBackup] Failed to setup periodic sync:",e),this.setupFallbackScheduler()}else this.setupFallbackScheduler()}async registerPeriodicSync(){const e=this.getBackupConfig(),t=await navigator.serviceWorker.ready,n=this.getMinInterval(e.frequency);try{await t.periodicSync.register("automatic-backup",{minInterval:n}),console.log("[AutomaticBackup] Periodic sync registered")}catch(r){throw console.error("[AutomaticBackup] Failed to register periodic sync:",r),r}}getMinInterval(e){switch(e){case"daily":default:return 864e5;case"weekly":return 6048e5;case"monthly":return 2592e6}}setupFallbackScheduler(){const e=this.getLastBackupTime(),t=this.getBackupConfig(),n=this.calculateNextBackupTime(e,t);Date.now()>=n&&this.performBackup(),setInterval(()=>{Date.now()>=this.calculateNextBackupTime(this.getLastBackupTime(),this.getBackupConfig())&&this.performBackup()},36e5)}async performBackup(){const e=this.getBackupConfig();if(e.enabled)try{console.log("[AutomaticBackup] Starting backup...");const t=await this.collectBackupData(),n=[];if("json"===e.format||"all"===e.format){const r=await this.createJSONBackup(t,e);n.push(r)}if("csv"===e.format||"all"===e.format){const e=await this.createCSVBackup(t);n.push(e)}await this.storeBackups(n,e),this.updateBackupHistory({timestamp:Date.now(),success:!0,format:e.format,filesCreated:n.length}),await this.cleanupOldBackups(e.retentionDays),this.sendBackupNotification(!0),console.log("[AutomaticBackup] Backup completed successfully")}catch(t){console.error("[AutomaticBackup] Backup failed:",t),this.updateBackupHistory({timestamp:Date.now(),success:!1,error:t instanceof Error?t.message:"Unknown error"}),this.sendBackupNotification(!1,t)}}async collectBackupData(){const e=["money_management_transactions","money_management_accounts","money_management_categories","money_management_tags","money_management_budgets","money_management_goals","money_management_investments","money_management_recurring_transactions","money_management_preferences","money_management_import_profiles","money_management_import_rules","money_management_scheduled_reports"],t={version:"2.0",timestamp:(new Date).toISOString(),app_version:sT.REACT_APP_VERSION||"1.4.7"};for(const r of e){const e=localStorage.getItem(r);if(e)try{t[r.replace("money_management_","")]=JSON.parse(e)}catch(n){}}return t}async createJSONBackup(e,t){let n=JSON.stringify(e,null,2);return t.encryptionEnabled&&(n=await this.encryptData(n)),{format:"json",data:new Blob([n],{type:"application/json"}),filename:`wealthtracker-backup-${(new Date).toISOString().split("T")[0]}.json`}}async createCSVBackup(e){const t={startDate:new Date(0),endDate:new Date,includeTransactions:!0,includeAccounts:!0,includeInvestments:!0,includeBudgets:!0,format:"csv"},n=await aT.exportData({transactions:e.transactions||[],accounts:e.accounts||[],investments:e.investments||[],budgets:e.budgets||[]},t);return{format:"csv",data:new Blob([n],{type:"text/csv"}),filename:`wealthtracker-backup-${(new Date).toISOString().split("T")[0]}.csv`}}async encryptData(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),r=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,t),s=new Uint8Array(r.length+a.byteLength);return s.set(r),s.set(new Uint8Array(a),r.length),btoa(String.fromCharCode(...s))}async storeBackups(e,t){const n=(await this.openBackupDB()).transaction(["backups"],"readwrite").objectStore("backups");for(const r of e)await n.add({filename:r.filename,format:r.format,data:r.data,timestamp:Date.now(),cloudSynced:!1});t.cloudProvider&&await this.syncToCloud(e,t.cloudProvider)}async openBackupDB(){return new Promise((e,t)=>{const n=indexedDB.open("WealthTrackerBackups",1);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains("backups")){const e=t.createObjectStore("backups",{keyPath:"id",autoIncrement:!0});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("format","format",{unique:!1})}}})}async syncToCloud(e,t){}async cleanupOldBackups(e){const t=(await this.openBackupDB()).transaction(["backups"],"readwrite").objectStore("backups").index("timestamp"),n=Date.now()-24*e*60*60*1e3,r=IDBKeyRange.upperBound(n),a=t.openCursor(r);return new Promise((e,t)=>{a.onsuccess=()=>{const t=a.result;t?(t.delete(),t.continue()):e()},a.onerror=()=>t(a.error)})}sendBackupNotification(e,t){if("Notification"in window&&"granted"===Notification.permission){const n=new Notification(e?"Backup Completed":"Backup Failed",{body:e?"Your financial data has been backed up successfully.":`Backup failed: ${t?.message||"Unknown error"}`,icon:"/icon-192.png",tag:"backup-notification"});n.onclick=()=>{window.focus(),n.close()}}}getBackupConfig(){const e=localStorage.getItem(this.BACKUP_CONFIG_KEY);if(e)try{return JSON.parse(e)}catch(t){console.error("Failed to parse backup config:",t)}return{enabled:!1,frequency:"daily",time:"02:00",format:"json",encryptionEnabled:!0,retentionDays:30,includeAttachments:!1}}updateBackupConfig(e){const t={...this.getBackupConfig(),...e};localStorage.setItem(this.BACKUP_CONFIG_KEY,JSON.stringify(t)),void 0!==e.enabled&&this.initializeBackups()}getLastBackupTime(){const e=this.getBackupHistory().filter(e=>e.success);return 0===e.length?0:Math.max(...e.map(e=>e.timestamp))}calculateNextBackupTime(e,t){const[n,r]=t.time.split(":").map(Number),a=new Date(e);if(a.setHours(n,r,0,0),a.getTime()<=e)switch(t.frequency){case"daily":a.setDate(a.getDate()+1);break;case"weekly":a.setDate(a.getDate()+7);break;case"monthly":a.setMonth(a.getMonth()+1)}return a.getTime()}getBackupHistory(){const e=localStorage.getItem(this.BACKUP_HISTORY_KEY);if(e)try{return JSON.parse(e)}catch(t){console.error("Failed to parse backup history:",t)}return[]}updateBackupHistory(e){const t=this.getBackupHistory();t.unshift(e),t.length>this.MAX_HISTORY_ENTRIES&&t.splice(this.MAX_HISTORY_ENTRIES),localStorage.setItem(this.BACKUP_HISTORY_KEY,JSON.stringify(t))}async getStoredBackups(){const e=(await this.openBackupDB()).transaction(["backups"],"readonly").objectStore("backups").getAll();return new Promise((t,n)=>{e.onsuccess=()=>{const n=e.result.map(e=>({id:e.id,filename:e.filename,format:e.format,timestamp:e.timestamp,size:e.data.size,cloudSynced:e.cloudSynced}));t(n)},e.onerror=()=>n(e.error)})}async downloadBackup(e){const t=(await this.openBackupDB()).transaction(["backups"],"readonly").objectStore("backups").get(e);return new Promise((e,n)=>{t.onsuccess=()=>{const r=t.result;if(r){const t=URL.createObjectURL(r.data),n=document.createElement("a");n.href=t,n.download=r.filename,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),e()}else n(new Error("Backup not found"))},t.onerror=()=>n(t.error)})}async deleteBackup(e){const t=(await this.openBackupDB()).transaction(["backups"],"readwrite").objectStore("backups");return new Promise((n,r)=>{const a=t.delete(e);a.onsuccess=()=>n(),a.onerror=()=>r(a.error)})}},oT=Gi.createContext(void 0);class cT extends Gi.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("DebugErrorBoundary caught:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?bo.jsx("div",{className:"min-h-screen bg-red-50 p-8",children:bo.jsxs("div",{className:"max-w-4xl mx-auto",children:[bo.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Application Error"}),bo.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-4",children:[bo.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Message:"}),bo.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-sm",children:this.state.error?.toString()})]}),bo.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-4",children:[bo.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Stack Trace:"}),bo.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-sm text-red-600",children:this.state.error?.stack})]}),this.state.errorInfo&&bo.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-4",children:[bo.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Component Stack:"}),bo.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-sm",children:this.state.errorInfo.componentStack})]}),bo.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Reload Page"})]})}):this.props.children}}const lT=Ti(()=>po(()=>import("./Login-CS0tP5ym.js"),__vite__mapDeps([0,1,2,3]))),uT=Ti(()=>po(()=>import("./Welcome-J0Cz1Hz9.js"),__vite__mapDeps([4,1,2,3]))),dT=Ti(()=>po(()=>import("./Dashboard-fv6ISrcV.js"),__vite__mapDeps([5,3,1,6,2]))),hT=Ti(()=>po(()=>import("./Accounts-vNbSvxMW.js"),__vite__mapDeps([7,1,8,9,6,10,2,3]))),pT=Ti(()=>po(()=>import("./chunk-CwTNb39n.js").then(e=>e.T),__vite__mapDeps([11,3,1,9,6,8,12]))),gT=Ti(()=>po(()=>import("./TransactionsComparison-ddDY8s8t.js"),__vite__mapDeps([13,1,6,14,15,12,2,3,9,16,17,18,19]))),mT=Ti(()=>po(()=>import("./Reconciliation-Dlpti28O.js"),__vite__mapDeps([20,1,8,16,17,18,19,3,2,9]))),fT=Ti(()=>po(()=>import("./Investments-Bfpfj-gr.js"),__vite__mapDeps([21,1,22,9,23,3,6,2]))),yT=Ti(()=>po(()=>import("./Budget-M7gd6Ig8.js"),__vite__mapDeps([24,1,9,8,23,10,25,6,2,3]))),vT=Ti(()=>po(()=>import("./Goals-BllHWBWo.js"),__vite__mapDeps([26,1,8,6,10,9,2,3]))),bT=Ti(()=>po(()=>import("./Analytics-IJdWsQnf.js"),__vite__mapDeps([27,3,1,28,29,30,9,6,2,31]))),wT=Ti(()=>po(()=>import("./AdvancedAnalytics-CXt5nlIA.js"),__vite__mapDeps([32,6,1,33,28,9,2,3]))),xT=Ti(()=>po(()=>import("./AIFeatures-BkqqwVF6.js"),__vite__mapDeps([34,1,6,35,36,2,3,37,28,33,25]))),kT=Ti(()=>po(()=>import("./CustomReports-AzxPZ2lg.js"),__vite__mapDeps([38,1,39,29,28,37,3,2]))),_T=Ti(()=>po(()=>import("./TaxPlanning-CzQI_rA2.js"),__vite__mapDeps([40,6,1,39,30,9,2,3]))),ST=Ti(()=>po(()=>import("./Settings-rkNCBXYm.js"),__vite__mapDeps([41,6,42,1,2,3]))),jT=Ti(()=>po(()=>import("./AppSettings-DD42wg-8.js"),__vite__mapDeps([43,6,9,1,2,3]))),IT=Ti(()=>po(()=>import("./DataManagement-BAEXqEq1.js"),__vite__mapDeps([44,3,1,2]))),CT=Ti(()=>po(()=>import("./Categories-CAUWcp4k.js"),__vite__mapDeps([45,1,17,9,8,6,2,3]))),ET=Ti(()=>po(()=>import("./Tags-DKCC5JaJ.js"),__vite__mapDeps([46,1,8,6,2,3]))),TT=Ti(()=>po(()=>import("./DeletedAccounts-CBZdE89G.js"),__vite__mapDeps([47,1,6,9,2,3]))),NT=Ti(()=>po(()=>import("./SecuritySettings-BCNrHQlE.js"),__vite__mapDeps([48,1,49,6,2,3]))),AT=Ti(()=>po(()=>import("./AuditLogs-BVYvGkiA.js"),__vite__mapDeps([50,1,49,6,51,15,2,3]))),OT=Ti(()=>po(()=>import("./Notifications-Bp7MuSCI.js"),__vite__mapDeps([52,6,1,2,3]))),DT=Ti(()=>po(()=>import("./AccessibilitySettings-B9xjS6Wx.js"),__vite__mapDeps([53,1,6,2,3]))),PT=Ti(()=>po(()=>import("./AccessibilityDashboard-DEddIfFm.js"),__vite__mapDeps([54,1,2,3]))),MT=Ti(()=>po(()=>import("./AccountTransactions-CFZOzeI_.js"),__vite__mapDeps([55,1,9,16,17,18,19,3,2,51,15]))),LT=Ti(()=>po(()=>import("./FinancialSummaries-CWuu0UKN.js"),__vite__mapDeps([56,1,37,28,6,9,2,3]))),RT=Ti(()=>po(()=>import("./EnhancedInvestments-C2rzSeWA.js"),__vite__mapDeps([57,1,9,22,25,2,6,3]))),UT=Ti(()=>po(()=>import("./HouseholdManagement-DqyBq6AY.js"),__vite__mapDeps([58,6,1,25,2,3]))),zT=Ti(()=>po(()=>import("./MobileFeatures-_hz1GwSb.js"),__vite__mapDeps([59,1,6,9,2,3]))),$T=Ti(()=>po(()=>import("./BusinessFeatures-BPYa8uDH.js"),__vite__mapDeps([60,1,6,2,3]))),BT=Ti(()=>po(()=>import("./FinancialPlanning-CCNJ0Xif.js"),__vite__mapDeps([61,1,6,2,3]))),FT=Ti(()=>po(()=>import("./DataIntelligence-jxrdhkaK.js"),__vite__mapDeps([62,1,6,2,3]))),WT=Ti(()=>po(()=>import("./ExportManager-CWRys4Ms.js"),__vite__mapDeps([63,1,6,2,3]))),qT=Ti(()=>po(()=>import("./Advanced-I0h-J_In.js"),__vite__mapDeps([64,6,1,2,3]))),GT=Ti(()=>po(()=>import("./EnhancedImport-AmHEF398.js"),__vite__mapDeps([65,1,66,6,67,36,68,69,70,2,3,71]))),VT=Ti(()=>po(()=>import("./Documents-CflftXI9.js"),__vite__mapDeps([72,6,18,1,19,3,2]))),HT=Ti(()=>po(()=>import("./OCRTest-DZe7xI91.js"),__vite__mapDeps([73,1,19,3,2]))),YT=Ti(()=>po(()=>import("./OpenBanking-Sutevx6M.js"),__vite__mapDeps([74,1,6,2,3]))),KT=Ti(()=>po(()=>import("./Performance-DrFbHZrV.js"),__vite__mapDeps([75,6,1,2,3]))),ZT=Ti(()=>po(()=>import("./Subscription-BfPZ06wu.js"),__vite__mapDeps([76,6,1,2,3]))),JT=new class{vapidPublicKey;registration=null;constructor(){this.vapidPublicKey="BKcvxvtwNpK2QFYwpwKyTjdGaNzHKdvLXYqfT2VzQd6X0gSJI_6R5gSjB2LqvJJcQ_8G9pYsvGLPCmWYYZrJe1Y"}async initialize(){try{if(!("serviceWorker"in navigator))return void console.warn("Service Worker not supported");if(!("PushManager"in window))return void console.warn("Push notifications not supported");const e=await navigator.serviceWorker.ready;this.registration=e;const t=await this.getPermissionState();console.log("Push notification permission:",t)}catch(e){console.error("Failed to initialize push notifications:",e)}}async requestPermission(){try{const e=await Notification.requestPermission();return"granted"===e&&await this.subscribe(),e}catch(e){return console.error("Failed to request notification permission:",e),"denied"}}async getPermissionState(){return Notification.permission}async isSubscribed(){return!!this.registration&&null!==await this.registration.pushManager.getSubscription()}async subscribe(){if(!this.registration)throw new Error("Service worker not registered");try{const e=this.urlBase64ToUint8Array(this.vapidPublicKey),t=await this.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e});return await this.sendSubscriptionToServer(t),t}catch(e){return console.error("Failed to subscribe to push notifications:",e),null}}async unsubscribe(){if(!this.registration)return!1;try{const e=await this.registration.pushManager.getSubscription();return!!e&&(await e.unsubscribe(),await this.removeSubscriptionFromServer(e),!0)}catch(e){return console.error("Failed to unsubscribe from push notifications:",e),!1}}async sendSubscriptionToServer(e){try{await fetch("/api/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:e,preferences:this.getNotificationPreferences()})})}catch(t){console.error("Failed to send subscription to server:",t)}}async removeSubscriptionFromServer(e){try{await fetch("/api/notifications/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:e})})}catch(t){console.error("Failed to remove subscription from server:",t)}}async updatePreferences(e){if(localStorage.setItem("notificationPreferences",JSON.stringify(e)),await this.isSubscribed())try{await fetch("/api/notifications/preferences",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferences:e})})}catch(t){console.error("Failed to update notification preferences:",t)}}getNotificationPreferences(){const e=localStorage.getItem("notificationPreferences");return e?JSON.parse(e):{budgetAlerts:!0,billReminders:!0,goalAchievements:!0,investmentAlerts:!0,weeklyReports:!1,unusualSpending:!0}}async showNotification(e){if(!this.registration)throw new Error("Service worker not registered");if("granted"!==Notification.permission)throw new Error("Notification permission not granted");await this.registration.showNotification(e.title,{body:e.body,icon:e.icon||"/icon-192.png",badge:e.badge||"/badge-72.png",tag:e.tag,data:e.data,actions:e.actions,requireInteraction:e.requireInteraction})}async testNotification(){await this.showNotification({title:"WealthTracker Test",body:"Push notifications are working! \ud83c\udf89",tag:"test-notification",data:{type:"test",timestamp:Date.now()}})}urlBase64ToUint8Array(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length);for(let a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}static getNotificationConfig(e,t){switch(e){case"budget-alert":return{title:"\ud83d\udcb0 Budget Alert",body:`You've used ${t.percentage}% of your ${t.category} budget`,tag:"budget-alert",data:{type:"budget-alert",...t},actions:[{action:"view",title:"View Budget"},{action:"dismiss",title:"Dismiss"}]};case"bill-reminder":return{title:"\ud83d\udcc5 Bill Due Soon",body:`${t.name} - $${t.amount} due in ${t.daysUntilDue} days`,tag:`bill-${t.id}`,data:{type:"bill-reminder",...t},requireInteraction:!0,actions:[{action:"pay",title:"Mark as Paid"},{action:"remind-later",title:"Remind Later"}]};case"goal-achieved":return{title:"\ud83c\udf89 Goal Achieved!",body:`Congratulations! You've reached your "${t.name}" goal`,tag:`goal-${t.id}`,data:{type:"goal-achieved",...t}};case"investment-alert":return{title:"\ud83d\udcc8 Investment Alert",body:t.message||"Check your portfolio for important updates",tag:"investment-alert",data:{type:"investment-alert",...t}};case"weekly-report":return{title:"\ud83d\udcca Weekly Summary",body:"Your weekly financial report is ready",tag:"weekly-report",data:{type:"weekly-report",...t}};case"unusual-spending":return{title:"\u26a0\ufe0f Unusual Spending Detected",body:`Spending in ${t.category} is ${t.percentage}% higher than usual`,tag:"unusual-spending",data:{type:"unusual-spending",...t},requireInteraction:!0};default:return{title:"WealthTracker",body:t.message||"You have a new notification",data:t}}}},QT=()=>{const[e,t]=React.useState("default"),[n,r]=React.useState(!1),[a,s]=React.useState(JT.getNotificationPreferences());return React.useEffect(()=>{(async()=>{const e=await JT.getPermissionState();t(e);const n=await JT.isSubscribed();r(n)})()},[]),{permission:e,isSubscribed:n,preferences:a,requestPermission:React.useCallback(async()=>{const e=await JT.requestPermission();if(t(e),"granted"===e){const e=await JT.isSubscribed();r(e)}return e},[]),subscribe:React.useCallback(async()=>{const e=await JT.subscribe();return e&&r(!0),e},[]),unsubscribe:React.useCallback(async()=>{const e=await JT.unsubscribe();return e&&r(!1),e},[]),updatePreferences:React.useCallback(async e=>{await JT.updatePreferences(e),s(e)},[]),testNotification:React.useCallback(async()=>{await JT.testNotification()},[])}};"undefined"!=typeof window&&(po(async()=>{const{setupCSPReporting:e,applyCSPMetaTag:t}=await import("./csp-CBU0zWI4.js");return{setupCSPReporting:e,applyCSPMetaTag:t}},[]).then(({setupCSPReporting:e,applyCSPMetaTag:t})=>{e(),void 0!==import.meta&&t()}),po(async()=>{const{setupCSRFForForms:e,setupDoubleSubmitCookie:t}=await import("./csrf-protection-5A9EuiUo.js");return{setupCSRFForForms:e,setupDoubleSubmitCookie:t}},__vite__mapDeps([77,1,2,3])).then(({setupCSRFForForms:e,setupDoubleSubmitCookie:t})=>{e(),t()}),po(async()=>{const{initializeRateLimiter:e}=await import("./rate-limiting-kZmhB5dy.js");return{initializeRateLimiter:e}},[]).then(({initializeRateLimiter:e})=>{e()})),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>{for(const t of e)t.active?.scriptURL.includes("sw.js")||t.unregister()}),window.addEventListener("error",e=>{console.error("Global error:",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason)}),document.documentElement.classList.remove("dark");try{const e=document.getElementById("root");e?(console.log("Starting React app..."),xo.createRoot(e).render(bo.jsx(Gi.StrictMode,{children:bo.jsx(Ad,{children:bo.jsx(Qu,{publishableKey:"pk_test_bWF0dXJlLXJhdHRsZXNuYWtlLTc1LmNsZXJrLmFjY291bnRzLmRldiQ",afterSignOutUrl:"/",appearance:{variables:{colorPrimary:"#3b82f6"}},allowedRedirectOrigins:[window.location.origin],children:bo.jsx(uo,{store:Vm,children:bo.jsx(Fi,{})})})})})),console.log("React app rendered")):console.error("Root element not found!")}catch(XT){console.error("Error rendering app:",XT)}!function(e){if("serviceWorker"in navigator){let t="/";try{void 0!==import.meta&&w_&&(t="/")}catch{}if(new URL(t,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${t}sw.js`;x_?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):ua(e,t)}).catch(()=>{})}(n,e),navigator.serviceWorker.ready.then(()=>{})):ua(n,e)}),e?.onOffline&&window.addEventListener("offline",e.onOffline),e?.onOnline&&window.addEventListener("online",e.onOnline)}}({onSuccess:async e=>{window.swRegistration=e;try{await JT.initialize(),console.log("Push notifications initialized")}catch(XT){console.error("Failed to initialize push notifications:",XT)}},onUpdate:e=>{window.swRegistration=e,window.dispatchEvent(new CustomEvent("sw-update-available",{detail:{registration:e}}))},onOffline:()=>{window.dispatchEvent(new Event("app-offline"))},onOnline:()=>{window.dispatchEvent(new Event("app-online"))}});export{qt as $,tb as A,pv as B,cd as C,ss as D,kw as E,ur as F,uv as G,Bv as H,dv as I,yv as J,ov as K,mv as L,fa as M,cv as N,Sv as O,wb as P,bv as Q,vd as R,Mu as S,fv as T,hu as U,wv as V,Zb as W,xv as X,Fr as Y,rj as Z,kv as _,Ul as a,Ea as a$,Za as a0,Tv as a1,Cv as a2,qv as a3,Li as a4,Mi as a5,Ev as a6,Iv as a7,Hm as a8,Ym as a9,Av as aA,Fv as aB,Wb as aC,qb as aD,Jv as aE,gw as aF,dw as aG,jb as aH,Ib as aI,br as aJ,Di as aK,ib as aL,dr as aM,Bx as aN,wa as aO,Na as aP,$b as aQ,Xb as aR,Yv as aS,Pv as aT,Mv as aU,Uv as aV,Ov as aW,Dv as aX,Bb as aY,lb as aZ,Ia as a_,Gv as aa,Ba as ab,_m as ac,ki as ad,ow as ae,cw as af,vv as ag,zv as ah,hv as ai,Nv as aj,lw as ak,us as al,vw as am,_w as an,Sw as ao,mw as ap,oj as aq,Rv as ar,Jb as as,Zv as at,Oi as au,Kb as av,xi as aw,Vv as ax,gv as ay,Ut as az,Ml as b,sw as b$,Oa as b0,Ub as b1,sb as b2,aT as b3,Cb as b4,ba as b5,A_ as b6,N_ as b7,Or as b8,Wa as b9,xw as bA,ww as bB,fw as bC,Iw as bD,jw as bE,bw as bF,Yr as bG,Kr as bH,yw as bI,Cw as bJ,Fb as bK,fb as bL,Lv as bM,xa as bN,ka as bO,pw as bP,ob as bQ,ls as bR,ds as bS,xb as bT,Qb as bU,Pb as bV,gs as bW,ew as bX,_v as bY,WE as bZ,CC as b_,id as ba,Ii as bb,Sb as bc,eb as bd,lv as be,nb as bf,ab as bg,Mb as bh,_b as bi,kb as bj,vb as bk,Hv as bl,mb as bm,rb as bn,Kv as bo,wi as bp,Hb as bq,Qv as br,jv as bs,Zk as bt,Xv as bu,zi as bv,yb as bw,hb as bx,ub as by,QT as bz,Lu as c,Hg as c0,it as c1,Eb as c2,Db as c3,Tb as c4,Ob as c5,Nb as c6,Lb as c7,hw as c8,Ab as c9,ld as ca,g as cb,Vk as cc,vl as cd,Vg as ce,dj as cf,as as cg,rt as ch,pb as ci,zb as cj,z as ck,kd as cl,Jk as cm,Vb as cn,Yb as co,uw as cp,iT as cq,aj as cr,Ft as d,gb as e,db as f,yr as g,Sr as h,Rl as i,bo as j,Pi as k,ad as l,ya as m,yd as n,hd as o,wd as p,va as q,cb as r,zg as s,Rb as t,Dl as u,cs as v,Ll as w,os as x,$v as y,is as z};
