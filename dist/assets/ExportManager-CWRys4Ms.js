function e(){const{transactions:e,accounts:p}=t(),u=[],[y,b]=g.useState("export"),[j,v]=g.useState([]),[k,N]=g.useState([]),[f,w]=g.useState(!1),[C,D]=g.useState({startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1),endDate:new Date,format:"pdf",includeCharts:!0,includeTransactions:!0,includeAccounts:!0,includeInvestments:!0,includeBudgets:!0,groupBy:"category"});g.useEffect(()=>{S()},[]);const S=()=>{v(r.getTemplates()),N(r.getScheduledReports())},T=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),A=e=>e.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a.jsx(h,{title:"Export Manager",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-800 dark:to-purple-800 rounded-2xl p-6 mb-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Export Manager"}),a.jsx("p",{className:"text-blue-100",children:"Generate reports, schedule exports, and manage templates"})]}),a.jsx(s,{size:48,className:"text-white/80"})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-6",children:a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"flex space-x-8 overflow-x-auto",children:[a.jsx("button",{onClick:()=>b("export"),className:"py-4 px-6 border-b-2 font-medium text-sm whitespace-nowrap "+("export"===y?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(s,{size:16}),"Quick Export"]})}),a.jsx("button",{onClick:()=>b("templates"),className:"py-4 px-6 border-b-2 font-medium text-sm whitespace-nowrap "+("templates"===y?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(d,{size:16}),"Templates (",j.length,")"]})}),a.jsx("button",{onClick:()=>b("scheduled"),className:"py-4 px-6 border-b-2 font-medium text-sm whitespace-nowrap "+("scheduled"===y?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(l,{size:16}),"Scheduled (",k.filter(e=>e.isActive).length,")"]})}),a.jsx("button",{onClick:()=>b("history"),className:"py-4 px-6 border-b-2 font-medium text-sm whitespace-nowrap "+("history"===y?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(i,{size:16}),"History"]})})]})})}),"export"===y&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Export Options"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date"}),a.jsx("input",{type:"date",value:C.startDate.toISOString().split("T")[0],onChange:e=>D({...C,startDate:new Date(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Date"}),a.jsx("input",{type:"date",value:C.endDate.toISOString().split("T")[0],onChange:e=>D({...C,endDate:new Date(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Format"}),a.jsxs("select",{value:C.format,onChange:e=>D({...C,format:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"pdf",children:"PDF Report"}),a.jsx("option",{value:"csv",children:"CSV Data"}),a.jsx("option",{value:"xlsx",children:"Excel Spreadsheet"}),a.jsx("option",{value:"json",children:"JSON Data"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group By"}),a.jsxs("select",{value:C.groupBy||"none",onChange:e=>D({...C,groupBy:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"none",children:"No Grouping"}),a.jsx("option",{value:"category",children:"Category"}),a.jsx("option",{value:"account",children:"Account"}),a.jsx("option",{value:"month",children:"Month"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Include in Export"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:C.includeTransactions,onChange:e=>D({...C,includeTransactions:e.target.checked}),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Transactions"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:C.includeAccounts,onChange:e=>D({...C,includeAccounts:e.target.checked}),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Accounts"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:C.includeInvestments,onChange:e=>D({...C,includeInvestments:e.target.checked}),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Investments"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:C.includeBudgets,onChange:e=>D({...C,includeBudgets:e.target.checked}),className:"mr-2"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Budgets"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:C.includeCharts,onChange:e=>D({...C,includeCharts:e.target.checked}),className:"mr-2",disabled:"pdf"!==C.format}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Charts"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("button",{onClick:async()=>{w(!0);try{const t={transactions:C.includeTransactions?e:void 0,accounts:C.includeAccounts?p:void 0,investments:C.includeInvestments?u:void 0};if("pdf"===C.format){const e=await r.exportToPDF(t,C),a=new Blob([e],{type:"application/pdf"}),s=URL.createObjectURL(a),d=document.createElement("a");d.href=s,d.download=`financial-report-${C.startDate.toISOString().split("T")[0]}.pdf`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(s)}else if("csv"===C.format){const t=await r.exportToCSV(C.includeTransactions?e:p,C),a=new Blob([t],{type:"text/csv"}),s=URL.createObjectURL(a),d=document.createElement("a");d.href=s,d.download=`export-${C.startDate.toISOString().split("T")[0]}.csv`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(s)}}catch(t){console.error("Export failed:",t),alert("Export failed. Please try again.")}finally{w(!1)}},disabled:f,className:"flex items-center gap-2 px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 disabled:opacity-50",children:[f?a.jsx(n,{size:16,className:"animate-spin"}):a.jsx(s,{size:16}),f?"Generating...":"Export Now"]}),a.jsxs("button",{onClick:()=>{const e=prompt("Enter template name:");if(!e)return;const t=prompt("Enter template description (optional):")||"";r.createTemplate({name:e,description:t,options:C,isDefault:!1}),S()},className:"flex items-center gap-2 px-4 py-3 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[a.jsx(d,{size:16}),"Save as Template"]}),a.jsxs("button",{onClick:()=>{const e=prompt("Enter report name:");if(!e)return;const t=prompt("Enter email address:");if(!t)return;const a=prompt("Enter frequency (daily, weekly, monthly, quarterly):");["daily","weekly","monthly","quarterly"].includes(a)?(r.createScheduledReport({name:e,email:t,frequency:a,options:C,isActive:!0}),S()):alert("Invalid frequency")},className:"flex items-center gap-2 px-4 py-3 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[a.jsx(l,{size:16}),"Schedule Report"]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Preview"}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),a.jsxs("span",{className:"text-gray-900 dark:text-white",children:[T(C.startDate)," - ",T(C.endDate)]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Format:"}),a.jsx("span",{className:"text-gray-900 dark:text-white uppercase",children:C.format})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Transactions:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:C.includeTransactions?e.length:0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Accounts:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:C.includeAccounts?p.length:0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Investments:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:C.includeInvestments?u.length:0})]})]})]})]}),"templates"===y&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Export Templates"}),a.jsxs("button",{onClick:()=>b("export"),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[a.jsx(c,{size:16}),"Create Template"]})]})}),a.jsx("div",{className:"p-6",children:0===j.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(d,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No templates created yet"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(e=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[e.name,e.isDefault&&a.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200 px-2 py-1 rounded",children:"Default"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>(e=>{D({...e.options,startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1),endDate:new Date}),b("export")})(e),className:"p-1 text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300",title:"Use template",children:a.jsx(o,{size:14})}),a.jsx("button",{onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this template?")&&(r.deleteTemplate(t),S()));var t},className:"p-1 text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",title:"Delete template",disabled:e.isDefault,children:a.jsx(x,{size:14})})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[a.jsxs("div",{children:["Format: ",e.options.format.toUpperCase()]}),a.jsxs("div",{children:["Includes: ",[e.options.includeTransactions&&"Transactions",e.options.includeAccounts&&"Accounts",e.options.includeInvestments&&"Investments",e.options.includeBudgets&&"Budgets",e.options.includeCharts&&"Charts"].filter(Boolean).join(", ")]}),a.jsxs("div",{children:["Created: ",T(e.createdAt)]})]})]},e.id))})})]}),"scheduled"===y&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Scheduled Reports"}),a.jsxs("button",{onClick:()=>b("export"),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[a.jsx(c,{size:16}),"Schedule Report"]})]})}),a.jsx("div",{className:"p-6",children:0===k.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(l,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No scheduled reports"})]}):a.jsx("div",{className:"space-y-4",children:k.map(e=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),a.jsx("span",{className:"text-xs px-2 py-1 rounded "+(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"),children:e.isActive?"Active":"Paused"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Email"}),a.jsx("div",{children:e.email})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Frequency"}),a.jsx("div",{className:"capitalize",children:e.frequency})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Next Run"}),a.jsx("div",{children:A(e.nextRun)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Last Run"}),a.jsx("div",{children:e.lastRun?A(e.lastRun):"Never"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx("button",{onClick:()=>(e=>{const t=k.find(t=>t.id===e);t&&(r.updateScheduledReport(e,{isActive:!t.isActive}),S())})(e.id),className:"p-2 rounded "+(e.isActive?"text-yellow-600 dark:text-yellow-400 hover:text-yellow-900 dark:hover:text-yellow-300":"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300"),title:e.isActive?"Pause report":"Resume report",children:e.isActive?a.jsx(m,{size:16}):a.jsx(o,{size:16})}),a.jsx("button",{onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this scheduled report?")&&(r.deleteScheduledReport(t),S()));var t},className:"p-2 text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",title:"Delete report",children:a.jsx(x,{size:16})})]})]})},e.id))})})]}),"history"===y&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Export History"}),a.jsxs("div",{className:"text-center py-8",children:[a.jsx(i,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Export history will be displayed here"}),a.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"This feature tracks all generated exports and scheduled report deliveries"})]})]})]})})}import{g as t,b3 as r,j as a,aS as s,b2 as d,aZ as l,r as i,at as n,ag as c,aC as o,aF as x,aD as m}from"./index-Pkjq0qn3.js";import{a as g}from"./chunk-BWx9oMeS.js";import{P as h}from"./chunk-BnYLBI7x.js";import"./chunk-BN8kgYrt.js";import"./chunk-Drd-K-oK.js";export{e as default};
