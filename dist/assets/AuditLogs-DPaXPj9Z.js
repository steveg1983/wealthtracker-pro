function e(){const[e,g]=t.useState([]),[h,m]=t.useState([]),[u,p]=t.useState({action:"",resourceType:"",startDate:"",endDate:"",search:""});t.useEffect(()=>{y()},[]),t.useEffect(()=>{j()},[e,u]);const y=()=>{const e=r.getAuditLogs();g(e)},j=()=>{let t=[...e];if(u.action&&(t=t.filter(e=>e.action===u.action)),u.resourceType&&(t=t.filter(e=>e.resourceType===u.resourceType)),u.startDate){const e=new Date(u.startDate);t=t.filter(t=>t.timestamp>=e)}if(u.endDate){const e=new Date(u.endDate);e.setHours(23,59,59,999),t=t.filter(t=>t.timestamp<=e)}if(u.search){const e=u.search.toLowerCase();t=t.filter(t=>t.action.toLowerCase().includes(e)||t.resourceType.toLowerCase().includes(e)||t.resourceId&&t.resourceId.toLowerCase().includes(e)||t.userId.toLowerCase().includes(e))}m(t)},b=(e,t)=>{p(a=>({...a,[e]:t}))},k=e=>{switch(e){case"create":return"\u2705";case"update":return"\u270f\ufe0f";case"delete":return"\ud83d\uddd1\ufe0f";case"login":return"\ud83d\udd10";case"logout":return"\ud83d\udeaa";case"export":return"\ud83d\udce4";case"import":return"\ud83d\udce5";default:return"\ud83d\udcdd"}},v=e=>{switch(e){case"create":return"text-green-600 dark:text-green-400";case"update":return"text-blue-600 dark:text-blue-400";case"delete":return"text-red-600 dark:text-red-400";case"login":return"text-purple-600 dark:text-purple-400";case"logout":default:return"text-gray-600 dark:text-gray-400";case"export":return"text-orange-600 dark:text-orange-400";case"import":return"text-indigo-600 dark:text-indigo-400"}},f=e=>{if(!e)return null;const t=Object.keys(e);return 0===t.length?null:1===t.length?`Changed ${t[0]}`:`Changed ${t.length} fields`},N=t.useMemo(()=>[{key:"timestamp",header:"Timestamp",width:"180px",accessor:e=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(s,{size:16,className:"text-gray-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.timestamp.toLocaleDateString()}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.timestamp.toLocaleTimeString()})]})]}),sortable:!0},{key:"action",header:"Action",width:"120px",accessor:e=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:k(e.action)}),a.jsx("span",{className:`text-sm font-medium capitalize ${v(e.action)}`,children:e.action})]}),sortable:!0},{key:"resource",header:"Resource",width:"180px",accessor:e=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(l,{size:16,className:"text-gray-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:e.resourceType}),e.resourceId&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",e.resourceId]})]})]}),sortable:!0},{key:"user",header:"User",width:"150px",accessor:e=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(i,{size:16,className:"text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:e.userId})]})},{key:"changes",header:"Changes",accessor:e=>a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:f(e.changes)||"\u2014"}),e.ipAddress&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["IP: ",e.ipAddress]})]})}],[]);return a.jsx(o,{children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-600 to-gray-800 dark:from-gray-800 dark:to-gray-900 rounded-2xl p-6 mb-6 text-white shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Audit Logs"}),a.jsx("p",{className:"text-gray-100",children:"Complete history of all system activities and changes"})]}),a.jsx(d,{size:48,className:"text-white/80"})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(n,{size:20,className:"text-gray-600 dark:text-gray-400"}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Filters"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(c,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:u.search,onChange:e=>b("search",e.target.value),placeholder:"Search logs...",className:"w-full pl-9 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Action"}),a.jsxs("select",{value:u.action,onChange:e=>b("action",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"All Actions"}),a.jsx("option",{value:"create",children:"Create"}),a.jsx("option",{value:"update",children:"Update"}),a.jsx("option",{value:"delete",children:"Delete"}),a.jsx("option",{value:"login",children:"Login"}),a.jsx("option",{value:"logout",children:"Logout"}),a.jsx("option",{value:"export",children:"Export"}),a.jsx("option",{value:"import",children:"Import"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Resource Type"}),a.jsxs("select",{value:u.resourceType,onChange:e=>b("resourceType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"transaction",children:"Transaction"}),a.jsx("option",{value:"account",children:"Account"}),a.jsx("option",{value:"budget",children:"Budget"}),a.jsx("option",{value:"goal",children:"Goal"}),a.jsx("option",{value:"investment",children:"Investment"}),a.jsx("option",{value:"settings",children:"Settings"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:u.startDate,onChange:e=>b("startDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:u.endDate,onChange:e=>b("endDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx("button",{onClick:()=>{p({action:"",resourceType:"",startDate:"",endDate:"",search:""})},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:"Clear Filters"}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:["Showing ",h.length," of ",e.length," logs"]})]})]}),a.jsx("div",{style:{height:"600px"},children:a.jsx(x,{items:h,columns:N,getItemKey:e=>e.id,rowHeight:80,emptyMessage:0===e.length?"No activities have been logged yet":"Try adjusting your filters to see more results",threshold:50})})]})})}import{r as t,L as a}from"./chunk-Bcp2Zi4E.js";import{s as r}from"./chunk-Cvxg0-1j.js";import{C as s,aN as l,b6 as i,aH as d,R as n,I as c}from"./index-LbveD3Go.js";import{P as o}from"./chunk-zHRn0GaW.js";import{V as x}from"./chunk-CN6ztIv-.js";import"./chunk-oUGr0aFc.js";import"./chunk-a7oqB5tI.js";import"./chunk-B5pcS96K.js";export{e as default};
