function r(r){return i[r]||r}async function n(){const r=Date.now();if(u&&r-u.timestamp<36e5)return u.rates;const n=await async function(){try{const r=await fetch("https://api.exchangerate-api.com/v4/latest/GBP");if(!r.ok)throw new Error("Failed to fetch exchange rates");return(await r.json()).rates}catch(r){return console.error("Error fetching exchange rates:",r),{GBP:1,USD:1.27,EUR:1.17,CAD:1.71,AUD:1.92,JPY:189.5,CHF:1.12,CNY:9.19,INR:105.85,NZD:2.09}}}();return u={rates:n,timestamp:r},n}async function e(r,e,t){const o=c(r);if(e===t)return o;try{const r=await n();if(!r[e]||!r[t])return console.warn(`Missing exchange rate for ${e} or ${t}`),o;const c=new a(r[e]),s=new a(r[t]);let u,i;return u="GBP"===e?o:o.dividedBy(c),i="GBP"===t?u:u.times(s),i}catch(s){return console.error("Currency conversion error:",s),o}}function t(){const{currency:t}=s(),u=o.useCallback((n,e)=>function(n,e="GBP"){const t=c(n),o=r(e),a=t.isNegative(),s=t.abs().toNumber(),u=new Intl.NumberFormat("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s);return"CHF"===e?a?`-${u} ${o}`:`${u} ${o}`:a?`-${o}${u}`:`${o}${u}`}(n,e||t),[t]),i=o.useCallback(async(r,n)=>{if(n===t)return u(r,t);try{const o=await e(r,n,t);return u(o,t)}catch(o){return console.error("Currency conversion error:",o),u(r,n)+" (!)"}},[t,u]),l=o.useCallback(async(r,n)=>{if(n===t)return c(r);try{return await e(r,n,t)}catch(o){return console.error("Currency conversion error:",o),c(r)}},[t]),m=o.useCallback(async r=>{try{const e=await async function(r,e){try{const t=await n();let o=new a(0);for(const{amount:n,currency:s}of r){const r=c(n);if(s===e){o=o.plus(r);continue}if(!t[s]||!t[e]){console.warn(`Missing exchange rate for ${s} or ${e}`),o=o.plus(r);continue}const u=new a(t[s]),i=new a(t[e]);let l,m;l="GBP"===s?r:r.dividedBy(u),m="GBP"===e?l:l.times(i),o=o.plus(m)}return o}catch(t){return console.error("Currency conversion error:",t),r.reduce((r,{amount:n})=>r.plus(c(n)),new a(0))}}(r,t);return e}catch(e){return console.error("Currency conversion error:",e),r.reduce((r,n)=>r.plus(n.amount),c(0))}},[t]);return o.useMemo(()=>({formatCurrency:u,convertAndFormat:i,convert:l,convertAndSum:m,displayCurrency:t,getCurrencySymbol:r}),[u,i,l,m,t])}import{a as o}from"./chunk-BWx9oMeS.js";import{F as c,aN as a,d as s}from"./index-Pkjq0qn3.js";let u=null;const i={GBP:"\xa3",USD:"$",EUR:"\u20ac",CAD:"$",AUD:"$",JPY:"\xa5",CHF:"CHF",CNY:"\xa5",INR:"\u20b9",NZD:"$"};export{t as u};
