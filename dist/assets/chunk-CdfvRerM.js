function e(e,a=1){const t=Math.max(0,Math.min(1,a));switch(e){case"light":return Math.round(10*t);case"medium":return Math.round(30*t);case"heavy":return Math.round(50*t);case"success":return[Math.round(15*t),10,Math.round(15*t)];case"warning":return[Math.round(25*t),15,Math.round(25*t),15,Math.round(25*t)];case"error":return[Math.round(40*t),20,Math.round(40*t),20,Math.round(40*t)];case"selection":return Math.round(8*t);case"impact":return Math.round(35*t);case"notification":return[Math.round(20*t),10,Math.round(10*t),10,Math.round(20*t)];default:return Math.round(15*t)}}function a(e,a=1){const t=Math.max(0,Math.min(1,a));switch(e){case"light":return{duration:50,startDelay:0,strongMagnitude:0,weakMagnitude:.3*t};case"medium":return{duration:100,startDelay:0,strongMagnitude:.3*t,weakMagnitude:.5*t};case"heavy":return{duration:150,startDelay:0,strongMagnitude:.8*t,weakMagnitude:.4*t};case"success":return{duration:200,startDelay:0,strongMagnitude:.5*t,weakMagnitude:.7*t};case"error":return{duration:300,startDelay:0,strongMagnitude:1*t,weakMagnitude:.8*t};default:return{duration:75,startDelay:0,strongMagnitude:.2*t,weakMagnitude:.4*t}}}import{r as t,H as n}from"./chunk-DowOIOga.js";import{bJ as r,x as i,bE as s,aX as o,E as c,D as l}from"./index-qHm2isZb.js";import{u as d}from"./chunk-zIucmNL9.js";var u=(e=>(e.LIGHT="light",e.MEDIUM="medium",e.HEAVY="heavy",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error",e.SELECTION="selection",e.IMPACT="impact",e.NOTIFICATION="notification",e))(u||{});const g=t.memo(function({transaction:g,account:h,formatCurrency:m,onEdit:x,onDelete:b,onView:w,onReconcile:p,onCategorize:v,onToggleFavorite:f,isSelected:k=!1,onToggleSelection:y}){const M=d(g.date),{trigger:j}=function(){const n=t.useCallback(()=>{if("navigator"in window&&"vibrate"in navigator)return!0;if(window.DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission)return!0;if("navigator"in window&&"getGamepads"in navigator){const e=navigator.getGamepads();return Array.from(e).some(e=>e&&e.vibrationActuator)}return!1},[]),r=t.useCallback(()=>{const e=localStorage.getItem("haptic-feedback-enabled");return null!==e?"true"===e:(!window.matchMedia||!window.matchMedia("(prefers-reduced-motion: reduce)").matches)&&window.innerWidth<=768},[]),i=t.useCallback(async(t="light",i={})=>{const{force:s=!1,delay:o=0,intensity:c=1}=i;if(!(s||n()&&r()))return!1;o>0&&await new Promise(e=>setTimeout(e,o));try{if("navigator"in window&&"vibrate"in navigator){const a=e(t,c);return navigator.vibrate(a),!0}if(window.navigator&&window.navigator.hapticFeedback){const e=window.navigator.hapticFeedback,a=function(e){switch(e){case"light":case"selection":default:return"impactLight";case"medium":return"impactMedium";case"heavy":case"impact":return"impactHeavy";case"success":return"notificationSuccess";case"warning":return"notificationWarning";case"error":return"notificationError";case"notification":return"selectionChanged"}}(t);if(e[a])return e[a](),!0}if("navigator"in window&&"getGamepads"in navigator){const e=navigator.getGamepads();for(const n of e)if(n&&n.vibrationActuator){const{duration:e,startDelay:r,strongMagnitude:i,weakMagnitude:s}=a(t,c);return n.vibrationActuator.playEffect("dual-rumble",{duration:e,startDelay:r,strongMagnitude:i,weakMagnitude:s}),!0}}if("navigator"in window&&"vibrate"in navigator){const a=e(t,c);return navigator.vibrate(a),!0}return!1}catch(l){return!1}},[n,r]),s=t.useCallback(e=>i("light",e),[i]),o=t.useCallback(e=>i("medium",e),[i]),c=t.useCallback(e=>i("heavy",e),[i]),l=t.useCallback(e=>i("success",e),[i]),d=t.useCallback(e=>i("warning",e),[i]),u=t.useCallback(e=>i("error",e),[i]),g=t.useCallback(e=>i("selection",e),[i]),h=t.useCallback(e=>i("impact",e),[i]),m=t.useCallback(e=>i("notification",e),[i]),x=t.useCallback(e=>{localStorage.setItem("haptic-feedback-enabled",e.toString())},[]);return{isAvailable:n(),isEnabled:r(),trigger:i,light:s,medium:o,heavy:c,success:l,warning:d,error:u,selection:g,impact:h,notification:m,setEnabled:x}}(),[C,N]=t.useState(0),[E,S]=t.useState(null),[D]=t.useState(!1),I=t.useCallback(async()=>{await j(u.SELECTION),S("right"),N(-100)},[j]),T=t.useCallback(async()=>{await j(u.SELECTION),S("left"),N(100)},[j]),R=t.useCallback(async()=>{E?(S(null),N(0)):(await j(u.LIGHT),w(g))},[E,w,g,j]),z=t.useCallback(async()=>{await j(u.MEDIUM),x(g)},[x,g,j]),{ref:A}=r({onSwipeLeft:I,onSwipeRight:T,onTap:R,onLongPress:z,onDoubleTap:()=>f?.(g)},{threshold:50,preventScrollOnSwipe:!0}),G=g.amount<0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400";return n.jsxs("div",{className:"relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsxs("div",{className:"flex items-center gap-2 px-4",children:[p&&!g.cleared&&n.jsx("button",{onClick:async()=>{await j(u.SUCCESS),p(g),N(0),S(null)},className:"p-3 bg-green-500 text-white rounded-lg","aria-label":"Reconcile",children:n.jsx(i,{size:20})}),f&&n.jsx("button",{onClick:async()=>{await j(u.MEDIUM),f(g),N(0),S(null)},className:"p-3 bg-yellow-500 text-white rounded-lg","aria-label":"Favorite",children:n.jsx(s,{size:20})})]})}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-end",children:n.jsxs("div",{className:"flex items-center gap-2 px-4",children:[v&&n.jsx("button",{onClick:async()=>{await j(u.LIGHT),v(g),N(0),S(null)},className:"p-3 bg-purple-500 text-white rounded-lg","aria-label":"Categorize",children:n.jsx(o,{size:20})}),n.jsx("button",{onClick:async()=>{await j(u.MEDIUM),x(g),N(0),S(null)},className:"p-3 bg-blue-500 text-white rounded-lg","aria-label":"Edit",children:n.jsx(c,{size:20})}),n.jsx("button",{onClick:async()=>{await j(u.WARNING),confirm("Delete this transaction?")&&(await j(u.ERROR),b(g.id)),N(0),S(null)},className:"p-3 bg-red-500 text-white rounded-lg","aria-label":"Delete",children:n.jsx(l,{size:20})})]})}),n.jsx("div",{ref:A,className:"relative bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 "+(k?"bg-blue-50 dark:bg-blue-900/20":""),style:{transform:`translateX(${C}px)`,transition:D?"none":"transform 0.3s ease"},children:n.jsxs("div",{className:"flex items-center p-4 gap-3",children:[y&&n.jsx("input",{type:"checkbox",checked:k,onChange:()=>y(g.id),onClick:e=>e.stopPropagation(),className:"rounded","aria-label":`Select transaction ${g.description}`}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:g.description}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[n.jsx("span",{children:M}),n.jsx("span",{children:"\u2022"}),n.jsx("span",{children:g.category}),h&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"\u2022"}),n.jsx("span",{className:"truncate",children:h.name})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:`font-semibold ${G}`,children:m(g.amount)}),g.cleared&&n.jsx(i,{size:16,className:"text-green-600 dark:text-green-400 ml-auto mt-1"})]})]})}),n.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[n.jsx("button",{onClick:e=>{e.stopPropagation(),x(g)},className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded","aria-label":"Edit transaction",children:n.jsx(c,{size:16})}),n.jsx("button",{onClick:e=>{e.stopPropagation(),confirm("Delete this transaction?")&&b(g.id)},className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded","aria-label":"Delete transaction",children:n.jsx(l,{size:16})})]})]})})]})});export{g as S};
