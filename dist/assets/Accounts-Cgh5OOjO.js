function e({isOpen:e,onClose:t}){const{addAccount:a}=h(),{currency:r}=k(),[s,n]=l.useState(!1),[d,i]=l.useState(null),[c,x]=l.useState({name:"",type:"current",balance:"",currency:r,institution:""});l.useEffect(()=>{e&&(x({name:"",type:"current",balance:"",currency:r,institution:""}),i(null),n(!1))},[e,r]);const g=(e,t)=>{x(a=>({...a,[e]:t})),d&&i(null)},u=Q.find(e=>e.value===c.type),p=Z.find(e=>e.value===c.currency);return o.jsx(j,{isOpen:e,onClose:t,title:"Add New Account",size:"lg",children:o.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!s){n(!0),i(null);try{if(console.log("[AddAccountModal] Submitting account:",c),!c.name.trim())throw new Error("Account name is required");const e=parseFloat(c.balance);if(isNaN(e))throw new Error("Please enter a valid balance");const r=await a({name:c.name.trim(),type:"checking"===c.type?"current":c.type,balance:e,initialBalance:e,currency:c.currency,institution:c.institution.trim()||"",isActive:!0});console.log("[AddAccountModal] Account added successfully:",r),x({name:"",type:"current",balance:"",currency:c.currency,institution:""}),n(!1),setTimeout(()=>{t()},100)}catch(r){console.error("[AddAccountModal] Failed to add account:",r),i(r instanceof Error?r.message:"Failed to add account. Please try again."),n(!1)}}},children:[o.jsx(v,{children:o.jsxs("div",{className:"space-y-6",children:[d&&o.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx(m,{size:20,className:"text-red-600 dark:text-red-400 mt-0.5"}),o.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:d})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Account Name *"}),o.jsx("input",{type:"text",value:c.name,onChange:e=>g("name",e.target.value),className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-3 focus:ring-primary/20 focus:border-primary dark:text-white transition-all duration-200",placeholder:"e.g., Main Checking Account",required:!0,autoFocus:!0,disabled:s})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Account Type *"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Q.map(e=>{const t=e.icon,a=c.type===e.value;return o.jsx("button",{type:"button",onClick:()=>g("type",e.value),disabled:s,className:`p-3 rounded-xl border-2 transition-all duration-200 ${a?"border-primary bg-primary/10 dark:bg-primary/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"} ${s?"opacity-50 cursor-not-allowed":""}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(t,{size:20,className:a?"text-primary":"text-gray-500 dark:text-gray-400"}),o.jsxs("div",{className:"text-left flex-1",children:[o.jsx("div",{className:"text-sm font-medium "+(a?"text-primary":"text-gray-700 dark:text-gray-200"),children:e.label}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e.description})]})]})},e.value)})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Current Balance *"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 font-medium",children:p?.symbol}),o.jsx("input",{type:"number",step:"0.01",value:c.balance,onChange:e=>g("balance",e.target.value),className:"w-full pl-8 pr-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-3 focus:ring-primary/20 focus:border-primary dark:text-white transition-all duration-200",placeholder:"0.00",required:!0,disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Currency *"}),o.jsx("select",{value:c.currency,onChange:e=>g("currency",e.target.value),disabled:s,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-3 focus:ring-primary/20 focus:border-primary dark:text-white transition-all duration-200 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:Z.map(e=>o.jsxs("option",{value:e.value,children:[e.symbol," ",e.label]},e.value))})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:["Financial Institution",o.jsx("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(b,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",value:c.institution,onChange:e=>g("institution",e.target.value),className:"w-full pl-11 pr-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-3 focus:ring-primary/20 focus:border-primary dark:text-white transition-all duration-200",placeholder:"e.g., Barclays, HSBC, NatWest",disabled:s})]})]}),u&&o.jsx("div",{className:"p-4 bg-primary/5 dark:bg-primary/10 rounded-xl border border-primary/20",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx(u.icon,{size:20,className:"text-primary mt-0.5"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:u.label}),o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:u.description})]})]})})]})}),o.jsx(f,{children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:t,disabled:s,className:"flex-1 px-6 py-3 border-2 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl hover:shadow-lg hover:scale-[1.02] font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:s?"Adding...":"Add Account"})]})})]})})}function t({isOpen:e,onClose:t,accountId:a}){const{accounts:r,transactions:s,addTransaction:n,categories:d,getSubCategories:i,getDetailCategories:c}=h(),x=r.find(e=>e.id===a),[g,u]=l.useState((new Date).toISOString().split("T")[0]),[m,b]=l.useState(""),[p,y]=l.useState("cat-blank"),[k,j]=l.useState("sub-other-expense"),[v,f]=l.useState(""),[F,z]=l.useState(!1);if(!e||!x)return null;const I=(()=>{const e=new Date(g);e.setHours(23,59,59,999);let t=x.openingBalance||0;return s.filter(t=>t.accountId===a&&new Date(t.date)<=e).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).forEach(e=>{"income"===e.type||"transfer"===e.type&&e.amount>0?t+=Math.abs(e.amount):t-=Math.abs(e.amount)}),t})(),M=parseFloat(m)||0,O=M-I,T=O>0?"income":"expense",$=i(`type-${T}`);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg sm:rounded-lg shadow-xl w-full sm:max-w-lg max-h-[90vh] sm:max-h-[85vh] overflow-y-auto",children:[o.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 sm:px-6 py-3 sm:py-4",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:["Reconcile ",x.name]}),o.jsx("button",{onClick:t,className:"p-1 -m-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx(N,{size:24})})]})}),o.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),Math.abs(O)<.01)return void t();const r={date:new Date(g),description:"Balance Adjustment - Account Reconciliation",amount:Math.abs(O),type:O>0?"income":"expense",category:p,accountId:a,notes:v||`Reconciliation adjustment to match statement balance of ${S(M,x.currency)}`,cleared:!0,tags:["reconciliation","adjustment"]};n(r),t()},className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[o.jsx(w,{size:16}),"Statement Date"]}),o.jsx("input",{type:"date",value:g,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[o.jsx(C,{size:16}),"System Balance (as of ",new Date(g).toLocaleDateString(),")"]}),o.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:o.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:S(I,x.currency)})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[o.jsx(B,{size:16}),"Statement Balance (",A(x.currency),")"]}),o.jsx("input",{type:"number",step:"0.01",value:m,onChange:e=>b(e.target.value),placeholder:"Enter balance from your bank statement",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",required:!0})]}),m&&o.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Difference"}),o.jsx("p",{className:"text-xl font-bold "+(Math.abs(O)<.01?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"),children:S(O,x.currency)}),Math.abs(O)>=.01&&o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["A ",O>0?"positive":"negative"," adjustment of ",S(Math.abs(O),x.currency)," will be added to reconcile."]})]}),Math.abs(O)>=.01&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category for Adjustment"}),o.jsx("button",{type:"button",onClick:()=>z(!0),className:"text-sm text-primary hover:text-secondary",children:"Create new"})]}),o.jsxs("select",{value:k,onChange:e=>{j(e.target.value),y("")},className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Select category (optional)"}),$.map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))]})]}),k&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-category"}),o.jsxs("select",{value:p,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"cat-blank",children:"Blank (No category)"}),c(k).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional)"}),o.jsx("textarea",{value:v,onChange:e=>f(e.target.value),rows:3,placeholder:"Add any notes about this reconciliation...",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white"})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-sm sm:text-base bg-primary text-white rounded-lg hover:bg-secondary",children:Math.abs(O)<.01?"Close":"Reconcile & Adjust"})]})]}),o.jsx(D,{isOpen:F,onClose:()=>z(!1),initialType:T,onCategoryCreated:e=>{const t=d.find(t=>t.id===e);t&&("detail"===t.level?(j(t.parentId||""),y(e)):(j(e),y(""))),z(!1)}})]})})}function a({isOpen:e,onClose:t,accountId:a,currentBalance:r,newBalance:s}){const{accounts:n,addTransaction:d,categories:i,getSubCategories:c,getDetailCategories:x}=h(),g=n.find(e=>e.id===a),[u,m]=l.useState((new Date).toISOString().split("T")[0]),[b,p]=l.useState("cat-blank"),[y,k]=l.useState("sub-other-expense"),[j,v]=l.useState("Balance Adjustment"),[f,C]=l.useState(""),[A,B]=l.useState(!1);if(!e||!g)return null;const z=parseFloat(s)||0,I=z-r,M=I>0,O=M?"income":"expense",T=c(`type-${O}`);return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-2xl shadow-xl w-full sm:max-w-lg max-h-[90vh] sm:max-h-[85vh] overflow-y-auto",children:[o.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 sm:px-6 py-3 sm:py-4",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Balance Adjustment Required"}),o.jsx("button",{onClick:t,className:"p-1 -m-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:o.jsx(N,{size:24})})]})}),o.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),Math.abs(I)<.01)return void t();const s={date:new Date(u),description:j,amount:Math.abs(I),type:M?"income":"expense",category:b,accountId:a,notes:f||`Manual balance adjustment from ${S(r,g.currency)} to ${S(z,g.currency)}`,cleared:!0,tags:["balance-adjustment"]};d(s),t()},className:"p-4 sm:p-6",children:[o.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:o.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Changing the balance requires creating a transaction to maintain accurate records. This adjustment will be recorded in your transaction history."})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Current Balance"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S(r,g.currency)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"New Balance"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S(z,g.currency)})]})]}),o.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Adjustment Amount"}),o.jsxs("p",{className:"text-lg font-bold "+(M?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[M?"+":"-",S(Math.abs(I),g.currency)]})]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"adjustment-date",className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[o.jsx(w,{size:16}),"Date"]}),o.jsx("input",{id:"adjustment-date",type:"date",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"adjustment-description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),o.jsx("input",{id:"adjustment-description",type:"text",value:j,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",required:!0})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("label",{htmlFor:"adjustment-category",className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[o.jsx(F,{size:16}),"Category"]}),o.jsx("button",{type:"button",onClick:()=>B(!0),className:"text-sm text-primary hover:text-secondary",children:"Create new"})]}),o.jsxs("select",{id:"adjustment-category",value:y,onChange:e=>{k(e.target.value),p("")},className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"",children:"Select category"}),T.map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))]})]}),y&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"adjustment-subcategory",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-category"}),o.jsxs("select",{id:"adjustment-subcategory",value:b,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",children:[o.jsx("option",{value:"cat-blank",children:"Blank (No category)"}),x(y).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"adjustment-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional)"}),o.jsx("textarea",{id:"adjustment-notes",value:f,onChange:e=>C(e.target.value),rows:3,placeholder:"Add any notes about this adjustment...",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white"})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-sm sm:text-base bg-primary text-white rounded-lg hover:bg-secondary",children:"Create Adjustment"})]})]}),o.jsx(D,{isOpen:A,onClose:()=>B(!1),initialType:O,onCategoryCreated:e=>{const t=i.find(t=>t.id===e);t&&("detail"===t.level?(k(t.parentId||""),p(e)):(k(e),p(""))),B(!1)}})]})})}function r({isOpen:e,onClose:t,account:a,onSave:r}){const{formData:s,updateField:n,handleSubmit:d,setFormData:i}=z({type:"current",openingBalance:"",openingBalanceDate:"",sortCode:"",accountNumber:"",institution:"",notes:""},{onSubmit:e=>{if(!a)return;const t={type:e.type,institution:e.institution||void 0,notes:e.notes||void 0,sortCode:e.sortCode||void 0,accountNumber:e.accountNumber||void 0};e.openingBalance&&(t.openingBalance=parseFloat(e.openingBalance),t.openingBalanceDate=new Date(e.openingBalanceDate)),r(a.id,t)},onClose:t});return l.useEffect(()=>{a&&i({type:a.type||"current",openingBalance:a.openingBalance?.toString()||"",openingBalanceDate:a.openingBalanceDate?new Date(a.openingBalanceDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],sortCode:a.sortCode||"",accountNumber:a.accountNumber||"",institution:a.institution||"",notes:a.notes||""})},[a,i]),a?o.jsx(j,{isOpen:e,onClose:t,title:"Account Settings",size:"md",children:o.jsxs("form",{onSubmit:d,children:[o.jsxs(v,{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 -mt-2 mb-4",children:a.name}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Type"}),o.jsx("select",{value:s.type,onChange:e=>n("type",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:_.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))}),o.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Changing the type will relocate this account to the appropriate section"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"opening-balance",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Opening Balance"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{id:"opening-balance",type:"number",step:"0.01",value:s.openingBalance,onChange:e=>n("openingBalance",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white","aria-label":"Opening balance amount"}),o.jsx("input",{id:"opening-balance-date",type:"date",value:s.openingBalanceDate,onChange:e=>n("openingBalanceDate",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white","aria-label":"Opening balance date"})]})]}),("current"===s.type||"savings"===s.type)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"sort-code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sort Code"}),o.jsx("input",{id:"sort-code",type:"text",value:s.sortCode,onChange:e=>{const t=(e=>{const t=e.replace(/\D/g,"");return t.length<=2?t:t.length<=4?`${t.slice(0,2)}-${t.slice(2)}`:`${t.slice(0,2)}-${t.slice(2,4)}-${t.slice(4,6)}`})(e.target.value);n("sortCode",t)},placeholder:"XX-XX-XX",maxLength:8,className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white","aria-label":"Bank sort code"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"account-number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Number"}),o.jsx("input",{id:"account-number",type:"text",value:s.accountNumber,onChange:e=>n("accountNumber",e.target.value.replace(/\D/g,"")),placeholder:"12345678","aria-label":"Bank account number",maxLength:8,className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Institution"}),o.jsx("input",{type:"text",value:s.institution,onChange:e=>n("institution",e.target.value),placeholder:"Bank or financial institution name",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),o.jsx("textarea",{value:s.notes,onChange:e=>n("notes",e.target.value),rows:3,placeholder:"Additional information about this account",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white resize-none"})]})]}),o.jsx(f,{children:o.jsxs("div",{className:"flex gap-3 w-full",children:[o.jsx("button",{type:"submit",className:"flex-1 bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition-colors",children:"Save Changes"}),o.jsx("button",{type:"button",onClick:t,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})})]})}):null}function s({accountId:e,accountName:t,holdings:a,currency:r,onClose:s}){const n=p(),[d,i]=l.useState("value"),c=a.reduce((e,t)=>e+t.value,0),x=[...a].sort((e,t)=>{switch(d){case"value":return t.value-e.value;case"shares":return t.shares-e.shares;case"name":return e.name.localeCompare(t.name);default:return 0}}),g=e=>(e/c*100).toFixed(1),u=e=>e.shares>0?e.value/e.shares:0;return o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("button",{onClick:s,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:o.jsx(I,{size:24})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:[t," Portfolio"]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Total Portfolio Value: ",S(c,r)]})]})]}),o.jsx("div",{className:"flex gap-4 mb-4",children:o.jsx("button",{onClick:()=>n(`/transactions?account=${e}`),className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"View Transactions"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Holdings"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.length})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Portfolio Value"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:S(c,r)})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Largest Position"}),o.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:x[0]?.name||"N/A"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:x[0]?`${g(x[0].value)}%`:""})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Holdings"})}),0===a.length?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No holdings in this portfolio yet."}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300 mt-2",children:"Add holdings to track your investments."})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),o.jsx("button",{onClick:()=>i("value"),className:"text-sm px-3 py-1 rounded "+("value"===d?"bg-primary text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Value"}),o.jsx("button",{onClick:()=>i("shares"),className:"text-sm px-3 py-1 rounded "+("shares"===d?"bg-primary text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Shares"}),o.jsx("button",{onClick:()=>i("name"),className:"text-sm px-3 py-1 rounded "+("name"===d?"bg-primary text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Name"})]})}),o.jsx("div",{className:"hidden md:block overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[o.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ticker"}),o.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Shares/Units"}),o.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Price per Share"}),o.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Value"}),o.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"% of Portfolio"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:x.map((e,t)=>o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.ticker}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 dark:text-gray-100",children:e.shares.toLocaleString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 dark:text-gray-100",children:S(u(e),r)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900 dark:text-white",children:S(e.value,r)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:o.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${g(e.value)}%`}})}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400 w-12 text-right",children:[g(e.value),"%"]})]})})]},`${e.ticker}-${t}`))})]})}),o.jsx("div",{className:"md:hidden",children:x.map((e,t)=>o.jsxs("div",{className:"px-4 py-4 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.ticker}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.name})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S(e.value,r)}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[g(e.value),"%"]})]})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.shares.toLocaleString()," shares"]}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["@ ",S(u(e),r)]})]})]},`${e.ticker}-${t}`))})]})]})]})}function n({onAccountClick:n}){const{accounts:d,updateAccount:i,deleteAccount:c}=h(),{formatCurrency:x}=Y(),g=p(),u=y(),[m,b]=l.useState(!1),[k,j]=l.useState(null),[v,f]=l.useState(""),[N,w]=l.useState(null),[C,S]=l.useState(null),[A,B]=l.useState(null),[D,F]=l.useState(null),[z,I]=l.useState(!0),Q=l.useMemo(()=>d.map(e=>({...e,balance:M(e.balance),initialBalance:e.openingBalance?M(e.openingBalance):void 0})),[d]),Z=l.useMemo(()=>d.reduce((e,t)=>{const a=t.type;return e[a]||(e[a]=[]),e[a].push(t),e},{}),[d]);l.useEffect(()=>{void 0!==d&&I(!1)},[d]);const _=l.useMemo(()=>Q.reduce((e,t)=>{const a=t.type;return e[a]||(e[a]=[]),e[a].push(t),e},{}),[Q]),ee=[{type:"current",title:"Current Accounts",icon:O,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-200 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800"},{type:"savings",title:"Savings Accounts",icon:T,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-200 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800"},{type:"credit",title:"Credit Cards",icon:$,color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-200 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800"},{type:"loan",title:"Loans",icon:L,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-200 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800"},{type:"investment",title:"Investments",icon:E,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-200 dark:bg-purple-900/20",borderColor:"border-purple-200 dark:border-purple-800"},{type:"asset",title:"Assets",icon:P,color:"text-indigo-600 dark:text-indigo-400",bgColor:"bg-indigo-200 dark:bg-indigo-900/20",borderColor:"border-indigo-200 dark:border-indigo-800"},{type:"liability",title:"Liabilities",icon:L,color:"text-gray-600 dark:text-gray-400",bgColor:"bg-gray-200 dark:bg-gray-900/20",borderColor:"border-gray-200 dark:border-gray-800"}];return o.jsxs(J,{title:"Accounts",rightContent:o.jsx("div",{onClick:()=>b(!0),className:"cursor-pointer",title:"Add Account",children:o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"transition-all duration-200 hover:scale-110 drop-shadow-lg hover:drop-shadow-xl",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"},children:[o.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"#D9E1F2",className:"transition-all duration-200",onMouseEnter:e=>e.currentTarget.setAttribute("fill","#C5D3E8"),onMouseLeave:e=>e.currentTarget.setAttribute("fill","#D9E1F2")}),o.jsx("g",{transform:"translate(12, 12)",children:o.jsx("path",{d:"M12 5v14M5 12h14",stroke:"#1F2937",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),children:[o.jsx("div",{className:"grid gap-6",children:z?o.jsxs(o.Fragment,{children:[o.jsx(V,{className:"h-48"}),o.jsx(V,{className:"h-48"}),o.jsx(V,{className:"h-48"})]}):ee.map(({type:e,title:t,icon:a,color:r})=>{const s=Z[e]||[];if(0===s.length)return null;const l=_[e]||[],i=K(l);return o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-gray-800/50 dark:to-gray-700/50 backdrop-blur-sm border-b border-blue-200/50 dark:border-gray-600/50 px-4 sm:px-6 py-3 sm:py-4",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[o.jsx(a,{className:r,size:20}),o.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900 dark:text-white",children:t}),o.jsxs("span",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:["(",s.length," ",1===s.length?"account":"accounts",")"]})]}),o.jsx("p",{className:"text-base md:text-lg font-semibold "+(i.greaterThanOrEqualTo(0),"text-gray-900 dark:text-white"),children:x(i)})]})}),o.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:s.map(e=>o.jsx("div",{className:"p-3 sm:p-4 bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 hover:shadow-xl hover:border-blue-200/50 transition-all duration-300 cursor-pointer",onClick:t=>{t.target.closest("button, input")||(n?n(e.id):g(W(`/accounts/${e.id}`,u.search)))},children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-base md:text-lg font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:e.name}),o.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:e.institution||"Unknown Institution"}),o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:["Last updated: ",new Date(e.lastUpdated).toLocaleDateString()]}),void 0!==e.openingBalance&&o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-300 mt-1",children:["Opening balance: ",x(e.openingBalance,e.currency),e.openingBalanceDate&&` on ${new Date(e.openingBalanceDate).toLocaleDateString()}`]}),"investment"===e.type&&e.holdings&&e.holdings.length>0&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-300 mt-1 space-y-1",children:[o.jsxs("p",{children:["Cash Balance: ",x(e.balance-e.holdings.reduce((e,t)=>e+(t.marketValue||t.value||0),0),e.currency)]}),o.jsxs("p",{children:["Holdings Value: ",x(e.holdings.reduce((e,t)=>e+(t.marketValue||t.value||0),0),e.currency)," (",e.holdings.length," positions)"]}),o.jsxs("p",{className:"font-medium",children:["Total Value: ",x(e.balance,e.currency)]})]})]}),o.jsx("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-2 sm:gap-3",children:k===e.id?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",step:"0.01",value:v,onChange:e=>f(e.target.value),className:"w-24 sm:w-32 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded",autoFocus:!0}),o.jsx("button",{onClick:()=>(e=>{const t=d.find(t=>t.id===e);t&&S({accountId:e,currentBalance:t.balance,newBalance:v}),j(null),f("")})(e.id),className:"text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300",children:"Save"}),o.jsx("button",{onClick:()=>j(null),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Cancel"})]}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("p",{className:"text-lg md:text-xl font-semibold tabular-nums whitespace-nowrap "+(e.balance,"text-gray-900 dark:text-white"),children:x(e.balance,e.currency)}),o.jsx("div",{className:"flex items-center gap-1",children:"investment"===e.type&&e.holdings&&e.holdings.length>0&&o.jsxs("button",{onClick:()=>B(e.id),className:"p-3 min-w-[44px] min-h-[44px] flex items-center justify-center text-purple-500 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-200 hover:bg-purple-100/50 dark:hover:bg-purple-900/30 rounded-lg transition-all duration-200 relative group backdrop-blur-sm",title:"View Portfolio",children:[o.jsx(q,{size:16}),o.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"View Portfolio"})]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative group",children:[o.jsx(G,{onClick:()=>F(e.id),icon:o.jsx(R,{size:20}),variant:"ghost",size:"md",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 min-w-[48px] min-h-[48px]",title:"Account Settings"}),o.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"Settings"})]}),o.jsxs("button",{onClick:()=>w(e.id),className:"p-3 min-w-[48px] min-h-[48px] flex items-center justify-center text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200 hover:bg-blue-100/50 dark:hover:bg-blue-900/30 rounded-lg transition-all duration-200 relative group backdrop-blur-sm",title:"Reconcile transactions",children:[o.jsx(U,{size:20}),o.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"Reconcile"})]}),o.jsxs("div",{className:"relative group",children:[o.jsx(G,{onClick:()=>{return t=e.id,a=e.balance,j(t),void f(a.toString());var t,a},icon:o.jsx(X,{size:20}),variant:"ghost",size:"md",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 min-w-[48px] min-h-[48px]",title:"Adjust balance"}),o.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"Adjust"})]}),o.jsxs("div",{className:"relative group",children:[o.jsx(G,{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this account? All related transactions will also be deleted.")&&c(t));var t},icon:o.jsx(H,{size:20}),variant:"ghost",size:"md",className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100/50 dark:hover:bg-red-900/30 min-w-[48px] min-h-[48px]",title:"Delete account"}),o.jsx("span",{className:"absolute bottom-full right-0 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"Delete"})]})]})]})})})]})},e.id))})]},e)})}),0===d.length&&o.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-8 text-center",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:'No accounts yet. Click "Add Account" to get started!'})}),o.jsx(e,{isOpen:m,onClose:()=>b(!1)}),N&&o.jsx(t,{isOpen:!0,onClose:()=>w(null),accountId:N}),C&&o.jsx(a,{isOpen:!0,onClose:()=>{if(S(null),C.accountId){const e=parseFloat(C.newBalance)||0;i(C.accountId,{balance:e,lastUpdated:new Date})}},accountId:C.accountId,currentBalance:C.currentBalance,newBalance:C.newBalance}),A&&(()=>{const e=d.find(e=>e.id===A);return e&&e.holdings?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:o.jsx("div",{className:"p-6",children:o.jsx(s,{accountId:A,accountName:e.name,holdings:e.holdings,currency:e.currency,onClose:()=>B(null)})})})}):null})(),o.jsx(r,{isOpen:!!D,onClose:()=>F(null),account:d.find(e=>e.id===D)||null,onSave:(e,t)=>{i(e,t),F(null)}})]})}import{r as l,L as o,cv as d,c5 as i,c6 as c,cw as x,c3 as g,cx as u,bN as m,cy as b,bY as p,bV as y}from"./chunk-Bcp2Zi4E.js";import{a as h,u as k,M as j,d as v,e as f,X as N,C as w,f as C,g as S,h as A,i as B,j as D,k as F,l as z,A as I,t as M,m as O,n as T,o as $,p as L,T as E,H as P,c as V,q,r as R,v as U,E as X,D as H,w as W}from"./index-LbveD3Go.js";import{I as G}from"./chunk-C0I5QuPi.js";import{u as Y}from"./chunk-BlSolNAr.js";import{P as J}from"./chunk-zHRn0GaW.js";import{c as K}from"./chunk-Du1znq9k.js";import"./chunk-oUGr0aFc.js";import"./chunk-a7oqB5tI.js";import"./chunk-B5pcS96K.js";const Q=[{value:"current",label:"Current Account",icon:d,description:"Everyday spending account"},{value:"savings",label:"Savings Account",icon:i,description:"Long-term savings"},{value:"credit",label:"Credit Card",icon:c,description:"Credit line account"},{value:"loan",label:"Loan",icon:x,description:"Mortgages, personal loans"},{value:"investment",label:"Investment",icon:g,description:"Stocks, bonds, funds"},{value:"assets",label:"Other Assets",icon:u,description:"Property, valuables"}],Z=[{value:"GBP",label:"British Pound",symbol:"\xa3"},{value:"USD",label:"US Dollar",symbol:"$"},{value:"EUR",label:"Euro",symbol:"\u20ac"}],_=[{value:"current",label:"Current Account"},{value:"savings",label:"Savings Account"},{value:"loan",label:"Loan Account"},{value:"credit",label:"Credit Card"},{value:"investment",label:"Investments"},{value:"assets",label:"Other Asset"},{value:"other",label:"Other Liability"}];export{n as default};
