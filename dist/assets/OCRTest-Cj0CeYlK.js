function e(){const[e,r]=s.useState(null),[i,c]=s.useState(null),[d,l]=s.useState(!1),[m,o]=s.useState("");return a.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"OCR Test - Receipt Scanner"}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upload Receipt Image"}),a.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const s=e.target.files?.[0];if(s&&s.type.startsWith("image/")){r(s);const e=new FileReader;e.onloadend=()=>{o(e.result)},e.readAsDataURL(s)}},className:"mb-4"}),m&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Preview:"}),a.jsx("img",{src:m,alt:"Receipt preview",className:"max-w-md max-h-96 border rounded"})]}),a.jsxs("button",{onClick:async()=>{if(e){l(!0);try{const s=await t.uploadDocument(e,{type:"receipt",extractData:!0});c(s.extractedData||null)}catch(s){console.error("OCR processing failed:",s),alert("Failed to process image: "+s.message)}finally{l(!1)}}},disabled:!e||d,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(n,{size:20}),d?"Processing...":"Process Receipt"]})]}),i&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Extracted Data"}),a.jsxs("div",{className:"space-y-2",children:[i.merchant&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Merchant:"})," ",i.merchant]}),i.date&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(i.date).toLocaleDateString()]}),i.totalAmount&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Total Amount:"})," ",i.currency||"$",i.totalAmount]}),i.taxAmount&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Tax:"})," ",i.currency||"$",i.taxAmount]}),i.paymentMethod&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",i.paymentMethod]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Confidence:"})," ",Math.round(100*i.confidence),"%"]}),i.error&&a.jsxs("div",{className:"text-red-600",children:[a.jsx("span",{className:"font-medium",children:"Error:"})," ",i.error]})]}),i.items&&i.items.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Line Items:"}),a.jsx("ul",{className:"space-y-1",children:i.items.map((e,s)=>a.jsxs("li",{className:"text-sm",children:[e.description," - ",i.currency||"$",e.totalPrice||e.unitPrice,e.quantity&&` (${e.quantity} @ ${i.currency||"$"}${e.unitPrice})`]},s))})]}),i.rawText&&a.jsxs("details",{className:"mt-4",children:[a.jsx("summary",{className:"cursor-pointer font-medium",children:"Raw OCR Text"}),a.jsx("pre",{className:"mt-2 text-xs bg-gray-100 dark:bg-gray-900 p-2 rounded overflow-auto",children:i.rawText})]})]})]})}import{r as s,L as a}from"./chunk-Bcp2Zi4E.js";import{d as t}from"./chunk-DCDlgwkd.js";import{aY as n}from"./index-LbveD3Go.js";import"./chunk-oUGr0aFc.js";import"./chunk-a7oqB5tI.js";import"./chunk-B5pcS96K.js";export{e as default};
