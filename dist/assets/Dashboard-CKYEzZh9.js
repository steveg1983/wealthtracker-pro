const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TestDataWarningModal-BliUoRzm.js","assets/chunk-DowOIOga.js","assets/chunk-ddLY9KjI.js","assets/vendor-B-C1h4S3.css","assets/chunk-BC9R0o2T.js","assets/index-qHm2isZb.js","assets/chunk-B5pcS96K.js","assets/index-Bkln43Xj.css","assets/chunk-DBtIkPjn.js","assets/OnboardingModal-DgW9Qe2u.js","assets/ImprovedDashboard-B1SDti3E.js","assets/chunk-ByFoKVyi.js","assets/chunk-DoYVaa8Y.js"])))=>i.map(i=>d[i]);
function e(){const{accounts:e,hasTestData:t,clearAllData:r}=n(),{firstName:o,setFirstName:f,setCurrency:x}=i(),{user:b}=l(),[j,y]=s.useState(!1),[N,S]=s.useState(!1),[_,D]=s.useState(!1);s.useEffect(()=>{(async()=>{if(d&&b)try{const{error:e}=await d.from("user_profiles").select("id").limit(1);y(!e)}catch(e){y(!1)}else y(!1)})()},[b,e.length,N,_]),s.useEffect(()=>{t&&"true"!==localStorage.getItem("testDataWarningDismissed")&&S(!0)},[t,e.length]),s.useEffect(()=>{localStorage.getItem("onboardingCompleted")||o||N||D(!0)},[o,N]);const k=()=>{S(!1),localStorage.getItem("onboardingCompleted")||o||D(!0)};return a.jsxs(m,{title:"Dashboard",children:[a.jsx(h,{componentName:"Dashboard",children:a.jsx(s.Suspense,{fallback:a.jsx(c,{className:"h-96"}),children:a.jsx(g,{})})}),a.jsx(h,{componentName:"Test Data Warning",children:a.jsx(s.Suspense,{fallback:null,children:a.jsx(p,{isOpen:N,onClose:k,onClearData:()=>{r(),k()}})})}),a.jsx(h,{componentName:"Onboarding",children:a.jsx(s.Suspense,{fallback:null,children:a.jsx(u,{isOpen:_,onComplete:(e,t)=>{f(e),x(t),localStorage.setItem("onboardingCompleted","true"),D(!1)}})})})]})}import{_ as t}from"./chunk-ddLY9KjI.js";import{r as s,H as a,bN as r,N as o}from"./chunk-DowOIOga.js";import{a as n,u as i,b as l,c,s as d}from"./index-qHm2isZb.js";import{P as m}from"./chunk-r7IQz9KP.js";import"./chunk-B5pcS96K.js";class h extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){"undefined"!=typeof window&&"Sentry"in window&&window.Sentry?.captureException(e,{contexts:{react:{componentStack:t.componentStack,componentName:this.props.componentName}}})}handleRetry=()=>{this.setState({hasError:!1,error:void 0})};render(){return this.state.hasError?this.props.fallback?a.jsx(a.Fragment,{children:this.props.fallback}):a.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[a.jsx(r,{className:"w-12 h-12 text-red-500 mb-4","aria-hidden":"true"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:this.props.componentName?`Failed to load ${this.props.componentName}`:"Failed to load this component"}),a.jsxs("button",{onClick:this.handleRetry,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Retry loading component",children:[a.jsx(o,{className:"w-4 h-4","aria-hidden":"true"}),"Try Again"]}),!1]}):this.props.children}}const p=s.lazy(()=>t(()=>import("./TestDataWarningModal-BliUoRzm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),u=s.lazy(()=>t(()=>import("./OnboardingModal-DgW9Qe2u.js"),__vite__mapDeps([9,1,2,3,5,6,7]))),g=s.lazy(()=>t(()=>import("./ImprovedDashboard-B1SDti3E.js"),__vite__mapDeps([10,1,2,3,5,6,7,11,12])).then(e=>({default:e.ImprovedDashboard})));export{e as default};
