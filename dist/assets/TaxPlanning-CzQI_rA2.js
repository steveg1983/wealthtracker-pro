function e(){const{transactions:e,accounts:t,investments:a}=r(),{formatCurrency:h}=j(),[y,b]=p.useState("overview"),[f,v]=p.useState((new Date).getFullYear()),[k,w]=p.useState(null),[T,D]=p.useState([]),[C,R]=p.useState([]),[S,z]=p.useState([]),[E,I]=p.useState(!1);p.useEffect(()=>{F()},[e,t,a,f]);const F=async()=>{I(!0);try{const s=N.estimateTaxes(e,t,f),r=N.trackDeductibleExpenses(e,f),i=N.suggestOptimizations(e,t,a||[]),n=N.calculateCapitalGains(a||[]);w(s),D(r),R(i),z(n)}finally{I(!1)}},M=[{id:"overview",label:"Overview",icon:c},{id:"deductions",label:"Deductions",icon:l},{id:"capital-gains",label:"Capital Gains",icon:x},{id:"optimizations",label:"Tax Strategies",icon:o}],B=Array.from({length:5},(e,t)=>(new Date).getFullYear()-t);return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Tax Planning Center"}),i.jsx("p",{className:"text-green-100",children:"Track deductions, estimate taxes, and optimize your tax strategy"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("select",{value:f,onChange:e=>v(Number(e.target.value)),className:"px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white focus:bg-white/30 focus:outline-none",children:B.map(e=>i.jsxs("option",{value:e,className:"text-gray-900",children:[e," Tax Year"]},e))}),i.jsxs("button",{onClick:()=>{const s=N.generateTaxReport(e,t,a||[],f),r=`Tax Report ${f}\n\nIncome: ${h(s.summary.income)}\nDeductions: ${h(s.summary.deductions)}\nTaxable Income: ${h(s.summary.taxableIncome)}\nEstimated Tax: ${h(s.summary.estimatedTax)}\n`,i=new Blob([r],{type:"text/csv"}),n=URL.createObjectURL(i),d=document.createElement("a");d.href=n,d.download=`tax-report-${f}.csv`,d.click()},className:"flex items-center gap-2 px-4 py-2 bg-white text-green-600 rounded-lg hover:bg-green-50 transition-colors",children:[i.jsx(n,{size:16}),"Export Report"]})]})]})}),k&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Income"}),i.jsx(d,{size:20,className:"text-green-600 dark:text-green-400"})]}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h(k.income)})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Deductions"}),i.jsx(l,{size:20,className:"text-blue-600 dark:text-blue-400"})]}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h(k.deductions)})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Estimated Tax"}),i.jsx(c,{size:20,className:"text-red-600 dark:text-red-400"})]}),i.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:h(k.estimatedTax)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Effective rate: ",k.effectiveRate.toFixed(1),"%"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tax Savings"}),i.jsx(o,{size:20,className:"text-purple-600 dark:text-purple-400"})]}),i.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:h(C.reduce((e,t)=>e.plus(t.potentialSavings),s(0)))}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Potential savings"})]})]}),i.jsx("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:M.map(e=>{const t=e.icon;return i.jsxs("button",{onClick:()=>b(e.id),className:"flex-1 px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 "+(y===e.id?"bg-white dark:bg-gray-700 text-primary shadow":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[i.jsx(t,{size:16}),i.jsx("span",{children:e.label})]},e.id)})}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6",children:E?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Calculating taxes..."})]})}):i.jsxs(i.Fragment,{children:["overview"===y&&k&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Tax Calculation Summary"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Gross Income"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h(k.income)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Deductions"}),i.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["-",h(k.deductions)]})]}),i.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Taxable Income"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h(k.taxableIncome)})]})}),i.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Estimated Federal Tax"}),i.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:h(k.estimatedTax)})]})})]})]}),i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Tax Rates"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Effective Tax Rate"}),i.jsxs("span",{className:"font-bold text-2xl text-gray-900 dark:text-white",children:[k.effectiveRate.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:i.jsx("div",{className:"bg-green-600 h-3 rounded-full",style:{width:`${Math.min(k.effectiveRate,100)}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Marginal Tax Rate"}),i.jsxs("span",{className:"font-bold text-2xl text-gray-900 dark:text-white",children:[k.marginalRate,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:i.jsx("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:k.marginalRate/37*100+"%"}})})]})]})]})]}),k.quarterlyPayments&&i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Estimated Quarterly Payments"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:k.quarterlyPayments.map((e,t)=>i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["Q",t+1," ",f]}),i.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:h(e)})]},t))})]})]}),"deductions"===y&&i.jsx("div",{className:"space-y-4",children:T.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-4",children:i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[i.jsx("strong",{children:"Tip:"})," Keep receipts and documentation for all deductible expenses. The IRS may request proof during an audit."]})}),T.map(e=>i.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:e.description}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.transactionIds.length," transactions"]}),e.documentation&&i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.documentation})]}),i.jsx("div",{className:"text-right",children:i.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:h(e.amount)})})]})},e.id))]}):i.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[i.jsx(l,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsxs("p",{children:["No deductible expenses found for ",f,"."]}),i.jsx("p",{className:"text-sm mt-2",children:"Start categorizing your expenses to track deductions."})]})}),"capital-gains"===y&&i.jsx("div",{className:"space-y-4",children:S.length>0?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Gains"}),i.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:h(S.filter(e=>e.gain.greaterThan(0)).reduce((e,t)=>e.plus(t.gain),s(0)))})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Losses"}),i.jsx("p",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:h(S.filter(e=>e.gain.lessThan(0)).reduce((e,t)=>e.plus(t.gain.abs()),s(0)))})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Est. Tax Impact"}),i.jsx("p",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:h(S.reduce((e,t)=>e.plus(t.estimatedTax),s(0)))})]})]}),S.map(e=>i.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-1",children:e.investmentName}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Cost Basis: "}),i.jsx("span",{className:"font-medium",children:h(e.costBasis)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Current Value: "}),i.jsx("span",{className:"font-medium",children:h(e.currentValue)})]})]}),i.jsx("div",{className:"mt-2",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs "+("long-term"===e.type?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200"),children:[e.type," \u2022 ",e.taxRate,"% rate"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-lg font-bold "+(e.gain.greaterThan(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e.gain.greaterThan(0)?"+":"",h(e.gain)]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Tax: ",h(e.estimatedTax)]})]})]})},e.investmentId))]}):i.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[i.jsx(x,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No investments found to calculate capital gains."})]})}),"optimizations"===y&&i.jsx("div",{className:"space-y-4",children:C.length>0?C.map(e=>i.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"p-3 rounded-lg "+("retirement"===e.category?"bg-purple-100 dark:bg-purple-900/30":"investment"===e.category?"bg-blue-100 dark:bg-blue-900/30":"charitable"===e.category?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-700"),children:i.jsx(o,{size:24,className:"retirement"===e.category?"text-purple-600 dark:text-purple-400":"investment"===e.category?"text-blue-600 dark:text-blue-400":"charitable"===e.category?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:e.title}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:e.description}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:["Save ",h(e.potentialSavings)]}),e.deadline&&i.jsxs("span",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[i.jsx(u,{size:14}),"By ",m(e.deadline,"MMM d, yyyy")]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:e.actionRequired})})]})]})},e.id)):i.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[i.jsx(g,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Your tax strategy is well optimized!"}),i.jsx("p",{className:"text-sm mt-2",children:"We'll notify you when new optimization opportunities arise."})]})})]})})]})}function t(){return i.jsx(h,{title:"Tax Planning",rightContent:i.jsx("div",{className:"cursor-pointer",title:"Tax Planning & Optimization",children:i.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"transition-all duration-200 hover:scale-110 drop-shadow-lg hover:drop-shadow-xl",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"},children:[i.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"#D4F4DD",className:"transition-all duration-200",onMouseEnter:e=>e.currentTarget.setAttribute("fill","#C3E9D0"),onMouseLeave:e=>e.currentTarget.setAttribute("fill","#D4F4DD")}),i.jsx("g",{transform:"translate(12, 12)",children:i.jsx(c,{size:24,className:"text-green-600"})})]})}),children:i.jsx(e,{})})}import{b0 as a,F as s,g as r,j as i,aS as n,aB as d,b2 as l,t as c,H as o,T as x,ab as m,r as u,O as g}from"./index-Pkjq0qn3.js";import{P as h}from"./chunk-BnYLBI7x.js";import{a as p}from"./chunk-BWx9oMeS.js";import{e as y}from"./chunk-Crl7AYUu.js";import{i as b}from"./chunk-DLIzqRsk.js";import{u as j}from"./chunk-BYFRQ0Wn.js";import"./chunk-BN8kgYrt.js";import"./chunk-Drd-K-oK.js";const f=[{id:"mortgage-interest",name:"Mortgage Interest",description:"Interest paid on mortgage loans",deductible:!0,form:"1098"},{id:"property-tax",name:"Property Tax",description:"State and local property taxes",deductible:!0,maxDeduction:s(1e4)},{id:"charitable",name:"Charitable Donations",description:"Donations to qualified charitable organizations",deductible:!0},{id:"medical",name:"Medical Expenses",description:"Qualified medical and dental expenses",deductible:!0},{id:"business-expenses",name:"Business Expenses",description:"Expenses related to self-employment or business",deductible:!0,form:"Schedule C"},{id:"education",name:"Education Expenses",description:"Qualified education expenses and student loan interest",deductible:!0},{id:"retirement",name:"Retirement Contributions",description:"Contributions to traditional IRA, 401(k), etc.",deductible:!0},{id:"hsa",name:"HSA Contributions",description:"Health Savings Account contributions",deductible:!0,maxDeduction:s(3850)}],N=new class{estimateTaxes(e,t,r=(new Date).getFullYear()){const i=a(new Date(r,0,1)),n=y(new Date(r,11,31)),d=e.filter(e=>b(new Date(e.date),{start:i,end:n})),l=d.filter(e=>"income"===e.type).reduce((e,t)=>e.plus(s(t.amount)),s(0)),c=this.calculateDeductions(d),o=s(13850),x=c.greaterThan(o)?c:o,m=l.minus(x).greaterThan(0)?l.minus(x):s(0),u=this.calculateFederalTax(m),g=l.greaterThan(0)?u.dividedBy(l).times(100).toNumber():0;return{income:l,deductions:x,taxableIncome:m,estimatedTax:u,effectiveRate:g,marginalRate:this.getMarginalTaxRate(m),quarterlyPayments:this.calculateQuarterlyPayments(u)}}trackDeductibleExpenses(e,t=(new Date).getFullYear()){const r=[],i=a(new Date(t,0,1)),n=y(new Date(t,11,31)),d=e.filter(e=>"expense"===e.type&&b(new Date(e.date),{start:i,end:n})),l=new Map;return d.forEach(e=>{const t=this.identifyTaxCategory(e);t&&(l.has(t.id)||l.set(t.id,[]),l.get(t.id).push(e))}),l.forEach((e,a)=>{const i=f.find(e=>e.id===a);if(i){const n=e.reduce((e,t)=>e.plus(s(t.amount)),s(0));r.push({id:`deduction-${a}-${t}`,categoryId:a,description:i.name,amount:n,date:new Date,transactionIds:e.map(e=>e.id),documentation:`${e.length} transactions totaling ${n}`})}}),r}suggestOptimizations(e,t,a){const r=[],i=(new Date).getFullYear(),n=y(new Date(i,11,31)),d=this.calculateRetirementContributions(e,i),l=s(23e3);if(d.lessThan(l)){const e=l.minus(d);r.push({id:"opt-retirement",title:"Maximize Retirement Contributions",description:`You can contribute ${e} more to reduce taxable income`,potentialSavings:e.times(.24),deadline:n,actionRequired:"Increase 401(k) contribution percentage",category:"retirement"})}const c=this.calculateCapitalGains(a);if(c.filter(e=>"unrealized"!==e.type).reduce((e,t)=>e.plus(t.gain),s(0)).greaterThan(0)){const e=c.filter(e=>e.gain.lessThan(0)&&"unrealized"===e.type);if(e.length>0){const t=e.reduce((e,t)=>e.plus(t.gain.abs()),s(0));r.push({id:"opt-harvest",title:"Tax-Loss Harvesting Opportunity",description:"Sell losing investments to offset capital gains",potentialSavings:t.times(.15),deadline:n,actionRequired:"Review and sell underperforming investments",category:"investment"})}}const o=this.calculateCharitableDeductions(e,i);o.greaterThan(0)&&o.lessThan(1e4)&&r.push({id:"opt-charitable",title:"Bundle Charitable Donations",description:"Consider bunching 2 years of donations to exceed standard deduction",potentialSavings:o.times(.24),actionRequired:"Make next year's planned donations before year-end",category:"charitable"});const x=this.calculateHSAContributions(e,i),m=s(3850);if(x.lessThan(m)){const e=m.minus(x);r.push({id:"opt-hsa",title:"Max Out HSA Contributions",description:"Triple tax advantage: deductible, grows tax-free, tax-free withdrawals",potentialSavings:e.times(.24),deadline:new Date(i+1,3,15),actionRequired:"Increase HSA contributions",category:"other"})}return r}calculateCapitalGains(e){const t=[],a=new Date;return e.forEach(e=>{const r=s(e.costBasis||e.quantity*e.averageCost),i=s(e.currentValue),n=i.minus(r),d=new Date(e.purchaseDate||e.createdAt),l=(a.getTime()-d.getTime())/864e5>365?.15:.24,c=n.greaterThan(0)?n.times(l):s(0);t.push({investmentId:e.id,investmentName:e.name,purchaseDate:d,costBasis:r,currentValue:i,gain:n,type:"unrealized",taxRate:100*l,estimatedTax:c})}),t}generateTaxReport(e,t,a,s){return{year:s,summary:this.estimateTaxes(e,t,s),deductions:this.trackDeductibleExpenses(e,s),capitalGains:this.calculateCapitalGains(a),optimizations:this.suggestOptimizations(e,t,a),generatedDate:new Date}}calculateFederalTax(e){const t=[{min:0,max:11e3,rate:.1},{min:11e3,max:44725,rate:.12},{min:44725,max:95375,rate:.22},{min:95375,max:182050,rate:.24},{min:182050,max:231250,rate:.32},{min:231250,max:578125,rate:.35},{min:578125,max:1/0,rate:.37}];let a=s(0);const r=e.toNumber();for(const i of t)if(r>i.min){const e=Math.min(r-i.min,i.max-i.min);a=a.plus(s(e*i.rate))}return a}getMarginalTaxRate(e){const t=e.toNumber();return t<=11e3?10:t<=44725?12:t<=95375?22:t<=182050?24:t<=231250?32:t<=578125?35:37}calculateQuarterlyPayments(e){const t=e.dividedBy(4);return[t,t,t,t]}calculateDeductions(e){return e.filter(e=>null!==this.identifyTaxCategory(e)).reduce((e,t)=>e.plus(s(t.amount)),s(0))}identifyTaxCategory(e){const t=e.description.toLowerCase();return t.includes("mortgage")&&t.includes("interest")?f.find(e=>"mortgage-interest"===e.id)||null:t.includes("property tax")||t.includes("real estate tax")?f.find(e=>"property-tax"===e.id)||null:t.includes("charity")||t.includes("donation")?f.find(e=>"charitable"===e.id)||null:(t.includes("medical")||t.includes("doctor")||t.includes("hospital"))&&f.find(e=>"medical"===e.id)||null}calculateRetirementContributions(e,t){return e.filter(e=>"expense"===e.type&&new Date(e.date).getFullYear()===t&&(e.description.toLowerCase().includes("401k")||e.description.toLowerCase().includes("ira")||e.description.toLowerCase().includes("retirement"))).reduce((e,t)=>e.plus(s(t.amount)),s(0))}calculateCharitableDeductions(e,t){return e.filter(e=>"expense"===e.type&&new Date(e.date).getFullYear()===t&&(e.description.toLowerCase().includes("charity")||e.description.toLowerCase().includes("donation"))).reduce((e,t)=>e.plus(s(t.amount)),s(0))}calculateHSAContributions(e,t){return e.filter(e=>"expense"===e.type&&new Date(e.date).getFullYear()===t&&e.description.toLowerCase().includes("hsa")).reduce((e,t)=>e.plus(s(t.amount)),s(0))}};export{t as default};
