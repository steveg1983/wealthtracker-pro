function e({isOpen:e,onClose:t,budget:a}){const{addBudget:r,updateBudget:s,categories:l}=c(),{formData:d,updateField:i,handleSubmit:n,setFormData:h}=o({category:a?.category||"",amount:a?.amount?.toString()||"",period:a?.period||"monthly",isActive:!1!==a?.isActive},{onSubmit:e=>{const t={category:e.category,amount:parseFloat(e.amount),period:e.period,isActive:e.isActive};a?s(a.id,t):r(t)},onClose:t});return U.useEffect(()=>{a&&h({category:a.category||"",amount:a.amount?.toString()||"",period:a.period||"monthly",isActive:!1!==a.isActive})},[a,h]),x.jsx(g,{isOpen:e,onClose:t,title:a?"Edit Budget":"Add Budget",size:"md",children:x.jsxs("form",{onSubmit:n,children:[x.jsxs(m,{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),x.jsxs("select",{required:!0,value:d.category,onChange:e=>i("category",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:[x.jsx("option",{value:"",children:"Select category"}),l.filter(e=>"detail"===e.level&&("expense"===e.type||"both"===e.type)).map(e=>{const t=l.find(t=>t.id===e.parentId),a=t&&l.find(e=>e.id===t.parentId)?`${t?.name} > ${e.name}`:e.name;return x.jsx("option",{value:e.name,children:a},e.id)})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),x.jsx("input",{type:"number",required:!0,step:"0.01",value:d.amount,onChange:e=>i("amount",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",placeholder:"0.00"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Period"}),x.jsxs("select",{value:d.period,onChange:e=>i("period",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:[x.jsx("option",{value:"monthly",children:"Monthly"}),x.jsx("option",{value:"yearly",children:"Yearly"})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",id:"isActive",checked:d.isActive,onChange:e=>i("isActive",e.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),x.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Budget is active"})]})]}),x.jsx(u,{children:x.jsxs("div",{className:"flex gap-3 w-full",children:[x.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),x.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary",children:a?"Save Changes":"Add Budget"})]})})]})})}function t(){const{categories:e,getDecimalTransactions:t}=c(),{budgets:a,addBudget:r,updateBudget:s}=h(),{formatCurrency:l}=H(),[d,i]=U.useState(null),[n,o]=U.useState(!1),[g,m]=U.useState(!1),[u,N]=U.useState(""),[w,C]=U.useState(""),[A,D]=U.useState(""),[S,T]=U.useState(""),[I,z]=U.useState({name:"",budgetedAmount:"",categoryIds:[],color:"#3B82F6",priority:"medium"}),B=t(),M=(new Date).toISOString().slice(0,7),R=U.useMemo(()=>a.map(t=>{const a=y(t.amount),r=B.filter(e=>"expense"===e.type&&e.date.toISOString().startsWith(M)&&e.category===t.category).reduce((e,t)=>e.plus(t.amount),y(0)),s=a.minus(r),l=s.lessThan(0),d=a.greaterThan(0)?Math.min(r.dividedBy(a).times(100).toNumber(),100):0,i=e.find(e=>e.id===t.category)?.name||t.category;return{id:t.id,name:i,budgetedAmount:a,spentAmount:r,remainingAmount:s,categoryIds:[t.category],color:"#3B82F6",isOverspent:l,fillPercentage:d,priority:"medium"}}),[a,B,M,e]),q=R.reduce((e,t)=>e.plus(t.budgetedAmount),y(0)),E=R.reduce((e,t)=>e.plus(t.spentAmount),y(0)),F=R.reduce((e,t)=>e.plus(t.remainingAmount),y(0)),O=R.filter(e=>e.isOverspent),P=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Envelope Budgeting"}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[x.jsx(p,{size:16}),"Transfer"]}),x.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[x.jsx(b,{size:16}),"Add Envelope"]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(j,{className:"text-blue-600",size:20}),x.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Total Budgeted"})]}),x.jsx("span",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:l(q)})]}),x.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(v,{className:"text-red-600",size:20}),x.jsx("span",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Total Spent"})]}),x.jsx("span",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:l(E)})]}),x.jsxs("div",{className:"rounded-lg p-4 "+(F.greaterThanOrEqualTo(0)?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(k,{className:F.greaterThanOrEqualTo(0)?"text-green-600":"text-red-600",size:20}),x.jsx("span",{className:"text-sm font-medium "+(F.greaterThanOrEqualTo(0)?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"),children:"Remaining"})]}),x.jsx("span",{className:"text-2xl font-bold "+(F.greaterThanOrEqualTo(0)?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"),children:l(F)})]}),x.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(f,{className:"text-orange-600",size:20}),x.jsx("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-300",children:"Overbudget"})]}),x.jsx("span",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:O.length})]})]})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(t=>x.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6 cursor-pointer transition-all hover:shadow-xl "+(d===t.id?"ring-2 ring-[var(--color-primary)]":""),onClick:()=>i(t.id),children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:t.color}}),x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.name})]}),x.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${P(t.priority)}`,children:t.priority})]}),x.jsxs("div",{className:"mb-4",children:[x.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1",children:[x.jsx("span",{children:"Spent"}),x.jsxs("span",{children:[t.fillPercentage.toFixed(1),"%"]})]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:x.jsx("div",{className:"h-2 rounded-full transition-all "+(t.isOverspent?"bg-red-500":"bg-green-500"),style:{width:`${Math.min(t.fillPercentage,100)}%`,backgroundColor:t.isOverspent?"#EF4444":t.color}})})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Budgeted:"}),x.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(t.budgetedAmount)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Spent:"}),x.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(t.spentAmount)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remaining:"}),x.jsx("span",{className:"text-sm font-medium "+(t.remainingAmount.greaterThanOrEqualTo(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:l(t.remainingAmount)})]})]}),x.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[x.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Categories:"}),x.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.categoryIds.map(t=>{const a=e.find(e=>e.id===t);return a?x.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs rounded-full text-gray-700 dark:text-gray-300",children:a.name},t):null})})]})]},t.id))}),n&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Add New Envelope"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Envelope Name"}),x.jsx("input",{type:"text",value:I.name,onChange:e=>z({...I,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Groceries"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Budgeted Amount"}),x.jsx("input",{type:"number",value:I.budgetedAmount,onChange:e=>z({...I,budgetedAmount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"0.00"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),x.jsxs("select",{value:I.priority,onChange:e=>z({...I,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[x.jsx("option",{value:"high",children:"High"}),x.jsx("option",{value:"medium",children:"Medium"}),x.jsx("option",{value:"low",children:"Low"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),x.jsx("input",{type:"color",value:I.color,onChange:e=>z({...I,color:e.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Categories"}),x.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:e.map(e=>x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:I.categoryIds.includes(e.id),onChange:t=>{t.target.checked?z({...I,categoryIds:[...I.categoryIds,e.id]}):z({...I,categoryIds:I.categoryIds.filter(t=>t!==e.id)})},className:"rounded"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]},e.id))})]})]}),x.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[x.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),x.jsx("button",{onClick:()=>{if(!I.name||!I.budgetedAmount||0===I.categoryIds.length)return;const e={category:I.categoryIds[0],amount:parseFloat(I.budgetedAmount),period:"monthly",isActive:!0};r(e),z({name:"",budgetedAmount:"",categoryIds:[],color:"#3B82F6",priority:"medium"}),o(!1)},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Add Envelope"})]})]})}),g&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Transfer Funds"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Envelope"}),x.jsxs("select",{value:u,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[x.jsx("option",{value:"",children:"Select envelope..."}),R.map(e=>x.jsxs("option",{value:e.id,children:[e.name," (",l(e.remainingAmount),")"]},e.id))]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"To Envelope"}),x.jsxs("select",{value:w,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[x.jsx("option",{value:"",children:"Select envelope..."}),R.filter(e=>e.id!==u).map(e=>x.jsx("option",{value:e.id,children:e.name},e.id))]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount"}),x.jsx("input",{type:"number",value:A,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"0.00"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (Optional)"}),x.jsx("input",{type:"text",value:S,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Transfer reason..."})]})]}),x.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[x.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),x.jsx("button",{onClick:()=>{if(!u||!w||!A)return;const e=parseFloat(A);if(e<=0)return;const t=a.find(e=>e.id===u),r=a.find(e=>e.id===w);t&&r&&(s(t.id,{...t,amount:t.amount-e}),s(r.id,{...r,amount:r.amount+e}),N(""),C(""),D(""),T(""),m(!1))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Transfer"})]})]})})]})}function a(){const{categories:e}=c(),{budgets:t,addBudget:a,deleteBudget:r}=h(),{formatCurrency:s}=H(),[l,d]=V("budget-templates",[]),[i,n]=V("recurring-settings",{autoApply:!1,notificationDays:3,skipWeekends:!0,rolloverUnspent:!1}),[o,g]=U.useState(!1),[m,u]=U.useState(!1);U.useState(null);const[y,p]=U.useState({name:"",description:"",frequency:"monthly"}),j=e=>{const t=new Date,a=new Date(t);switch(e){case"weekly":a.setDate(t.getDate()+7);break;case"biweekly":a.setDate(t.getDate()+14);break;case"monthly":default:a.setMonth(t.getMonth()+1);break;case"quarterly":a.setMonth(t.getMonth()+3);break;case"yearly":a.setFullYear(t.getFullYear()+1)}if(i.skipWeekends){const e=a.getDay();0===e&&a.setDate(a.getDate()+1),6===e&&a.setDate(a.getDate()+2)}return a},v=e=>{switch(e){case"weekly":return"Weekly";case"biweekly":return"Bi-weekly";case"monthly":default:return"Monthly";case"quarterly":return"Quarterly";case"yearly":return"Yearly"}},k=e=>{if(!e.isActive)return"bg-gray-100 text-gray-800 border-gray-200";const t=new Date,a=new Date(e.nextApplicationDate);return Math.ceil((a.getTime()-t.getTime())/864e5)<=i.notificationDays?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"},f=e=>{if(!e.isActive)return"Inactive";const t=new Date,a=new Date(e.nextApplicationDate),r=Math.ceil((a.getTime()-t.getTime())/864e5);return r<=0?"Ready to Apply":r<=i.notificationDays?`Due in ${r} days`:"Active"};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Budget Templates"}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create recurring budget templates to automatically apply budgets"})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[x.jsx(N,{size:16}),"Settings"]}),x.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[x.jsx(b,{size:16}),"Create Template"]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.map(e=>x.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),x.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${k(e)}`,children:f(e)})]}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e.description}),x.jsxs("div",{className:"space-y-2 mb-4",children:[x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),x.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s(e.totalAmount)})]}),x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Frequency:"}),x.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:v(e.frequency)})]}),x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Next Application:"}),x.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.nextApplicationDate).toLocaleDateString()})]}),e.lastApplied&&x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Applied:"}),x.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.lastApplied).toLocaleDateString()})]})]}),x.jsxs("div",{className:"mb-4",children:[x.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:["Budget Items (",e.budgetItems.length,"):"]}),x.jsxs("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:[e.budgetItems.slice(0,3).map((e,t)=>x.jsxs("div",{className:"flex items-center justify-between text-xs",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),x.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:e.name})]}),x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s(e.amount)})]},t)),e.budgetItems.length>3&&x.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["+",e.budgetItems.length-3," more"]})]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>(e=>{i.rolloverUnspent||t.forEach(e=>r(e.id)),e.budgetItems.forEach((e,t)=>{if(e.categoryIds.length>0){const t={category:e.categoryIds[0],amount:e.amount,period:"monthly",isActive:!0};a(t)}});const s={...e,lastApplied:new Date,nextApplicationDate:j(e.frequency)};d(l.map(t=>t.id===e.id?s:t))})(e),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[x.jsx(w,{size:14}),"Apply"]}),x.jsx("button",{onClick:()=>{return t=e.id,void d(l.map(e=>e.id===t?{...e,isActive:!e.isActive}:e));var t},className:"flex items-center justify-center p-2 rounded-lg "+(e.isActive?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-gray-600 text-white hover:bg-gray-700"),children:e.isActive?x.jsx(C,{size:16}):x.jsx(w,{size:16})}),x.jsx("button",{onClick:()=>(e=>{const t={...e,id:Date.now().toString(),name:`${e.name} (Copy)`,isActive:!1,createdAt:new Date,lastApplied:void 0};d([...l,t])})(e),className:"flex items-center justify-center p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:x.jsx(A,{size:16})}),x.jsx("button",{onClick:()=>{return t=e.id,void d(l.filter(e=>e.id!==t));var t},className:"flex items-center justify-center p-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:x.jsx(D,{size:16})})]})]},e.id)),0===l.length&&x.jsxs("div",{className:"col-span-full bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-8 text-center",children:[x.jsx(S,{className:"mx-auto text-gray-400 mb-4",size:48}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Templates Yet"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create budget templates to automatically apply recurring budgets"}),x.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[x.jsx(b,{size:16}),"Create Your First Template"]})]})]}),o&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Create Budget Template"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Name"}),x.jsx("input",{type:"text",value:y.name,onChange:e=>p({...y,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Monthly Budget"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),x.jsx("textarea",{value:y.description,onChange:e=>p({...y,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"Brief description of this template..."})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Frequency"}),x.jsxs("select",{value:y.frequency,onChange:e=>p({...y,frequency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[x.jsx("option",{value:"weekly",children:"Weekly"}),x.jsx("option",{value:"biweekly",children:"Bi-weekly"}),x.jsx("option",{value:"monthly",children:"Monthly"}),x.jsx("option",{value:"quarterly",children:"Quarterly"}),x.jsx("option",{value:"yearly",children:"Yearly"})]})]}),x.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[x.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Template Preview"}),x.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["This template will include ",t.length," budget items with a total of ",s(t.reduce((e,t)=>e+t.amount,0))]})]})]}),x.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[x.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),x.jsx("button",{onClick:()=>{if(!y.name)return;const a=t.map(t=>({name:e.find(e=>e.id===t.category)?.name||t.category,amount:t.amount,categoryIds:[t.category],color:"#3B82F6",priority:"medium"})),r=a.reduce((e,t)=>e+t.amount,0),s=j(y.frequency),i={id:Date.now().toString(),name:y.name,description:y.description,budgetItems:a,totalAmount:r,isActive:!1,frequency:y.frequency,nextApplicationDate:s,createdAt:new Date};d([...l,i]),p({name:"",description:"",frequency:"monthly"}),g(!1)},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Create Template"})]})]})}),m&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recurring Settings"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto-apply templates"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically apply templates on schedule"})]}),x.jsx("input",{type:"checkbox",checked:i.autoApply,onChange:e=>n({...i,autoApply:e.target.checked}),className:"rounded"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notification days before application"}),x.jsx("input",{type:"number",value:i.notificationDays,onChange:e=>n({...i,notificationDays:parseInt(e.target.value)||3}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Skip weekends"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Move weekend dates to Monday"})]}),x.jsx("input",{type:"checkbox",checked:i.skipWeekends,onChange:e=>n({...i,skipWeekends:e.target.checked}),className:"rounded"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rollover unspent amounts"}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Keep existing budgets when applying"})]}),x.jsx("input",{type:"checkbox",checked:i.rolloverUnspent,onChange:e=>n({...i,rolloverUnspent:e.target.checked}),className:"rounded"})]})]}),x.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[x.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),x.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Save Settings"})]})]})})]})}function r(){const{categories:e,transactions:t}=c(),{budgets:a,updateBudget:r}=h(),{formatCurrency:s}=H(),[l,d]=V("rollover-settings",{enabled:!1,mode:"all",percentage:100,excludeCategories:[],autoApply:!1,carryNegative:!1}),[i,n]=V("rollover-history",[]),[o,g]=U.useState(!1),[m,u]=U.useState(!1);U.useState([]);const b=new Date,j=b.getMonth(),v=b.getFullYear(),f=new Date(v,j-1,1),w=f.getMonth(),C=f.getFullYear(),A=U.useMemo(()=>{const e=new Date(C,w,1),r=new Date(C,w+1,0);return a.map(a=>{const s={amount:y(a.amount)},d=t.map(e=>({...e,amount:y(e.amount)})).filter(t=>"expense"===t.type&&t.category===a.category&&t.date>=e&&t.date<=r).reduce((e,t)=>e.plus(t.amount),y(0)),i=s.amount.minus(d);let n=y(0);if(l.enabled&&!l.excludeCategories.includes(a.category)&&(i.greaterThan(0)||i.lessThan(0)&&l.carryNegative)){switch(l.mode){case"all":n=i;break;case"percentage":n=i.times(l.percentage/100);break;case"fixed":n=i.greaterThan(0)?i:y(0)}l.maxAmount&&n.greaterThan(l.maxAmount)&&(n=y(l.maxAmount))}return{budgetId:a.id,category:a.category,originalBudget:s.amount,spent:d,remaining:i,rolloverAmount:n,isEligible:l.enabled&&!l.excludeCategories.includes(a.category),willRollover:n.abs().greaterThan(0)}}).filter(Boolean)},[a,t,w,C,l]),D=A.reduce((e,t)=>t?e.plus(t.rolloverAmount):e,y(0)),T=A.filter(e=>e?.isEligible).length,I=A.filter(e=>e?.remaining.greaterThan(0)).length,z=A.filter(e=>e?.remaining.lessThan(0)).length,B=e=>new Date(2e3,e).toLocaleString("default",{month:"long"});return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Budget Rollover"}),x.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Carry forward unused budget from ",B(w)," ",C]})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>g(!o),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[x.jsx(N,{size:16}),"Settings"]}),x.jsxs("button",{onClick:()=>u(!0),disabled:!l.enabled||D.equals(0),className:"flex items-center gap-2 px-4 py-2 rounded-lg "+(l.enabled&&!D.equals(0)?"bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary)]/90":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[x.jsx(p,{size:16}),"Preview Rollover"]})]})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-2 h-2 rounded-full "+(l.enabled?"bg-green-500":"bg-gray-400")}),x.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Rollover ",l.enabled?"Enabled":"Disabled"]})]}),l.autoApply&&x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(S,{size:14,className:"text-blue-500"}),x.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Auto-apply"})]})]}),l.enabled&&x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[x.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Rollover"}),x.jsx("p",{className:"text-lg font-semibold "+(D.greaterThan(0)?"text-green-600 dark:text-green-400":D.lessThan(0)?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:s(D)})]}),x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[x.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Eligible Budgets"}),x.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[T," of ",a.length]})]}),x.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[x.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"With Surplus"}),x.jsx("p",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:I})]}),x.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[x.jsx("p",{className:"text-xs text-red-700 dark:text-red-300",children:"With Deficit"}),x.jsx("p",{className:"text-lg font-semibold text-red-700 dark:text-red-300",children:z})]})]})]}),l.enabled&&x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(t=>t&&t.isEligible?(e.find(e=>e.name===t.category),x.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-lg shadow border border-white/20 dark:border-gray-700/50 p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:t.category}),t.willRollover&&x.jsx(k,{size:16,className:"text-green-500"})]}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Previous Budget:"}),x.jsx("span",{className:"text-gray-900 dark:text-white",children:s(t.originalBudget)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Spent:"}),x.jsx("span",{className:"text-gray-900 dark:text-white",children:s(t.spent)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining:"}),x.jsx("span",{className:t.remaining.greaterThan(0)?"text-green-600":"text-red-600",children:s(t.remaining)})]}),t.willRollover&&x.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Will Rollover:"}),x.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:s(t.rolloverAmount)})]})]})]},t.budgetId)):null)}),i.length>0&&x.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Rollover History"}),x.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(e=>x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[x.jsxs("div",{children:[x.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[B(e.fromPeriod.month)," \u2192 ",B(e.toPeriod.month)]}),x.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.rollovers.length," categories \u2022 ",new Date(e.appliedAt).toLocaleDateString()]})]}),x.jsx("span",{className:"font-medium "+(e.totalRolledOver.greaterThan(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:s(e.totalRolledOver)})]},e.id))})]}),o&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Rollover Settings"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Budget Rollover"}),x.jsx("input",{type:"checkbox",checked:l.enabled,onChange:e=>d({...l,enabled:e.target.checked}),className:"rounded"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rollover Mode"}),x.jsxs("select",{value:l.mode,onChange:e=>d({...l,mode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[x.jsx("option",{value:"all",children:"Roll over all remaining"}),x.jsx("option",{value:"percentage",children:"Roll over percentage"}),x.jsx("option",{value:"fixed",children:"Fixed amount only"})]})]}),"percentage"===l.mode&&x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Percentage to Roll Over"}),x.jsx("input",{type:"number",value:l.percentage,onChange:e=>d({...l,percentage:parseInt(e.target.value)||0}),min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Maximum Rollover Amount (Optional)"}),x.jsx("input",{type:"number",value:l.maxAmount||"",onChange:e=>d({...l,maxAmount:e.target.value?parseFloat(e.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"No limit"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto-apply at month end"}),x.jsx("input",{type:"checkbox",checked:l.autoApply,onChange:e=>d({...l,autoApply:e.target.checked}),className:"rounded"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Carry negative balances"}),x.jsx("input",{type:"checkbox",checked:l.carryNegative,onChange:e=>d({...l,carryNegative:e.target.checked}),className:"rounded"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Exclude Categories"}),x.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:e.map(e=>x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:l.excludeCategories.includes(e.name),onChange:t=>{t.target.checked?d({...l,excludeCategories:[...l.excludeCategories,e.name]}):d({...l,excludeCategories:l.excludeCategories.filter(t=>t!==e.name)})},className:"rounded"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]},e.id))})]})]}),x.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[x.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),x.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Save Settings"})]})]})}),m&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl p-6 max-h-[80vh] overflow-y-auto",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Rollover Preview"}),x.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["The following amounts will be added to your ",B(j)," budgets:"]}),x.jsx("div",{className:"space-y-3 mb-6",children:A.filter(e=>e?.willRollover).map(e=>e?x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.category}),x.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s(e.originalBudget)," \u2192 ",s(y(a.find(t=>t.id===e.budgetId)?.amount||0).plus(e.rolloverAmount))]})]}),x.jsxs("span",{className:"font-medium "+(e.rolloverAmount.greaterThan(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["+",s(e.rolloverAmount)]})]},e.budgetId):null)}),x.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Total Rollover:"}),x.jsx("span",{className:"text-lg font-bold "+(D.greaterThan(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:s(D)})]}),x.jsxs("div",{className:"flex justify-end gap-3",children:[x.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),x.jsx("button",{onClick:()=>{const e=A.filter(e=>e?.willRollover).map(e=>{if(!e)return null;const t=a.find(t=>t.id===e.budgetId);if(t){const a=y(t.amount).plus(e.rolloverAmount).toNumber();r(e.budgetId,{amount:a})}return{budgetId:e.budgetId,category:e.category,originalBudget:e.originalBudget,spent:e.spent,remaining:e.remaining,rolledOver:e.rolloverAmount}}).filter(Boolean),t={id:Date.now().toString(),fromPeriod:{month:w,year:C},toPeriod:{month:j,year:v},rollovers:e,totalRolledOver:D,appliedAt:new Date};n([t,...i]),u(!1)},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Apply Rollover"})]})]})]})})]})}function s(){const{categories:e,getDecimalTransactions:t,getDecimalBudgets:a}=c(),{budgets:r}=h(),{formatCurrency:s}=H(),[l,d]=V("alert-configs",X),[i,n]=V("spending-alerts",[]),[o,g]=U.useState(!1);U.useState(null);const[m,u]=U.useState("all"),[y,p]=U.useState([]);U.useEffect(()=>{const e=()=>{const e=a(),s=t(),d=[],c=new Date,o=c.getMonth(),x=c.getFullYear(),g=new Date(x,o,1),m=new Date(x,o+1,0);r.forEach(t=>{if(y.includes(t.category))return;const a=e.find(e=>e.id===t.id);if(!a||!t.isActive)return;const r=G(a,s,g,m),n=Q(a,r),u=a.amount.minus(r);l.forEach(e=>{if(!e.enabled)return;if(e.categories.length>0&&!e.categories.includes(t.category))return;const s=i.find(a=>a.budgetId===t.id&&a.configId===e.id&&a.timestamp.getMonth()===o&&a.timestamp.getFullYear()===x);if(s&&s.isDismissed)return;let l=null,g="";if(n>=e.thresholds.critical?(l="critical",g=`Critical: ${t.category} has reached ${n.toFixed(0)}% of budget!`):n>=e.thresholds.warning&&(l="warning",g=`Warning: ${t.category} is at ${n.toFixed(0)}% of budget`),l&&!s){const s={id:Date.now().toString()+Math.random().toString(36).substr(2,9),configId:e.id,budgetId:t.id,category:t.category,type:l,percentage:n,spent:r,budget:a.amount,remaining:u,message:g,timestamp:c,isRead:!1,isDismissed:!1};if(d.push(s),e.sound&&"Audio"in window)try{new Audio("/notification.mp3").play().catch(()=>{})}catch(m){}e.vibrate&&"vibrate"in navigator&&navigator.vibrate(200)}})}),d.length>0&&n([...d,...i])};e();const s=setInterval(e,6e4);return()=>clearInterval(s)},[r,l,y]);const b=U.useMemo(()=>{const e=i.filter(e=>!e.isDismissed),t={};e.forEach(e=>{t[e.category]=(t[e.category]||0)+1});const a=Object.entries(t).sort(([,e],[,t])=>t-e)[0]?.[0]||"None",r=e.length>0?e.reduce((e,t)=>e+t.percentage,0)/e.length:0;return{totalAlerts:e.length,unreadAlerts:e.filter(e=>!e.isRead).length,warningAlerts:e.filter(e=>"warning"===e.type).length,criticalAlerts:e.filter(e=>"critical"===e.type).length,mostAlertedCategory:a,averageSpendingPercentage:r}},[i]),j=U.useMemo(()=>{let e=i.filter(e=>!e.isDismissed);switch(m){case"unread":e=e.filter(e=>!e.isRead);break;case"warning":e=e.filter(e=>"warning"===e.type);break;case"critical":e=e.filter(e=>"critical"===e.type)}return e.sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime())},[i,m]),v=e=>{y.includes(e)?p(y.filter(t=>t!==e)):p([...y,e])};return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Alerts"}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Real-time notifications when approaching budget limits"})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[x.jsx(N,{size:16}),"Configure"]}),b.unreadAlerts>0&&x.jsxs("button",{onClick:()=>{n(i.map(e=>({...e,isRead:!0})))},className:"flex items-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-700",children:[x.jsx(k,{size:16}),"Mark All Read"]})]})]}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(T,{size:16,className:"text-gray-500"}),x.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Alerts"})]}),x.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:b.totalAlerts})]}),x.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(I,{size:16,className:"text-blue-500"}),x.jsx("span",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Unread"})]}),x.jsx("p",{className:"text-xl font-semibold text-blue-900 dark:text-blue-100",children:b.unreadAlerts})]}),x.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(f,{size:16,className:"text-yellow-500"}),x.jsx("span",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Warnings"})]}),x.jsx("p",{className:"text-xl font-semibold text-yellow-900 dark:text-yellow-100",children:b.warningAlerts})]}),x.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[x.jsx(f,{size:16,className:"text-red-500"}),x.jsx("span",{className:"text-xs text-red-700 dark:text-red-300",children:"Critical"})]}),x.jsx("p",{className:"text-xl font-semibold text-red-900 dark:text-red-100",children:b.criticalAlerts})]})]}),b.totalAlerts>0&&x.jsx("div",{className:"mt-4 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:x.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:["Most alerts in ",x.jsx("strong",{children:b.mostAlertedCategory})," \u2022 Average spending: ",x.jsxs("strong",{children:[b.averageSpendingPercentage.toFixed(0),"%"]})]})})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(z,{size:16,className:"text-gray-500"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Filter:"})]}),x.jsx("div",{className:"flex gap-2",children:["all","unread","warning","critical"].map(e=>x.jsx("button",{onClick:()=>u(e),className:"px-3 py-1 text-sm rounded-lg transition-colors "+(m===e?"bg-[var(--color-primary)] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),x.jsxs("div",{className:"space-y-3",children:[j.map(e=>x.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-lg shadow border border-white/20 dark:border-gray-700/50 p-4 transition-all "+(e.isRead?"":"border-l-4 border-l-blue-500"),onClick:()=>{return t=e.id,void n(i.map(e=>e.id===t?{...e,isRead:!0}:e));var t},children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"mt-1 "+("critical"===e.type?"text-red-500":"text-yellow-500"),children:x.jsx(f,{size:20})}),x.jsxs("div",{className:"flex-1",children:[x.jsx("h4",{className:"font-medium text-gray-900 dark:text-white "+(e.isRead?"":"font-semibold"),children:e.message}),x.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[x.jsxs("p",{children:["Spent: ",s(e.spent)," of ",s(e.budget),"(",e.percentage.toFixed(0),"%)"]}),x.jsxs("p",{children:["Remaining: ",x.jsx("span",{className:e.remaining.greaterThan(0)?"text-green-600":"text-red-600",children:s(e.remaining)})]})]}),x.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()})]})]}),x.jsx("button",{onClick:t=>{var a;t.stopPropagation(),a=e.id,n(i.map(e=>e.id===a?{...e,isDismissed:!0}:e))},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:x.jsx(B,{size:16})})]})},e.id)),0===j.length&&x.jsxs("div",{className:"text-center py-12 bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50",children:[x.jsx(T,{className:"mx-auto text-gray-400 mb-4",size:48}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No alerts to show"}),x.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"all"===m?"You're staying within your budgets! Great job!":`No ${m} alerts found`})]})]}),y.length>0&&x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(M,{size:16,className:"text-gray-500"}),x.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Muted Categories"})]}),x.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(e=>x.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full text-xs",children:[e,x.jsx("button",{onClick:()=>v(e),className:"hover:text-red-500",children:x.jsx(B,{size:12})})]},e))})]}),o&&x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-3xl p-6 max-h-[80vh] overflow-y-auto",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Alert Configuration"}),x.jsx("div",{className:"space-y-4",children:l.map(e=>x.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),x.jsx("input",{type:"checkbox",checked:e.enabled,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,enabled:t.target.checked}:a))},className:"rounded"})]}),e.enabled&&x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Warning Threshold (%)"}),x.jsx("input",{type:"number",value:e.thresholds.warning,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,thresholds:{...a.thresholds,warning:parseInt(t.target.value)||0}}:a))},min:"0",max:"100",className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Critical Threshold (%)"}),x.jsx("input",{type:"number",value:e.thresholds.critical,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,thresholds:{...a.thresholds,critical:parseInt(t.target.value)||0}}:a))},min:"0",max:"100",className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:e.notificationTypes.inApp,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,notificationTypes:{...a.notificationTypes,inApp:t.target.checked}}:a))},className:"rounded"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"In-App"})]}),x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:e.sound,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,sound:t.target.checked}:a))},className:"rounded"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Sound"})]}),x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:e.vibrate,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,vibrate:t.target.checked}:a))},className:"rounded"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Vibrate"})]})]})]})]},e.id))}),x.jsxs("div",{className:"mt-6",children:[x.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Mute Categories"}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:e.map(e=>x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:y.includes(e.name),onChange:()=>v(e.name),className:"rounded"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]},e.id))})]}),x.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[x.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),x.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Save Settings"})]})]})})]})}function l(){const[e,t]=U.useState([]),[a,r]=U.useState(null),[s,l]=U.useState(!1),[n,o]=U.useState(!1),[g,m]=U.useState(null),[u,y]=U.useState("all"),[p,j]=U.useState("all"),{categories:v}=c();h(),_();const{formatCurrency:N}=H();U.useEffect(()=>{w()},[]);const w=()=>{const e=localStorage.getItem("wealthtracker_zbb_periods");if(e){const a=JSON.parse(e).map(e=>({...e,startDate:new Date(e.startDate),endDate:new Date(e.endDate),createdAt:new Date(e.createdAt),items:e.items.map(e=>({...e,...e,frequency:e.frequency,priority:e.priority,startDate:e.startDate?new Date(e.startDate):void 0,endDate:e.endDate?new Date(e.endDate):void 0}))}));t(a);const s=a.find(e=>"active"===e.status);r(s||null)}},C=e=>{localStorage.setItem("wealthtracker_zbb_periods",JSON.stringify(e)),t(e)},A=(t,s)=>{const l=e.map(e=>e.id===t?{...e,...s}:e);C(l),a?.id===t&&r({...a,...s})},D=(()=>{if(!a)return{allocated:0,approved:0,remaining:0};const e=a.items.reduce((e,t)=>{let a=t.amount;switch(t.frequency){case"weekly":a*=4.33;break;case"quarterly":a/=3;break;case"annual":a/=12}return e+a},0);return{allocated:e,approved:a.items.filter(e=>e.isApproved).reduce((e,t)=>{let a=t.amount;switch(t.frequency){case"weekly":a*=4.33;break;case"quarterly":a/=3;break;case"annual":a/=12}return e+a},0),remaining:a.totalIncome-e}})(),S=a?.items.filter(e=>!("all"!==u&&e.priority!==u||"all"!==p&&e.category!==p))||[],T=Array.from(new Set(a?.items.map(e=>e.category)||[]));return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold",children:"Zero-Based Budgeting"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Build your budget from scratch, justifying every expense"})]}),x.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[x.jsx(b,{size:20}),"New Budget Period"]})]}),e.length>0&&x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{className:"text-sm font-medium",children:"Budget Period"}),x.jsx("select",{value:a?.id||"",onChange:t=>{const a=e.find(e=>e.id===t.target.value);r(a||null)},className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:e.map(e=>x.jsxs("option",{value:e.id,children:[e.name," (",e.status,")"]},e.id))})]}),a&&x.jsxs("div",{className:"flex items-center justify-between text-sm",children:[x.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[a.startDate.toLocaleDateString()," - ",a.endDate.toLocaleDateString()]}),"draft"===a.status&&x.jsx("button",{onClick:()=>(t=>{const a=e.map(e=>({...e,status:e.id===t?"active":"active"===e.status?"completed":e.status}));C(a);const s=a.find(e=>e.id===t);r(s||null)})(a.id),className:"text-blue-600 hover:text-blue-700",children:"Activate Period"})]})]}),a?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Income"}),x.jsx("p",{className:"text-2xl font-bold",children:N(a.totalIncome)})]}),x.jsx(R,{size:32,className:"text-green-600"})]})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allocated"}),x.jsx("p",{className:"text-2xl font-bold",children:N(D.allocated)}),x.jsxs("p",{className:"text-xs text-gray-500",children:[(D.allocated/a.totalIncome*100).toFixed(1),"%"]})]}),x.jsx(q,{size:32,className:"text-blue-600"})]})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved"}),x.jsx("p",{className:"text-2xl font-bold",children:N(D.approved)}),x.jsxs("p",{className:"text-xs text-gray-500",children:[(D.approved/a.totalIncome*100).toFixed(1),"%"]})]}),x.jsx(k,{size:32,className:"text-green-600"})]})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remaining"}),x.jsx("p",{className:"text-2xl font-bold "+(D.remaining<0?"text-red-600":"text-green-600"),children:N(D.remaining)})]}),D.remaining<0?x.jsx(f,{size:32,className:"text-red-600"}):x.jsx(k,{size:32,className:"text-green-600"})]})})]}),x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("select",{value:u,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[x.jsx("option",{value:"all",children:"All Priorities"}),x.jsx("option",{value:"essential",children:"Essential"}),x.jsx("option",{value:"important",children:"Important"}),x.jsx("option",{value:"nice-to-have",children:"Nice to Have"})]}),x.jsxs("select",{value:p,onChange:e=>j(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[x.jsx("option",{value:"all",children:"All Categories"}),T.map(e=>x.jsx("option",{value:e,children:e},e))]})]}),x.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[x.jsx(b,{size:20}),"Add Budget Item"]})]}),x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[x.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Budget Items"}),0===S.length?x.jsx("p",{className:"text-center text-gray-500 py-8",children:"No budget items yet. Start by adding your essential expenses."}):x.jsx("div",{className:"space-y-2",children:S.map(e=>x.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border "+(e.isApproved?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":"bg-gray-50 dark:bg-gray-700/50 border-gray-300 dark:border-gray-600"),children:[x.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[x.jsx("input",{type:"checkbox",checked:e.isApproved,onChange:()=>(e=>{if(!a)return;const t=a.items.map(t=>t.id===e?{...t,isApproved:!t.isApproved}:t);A(a.id,{items:t})})(e.id),className:"mt-1 rounded"}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("h4",{className:"font-medium",children:e.description}),x.jsx("span",{className:"text-xs px-2 py-1 rounded "+("essential"===e.priority?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"important"===e.priority?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300"),children:e.priority}),e.isRecurring&&x.jsx(E,{size:14,className:"text-gray-500"})]}),x.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.category," ",e.subcategory&&`\u2022 ${e.subcategory}`," \u2022 ",e.frequency]}),e.notes&&x.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.notes})]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("span",{className:"font-semibold",children:[N(e.amount),"monthly"!==e.frequency&&x.jsxs("span",{className:"text-xs text-gray-500",children:["/",e.frequency]})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:()=>{m(e),o(!0)},className:"p-1 text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700 rounded",children:x.jsx(F,{size:16})}),x.jsx("button",{onClick:()=>(e=>{if(!a)return;const t=a.items.filter(t=>t.id!==e);A(a.id,{items:t})})(e.id),className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-gray-700 rounded",children:x.jsx(O,{size:16})})]})]})]},e.id))})]}),x.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx(I,{size:24,className:"text-blue-600 dark:text-blue-400 mt-0.5"}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Zero-Based Budgeting Tips"}),x.jsxs("ul",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[x.jsx("li",{children:"\u2022 Start with essential expenses: housing, utilities, food, transportation"}),x.jsx("li",{children:"\u2022 Add important items: insurance, debt payments, savings"}),x.jsx("li",{children:"\u2022 Consider nice-to-have items only after essentials are covered"}),x.jsx("li",{children:"\u2022 Every dollar should have a purpose - aim for zero remaining"}),x.jsx("li",{children:"\u2022 Review and adjust regularly as priorities change"})]})]})]})})]}):x.jsxs("div",{className:"text-center py-12",children:[x.jsx(q,{size:64,className:"mx-auto text-gray-400 mb-4"}),x.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Get Started with Zero-Based Budgeting"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first budget period to start allocating every dollar"}),x.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Budget Period"})]}),s&&x.jsx(d,{onSave:t=>{const s={id:`period-${Date.now()}`,name:t.name||"New Budget Period",startDate:t.startDate||new Date,endDate:t.endDate||new Date((new Date).setMonth((new Date).getMonth()+1)),totalIncome:t.totalIncome||0,items:[],status:"draft",createdAt:new Date};a&&confirm("Copy items from the current period?")&&(s.items=a.items.map(e=>({...e,id:`item-${Date.now()}-${Math.random()}`,isApproved:!1})));const d=[...e,s];C(d),r(s),l(!1)},onClose:()=>l(!1)}),n&&x.jsx(i,{item:g,categories:v,onSave:e=>{if(!a)return;let t;t=g?a.items.map(t=>t.id===g.id?e:t):[...a.items,{...e,id:`item-${Date.now()}`}],A(a.id,{items:t}),o(!1),m(null)},onClose:()=>{o(!1),m(null)}})]})}function d({onSave:e,onClose:t}){const[a,r]=U.useState({name:"",startDate:new Date,endDate:new Date((new Date).setMonth((new Date).getMonth()+1)),totalIncome:0});return x.jsx(g,{isOpen:!0,onClose:t,title:"New Budget Period",children:x.jsxs("form",{onSubmit:t=>{t.preventDefault(),e(a)},children:[x.jsx(m,{children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Period Name"}),x.jsx("input",{type:"text",value:a.name,onChange:e=>r({...a,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",placeholder:"e.g., January 2024 Budget",required:!0})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),x.jsx("input",{type:"date",value:a.startDate.toISOString().split("T")[0],onChange:e=>r({...a,startDate:new Date(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),x.jsx("input",{type:"date",value:a.endDate.toISOString().split("T")[0],onChange:e=>r({...a,endDate:new Date(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Total Expected Income"}),x.jsx("input",{type:"number",step:"0.01",value:a.totalIncome,onChange:e=>r({...a,totalIncome:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",placeholder:"0.00",required:!0})]})]})}),x.jsxs(u,{children:[x.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:"Cancel"}),x.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Period"})]})]})})}function i({item:e,categories:t,onSave:a,onClose:r}){const[s,l]=U.useState(e||{category:"",description:"",amount:0,frequency:"monthly",priority:"important",isRecurring:!1,isApproved:!1,notes:""}),d=t.filter(e=>"expense"===e.type||"both"===e.type);return x.jsx(g,{isOpen:!0,onClose:r,title:e?"Edit Budget Item":"Add Budget Item",children:x.jsxs("form",{onSubmit:e=>{e.preventDefault(),a(s)},children:[x.jsx(m,{children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),x.jsx("input",{type:"text",value:s.description,onChange:e=>l({...s,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",placeholder:"e.g., Monthly rent payment",required:!0})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),x.jsxs("select",{value:s.category,onChange:e=>l({...s,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0,children:[x.jsx("option",{value:"",children:"Select category"}),d.map(e=>x.jsx("option",{value:e.name,children:e.name},e.id))]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Amount"}),x.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:e=>l({...s,amount:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",placeholder:"0.00",required:!0})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Frequency"}),x.jsxs("select",{value:s.frequency,onChange:e=>l({...s,frequency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[x.jsx("option",{value:"once",children:"One-time"}),x.jsx("option",{value:"weekly",children:"Weekly"}),x.jsx("option",{value:"monthly",children:"Monthly"}),x.jsx("option",{value:"quarterly",children:"Quarterly"}),x.jsx("option",{value:"annual",children:"Annual"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Priority"}),x.jsxs("select",{value:s.priority,onChange:e=>l({...s,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[x.jsx("option",{value:"essential",children:"Essential"}),x.jsx("option",{value:"important",children:"Important"}),x.jsx("option",{value:"nice-to-have",children:"Nice to Have"})]})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),x.jsx("textarea",{value:s.notes,onChange:e=>l({...s,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",rows:2,placeholder:"Additional notes or justification"})]}),x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:s.isRecurring,onChange:e=>l({...s,isRecurring:e.target.checked}),className:"rounded"}),x.jsx("span",{className:"text-sm",children:"Recurring expense"})]}),x.jsxs("label",{className:"flex items-center gap-2",children:[x.jsx("input",{type:"checkbox",checked:s.isApproved,onChange:e=>l({...s,isApproved:e.target.checked}),className:"rounded"}),x.jsx("span",{className:"text-sm",children:"Pre-approved"})]})]})]})}),x.jsxs(u,{children:[x.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:"Cancel"}),x.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e?"Update":"Add"," Item"]})]})]})})}function n(){const[d,i]=U.useState(!1),[n,o]=U.useState(null),[g,m]=U.useState("traditional"),[u,h]=U.useState(!0),{formatCurrency:b}=H(),{budgets:v,updateBudget:k,deleteBudget:f,transactions:N,categories:w}=c(),{checkEnhancedBudgetAlerts:C,checkBudgetAlerts:A,alertThreshold:D}=P(),{currentMonth:I,currentYear:z}=U.useMemo(()=>{const e=new Date;return{currentMonth:e.getMonth(),currentYear:e.getFullYear()}},[]),B=U.useMemo(()=>v.filter(e=>null!=e).map(e=>{const t={...e,amount:y(e.amount),spent:y(0)},a=N.map(e=>({...e,amount:y(e.amount)}));let r,s;if("monthly"===e.period)r=new Date(z,I,1),s=new Date(z,I+1,0);else if("weekly"===e.period){const e=new Date,t=e.getDay();r=new Date(e),r.setDate(e.getDate()-t),r.setHours(0,0,0,0),s=new Date(r),s.setDate(r.getDate()+6),s.setHours(23,59,59,999)}else r=new Date(z,0,1),s=new Date(z,11,31);const l=G(t,a,r,s),d=Q(t,l),i=Z(t,l);return{...e,spent:l.toNumber(),percentage:d,remaining:i.toNumber()}}),[v,N,I,z]);U.useEffect(()=>{void 0!==v&&void 0!==N&&void 0!==w&&h(!1)},[v,N,w]),U.useEffect(()=>{const e=B.filter(e=>e.isActive).map(e=>{const t=w.find(t=>t.id===e.category);return e.percentage>=100?{budgetId:e.id,categoryName:t?.name||"Unknown",percentage:Math.round(e.percentage),spent:e.spent,budget:e.amount,period:e.period,type:"danger"}:e.percentage>=D?{budgetId:e.id,categoryName:t?.name||"Unknown",percentage:Math.round(e.percentage),spent:e.spent,budget:e.amount,period:e.period,type:"warning"}:null}).filter(e=>null!==e);e.length>0&&A(e)},[B,w,D,A]);const{totalBudgeted:M,totalSpent:E,totalRemaining:V,totalRemainingValue:_}=U.useMemo(()=>{const e=B.filter(e=>e&&!1!==e.isActive),t=e.reduce((e,t)=>e.plus(y(t.amount||0)),y(0)),a=e.reduce((e,t)=>e.plus(y(t.spent||0)),y(0)),r=t.minus(a);return{totalBudgeted:b(t),totalSpent:b(a),totalRemaining:b(r),totalRemainingValue:r.toNumber()}},[B]);return U.useEffect(()=>{v.length>0&&N.length>0&&C(v,N,w)},[v,N,w,C]),x.jsxs(K,{title:"Budget",rightContent:x.jsx("div",{onClick:()=>i(!0),className:"cursor-pointer",title:"Add Budget",children:x.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"transition-all duration-200 hover:scale-110 drop-shadow-lg hover:drop-shadow-xl",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"},children:[x.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"#D9E1F2",className:"transition-all duration-200",onMouseEnter:e=>e.currentTarget.setAttribute("fill","#C5D3E8"),onMouseLeave:e=>e.currentTarget.setAttribute("fill","#D9E1F2")}),x.jsxs("g",{transform:"translate(12, 12)",children:[x.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"#1F2937",strokeWidth:"2",fill:"none"}),x.jsx("path",{d:"M12 8v8M8 12h8",stroke:"#1F2937",strokeWidth:"2",strokeLinecap:"round"})]})]})}),children:[x.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg mb-6",children:[x.jsxs("button",{onClick:()=>m("traditional"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("traditional"===g?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),title:"Traditional category-based budgeting",children:[x.jsx(W,{size:16}),"Traditional"]}),x.jsxs("button",{onClick:()=>m("envelope"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("envelope"===g?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),title:"Envelope budgeting - allocate money to virtual envelopes",children:[x.jsx(j,{size:16}),"Envelope"]}),x.jsxs("button",{onClick:()=>m("templates"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("templates"===g?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[x.jsx(S,{size:16}),"Templates"]}),x.jsxs("button",{onClick:()=>m("rollover"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("rollover"===g?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[x.jsx(p,{size:16}),"Rollover"]}),x.jsxs("button",{onClick:()=>m("alerts"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("alerts"===g?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[x.jsx(T,{size:16}),"Alerts"]}),x.jsxs("button",{onClick:()=>m("zero-based"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("zero-based"===g?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[x.jsx(q,{size:16}),"Zero-Based"]})]}),"traditional"===g&&x.jsxs("div",{className:"grid gap-6",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Budgeted"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?x.jsx($,{className:"w-32 h-8"}):M})]}),x.jsx(W,{className:"text-gray-400",size:24})]})}),x.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Spent"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?x.jsx($,{className:"w-32 h-8"}):E})]}),x.jsx(Y,{className:"text-red-500",size:24})]})}),x.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Remaining"}),x.jsx("p",{className:"text-2xl font-bold "+(_>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:u?x.jsx($,{className:"w-32 h-8"}):V})]}),x.jsx(R,{className:_>=0?"text-green-500":"text-red-500",size:24})]})})]}),x.jsxs("div",{className:"pt-4",children:[x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u?x.jsxs(x.Fragment,{children:[x.jsx(L,{className:"h-48"}),x.jsx(L,{className:"h-48"}),x.jsx(L,{className:"h-48"}),x.jsx(L,{className:"h-48"})]}):B.map(e=>{return e&&x.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6 "+(!1===e.isActive?"opacity-60":""),children:[x.jsxs("div",{className:"flex justify-between items-start mb-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.category}),x.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["monthly"===e.period?"Monthly":"Yearly"," budget",!1===e.isActive&&" (Inactive)"]})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:()=>{return t=e.id,a=e.isActive,void k(t,{isActive:!a});var t,a},className:"px-3 py-1 text-sm rounded "+(!1!==e.isActive?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:!1!==e.isActive?"Active":"Inactive"}),x.jsx(J,{onClick:()=>(e=>{o(e),i(!0)})(e),icon:x.jsx(F,{size:20}),variant:"ghost",size:"md",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 min-w-[44px] min-h-[44px]",title:"Edit Budget"}),x.jsx(J,{onClick:()=>{confirm("Delete this budget?")&&f(e.id)},icon:x.jsx(O,{size:20}),variant:"ghost",size:"md",className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 min-w-[44px] min-h-[44px]",title:"Delete Budget"})]})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Spent"}),x.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[b(e.spent)," of ",b(Number(e.amount)||0)]})]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:x.jsx("div",{className:"h-2 rounded-full transition-all "+(t=e.percentage,t>=100?"bg-red-500":t>=80?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(e.percentage,100)}%`}})}),x.jsxs("div",{className:"flex justify-between text-sm",children:[x.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.percentage.toFixed(0),"% used"]}),x.jsxs("span",{className:"font-medium "+(e.remaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[b(Math.abs(e.remaining))," ",e.remaining>=0?"remaining":"over budget"]})]})]})]},e.id);var t})}),0===v.length&&x.jsxs("div",{className:"text-center py-12 bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50",children:[x.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No budgets set up yet"}),x.jsx("button",{onClick:()=>i(!0),className:"text-primary hover:underline",children:"Create your first budget"})]})]})]}),"envelope"===g&&x.jsx(t,{}),"templates"===g&&x.jsx(a,{}),"rollover"===g&&x.jsx(r,{}),"alerts"===g&&x.jsx(s,{}),"zero-based"===g&&x.jsx(l,{}),x.jsx(e,{isOpen:d,onClose:()=>{i(!1),o(null)},budget:n||void 0})]})}import{g as c,D as o,j as x,M as g,m,q as u,az as h,F as y,aA as p,ag as b,H as j,aB as v,O as k,ar as f,N,aC as w,aD as C,aE as A,aF as D,aG as S,aH as T,ah as I,aa as z,X as B,aI as M,T as R,t as q,at as E,Q as F,V as O,aJ as P,y as W,aK as $,J as Y,k as L}from"./index-Pkjq0qn3.js";import{a as U}from"./chunk-BWx9oMeS.js";import{u as H}from"./chunk-BYFRQ0Wn.js";import{I as J}from"./chunk-B2-J6WC6.js";import{u as V}from"./chunk-DpoEFI3w.js";import{a as G,b as Q,d as Z}from"./chunk-Cr6lPFsU.js";import{u as _}from"./chunk-S7gbZ2pr.js";import{P as K}from"./chunk-BnYLBI7x.js";import"./chunk-BN8kgYrt.js";import"./chunk-Drd-K-oK.js";const X=[{id:"1",name:"Budget Warning",enabled:!0,thresholds:{warning:75,critical:90},notificationTypes:{inApp:!0,email:!1,push:!1},frequency:"realtime",categories:[],sound:!1,vibrate:!1},{id:"2",name:"Overspending Alert",enabled:!0,thresholds:{warning:90,critical:100},notificationTypes:{inApp:!0,email:!0,push:!0},frequency:"realtime",categories:[],sound:!0,vibrate:!0},{id:"3",name:"Weekly Summary",enabled:!1,thresholds:{warning:50,critical:80},notificationTypes:{inApp:!0,email:!0,push:!1},frequency:"weekly",categories:[],sound:!1,vibrate:!1}];export{n as default};
