function e(){const[e,r]=t.useState(null),[i,c]=t.useState(null),[d,l]=t.useState(!1),[m,o]=t.useState("");return s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"OCR Test - Receipt Scanner"}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upload Receipt Image"}),s.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const s=e.target.files?.[0];if(s&&s.type.startsWith("image/")){r(s);const e=new FileReader;e.onloadend=()=>{o(e.result)},e.readAsDataURL(s)}},className:"mb-4"}),m&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Preview:"}),s.jsx("img",{src:m,alt:"Receipt preview",className:"max-w-md max-h-96 border rounded"})]}),s.jsxs("button",{onClick:async()=>{if(e){l(!0);try{const s=await n.uploadDocument(e,{type:"receipt",extractData:!0});c(s.extractedData||null)}catch(s){console.error("OCR processing failed:",s),alert("Failed to process image: "+s.message)}finally{l(!1)}}},disabled:!e||d,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx(a,{size:20}),d?"Processing...":"Process Receipt"]})]}),i&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Extracted Data"}),s.jsxs("div",{className:"space-y-2",children:[i.merchant&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Merchant:"})," ",i.merchant]}),i.date&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",new Date(i.date).toLocaleDateString()]}),i.totalAmount&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total Amount:"})," ",i.currency||"$",i.totalAmount]}),i.taxAmount&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Tax:"})," ",i.currency||"$",i.taxAmount]}),i.paymentMethod&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Payment Method:"})," ",i.paymentMethod]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Confidence:"})," ",Math.round(100*i.confidence),"%"]}),i.error&&s.jsxs("div",{className:"text-red-600",children:[s.jsx("span",{className:"font-medium",children:"Error:"})," ",i.error]})]}),i.items&&i.items.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Line Items:"}),s.jsx("ul",{className:"space-y-1",children:i.items.map((e,a)=>s.jsxs("li",{className:"text-sm",children:[e.description," - ",i.currency||"$",e.totalPrice||e.unitPrice,e.quantity&&` (${e.quantity} @ ${i.currency||"$"}${e.unitPrice})`]},a))})]}),i.rawText&&s.jsxs("details",{className:"mt-4",children:[s.jsx("summary",{className:"cursor-pointer font-medium",children:"Raw OCR Text"}),s.jsx("pre",{className:"mt-2 text-xs bg-gray-100 dark:bg-gray-900 p-2 rounded overflow-auto",children:i.rawText})]})]})]})}import{j as s,bo as a}from"./index-CgJz7Gw0.js";import{a as t}from"./chunk-BWx9oMeS.js";import{d as n}from"./chunk-CvmCzHdt.js";import"./chunk-BN8kgYrt.js";import"./chunk-C1eKK5Oc.js";export{e as default};
