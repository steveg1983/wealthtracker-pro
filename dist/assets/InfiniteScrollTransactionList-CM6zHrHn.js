function e({size:e="md",className:t="",color:r="text-primary"}){return s.jsxs("div",{className:`${{xs:"w-3 h-3",sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"}[e]} ${t}`,role:"status","aria-label":"Loading",children:[s.jsxs("svg",{className:`animate-spin ${r}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{className:"sr-only",children:"Loading..."})]})}function t(e,t=20){const[s,a]=r.useState(t),[n,o]=r.useState(!1),i=r.useCallback(()=>{o(!0),setTimeout(()=>{a(s=>Math.min(s+t,e.length)),o(!1)},300)},[t,e.length]),l=r.useCallback(()=>{a(t)},[t]);return{visibleItems:e.slice(0,s),hasMore:s<e.length,isLoadingMore:n,loadMore:i,reset:l,displayedItems:s}}import{L as s,r}from"./chunk-Bcp2Zi4E.js";import{S as a}from"./chunk-vdIxijzZ.js";import"./chunk-oUGr0aFc.js";import"./chunk-a7oqB5tI.js";import"./index-LbveD3Go.js";import"./chunk-B5pcS96K.js";import"./chunk-CTqqvAol.js";const n=r.memo(function({transactions:t,accounts:n,formatCurrency:o,onEdit:i,onDelete:l,onView:c,selectedTransactions:d,onSelectionChange:h,isLoading:g=!1,itemsPerBatch:m=20}){const[u,x]=r.useState(m),[y,p]=r.useState(!1),b=r.useRef(null),j=r.useRef(null);r.useEffect(()=>{x(m)},[t,m]),r.useEffect(()=>{if(b.current)return j.current&&j.current.disconnect(),j.current=new IntersectionObserver(e=>{e[0].isIntersecting&&u<t.length&&!y&&k()},{root:null,rootMargin:"100px",threshold:.1}),j.current.observe(b.current),()=>{j.current&&j.current.disconnect()}},[u,t.length,y]);const k=r.useCallback(()=>{p(!0),setTimeout(()=>{x(e=>Math.min(e+m,t.length)),p(!1)},300)},[m,t.length]),v=r.useCallback(e=>{if(!h||!d)return;const t=new Set(d);t.has(e)?t.delete(e):t.add(e),h(t)},[d,h]);if(g&&0===t.length)return s.jsx("div",{className:"space-y-3 p-4",children:[...Array(5)].map((e,t)=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 animate-pulse",children:[s.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-2"}),s.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/3"})]},t))});if(0===t.length)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No transactions found"}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Try adjusting your filters or add some transactions"})]});const f=t.slice(0,u),w=u<t.length;return s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 px-4 py-2",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",f.length," of ",t.length," transactions"]})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map(e=>{const t=n.find(t=>t.id===e.accountId),r=d?.has(e.id)||!1;return s.jsx(a,{transaction:e,account:t,formatCurrency:o,onEdit:i,onDelete:l,onView:c,isSelected:r,onToggleSelection:h?v:void 0},e.id)})}),w&&s.jsx("div",{ref:b,className:"py-8 flex justify-center",children:y?s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(e,{size:"sm"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading more transactions..."})]}):s.jsx("button",{onClick:k,className:"px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:"Load More"})}),!w&&t.length>m&&s.jsx("div",{className:"py-8 text-center",children:s.jsxs("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:["You've reached the end \u2022 ",t.length," transactions total"]})}),f.length>10&&s.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-20 right-4 z-20 p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:shadow-xl transition-shadow","aria-label":"Scroll to top",children:s.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]})});export{n as InfiniteScrollTransactionList,t as useInfiniteScroll};
