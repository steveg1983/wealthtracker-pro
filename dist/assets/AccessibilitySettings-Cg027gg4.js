function e({isOpen:e,onClose:t}){const[s,i]=a.useState([]),[o,h]=a.useState(!1),g=()=>{h(!0);const e=(new k).audit();i(e),h(!1)};if(a.useEffect(()=>{e&&g()},[e]),!e)return null;const x=s.filter(e=>"error"===e.severity),m=s.filter(e=>"warning"===e.severity),u=s.filter(e=>"info"===e.severity),y=e=>{switch(e){case"error":return r.jsx(l,{size:16,className:"text-red-600"});case"warning":return r.jsx(l,{size:16,className:"text-yellow-600"});case"info":return r.jsx(c,{size:16,className:"text-blue-600"});default:return null}};return r.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Accessibility Audit Results"}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Close audit panel",children:r.jsx(n,{size:24,className:"text-gray-500 dark:text-gray-400"})})]}),r.jsxs("div",{className:"mt-4 flex items-center gap-6 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(l,{size:16,className:"text-red-600"}),r.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[x.length," Errors"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(l,{size:16,className:"text-yellow-600"}),r.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[m.length," Warnings"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(c,{size:16,className:"text-blue-600"}),r.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[u.length," Info"]})]}),0===s.length&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(d,{size:16,className:"text-green-600"}),r.jsx("span",{className:"text-green-600",children:"No issues found!"})]})]})]}),r.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:o?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Running accessibility audit..."})]}):r.jsx("div",{className:"space-y-4",children:0===s.length?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(d,{size:48,className:"text-green-600 mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Great job! No accessibility issues found."}),r.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Your application meets accessibility standards."})]}):s.map((e,t)=>r.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-3",children:[y(e.severity),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.issue}),e.wcagCriteria&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["WCAG: ",e.wcagCriteria]}),e.suggestion&&r.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-2",children:[r.jsx("strong",{children:"Fix:"})," ",e.suggestion]}),r.jsx("button",{onClick:()=>{return(t=e.element).scrollIntoView({behavior:"smooth",block:"center"}),t.style.outline="3px solid red",t.style.outlineOffset="2px",void setTimeout(()=>{t.style.outline="",t.style.outlineOffset=""},3e3);var t},className:"mt-2 text-sm text-primary hover:underline",children:"Show element"})]})]})},t))})}),r.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("button",{onClick:g,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors",children:"Re-run Audit"}),r.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"})]})})]})})}function t(){const[e,t]=a.useState({}),[s,i]=a.useState(!1),n=[{id:"skip-links",category:"Navigation",description:"Skip navigation links are present",wcag:"2.4.1",check:()=>{const e=document.querySelectorAll('[href^="#"][class*="skip"], .skip-link');return{passed:e.length>0,details:`Found ${e.length} skip link(s)`}}},{id:"page-title",category:"Navigation",description:"Page has a descriptive title",wcag:"2.4.2",check:()=>{const e=document.title;return{passed:e.length>0&&"Document"!==e,details:`Title: "${e}"`}}},{id:"focus-visible",category:"Navigation",description:"Focus indicators are visible",wcag:"2.4.7",check:()=>{const e=document.querySelector("style")?.textContent?.includes("focus:")||document.querySelector('[class*="focus:"]');return{passed:!!e,details:e?"Custom focus styles detected":"No custom focus styles found"}}},{id:"heading-hierarchy",category:"Structure",description:"Proper heading hierarchy",wcag:"1.3.1",check:()=>{const e=function(){const e=Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6")),t=[];let s=0;e.forEach((e,a)=>{const r=parseInt(e.tagName[1]);0===a&&1!==r&&t.push("Page should start with an h1 heading"),r>s+1&&t.push(`Heading level skipped: h${s} to h${r}`),s=r});const a=e.filter(e=>"H1"===e.tagName).length;return a>1&&t.push(`Multiple h1 headings found (${a}). Use only one h1 per page.`),{valid:0===t.length,issues:t}}();return{passed:e.valid,details:e.issues.join("; ")||"Heading hierarchy is correct"}}},{id:"landmarks",category:"Structure",description:"ARIA landmarks are present",wcag:"1.3.1",check:()=>{const e=document.querySelector('main, [role="main"]'),t=document.querySelector('nav, [role="navigation"]'),s=document.querySelector('header, [role="banner"]'),a=[];return e&&a.push("main"),t&&a.push("navigation"),s&&a.push("header"),{passed:a.length>=2,details:`Found landmarks: ${a.join(", ")||"none"}`}}},{id:"images-alt",category:"Images",description:"All images have alt text",wcag:"1.1.1",check:()=>{const e=document.querySelectorAll("img"),t=Array.from(e).filter(e=>!e.hasAttribute("alt"));return{passed:0===t.length,details:t.length>0?`${t.length} image(s) missing alt text`:`All ${e.length} images have alt text`}}},{id:"form-labels",category:"Forms",description:"Form inputs have labels",wcag:"3.3.2",check:()=>{const e=document.querySelectorAll('input:not([type="hidden"]), select, textarea'),t=Array.from(e).filter(e=>{const t=e.getAttribute("id"),s=t&&document.querySelector(`label[for="${t}"]`),a=e.hasAttribute("aria-label");return!s&&!a});return{passed:0===t.length,details:t.length>0?`${t.length} input(s) missing labels`:`All ${e.length} inputs have labels`}}},{id:"button-labels",category:"Interactive",description:"Buttons have accessible names",wcag:"4.1.2",check:()=>{const e=document.querySelectorAll('button, [role="button"]'),t=Array.from(e).filter(e=>{const t=e.textContent?.trim(),s=e.getAttribute("aria-label");return!t&&!s});return{passed:0===t.length,details:t.length>0?`${t.length} button(s) missing accessible names`:`All ${e.length} buttons have accessible names`}}},{id:"color-contrast",category:"Visual",description:"Sufficient color contrast",wcag:"1.4.3",check:()=>{const e=["text-gray-400","text-gray-300","text-gray-200"].flatMap(e=>Array.from(document.getElementsByClassName(e)));return{passed:0===e.length,details:e.length>0?`${e.length} elements may have low contrast`:"No obvious contrast issues detected"}}},{id:"touch-targets",category:"Mobile",description:"Touch targets are 44x44 pixels",wcag:"2.5.5",check:()=>{const e=document.querySelectorAll("button, a, input, select, textarea"),t=Array.from(e).filter(e=>{const t=e.getBoundingClientRect();return t.width<44||t.height<44});return{passed:0===t.length,details:t.length>0?`${t.length} elements below minimum touch target size`:`All ${e.length} interactive elements meet size requirements`}}}],l=(()=>{const t=n.length,s=Object.keys(e).length,a=Object.values(e).filter(e=>e.passed).length;return{total:t,checked:s,passed:a,failed:s-a}})();return r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Accessibility Checklist"}),r.jsx("button",{onClick:async()=>{i(!0);const e={};for(const t of n)try{e[t.id]=t.check()}catch(s){e[t.id]={passed:!1,details:`Error: ${s instanceof Error?s.message:"Unknown error"}`}}t(e),i(!1)},disabled:s,className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:s?"Checking...":"Run Checklist"})]}),l.checked>0&&r.jsxs("div",{className:"mb-6 grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.total}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.passed}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Passed"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.failed}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Failed"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[l.passed>0?Math.round(l.passed/l.checked*100):0,"%"]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Score"})]})]}),r.jsx("div",{className:"space-y-2",children:n.map(t=>{const s=e[t.id];return r.jsx("div",{className:"p-4 rounded-lg border "+(void 0===s?"border-gray-200 dark:border-gray-700":s.passed?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"),children:r.jsxs("div",{className:"flex items-start gap-3",children:[(a=s?.passed,void 0===a?r.jsx(o,{size:20,className:"text-gray-400"}):a?r.jsx(d,{size:20,className:"text-green-600"}):r.jsx(h,{size:20,className:"text-red-600"})),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:t.description}),r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["WCAG ",t.wcag]})]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t.category}),s?.details&&r.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mt-2",children:s.details})]})]})},t.id);var a})})]})}function s(){const{preferences:s,updatePreferences:n}=g(),[c,o]=a.useState(!1),h=x(),k=m(),j=(e,t)=>{n({[e]:t})};return r.jsxs(i,{title:"Accessibility Settings",children:[r.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Preferences Detected"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"High Contrast Mode"}),r.jsx("span",{className:"text-sm "+(h?"text-green-600":"text-gray-500"),children:h?"Enabled":"Disabled"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Reduced Motion"}),r.jsx("span",{className:"text-sm "+(k?"text-green-600":"text-gray-500"),children:k?"Enabled":"Disabled"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Accessibility Audit"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Run an automated audit to check for accessibility issues"})]}),r.jsx(l,{size:24,className:"text-yellow-600"})]}),r.jsxs("button",{onClick:()=>o(!0),className:"w-full sm:w-auto px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center gap-2",children:[r.jsx(u,{size:20}),"Run Accessibility Audit"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Visual Settings"}),r.jsx(y,{size:24,className:"text-gray-400"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Large Text Mode"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Increase text size throughout the application"})]}),r.jsx("input",{type:"checkbox",checked:s.largeTextMode||!1,onChange:e=>j("largeTextMode",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]}),r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"High Contrast Borders"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add high contrast borders to interactive elements"})]}),r.jsx("input",{type:"checkbox",checked:s.highContrastBorders||!1,onChange:e=>j("highContrastBorders",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]}),r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Focus Indicators"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Show enhanced focus indicators for keyboard navigation"})]}),r.jsx("input",{type:"checkbox",checked:!1!==s.enhancedFocusIndicators,onChange:e=>j("enhancedFocusIndicators",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Keyboard Navigation"}),r.jsx(b,{size:24,className:"text-gray-400"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Skip Links"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Show skip navigation links for keyboard users"})]}),r.jsx("input",{type:"checkbox",checked:!1!==s.showSkipLinks,onChange:e=>j("showSkipLinks",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]}),r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Tab Focus Highlighting"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Highlight elements when navigating with Tab key"})]}),r.jsx("input",{type:"checkbox",checked:!1!==s.tabFocusHighlighting,onChange:e=>j("tabFocusHighlighting",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Screen Reader Support"}),r.jsx(p,{size:24,className:"text-gray-400"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Announce Route Changes"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Announce page changes to screen readers"})]}),r.jsx("input",{type:"checkbox",checked:!1!==s.announceRouteChanges,onChange:e=>j("announceRouteChanges",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]}),r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Live Regions"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enable live region announcements for dynamic content"})]}),r.jsx("input",{type:"checkbox",checked:!1!==s.liveRegions,onChange:e=>j("liveRegions",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Motion & Animation"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Reduce Motion"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Minimize animations and transitions"})]}),r.jsx("input",{type:"checkbox",checked:s.reduceMotion||!1,onChange:e=>j("reduceMotion",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]}),r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Disable Auto-play"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prevent videos and animations from auto-playing"})]}),r.jsx("input",{type:"checkbox",checked:s.disableAutoplay||!1,onChange:e=>j("disableAutoplay",e.target.checked),className:"ml-4 h-5 w-5 text-primary rounded focus:ring-primary"})]})]})]}),r.jsx(t,{}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(d,{size:24,className:"text-blue-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"WCAG 2.1 Compliance"}),r.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mt-1",children:"WealthTracker aims to meet WCAG 2.1 Level AA standards. We continuously improve our accessibility features to ensure everyone can manage their finances effectively."}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-2",children:"If you encounter any accessibility issues, please contact our support team."})]})]})})]}),r.jsx(e,{isOpen:c,onClose:()=>o(!1)})]})}import{r as a,H as r}from"./chunk-DowOIOga.js";import{P as i}from"./chunk-r7IQz9KP.js";import{b8 as n,b9 as l,ba as c,bb as d,bc as o,bd as h,u as g,be as x,bf as m,ag as u,bg as y,bh as b,bi as p}from"./index-qHm2isZb.js";import"./chunk-ddLY9KjI.js";import"./chunk-B5pcS96K.js";class k{issues=[];audit(){return this.issues=[],this.checkImages(),this.checkButtons(),this.checkForms(),this.checkHeadings(),this.checkContrast(),this.checkKeyboardNavigation(),this.checkARIA(),this.checkLandmarks(),this.checkTables(),this.checkLinks(),this.issues}checkImages(){document.querySelectorAll("img").forEach(e=>{e.hasAttribute("alt")?""===e.getAttribute("alt")&&"presentation"!==e.getAttribute("role")&&"true"!==e.getAttribute("aria-hidden")&&e.getAttribute("src")?.includes("logo")&&this.addIssue(e,"Logo image has empty alt text","warning","WCAG 1.1.1","Add descriptive alt text for logo images"):this.addIssue(e,"Image missing alt text","error","WCAG 1.1.1",'Add descriptive alt text or alt="" for decorative images')})}checkButtons(){document.querySelectorAll('button, [role="button"]').forEach(e=>{const t=e,s=t.textContent?.trim(),a=t.getAttribute("aria-label"),r=t.getAttribute("aria-labelledby");s||a||r||this.addIssue(t,"Button has no accessible label","error","WCAG 4.1.2","Add text content, aria-label, or aria-labelledby"),t.querySelector("svg")&&!s&&!a&&this.addIssue(t,"Icon-only button needs accessible label","error","WCAG 4.1.2","Add aria-label to describe the button action")})}checkForms(){document.querySelectorAll("input, select, textarea").forEach(e=>{const t=e,s=t.getAttribute("id"),a=t.getAttribute("aria-label"),r=t.getAttribute("aria-labelledby");"hidden"!==t.getAttribute("type")&&((s?document.querySelector(`label[for="${s}"]`):null)||a||r||this.addIssue(t,"Form input has no associated label","error","WCAG 3.3.2","Add a label element or aria-label attribute"),t.hasAttribute("required")&&!t.getAttribute("aria-required")&&this.addIssue(t,"Required field missing aria-required attribute","warning","WCAG 3.3.2",'Add aria-required="true" for better screen reader support'))})}checkHeadings(){const e=Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6"));let t=0;e.forEach((s,a)=>{const r=parseInt(s.tagName[1]);a>0&&r>t+1&&this.addIssue(s,`Heading level skipped (h${t} to h${r})`,"warning","WCAG 1.3.1","Use sequential heading levels"),1===r&&e.filter(e=>"H1"===e.tagName).length>1&&this.addIssue(s,"Multiple h1 elements on page","warning","WCAG 1.3.1","Use only one h1 per page"),t=r})}checkContrast(){document.querySelectorAll("p, span, div, h1, h2, h3, h4, h5, h6, a, button").forEach(e=>{const t=e,s=window.getComputedStyle(t).color;s.includes("rgb")&&this.isLowContrast(s)&&this.addIssue(t,"Text may have insufficient contrast","warning","WCAG 1.4.3","Ensure text has at least 4.5:1 contrast ratio")})}checkKeyboardNavigation(){document.querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])').forEach(e=>{const t=e,s=t.getAttribute("tabindex");s&&parseInt(s)>0&&this.addIssue(t,"Positive tabindex disrupts natural tab order","warning","WCAG 2.4.3",'Use tabindex="0" or remove tabindex')}),document.querySelector('a[href^="#"][class*="skip"]')||this.addIssue(document.body,"No skip navigation link found","warning","WCAG 2.4.1","Add a skip to main content link")}checkARIA(){document.querySelectorAll("[role]").forEach(e=>{const t=e.getAttribute("role");t&&!this.isValidARIARole(t)&&this.addIssue(e,`Invalid ARIA role: ${t}`,"error","WCAG 4.1.2","Use valid ARIA roles")}),document.querySelectorAll("[aria-labelledby]").forEach(e=>{(e.getAttribute("aria-labelledby")?.split(" ")||[]).forEach(t=>{document.getElementById(t)||this.addIssue(e,`aria-labelledby references non-existent element: ${t}`,"error","WCAG 4.1.2","Ensure referenced elements exist")})})}checkLandmarks(){document.querySelector('main, [role="main"]')||this.addIssue(document.body,"No main landmark found","error","WCAG 1.3.1",'Add a <main> element or role="main"'),document.querySelector('nav, [role="navigation"]')||this.addIssue(document.body,"No navigation landmark found","warning","WCAG 1.3.1",'Add a <nav> element or role="navigation"')}checkTables(){document.querySelectorAll("table").forEach(e=>{const t=e.querySelector("caption"),s=e.getAttribute("aria-label");t||s||this.addIssue(e,"Table has no caption or aria-label","warning","WCAG 1.3.1","Add a caption or aria-label to describe the table"),0===e.querySelectorAll("th").length&&this.addIssue(e,"Table has no header cells","error","WCAG 1.3.1","Use <th> elements for headers")})}checkLinks(){document.querySelectorAll("a").forEach(e=>{const t=e,s=t.textContent?.trim(),a=t.getAttribute("aria-label");s||a||this.addIssue(t,"Link has no text or label","error","WCAG 2.4.4","Add link text or aria-label"),s&&["click here","read more","more","here"].includes(s.toLowerCase())&&this.addIssue(t,"Link text is not descriptive","warning","WCAG 2.4.4","Use descriptive link text that explains the destination"),"_blank"!==t.getAttribute("target")||s?.includes("opens in new")||this.addIssue(t,"Link opens in new window without warning","warning","WCAG 3.2.2","Add text or aria-label indicating link opens in new window")})}addIssue(e,t,s,a,r){this.issues.push({element:e,issue:t,severity:s,wcagCriteria:a,suggestion:r})}isLowContrast(e){const t=e.match(/\d+/g);if(!t||t.length<3)return!1;const[s,a,r]=t.map(Number);return(299*s+587*a+114*r)/1e3>200}isValidARIARole(e){return["alert","banner","button","complementary","contentinfo","dialog","document","form","heading","img","link","list","listitem","main","navigation","region","search","status","tab","tablist","tabpanel","toolbar","tooltip","tree","treegrid","treeitem"].includes(e)}generateReport(){const e=this.issues.filter(e=>"error"===e.severity),t=this.issues.filter(e=>"warning"===e.severity),s=this.issues.filter(e=>"info"===e.severity);let a="# Accessibility Audit Report\n\n";return a+=`Total issues found: ${this.issues.length}\n`,a+=`- Errors: ${e.length}\n`,a+=`- Warnings: ${t.length}\n`,a+=`- Info: ${s.length}\n\n`,e.length>0&&(a+="## Errors (Must Fix)\n\n",e.forEach(e=>{a+=`- **${e.issue}**\n`,e.wcagCriteria&&(a+=`  - WCAG: ${e.wcagCriteria}\n`),e.suggestion&&(a+=`  - Fix: ${e.suggestion}\n`),a+="\n"})),t.length>0&&(a+="## Warnings (Should Fix)\n\n",t.forEach(e=>{a+=`- **${e.issue}**\n`,e.wcagCriteria&&(a+=`  - WCAG: ${e.wcagCriteria}\n`),e.suggestion&&(a+=`  - Fix: ${e.suggestion}\n`),a+="\n"})),a}}export{s as default};
