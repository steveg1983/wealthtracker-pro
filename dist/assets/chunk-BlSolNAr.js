function r(r){return i[r]||r}async function n(){const r=Date.now();if(u&&r-u.timestamp<36e5)return u.rates;const n=await async function(){try{const r=await fetch("https://api.exchangerate-api.com/v4/latest/GBP");if(!r.ok)throw new Error("Failed to fetch exchange rates");return(await r.json()).rates}catch(r){return console.error("Error fetching exchange rates:",r),{GBP:1,USD:1.27,EUR:1.17,CAD:1.71,AUD:1.92,JPY:189.5,CHF:1.12,CNY:9.19,INR:105.85,NZD:2.09}}}();return u={rates:n,timestamp:r},n}async function e(r,e,t){const c=a(r);if(e===t)return c;try{const r=await n();if(!r[e]||!r[t])return console.warn(`Missing exchange rate for ${e} or ${t}`),c;const a=new o(r[e]),s=new o(r[t]);let u,i;return u="GBP"===e?c:c.dividedBy(a),i="GBP"===t?u:u.times(s),i}catch(s){return console.error("Currency conversion error:",s),c}}function t(){const{currency:t}=s(),u=c.useCallback((n,e)=>function(n,e="GBP"){const t=a(n),o=r(e),c=t.isNegative(),s=t.abs().toNumber(),u=new Intl.NumberFormat("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2}).format(s);return"CHF"===e?c?`-${u} ${o}`:`${u} ${o}`:c?`-${o}${u}`:`${o}${u}`}(n,e||t),[t]),i=c.useCallback(async(r,n)=>{if(n===t)return u(r,t);try{const o=await e(r,n,t);return u(o,t)}catch(o){return console.error("Currency conversion error:",o),u(r,n)+" (!)"}},[t,u]),l=c.useCallback(async(r,n)=>{if(n===t)return a(r);try{return await e(r,n,t)}catch(o){return console.error("Currency conversion error:",o),a(r)}},[t]),m=c.useCallback(async r=>{try{const e=await async function(r,e){try{const t=await n();let c=new o(0);for(const{amount:n,currency:s}of r){const r=a(n);if(s===e){c=c.plus(r);continue}if(!t[s]||!t[e]){console.warn(`Missing exchange rate for ${s} or ${e}`),c=c.plus(r);continue}const u=new o(t[s]),i=new o(t[e]);let l,m;l="GBP"===s?r:r.dividedBy(u),m="GBP"===e?l:l.times(i),c=c.plus(m)}return c}catch(t){return console.error("Currency conversion error:",t),r.reduce((r,{amount:n})=>r.plus(a(n)),new o(0))}}(r,t);return e}catch(e){return console.error("Currency conversion error:",e),r.reduce((r,n)=>r.plus(n.amount),a(0))}},[t]);return c.useMemo(()=>({formatCurrency:u,convertAndFormat:i,convert:l,convertAndSum:m,displayCurrency:t,getCurrencySymbol:r}),[u,i,l,m,t])}import{bP as o,r as c}from"./chunk-Bcp2Zi4E.js";import{t as a,u as s}from"./index-LbveD3Go.js";let u=null;const i={GBP:"\xa3",USD:"$",EUR:"\u20ac",CAD:"$",AUD:"$",JPY:"\xa5",CHF:"CHF",CNY:"\xa5",INR:"\u20b9",NZD:"$"};export{t as u};
