function e({isOpen:e,onClose:t,budget:a}){const{addBudget:r,updateBudget:s,categories:l}=x(),{formData:d,updateField:i,handleSubmit:n,setFormData:y}=g({category:a?.category||"",amount:a?.amount?.toString()||"",period:a?.period||"monthly",isActive:!1!==a?.isActive},{onSubmit:e=>{const t={category:e.category,amount:parseFloat(e.amount),period:e.period,isActive:e.isActive};a?s(a.id,t):r(t)},onClose:t});return c.useEffect(()=>{a&&y({category:a.category||"",amount:a.amount?.toString()||"",period:a.period||"monthly",isActive:!1!==a.isActive})},[a,y]),o.jsx(m,{isOpen:e,onClose:t,title:a?"Edit Budget":"Add Budget",size:"md",children:o.jsxs("form",{onSubmit:n,children:[o.jsxs(u,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),o.jsxs("select",{required:!0,value:d.category,onChange:e=>i("category",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:[o.jsx("option",{value:"",children:"Select category"}),l.filter(e=>"detail"===e.level&&("expense"===e.type||"both"===e.type)).map(e=>{const t=l.find(t=>t.id===e.parentId),a=t&&l.find(e=>e.id===t.parentId)?`${t?.name} > ${e.name}`:e.name;return o.jsx("option",{value:e.name,children:a},e.id)})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Amount"}),o.jsx("input",{type:"number",required:!0,step:"0.01",value:d.amount,onChange:e=>i("amount",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Period"}),o.jsxs("select",{value:d.period,onChange:e=>i("period",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:[o.jsx("option",{value:"monthly",children:"Monthly"}),o.jsx("option",{value:"yearly",children:"Yearly"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:d.isActive,onChange:e=>i("isActive",e.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700 dark:text-gray-300",children:"Budget is active"})]})]}),o.jsx(h,{children:o.jsxs("div",{className:"flex gap-3 w-full",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),o.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary",children:a?"Save Changes":"Add Budget"})]})})]})})}function t(){const{categories:e,getDecimalTransactions:t}=x(),{budgets:a,addBudget:r,updateBudget:s}=y(),{formatCurrency:l}=H(),[d,i]=c.useState(null),[n,g]=c.useState(!1),[m,u]=c.useState(!1),[h,w]=c.useState(""),[C,A]=c.useState(""),[D,S]=c.useState(""),[T,I]=c.useState(""),[z,B]=c.useState({name:"",budgetedAmount:"",categoryIds:[],color:"#3B82F6",priority:"medium"}),R=t(),M=(new Date).toISOString().slice(0,7),q=c.useMemo(()=>a.map(t=>{const a=p(t.amount),r=R.filter(e=>"expense"===e.type&&e.date.toISOString().startsWith(M)&&e.category===t.category).reduce((e,t)=>e.plus(t.amount),p(0)),s=a.minus(r),l=s.lessThan(0),d=a.greaterThan(0)?Math.min(r.dividedBy(a).times(100).toNumber(),100):0,i=e.find(e=>e.id===t.category)?.name||t.category;return{id:t.id,name:i,budgetedAmount:a,spentAmount:r,remainingAmount:s,categoryIds:[t.category],color:"#3B82F6",isOverspent:l,fillPercentage:d,priority:"medium"}}),[a,R,M,e]),E=q.reduce((e,t)=>e.plus(t.budgetedAmount),p(0)),F=q.reduce((e,t)=>e.plus(t.spentAmount),p(0)),O=q.reduce((e,t)=>e.plus(t.remainingAmount),p(0)),P=q.filter(e=>e.isOverspent),W=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Envelope Budgeting"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[o.jsx(b,{size:16}),"Transfer"]}),o.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[o.jsx(j,{size:16}),"Add Envelope"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(v,{className:"text-blue-600",size:20}),o.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Total Budgeted"})]}),o.jsx("span",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:l(E)})]}),o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(k,{className:"text-red-600",size:20}),o.jsx("span",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:"Total Spent"})]}),o.jsx("span",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:l(F)})]}),o.jsxs("div",{className:"rounded-lg p-4 "+(O.greaterThanOrEqualTo(0)?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(f,{className:O.greaterThanOrEqualTo(0)?"text-green-600":"text-red-600",size:20}),o.jsx("span",{className:"text-sm font-medium "+(O.greaterThanOrEqualTo(0)?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"),children:"Remaining"})]}),o.jsx("span",{className:"text-2xl font-bold "+(O.greaterThanOrEqualTo(0)?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"),children:l(O)})]}),o.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(N,{className:"text-orange-600",size:20}),o.jsx("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-300",children:"Overbudget"})]}),o.jsx("span",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:P.length})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(t=>o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6 cursor-pointer transition-all hover:shadow-xl "+(d===t.id?"ring-2 ring-[var(--color-primary)]":""),onClick:()=>i(t.id),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:t.color}}),o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.name})]}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${W(t.priority)}`,children:t.priority})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1",children:[o.jsx("span",{children:"Spent"}),o.jsxs("span",{children:[t.fillPercentage.toFixed(1),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full transition-all "+(t.isOverspent?"bg-red-500":"bg-green-500"),style:{width:`${Math.min(t.fillPercentage,100)}%`,backgroundColor:t.isOverspent?"#EF4444":t.color}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Budgeted:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(t.budgetedAmount)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Spent:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(t.spentAmount)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remaining:"}),o.jsx("span",{className:"text-sm font-medium "+(t.remainingAmount.greaterThanOrEqualTo(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:l(t.remainingAmount)})]})]}),o.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Categories:"}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.categoryIds.map(t=>{const a=e.find(e=>e.id===t);return a?o.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-xs rounded-full text-gray-700 dark:text-gray-300",children:a.name},t):null})})]})]},t.id))}),n&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Add New Envelope"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Envelope Name"}),o.jsx("input",{type:"text",value:z.name,onChange:e=>B({...z,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Groceries"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Budgeted Amount"}),o.jsx("input",{type:"number",value:z.budgetedAmount,onChange:e=>B({...z,budgetedAmount:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority"}),o.jsxs("select",{value:z.priority,onChange:e=>B({...z,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"medium",children:"Medium"}),o.jsx("option",{value:"low",children:"Low"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),o.jsx("input",{type:"color",value:z.color,onChange:e=>B({...z,color:e.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Categories"}),o.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:e.map(e=>o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:z.categoryIds.includes(e.id),onChange:t=>{t.target.checked?B({...z,categoryIds:[...z.categoryIds,e.id]}):B({...z,categoryIds:z.categoryIds.filter(t=>t!==e.id)})},className:"rounded"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]},e.id))})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),o.jsx("button",{onClick:()=>{if(!z.name||!z.budgetedAmount||0===z.categoryIds.length)return;const e={category:z.categoryIds[0],amount:parseFloat(z.budgetedAmount),period:"monthly",isActive:!0};r(e),B({name:"",budgetedAmount:"",categoryIds:[],color:"#3B82F6",priority:"medium"}),g(!1)},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Add Envelope"})]})]})}),m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Transfer Funds"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Envelope"}),o.jsxs("select",{value:h,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"",children:"Select envelope..."}),q.map(e=>o.jsxs("option",{value:e.id,children:[e.name," (",l(e.remainingAmount),")"]},e.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"To Envelope"}),o.jsxs("select",{value:C,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"",children:"Select envelope..."}),q.filter(e=>e.id!==h).map(e=>o.jsx("option",{value:e.id,children:e.name},e.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount"}),o.jsx("input",{type:"number",value:D,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"0.00"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (Optional)"}),o.jsx("input",{type:"text",value:T,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Transfer reason..."})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),o.jsx("button",{onClick:()=>{if(!h||!C||!D)return;const e=parseFloat(D);if(e<=0)return;const t=a.find(e=>e.id===h),r=a.find(e=>e.id===C);t&&r&&(s(t.id,{...t,amount:t.amount-e}),s(r.id,{...r,amount:r.amount+e}),w(""),A(""),S(""),I(""),u(!1))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Transfer"})]})]})})]})}function a(){const{categories:e}=x(),{budgets:t,addBudget:a,deleteBudget:r}=y(),{formatCurrency:s}=H(),[l,d]=Z("budget-templates",[]),[i,n]=Z("recurring-settings",{autoApply:!1,notificationDays:3,skipWeekends:!0,rolloverUnspent:!1}),[g,m]=c.useState(!1),[u,h]=c.useState(!1);c.useState(null);const[p,b]=c.useState({name:"",description:"",frequency:"monthly"}),v=e=>{const t=new Date,a=new Date(t);switch(e){case"weekly":a.setDate(t.getDate()+7);break;case"biweekly":a.setDate(t.getDate()+14);break;case"monthly":default:a.setMonth(t.getMonth()+1);break;case"quarterly":a.setMonth(t.getMonth()+3);break;case"yearly":a.setFullYear(t.getFullYear()+1)}if(i.skipWeekends){const e=a.getDay();0===e&&a.setDate(a.getDate()+1),6===e&&a.setDate(a.getDate()+2)}return a},k=e=>{switch(e){case"weekly":return"Weekly";case"biweekly":return"Bi-weekly";case"monthly":default:return"Monthly";case"quarterly":return"Quarterly";case"yearly":return"Yearly"}},f=e=>{if(!e.isActive)return"bg-gray-100 text-gray-800 border-gray-200";const t=new Date,a=new Date(e.nextApplicationDate);return Math.ceil((a.getTime()-t.getTime())/864e5)<=i.notificationDays?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-green-100 text-green-800 border-green-200"},N=e=>{if(!e.isActive)return"Inactive";const t=new Date,a=new Date(e.nextApplicationDate),r=Math.ceil((a.getTime()-t.getTime())/864e5);return r<=0?"Ready to Apply":r<=i.notificationDays?`Due in ${r} days`:"Active"};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Budget Templates"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create recurring budget templates to automatically apply budgets"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[o.jsx(w,{size:16}),"Settings"]}),o.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[o.jsx(j,{size:16}),"Create Template"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.map(e=>o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${f(e)}`,children:N(e)})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e.description}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s(e.totalAmount)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Frequency:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:k(e.frequency)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Next Application:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.nextApplicationDate).toLocaleDateString()})]}),e.lastApplied&&o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Applied:"}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.lastApplied).toLocaleDateString()})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2 block",children:["Budget Items (",e.budgetItems.length,"):"]}),o.jsxs("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:[e.budgetItems.slice(0,3).map((e,t)=>o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:e.name})]}),o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s(e.amount)})]},t)),e.budgetItems.length>3&&o.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["+",e.budgetItems.length-3," more"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>(e=>{i.rolloverUnspent||t.forEach(e=>r(e.id)),e.budgetItems.forEach((e,t)=>{if(e.categoryIds.length>0){const t={category:e.categoryIds[0],amount:e.amount,period:"monthly",isActive:!0};a(t)}});const s={...e,lastApplied:new Date,nextApplicationDate:v(e.frequency)};d(l.map(t=>t.id===e.id?s:t))})(e),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[o.jsx(C,{size:14}),"Apply"]}),o.jsx("button",{onClick:()=>{return t=e.id,void d(l.map(e=>e.id===t?{...e,isActive:!e.isActive}:e));var t},className:"flex items-center justify-center p-2 rounded-lg "+(e.isActive?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-gray-600 text-white hover:bg-gray-700"),children:e.isActive?o.jsx(A,{size:16}):o.jsx(C,{size:16})}),o.jsx("button",{onClick:()=>(e=>{const t={...e,id:Date.now().toString(),name:`${e.name} (Copy)`,isActive:!1,createdAt:new Date,lastApplied:void 0};d([...l,t])})(e),className:"flex items-center justify-center p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:o.jsx(D,{size:16})}),o.jsx("button",{onClick:()=>{return t=e.id,void d(l.filter(e=>e.id!==t));var t},className:"flex items-center justify-center p-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:o.jsx(S,{size:16})})]})]},e.id)),0===l.length&&o.jsxs("div",{className:"col-span-full bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-8 text-center",children:[o.jsx(T,{className:"mx-auto text-gray-400 mb-4",size:48}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Templates Yet"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create budget templates to automatically apply recurring budgets"}),o.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[o.jsx(j,{size:16}),"Create Your First Template"]})]})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Create Budget Template"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Name"}),o.jsx("input",{type:"text",value:p.name,onChange:e=>b({...p,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Monthly Budget"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),o.jsx("textarea",{value:p.description,onChange:e=>b({...p,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"Brief description of this template..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Frequency"}),o.jsxs("select",{value:p.frequency,onChange:e=>b({...p,frequency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"weekly",children:"Weekly"}),o.jsx("option",{value:"biweekly",children:"Bi-weekly"}),o.jsx("option",{value:"monthly",children:"Monthly"}),o.jsx("option",{value:"quarterly",children:"Quarterly"}),o.jsx("option",{value:"yearly",children:"Yearly"})]})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Template Preview"}),o.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["This template will include ",t.length," budget items with a total of ",s(t.reduce((e,t)=>e+t.amount,0))]})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),o.jsx("button",{onClick:()=>{if(!p.name)return;const a=t.map(t=>({name:e.find(e=>e.id===t.category)?.name||t.category,amount:t.amount,categoryIds:[t.category],color:"#3B82F6",priority:"medium"})),r=a.reduce((e,t)=>e+t.amount,0),s=v(p.frequency),i={id:Date.now().toString(),name:p.name,description:p.description,budgetItems:a,totalAmount:r,isActive:!1,frequency:p.frequency,nextApplicationDate:s,createdAt:new Date};d([...l,i]),b({name:"",description:"",frequency:"monthly"}),m(!1)},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Create Template"})]})]})}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recurring Settings"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto-apply templates"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatically apply templates on schedule"})]}),o.jsx("input",{type:"checkbox",checked:i.autoApply,onChange:e=>n({...i,autoApply:e.target.checked}),className:"rounded"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notification days before application"}),o.jsx("input",{type:"number",value:i.notificationDays,onChange:e=>n({...i,notificationDays:parseInt(e.target.value)||3}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Skip weekends"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Move weekend dates to Monday"})]}),o.jsx("input",{type:"checkbox",checked:i.skipWeekends,onChange:e=>n({...i,skipWeekends:e.target.checked}),className:"rounded"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rollover unspent amounts"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Keep existing budgets when applying"})]}),o.jsx("input",{type:"checkbox",checked:i.rolloverUnspent,onChange:e=>n({...i,rolloverUnspent:e.target.checked}),className:"rounded"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),o.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Save Settings"})]})]})})]})}function r(){const{categories:e,transactions:t}=x(),{budgets:a,updateBudget:r}=y(),{formatCurrency:s}=H(),[l,d]=Z("rollover-settings",{enabled:!1,mode:"all",percentage:100,excludeCategories:[],autoApply:!1,carryNegative:!1}),[i,n]=Z("rollover-history",[]),[g,m]=c.useState(!1),[u,h]=c.useState(!1);c.useState([]);const j=new Date,v=j.getMonth(),k=j.getFullYear(),N=new Date(k,v-1,1),C=N.getMonth(),A=N.getFullYear(),D=c.useMemo(()=>{const e=new Date(A,C,1),r=new Date(A,C+1,0);return a.map(a=>{const s={amount:p(a.amount)},d=t.map(e=>({...e,amount:p(e.amount)})).filter(t=>"expense"===t.type&&t.category===a.category&&t.date>=e&&t.date<=r).reduce((e,t)=>e.plus(t.amount),p(0)),i=s.amount.minus(d);let n=p(0);if(l.enabled&&!l.excludeCategories.includes(a.category)&&(i.greaterThan(0)||i.lessThan(0)&&l.carryNegative)){switch(l.mode){case"all":n=i;break;case"percentage":n=i.times(l.percentage/100);break;case"fixed":n=i.greaterThan(0)?i:p(0)}l.maxAmount&&n.greaterThan(l.maxAmount)&&(n=p(l.maxAmount))}return{budgetId:a.id,category:a.category,originalBudget:s.amount,spent:d,remaining:i,rolloverAmount:n,isEligible:l.enabled&&!l.excludeCategories.includes(a.category),willRollover:n.abs().greaterThan(0)}}).filter(Boolean)},[a,t,C,A,l]),S=D.reduce((e,t)=>t?e.plus(t.rolloverAmount):e,p(0)),I=D.filter(e=>e?.isEligible).length,z=D.filter(e=>e?.remaining.greaterThan(0)).length,B=D.filter(e=>e?.remaining.lessThan(0)).length,R=e=>new Date(2e3,e).toLocaleString("default",{month:"long"});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Budget Rollover"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Carry forward unused budget from ",R(C)," ",A]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>m(!g),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[o.jsx(w,{size:16}),"Settings"]}),o.jsxs("button",{onClick:()=>h(!0),disabled:!l.enabled||S.equals(0),className:"flex items-center gap-2 px-4 py-2 rounded-lg "+(l.enabled&&!S.equals(0)?"bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary)]/90":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[o.jsx(b,{size:16}),"Preview Rollover"]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full "+(l.enabled?"bg-green-500":"bg-gray-400")}),o.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Rollover ",l.enabled?"Enabled":"Disabled"]})]}),l.autoApply&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(T,{size:14,className:"text-blue-500"}),o.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Auto-apply"})]})]}),l.enabled&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Rollover"}),o.jsx("p",{className:"text-lg font-semibold "+(S.greaterThan(0)?"text-green-600 dark:text-green-400":S.lessThan(0)?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"),children:s(S)})]}),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Eligible Budgets"}),o.jsxs("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[I," of ",a.length]})]}),o.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"With Surplus"}),o.jsx("p",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:z})]}),o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-red-700 dark:text-red-300",children:"With Deficit"}),o.jsx("p",{className:"text-lg font-semibold text-red-700 dark:text-red-300",children:B})]})]})]}),l.enabled&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(t=>t&&t.isEligible?(e.find(e=>e.name===t.category),o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-lg shadow border border-white/20 dark:border-gray-700/50 p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:t.category}),t.willRollover&&o.jsx(f,{size:16,className:"text-green-500"})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Previous Budget:"}),o.jsx("span",{className:"text-gray-900 dark:text-white",children:s(t.originalBudget)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Spent:"}),o.jsx("span",{className:"text-gray-900 dark:text-white",children:s(t.spent)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining:"}),o.jsx("span",{className:t.remaining.greaterThan(0)?"text-green-600":"text-red-600",children:s(t.remaining)})]}),t.willRollover&&o.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Will Rollover:"}),o.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:s(t.rolloverAmount)})]})]})]},t.budgetId)):null)}),i.length>0&&o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Rollover History"}),o.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(e=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[R(e.fromPeriod.month)," \u2192 ",R(e.toPeriod.month)]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.rollovers.length," categories \u2022 ",new Date(e.appliedAt).toLocaleDateString()]})]}),o.jsx("span",{className:"font-medium "+(e.totalRolledOver.greaterThan(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:s(e.totalRolledOver)})]},e.id))})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-md p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Rollover Settings"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Budget Rollover"}),o.jsx("input",{type:"checkbox",checked:l.enabled,onChange:e=>d({...l,enabled:e.target.checked}),className:"rounded"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rollover Mode"}),o.jsxs("select",{value:l.mode,onChange:e=>d({...l,mode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[o.jsx("option",{value:"all",children:"Roll over all remaining"}),o.jsx("option",{value:"percentage",children:"Roll over percentage"}),o.jsx("option",{value:"fixed",children:"Fixed amount only"})]})]}),"percentage"===l.mode&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Percentage to Roll Over"}),o.jsx("input",{type:"number",value:l.percentage,onChange:e=>d({...l,percentage:parseInt(e.target.value)||0}),min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Maximum Rollover Amount (Optional)"}),o.jsx("input",{type:"number",value:l.maxAmount||"",onChange:e=>d({...l,maxAmount:e.target.value?parseFloat(e.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"No limit"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto-apply at month end"}),o.jsx("input",{type:"checkbox",checked:l.autoApply,onChange:e=>d({...l,autoApply:e.target.checked}),className:"rounded"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Carry negative balances"}),o.jsx("input",{type:"checkbox",checked:l.carryNegative,onChange:e=>d({...l,carryNegative:e.target.checked}),className:"rounded"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Exclude Categories"}),o.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:e.map(e=>o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:l.excludeCategories.includes(e.name),onChange:t=>{t.target.checked?d({...l,excludeCategories:[...l.excludeCategories,e.name]}):d({...l,excludeCategories:l.excludeCategories.filter(t=>t!==e.name)})},className:"rounded"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]},e.id))})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),o.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Save Settings"})]})]})}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-2xl p-6 max-h-[80vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Rollover Preview"}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:["The following amounts will be added to your ",R(v)," budgets:"]}),o.jsx("div",{className:"space-y-3 mb-6",children:D.filter(e=>e?.willRollover).map(e=>e?o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.category}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s(e.originalBudget)," \u2192 ",s(p(a.find(t=>t.id===e.budgetId)?.amount||0).plus(e.rolloverAmount))]})]}),o.jsxs("span",{className:"font-medium "+(e.rolloverAmount.greaterThan(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["+",s(e.rolloverAmount)]})]},e.budgetId):null)}),o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Total Rollover:"}),o.jsx("span",{className:"text-lg font-bold "+(S.greaterThan(0)?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:s(S)})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),o.jsx("button",{onClick:()=>{const e=D.filter(e=>e?.willRollover).map(e=>{if(!e)return null;const t=a.find(t=>t.id===e.budgetId);if(t){const a=p(t.amount).plus(e.rolloverAmount).toNumber();r(e.budgetId,{amount:a})}return{budgetId:e.budgetId,category:e.category,originalBudget:e.originalBudget,spent:e.spent,remaining:e.remaining,rolledOver:e.rolloverAmount}}).filter(Boolean),t={id:Date.now().toString(),fromPeriod:{month:C,year:A},toPeriod:{month:v,year:k},rollovers:e,totalRolledOver:S,appliedAt:new Date};n([t,...i]),h(!1)},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Apply Rollover"})]})]})]})})]})}function s(){const{categories:e,getDecimalTransactions:t,getDecimalBudgets:a}=x(),{budgets:r}=y(),{formatCurrency:s}=H(),[l,d]=Z("alert-configs",X),[i,n]=Z("spending-alerts",[]),[g,m]=c.useState(!1);c.useState(null);const[u,h]=c.useState("all"),[p,b]=c.useState([]);c.useEffect(()=>{const e=()=>{const e=a(),s=t(),d=[],c=new Date,o=c.getMonth(),x=c.getFullYear(),g=new Date(x,o,1),m=new Date(x,o+1,0);r.forEach(t=>{if(p.includes(t.category))return;const a=e.find(e=>e.id===t.id);if(!a||!t.isActive)return;const r=_(a,s,g,m),n=G(a,r),u=a.amount.minus(r);l.forEach(e=>{if(!e.enabled)return;if(e.categories.length>0&&!e.categories.includes(t.category))return;const s=i.find(a=>a.budgetId===t.id&&a.configId===e.id&&a.timestamp.getMonth()===o&&a.timestamp.getFullYear()===x);if(s&&s.isDismissed)return;let l=null,g="";if(n>=e.thresholds.critical?(l="critical",g=`Critical: ${t.category} has reached ${n.toFixed(0)}% of budget!`):n>=e.thresholds.warning&&(l="warning",g=`Warning: ${t.category} is at ${n.toFixed(0)}% of budget`),l&&!s){const s={id:Date.now().toString()+Math.random().toString(36).substr(2,9),configId:e.id,budgetId:t.id,category:t.category,type:l,percentage:n,spent:r,budget:a.amount,remaining:u,message:g,timestamp:c,isRead:!1,isDismissed:!1};if(d.push(s),e.sound&&"Audio"in window)try{new Audio("/notification.mp3").play().catch(()=>{})}catch(m){}e.vibrate&&"vibrate"in navigator&&navigator.vibrate(200)}})}),d.length>0&&n([...d,...i])};e();const s=setInterval(e,6e4);return()=>clearInterval(s)},[r,l,p]);const j=c.useMemo(()=>{const e=i.filter(e=>!e.isDismissed),t={};e.forEach(e=>{t[e.category]=(t[e.category]||0)+1});const a=Object.entries(t).sort(([,e],[,t])=>t-e)[0]?.[0]||"None",r=e.length>0?e.reduce((e,t)=>e+t.percentage,0)/e.length:0;return{totalAlerts:e.length,unreadAlerts:e.filter(e=>!e.isRead).length,warningAlerts:e.filter(e=>"warning"===e.type).length,criticalAlerts:e.filter(e=>"critical"===e.type).length,mostAlertedCategory:a,averageSpendingPercentage:r}},[i]),v=c.useMemo(()=>{let e=i.filter(e=>!e.isDismissed);switch(u){case"unread":e=e.filter(e=>!e.isRead);break;case"warning":e=e.filter(e=>"warning"===e.type);break;case"critical":e=e.filter(e=>"critical"===e.type)}return e.sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime())},[i,u]),k=e=>{p.includes(e)?b(p.filter(t=>t!==e)):b([...p,e])};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Spending Alerts"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Real-time notifications when approaching budget limits"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[o.jsx(w,{size:16}),"Configure"]}),j.unreadAlerts>0&&o.jsxs("button",{onClick:()=>{n(i.map(e=>({...e,isRead:!0})))},className:"flex items-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-700",children:[o.jsx(f,{size:16}),"Mark All Read"]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(I,{size:16,className:"text-gray-500"}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Alerts"})]}),o.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:j.totalAlerts})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(z,{size:16,className:"text-blue-500"}),o.jsx("span",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Unread"})]}),o.jsx("p",{className:"text-xl font-semibold text-blue-900 dark:text-blue-100",children:j.unreadAlerts})]}),o.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(N,{size:16,className:"text-yellow-500"}),o.jsx("span",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Warnings"})]}),o.jsx("p",{className:"text-xl font-semibold text-yellow-900 dark:text-yellow-100",children:j.warningAlerts})]}),o.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(N,{size:16,className:"text-red-500"}),o.jsx("span",{className:"text-xs text-red-700 dark:text-red-300",children:"Critical"})]}),o.jsx("p",{className:"text-xl font-semibold text-red-900 dark:text-red-100",children:j.criticalAlerts})]})]}),j.totalAlerts>0&&o.jsx("div",{className:"mt-4 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:o.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:["Most alerts in ",o.jsx("strong",{children:j.mostAlertedCategory})," \u2022 Average spending: ",o.jsxs("strong",{children:[j.averageSpendingPercentage.toFixed(0),"%"]})]})})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(B,{size:16,className:"text-gray-500"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Filter:"})]}),o.jsx("div",{className:"flex gap-2",children:["all","unread","warning","critical"].map(e=>o.jsx("button",{onClick:()=>h(e),className:"px-3 py-1 text-sm rounded-lg transition-colors "+(u===e?"bg-[var(--color-primary)] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),o.jsxs("div",{className:"space-y-3",children:[v.map(e=>o.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-lg shadow border border-white/20 dark:border-gray-700/50 p-4 transition-all "+(e.isRead?"":"border-l-4 border-l-blue-500"),onClick:()=>{return t=e.id,void n(i.map(e=>e.id===t?{...e,isRead:!0}:e));var t},children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1 "+("critical"===e.type?"text-red-500":"text-yellow-500"),children:o.jsx(N,{size:20})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white "+(e.isRead?"":"font-semibold"),children:e.message}),o.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[o.jsxs("p",{children:["Spent: ",s(e.spent)," of ",s(e.budget),"(",e.percentage.toFixed(0),"%)"]}),o.jsxs("p",{children:["Remaining: ",o.jsx("span",{className:e.remaining.greaterThan(0)?"text-green-600":"text-red-600",children:s(e.remaining)})]})]}),o.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()})]})]}),o.jsx("button",{onClick:t=>{var a;t.stopPropagation(),a=e.id,n(i.map(e=>e.id===a?{...e,isDismissed:!0}:e))},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:o.jsx(R,{size:16})})]})},e.id)),0===v.length&&o.jsxs("div",{className:"text-center py-12 bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50",children:[o.jsx(I,{className:"mx-auto text-gray-400 mb-4",size:48}),o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No alerts to show"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"all"===u?"You're staying within your budgets! Great job!":`No ${u} alerts found`})]})]}),p.length>0&&o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(M,{size:16,className:"text-gray-500"}),o.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Muted Categories"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(e=>o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full text-xs",children:[e,o.jsx("button",{onClick:()=>k(e),className:"hover:text-red-500",children:o.jsx(R,{size:12})})]},e))})]}),g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-3xl p-6 max-h-[80vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Alert Configuration"}),o.jsx("div",{className:"space-y-4",children:l.map(e=>o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),o.jsx("input",{type:"checkbox",checked:e.enabled,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,enabled:t.target.checked}:a))},className:"rounded"})]}),e.enabled&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Warning Threshold (%)"}),o.jsx("input",{type:"number",value:e.thresholds.warning,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,thresholds:{...a.thresholds,warning:parseInt(t.target.value)||0}}:a))},min:"0",max:"100",className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Critical Threshold (%)"}),o.jsx("input",{type:"number",value:e.thresholds.critical,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,thresholds:{...a.thresholds,critical:parseInt(t.target.value)||0}}:a))},min:"0",max:"100",className:"w-full px-3 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:e.notificationTypes.inApp,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,notificationTypes:{...a.notificationTypes,inApp:t.target.checked}}:a))},className:"rounded"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"In-App"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:e.sound,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,sound:t.target.checked}:a))},className:"rounded"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Sound"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:e.vibrate,onChange:t=>{d(l.map(a=>a.id===e.id?{...a,vibrate:t.target.checked}:a))},className:"rounded"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Vibrate"})]})]})]})]},e.id))}),o.jsxs("div",{className:"mt-6",children:[o.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Mute Categories"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:e.map(e=>o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:p.includes(e.name),onChange:()=>k(e.name),className:"rounded"}),o.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]},e.id))})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),o.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:"Save Settings"})]})]})})]})}function l(){const[e,t]=c.useState([]),[a,r]=c.useState(null),[s,l]=c.useState(!1),[n,g]=c.useState(!1),[m,u]=c.useState(null),[h,p]=c.useState("all"),[b,v]=c.useState("all"),{categories:k}=x();y(),Q();const{formatCurrency:w}=H();c.useEffect(()=>{C()},[]);const C=()=>{const e=localStorage.getItem("wealthtracker_zbb_periods");if(e){const a=JSON.parse(e).map(e=>({...e,startDate:new Date(e.startDate),endDate:new Date(e.endDate),createdAt:new Date(e.createdAt),items:e.items.map(e=>({...e,...e,frequency:e.frequency,priority:e.priority,startDate:e.startDate?new Date(e.startDate):void 0,endDate:e.endDate?new Date(e.endDate):void 0}))}));t(a);const s=a.find(e=>"active"===e.status);r(s||null)}},A=e=>{localStorage.setItem("wealthtracker_zbb_periods",JSON.stringify(e)),t(e)},D=(t,s)=>{const l=e.map(e=>e.id===t?{...e,...s}:e);A(l),a?.id===t&&r({...a,...s})},S=(()=>{if(!a)return{allocated:0,approved:0,remaining:0};const e=a.items.reduce((e,t)=>{let a=t.amount;switch(t.frequency){case"weekly":a*=4.33;break;case"quarterly":a/=3;break;case"annual":a/=12}return e+a},0);return{allocated:e,approved:a.items.filter(e=>e.isApproved).reduce((e,t)=>{let a=t.amount;switch(t.frequency){case"weekly":a*=4.33;break;case"quarterly":a/=3;break;case"annual":a/=12}return e+a},0),remaining:a.totalIncome-e}})(),T=a?.items.filter(e=>!("all"!==h&&e.priority!==h||"all"!==b&&e.category!==b))||[],I=Array.from(new Set(a?.items.map(e=>e.category)||[]));return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Zero-Based Budgeting"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Build your budget from scratch, justifying every expense"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[o.jsx(j,{size:20}),"New Budget Period"]})]}),e.length>0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-medium",children:"Budget Period"}),o.jsx("select",{value:a?.id||"",onChange:t=>{const a=e.find(e=>e.id===t.target.value);r(a||null)},className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:e.map(e=>o.jsxs("option",{value:e.id,children:[e.name," (",e.status,")"]},e.id))})]}),a&&o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[a.startDate.toLocaleDateString()," - ",a.endDate.toLocaleDateString()]}),"draft"===a.status&&o.jsx("button",{onClick:()=>(t=>{const a=e.map(e=>({...e,status:e.id===t?"active":"active"===e.status?"completed":e.status}));A(a);const s=a.find(e=>e.id===t);r(s||null)})(a.id),className:"text-blue-600 hover:text-blue-700",children:"Activate Period"})]})]}),a?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Income"}),o.jsx("p",{className:"text-2xl font-bold",children:w(a.totalIncome)})]}),o.jsx(q,{size:32,className:"text-green-600"})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Allocated"}),o.jsx("p",{className:"text-2xl font-bold",children:w(S.allocated)}),o.jsxs("p",{className:"text-xs text-gray-500",children:[(S.allocated/a.totalIncome*100).toFixed(1),"%"]})]}),o.jsx(E,{size:32,className:"text-blue-600"})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved"}),o.jsx("p",{className:"text-2xl font-bold",children:w(S.approved)}),o.jsxs("p",{className:"text-xs text-gray-500",children:[(S.approved/a.totalIncome*100).toFixed(1),"%"]})]}),o.jsx(f,{size:32,className:"text-green-600"})]})}),o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remaining"}),o.jsx("p",{className:"text-2xl font-bold "+(S.remaining<0?"text-red-600":"text-green-600"),children:w(S.remaining)})]}),S.remaining<0?o.jsx(N,{size:32,className:"text-red-600"}):o.jsx(f,{size:32,className:"text-green-600"})]})})]}),o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[o.jsx("option",{value:"all",children:"All Priorities"}),o.jsx("option",{value:"essential",children:"Essential"}),o.jsx("option",{value:"important",children:"Important"}),o.jsx("option",{value:"nice-to-have",children:"Nice to Have"})]}),o.jsxs("select",{value:b,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[o.jsx("option",{value:"all",children:"All Categories"}),I.map(e=>o.jsx("option",{value:e,children:e},e))]})]}),o.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[o.jsx(j,{size:20}),"Add Budget Item"]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Budget Items"}),0===T.length?o.jsx("p",{className:"text-center text-gray-500 py-8",children:"No budget items yet. Start by adding your essential expenses."}):o.jsx("div",{className:"space-y-2",children:T.map(e=>o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border "+(e.isApproved?"bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700":"bg-gray-50 dark:bg-gray-700/50 border-gray-300 dark:border-gray-600"),children:[o.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o.jsx("input",{type:"checkbox",checked:e.isApproved,onChange:()=>(e=>{if(!a)return;const t=a.items.map(t=>t.id===e?{...t,isApproved:!t.isApproved}:t);D(a.id,{items:t})})(e.id),className:"mt-1 rounded"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h4",{className:"font-medium",children:e.description}),o.jsx("span",{className:"text-xs px-2 py-1 rounded "+("essential"===e.priority?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"important"===e.priority?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-gray-100 text-gray-700 dark:bg-gray-600 dark:text-gray-300"),children:e.priority}),e.isRecurring&&o.jsx(F,{size:14,className:"text-gray-500"})]}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.category," ",e.subcategory&&`\u2022 ${e.subcategory}`," \u2022 ",e.frequency]}),e.notes&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.notes})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"font-semibold",children:[w(e.amount),"monthly"!==e.frequency&&o.jsxs("span",{className:"text-xs text-gray-500",children:["/",e.frequency]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>{u(e),g(!0)},className:"p-1 text-blue-600 hover:bg-blue-50 dark:hover:bg-gray-700 rounded",children:o.jsx(O,{size:16})}),o.jsx("button",{onClick:()=>(e=>{if(!a)return;const t=a.items.filter(t=>t.id!==e);D(a.id,{items:t})})(e.id),className:"p-1 text-red-600 hover:bg-red-50 dark:hover:bg-gray-700 rounded",children:o.jsx(P,{size:16})})]})]})]},e.id))})]}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(z,{size:24,className:"text-blue-600 dark:text-blue-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Zero-Based Budgeting Tips"}),o.jsxs("ul",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[o.jsx("li",{children:"\u2022 Start with essential expenses: housing, utilities, food, transportation"}),o.jsx("li",{children:"\u2022 Add important items: insurance, debt payments, savings"}),o.jsx("li",{children:"\u2022 Consider nice-to-have items only after essentials are covered"}),o.jsx("li",{children:"\u2022 Every dollar should have a purpose - aim for zero remaining"}),o.jsx("li",{children:"\u2022 Review and adjust regularly as priorities change"})]})]})]})})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(E,{size:64,className:"mx-auto text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Get Started with Zero-Based Budgeting"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first budget period to start allocating every dollar"}),o.jsx("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Budget Period"})]}),s&&o.jsx(d,{onSave:t=>{const s={id:`period-${Date.now()}`,name:t.name||"New Budget Period",startDate:t.startDate||new Date,endDate:t.endDate||new Date((new Date).setMonth((new Date).getMonth()+1)),totalIncome:t.totalIncome||0,items:[],status:"draft",createdAt:new Date};a&&confirm("Copy items from the current period?")&&(s.items=a.items.map(e=>({...e,id:`item-${Date.now()}-${Math.random()}`,isApproved:!1})));const d=[...e,s];A(d),r(s),l(!1)},onClose:()=>l(!1)}),n&&o.jsx(i,{item:m,categories:k,onSave:e=>{if(!a)return;let t;t=m?a.items.map(t=>t.id===m.id?e:t):[...a.items,{...e,id:`item-${Date.now()}`}],D(a.id,{items:t}),g(!1),u(null)},onClose:()=>{g(!1),u(null)}})]})}function d({onSave:e,onClose:t}){const[a,r]=c.useState({name:"",startDate:new Date,endDate:new Date((new Date).setMonth((new Date).getMonth()+1)),totalIncome:0});return o.jsx(m,{isOpen:!0,onClose:t,title:"New Budget Period",children:o.jsxs("form",{onSubmit:t=>{t.preventDefault(),e(a)},children:[o.jsx(u,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Period Name"}),o.jsx("input",{type:"text",value:a.name,onChange:e=>r({...a,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",placeholder:"e.g., January 2024 Budget",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),o.jsx("input",{type:"date",value:a.startDate.toISOString().split("T")[0],onChange:e=>r({...a,startDate:new Date(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),o.jsx("input",{type:"date",value:a.endDate.toISOString().split("T")[0],onChange:e=>r({...a,endDate:new Date(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Total Expected Income"}),o.jsx("input",{type:"number",step:"0.01",value:a.totalIncome,onChange:e=>r({...a,totalIncome:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",placeholder:"0.00",required:!0})]})]})}),o.jsxs(h,{children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Period"})]})]})})}function i({item:e,categories:t,onSave:a,onClose:r}){const[s,l]=c.useState(e||{category:"",description:"",amount:0,frequency:"monthly",priority:"important",isRecurring:!1,isApproved:!1,notes:""}),d=t.filter(e=>"expense"===e.type||"both"===e.type);return o.jsx(m,{isOpen:!0,onClose:r,title:e?"Edit Budget Item":"Add Budget Item",children:o.jsxs("form",{onSubmit:e=>{e.preventDefault(),a(s)},children:[o.jsx(u,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),o.jsx("input",{type:"text",value:s.description,onChange:e=>l({...s,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",placeholder:"e.g., Monthly rent payment",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),o.jsxs("select",{value:s.category,onChange:e=>l({...s,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",required:!0,children:[o.jsx("option",{value:"",children:"Select category"}),d.map(e=>o.jsx("option",{value:e.name,children:e.name},e.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Amount"}),o.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:e=>l({...s,amount:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",placeholder:"0.00",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Frequency"}),o.jsxs("select",{value:s.frequency,onChange:e=>l({...s,frequency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[o.jsx("option",{value:"once",children:"One-time"}),o.jsx("option",{value:"weekly",children:"Weekly"}),o.jsx("option",{value:"monthly",children:"Monthly"}),o.jsx("option",{value:"quarterly",children:"Quarterly"}),o.jsx("option",{value:"annual",children:"Annual"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Priority"}),o.jsxs("select",{value:s.priority,onChange:e=>l({...s,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[o.jsx("option",{value:"essential",children:"Essential"}),o.jsx("option",{value:"important",children:"Important"}),o.jsx("option",{value:"nice-to-have",children:"Nice to Have"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),o.jsx("textarea",{value:s.notes,onChange:e=>l({...s,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",rows:2,placeholder:"Additional notes or justification"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:s.isRecurring,onChange:e=>l({...s,isRecurring:e.target.checked}),className:"rounded"}),o.jsx("span",{className:"text-sm",children:"Recurring expense"})]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:s.isApproved,onChange:e=>l({...s,isApproved:e.target.checked}),className:"rounded"}),o.jsx("span",{className:"text-sm",children:"Pre-approved"})]})]})]})}),o.jsxs(h,{children:[o.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100",children:"Cancel"}),o.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e?"Update":"Add"," Item"]})]})]})})}function n(){const[d,i]=c.useState(!1),[n,g]=c.useState(null),[m,u]=c.useState("traditional"),[h,y]=c.useState(!0),{formatCurrency:j}=H(),{budgets:k,updateBudget:f,deleteBudget:N,transactions:w,categories:C}=x(),{checkEnhancedBudgetAlerts:A,checkBudgetAlerts:D,alertThreshold:S}=W(),{currentMonth:z,currentYear:B}=c.useMemo(()=>{const e=new Date;return{currentMonth:e.getMonth(),currentYear:e.getFullYear()}},[]),R=c.useMemo(()=>k.filter(e=>null!=e).map(e=>{const t={...e,amount:p(e.amount),spent:p(0)},a=w.map(e=>({...e,amount:p(e.amount)}));let r,s;if("monthly"===e.period)r=new Date(B,z,1),s=new Date(B,z+1,0);else if("weekly"===e.period){const e=new Date,t=e.getDay();r=new Date(e),r.setDate(e.getDate()-t),r.setHours(0,0,0,0),s=new Date(r),s.setDate(r.getDate()+6),s.setHours(23,59,59,999)}else r=new Date(B,0,1),s=new Date(B,11,31);const l=_(t,a,r,s),d=G(t,l),i=J(t,l);return{...e,spent:l.toNumber(),percentage:d,remaining:i.toNumber()}}),[k,w,z,B]);c.useEffect(()=>{void 0!==k&&void 0!==w&&void 0!==C&&y(!1)},[k,w,C]),c.useEffect(()=>{const e=R.filter(e=>e.isActive).map(e=>{const t=C.find(t=>t.id===e.category);return e.percentage>=100?{budgetId:e.id,categoryName:t?.name||"Unknown",percentage:Math.round(e.percentage),spent:e.spent,budget:e.amount,period:e.period,type:"danger"}:e.percentage>=S?{budgetId:e.id,categoryName:t?.name||"Unknown",percentage:Math.round(e.percentage),spent:e.spent,budget:e.amount,period:e.period,type:"warning"}:null}).filter(e=>null!==e);e.length>0&&D(e)},[R,C,S,D]);const{totalBudgeted:M,totalSpent:F,totalRemaining:Z,totalRemainingValue:Q}=c.useMemo(()=>{const e=R.filter(e=>e&&!1!==e.isActive),t=e.reduce((e,t)=>e.plus(p(t.amount||0)),p(0)),a=e.reduce((e,t)=>e.plus(p(t.spent||0)),p(0)),r=t.minus(a);return{totalBudgeted:j(t),totalSpent:j(a),totalRemaining:j(r),totalRemainingValue:r.toNumber()}},[R]);return c.useEffect(()=>{k.length>0&&w.length>0&&A(k,w,C)},[k,w,C,A]),o.jsxs(K,{title:"Budget",rightContent:o.jsx("div",{onClick:()=>i(!0),className:"cursor-pointer",title:"Add Budget",children:o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"transition-all duration-200 hover:scale-110 drop-shadow-lg hover:drop-shadow-xl",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"},children:[o.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"#D9E1F2",className:"transition-all duration-200",onMouseEnter:e=>e.currentTarget.setAttribute("fill","#C5D3E8"),onMouseLeave:e=>e.currentTarget.setAttribute("fill","#D9E1F2")}),o.jsxs("g",{transform:"translate(12, 12)",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"#1F2937",strokeWidth:"2",fill:"none"}),o.jsx("path",{d:"M12 8v8M8 12h8",stroke:"#1F2937",strokeWidth:"2",strokeLinecap:"round"})]})]})}),children:[o.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 p-1 rounded-lg mb-6",children:[o.jsxs("button",{onClick:()=>u("traditional"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("traditional"===m?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),title:"Traditional category-based budgeting",children:[o.jsx($,{size:16}),"Traditional"]}),o.jsxs("button",{onClick:()=>u("envelope"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("envelope"===m?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),title:"Envelope budgeting - allocate money to virtual envelopes",children:[o.jsx(v,{size:16}),"Envelope"]}),o.jsxs("button",{onClick:()=>u("templates"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("templates"===m?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[o.jsx(T,{size:16}),"Templates"]}),o.jsxs("button",{onClick:()=>u("rollover"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("rollover"===m?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[o.jsx(b,{size:16}),"Rollover"]}),o.jsxs("button",{onClick:()=>u("alerts"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("alerts"===m?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[o.jsx(I,{size:16}),"Alerts"]}),o.jsxs("button",{onClick:()=>u("zero-based"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors "+("zero-based"===m?"bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[o.jsx(E,{size:16}),"Zero-Based"]})]}),"traditional"===m&&o.jsxs("div",{className:"grid gap-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Budgeted"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?o.jsx(Y,{className:"w-32 h-8"}):M})]}),o.jsx($,{className:"text-gray-400",size:24})]})}),o.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Spent"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?o.jsx(Y,{className:"w-32 h-8"}):F})]}),o.jsx(L,{className:"text-red-500",size:24})]})}),o.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Total Remaining"}),o.jsx("p",{className:"text-2xl font-bold "+(Q>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:h?o.jsx(Y,{className:"w-32 h-8"}):Z})]}),o.jsx(q,{className:Q>=0?"text-green-500":"text-red-500",size:24})]})})]}),o.jsxs("div",{className:"pt-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h?o.jsxs(o.Fragment,{children:[o.jsx(U,{className:"h-48"}),o.jsx(U,{className:"h-48"}),o.jsx(U,{className:"h-48"}),o.jsx(U,{className:"h-48"})]}):R.map(e=>{return e&&o.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6 "+(!1===e.isActive?"opacity-60":""),children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.category}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["monthly"===e.period?"Monthly":"Yearly"," budget",!1===e.isActive&&" (Inactive)"]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{return t=e.id,a=e.isActive,void f(t,{isActive:!a});var t,a},className:"px-3 py-1 text-sm rounded "+(!1!==e.isActive?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:!1!==e.isActive?"Active":"Inactive"}),o.jsx(V,{onClick:()=>(e=>{g(e),i(!0)})(e),icon:o.jsx(O,{size:20}),variant:"ghost",size:"md",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 min-w-[44px] min-h-[44px]",title:"Edit Budget"}),o.jsx(V,{onClick:()=>{confirm("Delete this budget?")&&N(e.id)},icon:o.jsx(P,{size:20}),variant:"ghost",size:"md",className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 min-w-[44px] min-h-[44px]",title:"Delete Budget"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Spent"}),o.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[j(e.spent)," of ",j(Number(e.amount)||0)]})]}),o.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full transition-all "+(t=e.percentage,t>=100?"bg-red-500":t>=80?"bg-yellow-500":"bg-green-500"),style:{width:`${Math.min(e.percentage,100)}%`}})}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.percentage.toFixed(0),"% used"]}),o.jsxs("span",{className:"font-medium "+(e.remaining>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[j(Math.abs(e.remaining))," ",e.remaining>=0?"remaining":"over budget"]})]})]})]},e.id);var t})}),0===k.length&&o.jsxs("div",{className:"text-center py-12 bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50",children:[o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No budgets set up yet"}),o.jsx("button",{onClick:()=>i(!0),className:"text-primary hover:underline",children:"Create your first budget"})]})]})]}),"envelope"===m&&o.jsx(t,{}),"templates"===m&&o.jsx(a,{}),"rollover"===m&&o.jsx(r,{}),"alerts"===m&&o.jsx(s,{}),"zero-based"===m&&o.jsx(l,{}),o.jsx(e,{isOpen:d,onClose:()=>{i(!1),g(null)},budget:n||void 0})]})}import{r as c,H as o}from"./chunk-DowOIOga.js";import{a as x,l as g,M as m,d as u,e as h,ai as y,t as p,aj as b,$ as j,n as v,ak as k,v as f,aa as N,r as w,al as C,am as A,an as D,ao as S,ap as T,aq as I,a0 as z,R as B,X as R,ar as M,T as q,f as E,ac as F,E as O,D as P,as as W,i as $,at as Y,p as L,c as U}from"./index-qHm2isZb.js";import{u as H}from"./chunk-ByFoKVyi.js";import{I as V}from"./chunk-EvPoNOTO.js";import{u as Z}from"./chunk-B-g8QhCB.js";import{a as _,b as G,d as J}from"./chunk-BDkVMup3.js";import{u as Q}from"./chunk-CSFgP5a1.js";import{P as K}from"./chunk-r7IQz9KP.js";import"./chunk-ddLY9KjI.js";import"./chunk-B5pcS96K.js";const X=[{id:"1",name:"Budget Warning",enabled:!0,thresholds:{warning:75,critical:90},notificationTypes:{inApp:!0,email:!1,push:!1},frequency:"realtime",categories:[],sound:!1,vibrate:!1},{id:"2",name:"Overspending Alert",enabled:!0,thresholds:{warning:90,critical:100},notificationTypes:{inApp:!0,email:!0,push:!0},frequency:"realtime",categories:[],sound:!0,vibrate:!0},{id:"3",name:"Weekly Summary",enabled:!1,thresholds:{warning:50,critical:80},notificationTypes:{inApp:!0,email:!0,push:!1},frequency:"weekly",categories:[],sound:!1,vibrate:!1}];export{n as default};
