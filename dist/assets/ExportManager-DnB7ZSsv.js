function e(){const{transactions:e,accounts:p}=a(),u=[],[y,b]=t.useState("export"),[j,v]=t.useState([]),[k,N]=t.useState([]),[f,w]=t.useState(!1),[C,D]=t.useState({startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1),endDate:new Date,format:"pdf",includeCharts:!0,includeTransactions:!0,includeAccounts:!0,includeInvestments:!0,includeBudgets:!0,groupBy:"category"});t.useEffect(()=>{S()},[]);const S=()=>{v(s.getTemplates()),N(s.getScheduledReports())},T=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),A=e=>e.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return r.jsx(g,{title:"Export Manager",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-800 dark:to-purple-800 rounded-2xl p-6 mb-6 text-white shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Export Manager"}),r.jsx("p",{className:"text-blue-100",children:"Generate reports, schedule exports, and manage templates"})]}),r.jsx(d,{size:48,className:"text-white/80"})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-6",children:r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:r.jsxs("nav",{className:"flex space-x-8 overflow-x-auto",children:[r.jsx("button",{onClick:()=>b("export"),className:"py-4 px-6 border-b-2 font-medium text-sm whitespace-nowrap "+("export"===y?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(d,{size:16}),"Quick Export"]})}),r.jsx("button",{onClick:()=>b("templates"),className:"py-4 px-6 border-b-2 font-medium text-sm whitespace-nowrap "+("templates"===y?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(l,{size:16}),"Templates (",j.length,")"]})}),r.jsx("button",{onClick:()=>b("scheduled"),className:"py-4 px-6 border-b-2 font-medium text-sm whitespace-nowrap "+("scheduled"===y?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(i,{size:16}),"Scheduled (",k.filter(e=>e.isActive).length,")"]})}),r.jsx("button",{onClick:()=>b("history"),className:"py-4 px-6 border-b-2 font-medium text-sm whitespace-nowrap "+("history"===y?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(n,{size:16}),"History"]})})]})})}),"export"===y&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Export Options"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Date"}),r.jsx("input",{type:"date",value:C.startDate.toISOString().split("T")[0],onChange:e=>D({...C,startDate:new Date(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Date"}),r.jsx("input",{type:"date",value:C.endDate.toISOString().split("T")[0],onChange:e=>D({...C,endDate:new Date(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Format"}),r.jsxs("select",{value:C.format,onChange:e=>D({...C,format:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"pdf",children:"PDF Report"}),r.jsx("option",{value:"csv",children:"CSV Data"}),r.jsx("option",{value:"xlsx",children:"Excel Spreadsheet"}),r.jsx("option",{value:"json",children:"JSON Data"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group By"}),r.jsxs("select",{value:C.groupBy||"none",onChange:e=>D({...C,groupBy:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"none",children:"No Grouping"}),r.jsx("option",{value:"category",children:"Category"}),r.jsx("option",{value:"account",children:"Account"}),r.jsx("option",{value:"month",children:"Month"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Include in Export"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:C.includeTransactions,onChange:e=>D({...C,includeTransactions:e.target.checked}),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Transactions"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:C.includeAccounts,onChange:e=>D({...C,includeAccounts:e.target.checked}),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Accounts"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:C.includeInvestments,onChange:e=>D({...C,includeInvestments:e.target.checked}),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Investments"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:C.includeBudgets,onChange:e=>D({...C,includeBudgets:e.target.checked}),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Budgets"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:C.includeCharts,onChange:e=>D({...C,includeCharts:e.target.checked}),className:"mr-2",disabled:"pdf"!==C.format}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Charts"})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:async()=>{w(!0);try{const t={transactions:C.includeTransactions?e:void 0,accounts:C.includeAccounts?p:void 0,investments:C.includeInvestments?u:void 0};if("pdf"===C.format){const e=await s.exportToPDF(t,C),r=new Blob([e],{type:"application/pdf"}),a=URL.createObjectURL(r),d=document.createElement("a");d.href=a,d.download=`financial-report-${C.startDate.toISOString().split("T")[0]}.pdf`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(a)}else if("csv"===C.format){const t=await s.exportToCSV(C.includeTransactions?e:p,C),r=new Blob([t],{type:"text/csv"}),a=URL.createObjectURL(r),d=document.createElement("a");d.href=a,d.download=`export-${C.startDate.toISOString().split("T")[0]}.csv`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(a)}}catch(t){console.error("Export failed:",t),alert("Export failed. Please try again.")}finally{w(!1)}},disabled:f,className:"flex items-center gap-2 px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 disabled:opacity-50",children:[f?r.jsx(c,{size:16,className:"animate-spin"}):r.jsx(d,{size:16}),f?"Generating...":"Export Now"]}),r.jsxs("button",{onClick:()=>{const e=prompt("Enter template name:");if(!e)return;const t=prompt("Enter template description (optional):")||"";s.createTemplate({name:e,description:t,options:C,isDefault:!1}),S()},className:"flex items-center gap-2 px-4 py-3 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx(l,{size:16}),"Save as Template"]}),r.jsxs("button",{onClick:()=>{const e=prompt("Enter report name:");if(!e)return;const t=prompt("Enter email address:");if(!t)return;const r=prompt("Enter frequency (daily, weekly, monthly, quarterly):");["daily","weekly","monthly","quarterly"].includes(r)?(s.createScheduledReport({name:e,email:t,frequency:r,options:C,isActive:!0}),S()):alert("Invalid frequency")},className:"flex items-center gap-2 px-4 py-3 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx(i,{size:16}),"Schedule Report"]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Preview"}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),r.jsxs("span",{className:"text-gray-900 dark:text-white",children:[T(C.startDate)," - ",T(C.endDate)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Format:"}),r.jsx("span",{className:"text-gray-900 dark:text-white uppercase",children:C.format})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Transactions:"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:C.includeTransactions?e.length:0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Accounts:"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:C.includeAccounts?p.length:0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Investments:"}),r.jsx("span",{className:"text-gray-900 dark:text-white",children:C.includeInvestments?u.length:0})]})]})]})]}),"templates"===y&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Export Templates"}),r.jsxs("button",{onClick:()=>b("export"),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[r.jsx(o,{size:16}),"Create Template"]})]})}),r.jsx("div",{className:"p-6",children:0===j.length?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(l,{size:48,className:"mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No templates created yet"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(e=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white",children:[e.name,e.isDefault&&r.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200 px-2 py-1 rounded",children:"Default"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>(e=>{D({...e.options,startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1),endDate:new Date}),b("export")})(e),className:"p-1 text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300",title:"Use template",children:r.jsx(x,{size:14})}),r.jsx("button",{onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this template?")&&(s.deleteTemplate(t),S()));var t},className:"p-1 text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",title:"Delete template",disabled:e.isDefault,children:r.jsx(m,{size:14})})]})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[r.jsxs("div",{children:["Format: ",e.options.format.toUpperCase()]}),r.jsxs("div",{children:["Includes: ",[e.options.includeTransactions&&"Transactions",e.options.includeAccounts&&"Accounts",e.options.includeInvestments&&"Investments",e.options.includeBudgets&&"Budgets",e.options.includeCharts&&"Charts"].filter(Boolean).join(", ")]}),r.jsxs("div",{children:["Created: ",T(e.createdAt)]})]})]},e.id))})})]}),"scheduled"===y&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Scheduled Reports"}),r.jsxs("button",{onClick:()=>b("export"),className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90",children:[r.jsx(o,{size:16}),"Schedule Report"]})]})}),r.jsx("div",{className:"p-6",children:0===k.length?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(i,{size:48,className:"mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No scheduled reports"})]}):r.jsx("div",{className:"space-y-4",children:k.map(e=>r.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),r.jsx("span",{className:"text-xs px-2 py-1 rounded "+(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"),children:e.isActive?"Active":"Paused"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600 dark:text-gray-400",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Email"}),r.jsx("div",{children:e.email})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Frequency"}),r.jsx("div",{className:"capitalize",children:e.frequency})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Next Run"}),r.jsx("div",{children:A(e.nextRun)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Last Run"}),r.jsx("div",{children:e.lastRun?A(e.lastRun):"Never"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx("button",{onClick:()=>(e=>{const t=k.find(t=>t.id===e);t&&(s.updateScheduledReport(e,{isActive:!t.isActive}),S())})(e.id),className:"p-2 rounded "+(e.isActive?"text-yellow-600 dark:text-yellow-400 hover:text-yellow-900 dark:hover:text-yellow-300":"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300"),title:e.isActive?"Pause report":"Resume report",children:e.isActive?r.jsx(h,{size:16}):r.jsx(x,{size:16})}),r.jsx("button",{onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this scheduled report?")&&(s.deleteScheduledReport(t),S()));var t},className:"p-2 text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",title:"Delete report",children:r.jsx(m,{size:16})})]})]})},e.id))})})]}),"history"===y&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Export History"}),r.jsxs("div",{className:"text-center py-8",children:[r.jsx(n,{size:48,className:"mx-auto mb-4 text-gray-400"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Export history will be displayed here"}),r.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"This feature tracks all generated exports and scheduled report deliveries"})]})]})]})})}import{r as t,H as r}from"./chunk-DowOIOga.js";import{a,aI as s,ay as d,aH as l,aF as i,C as n,ac as c,$ as o,al as x,ao as m,am as h}from"./index-qHm2isZb.js";import{P as g}from"./chunk-r7IQz9KP.js";import"./chunk-ddLY9KjI.js";import"./chunk-B5pcS96K.js";export{e as default};
