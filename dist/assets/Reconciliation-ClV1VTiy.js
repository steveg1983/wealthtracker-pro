function e({title:e,content:t,position:a="top",className:l="",iconSize:n=16,showOnHover:o=!0}){const[c,x]=r.useState(!1);return s.jsxs("div",{className:`relative inline-flex items-center ${l}`,children:[s.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors p-1",onMouseEnter:()=>o&&x(!0),onMouseLeave:()=>o&&x(!1),onClick:()=>!o&&x(!c),"aria-label":`Help: ${e}`,children:s.jsx(i,{size:n})}),c&&s.jsx("div",{className:`absolute z-50 ${(()=>{switch(a){case"top":default:return"bottom-full left-1/2 transform -translate-x-1/2 mb-2";case"bottom":return"top-full left-1/2 transform -translate-x-1/2 mt-2";case"left":return"right-full top-1/2 transform -translate-y-1/2 mr-2";case"right":return"left-full top-1/2 transform -translate-y-1/2 ml-2"}})()} pointer-events-none`,style:{minWidth:"250px",maxWidth:"350px"},children:s.jsxs("div",{className:"bg-gray-900 dark:bg-gray-800 text-white rounded-lg shadow-xl p-3 pointer-events-auto",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"font-semibold text-sm",children:e}),!o&&s.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-white transition-colors","aria-label":"Close help tooltip",children:s.jsx(d,{size:14})})]}),s.jsx("div",{className:"text-xs text-gray-300 leading-relaxed",children:t}),s.jsx("div",{className:`absolute ${(()=>{switch(a){case"top":default:return"top-full left-1/2 transform -translate-x-1/2 -mt-1";case"bottom":return"bottom-full left-1/2 transform -translate-x-1/2 -mb-1 rotate-180";case"left":return"left-full top-1/2 transform -translate-y-1/2 -ml-1 -rotate-90";case"right":return"right-full top-1/2 transform -translate-y-1/2 -mr-1 rotate-90"}})()}`,children:s.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900 dark:border-t-gray-800"})})]})})]})}function t({value:e,onChange:t,categories:a,className:r="",disabled:l=!1,showUncategorized:n=!0,showMultiple:i=!1,placeholder:d="Select category"}){return s.jsxs("select",{value:e,onChange:e=>t(e.target.value),className:r,disabled:l,children:[n&&s.jsx("option",{value:"",children:"Uncategorized"}),i&&s.jsx("option",{value:"multiple",children:"Multiple"}),d&&!n&&!e&&s.jsx("option",{value:"",disabled:!0,children:d}),a.filter(e=>"type"===e.level).map(e=>{const t=a.filter(t=>"sub"===t.level&&t.parentId===e.id);if(t.length>0)return t.map(t=>s.jsx("optgroup",{label:`${e.name} > ${t.name}`,children:a.filter(e=>"detail"===e.level&&e.parentId===t.id).map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))},t.id));{const t=a.filter(t=>"detail"===t.level&&t.parentId===e.id);if(t.length>0)return s.jsx("optgroup",{label:e.name,children:t.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))},e.id)}return null}),a.filter(e=>!e.parentId&&"type"!==e.level).map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})}function a(){const{transactions:a,accounts:i,updateTransaction:k,categories:w}=o(),{formatCurrency:S}=N(),[C,z]=l(),M=n(),[D,I]=r.useState(C.get("account")||null),[A,F]=r.useState(!1),[T,L]=r.useState(null),[R,$]=r.useState(1),[E,U]=r.useState(20),[O,B]=r.useState(new Set),[H,P]=r.useState({}),[V,W]=r.useState(!1),[Y,q]=r.useState(null),[G,Q]=r.useState([]),[X,J]=r.useState(""),[K,Z]=r.useState(""),[_,ee]=r.useState(""),[te,ae]=r.useState(""),[re,se]=r.useState(""),[le,ne]=r.useState(""),[ie,de]=r.useState(!1),{reconciliationDetails:oe,totalUnreconciledCount:ce,getUnreconciledCount:xe}=function(e,t){const a=r.useMemo(()=>((e,t)=>e.map(e=>{const a=t.filter(t=>t.accountId===e.id),r=a.filter(e=>!0!==e.cleared),s=r.length,l=r.reduce((e,t)=>e+Math.abs(t.amount),0),n=a.length>0?new Date(Math.max(...a.map(e=>new Date(e.date).getTime()))):null;return{account:e,unreconciledCount:s,totalToReconcile:l,lastImportDate:n}}).filter(e=>e.unreconciledCount>0))(e,t),[e,t]);return{reconciliationDetails:a,totalUnreconciledCount:r.useMemo(()=>t.filter(e=>!0!==e.cleared).length,[t]),getUnreconciledCount:r.useMemo(()=>e=>t.filter(t=>t.accountId===e&&!0!==t.cleared).length,[t])}}(i,a),me=r.useMemo(()=>{let e=D?a.filter(e=>e.accountId===D&&!e.cleared):[];if(X){const t=X.toLowerCase();e=e.filter(e=>e.description.toLowerCase().includes(t)||e.notes?.toLowerCase().includes(t)||e.merchant?.toLowerCase().includes(t))}if(K&&(e=e.filter(e=>("string"==typeof e.date?e.date:e.date.toISOString().split("T")[0])>=K)),_&&(e=e.filter(e=>("string"==typeof e.date?e.date:e.date.toISOString().split("T")[0])<=_)),te){const t=parseFloat(te);e=e.filter(e=>Math.abs(e.amount)>=t)}if(re){const t=parseFloat(re);e=e.filter(e=>Math.abs(e.amount)<=t)}return le&&(e=e.filter(e=>e.category===le)),e},[D,a,X,K,_,te,re,le]),ge=Math.ceil(me.length/E),ue=(R-1)*E,he=ue+E,pe=me.slice(ue,he);r.useEffect(()=>{$(1),B(new Set),ye()},[D]);const ye=()=>{J(""),Z(""),ee(""),ae(""),se(""),ne("")},be=e=>{const t=a.find(t=>t.id===e);if(!t)return;const r=H[e],s=r?{...t,...r}:t;k(t.id,{...s,cleared:!0}),B(t=>{const a=new Set(t);return a.delete(e),a}),P(t=>{const a={...t};return delete a[e],a})},je=(e,t,a)=>{P(r=>({...r,[e]:{...r[e],[t]:a}}))},fe=e=>{const t=a.find(t=>t.id===e),r=H[e];t&&r&&(k(t.id,{...t,...r}),P(t=>{const a={...t};return delete a[e],a}))},ve=(e,t,a)=>{Q(G.map(r=>r.id===e?{...r,[t]:a}:r))},Ne=()=>{if(!Y)return!1;const e=G.reduce((e,t)=>e+parseFloat(t.amount.toString()||"0"),0);return Math.abs(e-Y.amount)<.01},ke=()=>{I(null);const e="true"===new URLSearchParams(M.search).get("demo");z(e?{demo:"true"}:{})};if(!D)return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"bg-secondary dark:bg-gray-700 rounded-2xl shadow p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Reconciliation"}),s.jsx(e,{title:"Account Reconciliation",content:"Match your transactions with bank statements to ensure accuracy. Mark transactions as cleared when they appear on your statement. This helps identify missing or duplicate transactions.",position:"right",iconSize:20})]})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Select an account below to reconcile imported bank transactions"})]}),0===oe.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow p-12 text-center",children:[s.jsx(c,{className:"mx-auto text-green-500 mb-4",size:48}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"All caught up!"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"All bank transactions have been reconciled across all accounts."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-4 mb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:"Reconciliation Summary"}),s.jsxs("p",{className:"text-blue-700 dark:text-blue-300 mt-1",children:["You have ",ce," transactions to reconcile across ",oe.length," accounts"]})]}),s.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:ce})]})}),s.jsx("div",{className:"pt-4",children:s.jsx("div",{className:"grid gap-4",children:oe.map(({account:e,unreconciledCount:t,totalToReconcile:a,lastImportDate:r})=>{return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>(e=>{I(e);const t={account:e};"true"===new URLSearchParams(M.search).get("demo")&&(t.demo="true"),z(t)})(e.id),children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:["credit"===e.type?s.jsx(x,{className:"text-gray-400",size:24}):s.jsx(m,{className:"text-gray-400",size:24}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.institution," \u2022 Last import: ",(l=r,l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A")]})]})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Transactions to reconcile"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total amount"}),s.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:S(a)})]})]})]}),s.jsx(g,{size:24,className:"text-gray-400"})]})})},e.id);var l})})})]})]});const we=i.find(e=>e.id===D),Se=D?xe(D):0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(f,{onClick:ke,icon:s.jsx(u,{size:24}),variant:"ghost",size:"md",className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100"}),s.jsxs("div",{className:"bg-secondary dark:bg-gray-700 rounded-2xl shadow p-4",children:[s.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Reconcile ",we?.name]}),s.jsx("p",{className:"text-sm text-white/80",children:we?.institution})]})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Se," items to reconcile"]})]}),0===me.length?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-12 text-center",children:[s.jsx(c,{className:"mx-auto text-green-500 mb-4",size:48}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"Account reconciled!"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["All transactions for ",we?.name," have been reconciled."]}),s.jsx("button",{onClick:ke,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary",children:"Back to Accounts"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow p-4 mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Quick Filters"}),s.jsx("button",{onClick:()=>de(!ie),className:"text-sm text-primary hover:text-secondary",children:ie?"Hide Filters":"Show Filters"})]}),ie&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-4",children:s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Search transactions...",value:X,onChange:e=>J(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"From Date"}),s.jsx("input",{type:"date",value:K,onChange:e=>Z(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"To Date"}),s.jsx("input",{type:"date",value:_,onChange:e=>ee(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Min Amount"}),s.jsx("input",{type:"number",placeholder:"0.00",value:te,onChange:e=>ae(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Max Amount"}),s.jsx("input",{type:"number",placeholder:"0.00",value:re,onChange:e=>se(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Category"}),s.jsxs("select",{value:le,onChange:e=>ne(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[s.jsx("option",{value:"",children:"All Categories"}),w.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:ye,className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Clear all filters"})})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>{const e=pe.map(e=>e.id);e.every(e=>O.has(e))?B(t=>{const a=new Set(t);return e.forEach(e=>a.delete(e)),a}):B(t=>{const a=new Set(t);return e.forEach(e=>a.add(e)),a})},className:"text-sm text-primary hover:text-secondary",children:pe.every(e=>O.has(e.id))?"Deselect All":"Select All"}),O.size>0&&s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[O.size," selected"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("select",{value:E,onChange:e=>{U(Number(e.target.value)),$(1)},className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[s.jsx("option",{value:10,children:"10 per page"}),s.jsx("option",{value:20,children:"20 per page"}),s.jsx("option",{value:50,children:"50 per page"}),s.jsx("option",{value:100,children:"100 per page"})]}),O.size>0&&s.jsxs("button",{onClick:()=>{O.forEach(e=>{be(e)})},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center gap-2",children:[s.jsx(c,{size:18}),"Reconcile Selected (",O.size,")"]})]})]})}),s.jsx("div",{className:"space-y-4",children:pe.map(e=>{const r=H[e.id]||{},l=r.date||e.date,n=void 0!==r.description?r.description:e.description,i=void 0!==r.category?r.category:e.category,d=void 0!==r.isSplit?r.isSplit:e.isSplit;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"pt-5",children:s.jsx("input",{type:"checkbox",checked:O.has(e.id),onChange:()=>{return t=e.id,void B(e=>{const a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a});var t},className:"rounded text-primary focus:ring-primary"})}),s.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-3",children:[s.jsxs("div",{className:"col-span-12 md:col-span-2",children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Date"}),s.jsx("input",{type:"date",value:l instanceof Date?l.toISOString().split("T")[0]:l,onChange:t=>je(e.id,"date",t.target.value),className:"w-full px-2 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded focus:outline-none focus:ring-2 focus:ring-primary"})]}),s.jsxs("div",{className:"col-span-12 md:col-span-4",children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Description"}),s.jsx("input",{type:"text",value:n,onChange:t=>je(e.id,"description",t.target.value),className:"w-full px-2 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded focus:outline-none focus:ring-2 focus:ring-primary"})]}),s.jsxs("div",{className:"col-span-12 md:col-span-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Category"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"checkbox",id:`split-${e.id}`,checked:d||!1,onChange:()=>(e=>{const t=a.find(t=>t.id===e);t&&(q(t),Q([{id:"1",description:t.description,category:t.category||"",amount:t.amount}]),W(!0))})(e.id),className:"rounded text-primary focus:ring-primary h-3 w-3"}),s.jsx("label",{htmlFor:`split-${e.id}`,className:"text-xs text-gray-500 dark:text-gray-400 cursor-pointer",children:"Split"})]})]}),s.jsx(t,{value:i||"",onChange:t=>je(e.id,"category",t),categories:w,className:"w-full px-2 py-2 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded focus:outline-none focus:ring-2 focus:ring-primary",disabled:d,showMultiple:d})]})]}),s.jsxs("div",{className:"flex flex-col items-end ml-auto",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r&&Object.keys(r).length>0&&s.jsxs("div",{className:"relative group",children:[s.jsx("button",{onClick:()=>fe(e.id),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:s.jsx(c,{size:18})}),s.jsxs("div",{className:"absolute invisible group-hover:visible bg-gray-800 text-white text-xs rounded py-1 px-2 bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap z-10",children:["Save changes",s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:s.jsx("div",{className:"border-4 border-transparent border-t-gray-800"})})]})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("button",{className:(e.isImported?"text-blue-600 dark:text-blue-400":"text-gray-300 dark:text-gray-600")+" cursor-default",children:s.jsx(h,{size:18,className:e.isImported?"fill-current":""})}),e.isImported&&s.jsxs("div",{className:"absolute invisible group-hover:visible bg-gray-800 text-white text-xs rounded py-1 px-2 bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap z-10",children:["Bank Statement",s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:s.jsx("div",{className:"border-4 border-transparent border-t-gray-800"})})]})]}),s.jsxs("div",{className:"relative group",children:[s.jsx(f,{onClick:()=>(e=>{L(e),F(!0)})(e),icon:s.jsx(p,{size:18}),variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}),s.jsxs("div",{className:"absolute invisible group-hover:visible bg-gray-800 text-white text-xs rounded py-1 px-2 bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap z-10",children:["Advanced edit",s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:s.jsx("div",{className:"border-4 border-transparent border-t-gray-800"})})]})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("button",{onClick:()=>be(e.id),className:"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300",children:s.jsx(c,{size:20,className:"font-bold"})}),s.jsxs("div",{className:"absolute invisible group-hover:visible bg-gray-800 text-white text-xs rounded py-1 px-2 bottom-6 left-1/2 transform -translate-x-1/2 whitespace-nowrap z-10",children:["Mark as reconciled",s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:s.jsx("div",{className:"border-4 border-transparent border-t-gray-800"})})]})]})]}),s.jsxs("div",{className:"text-lg font-bold whitespace-nowrap text-right "+("income"===e.type?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["income"===e.type?"+":"-",S(e.amount)]})]})]}),e.notes&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:"Notes:"})," ",e.notes]})})]},e.id)})}),ge>1&&s.jsx("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-2xl shadow px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",ue+1," to ",Math.min(he,me.length)," of ",me.length," transactions"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>$(e=>Math.max(1,e-1)),disabled:1===R,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(y,{size:20,className:"text-gray-600 dark:text-gray-400"})}),s.jsxs("span",{className:"px-3 py-1 text-sm text-gray-700 dark:text-gray-300",children:["Page ",R," of ",ge]}),s.jsx("button",{onClick:()=>$(e=>Math.min(ge,e+1)),disabled:R===ge,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(g,{size:20,className:"text-gray-600 dark:text-gray-400"})})]})]})})]}),s.jsx(v,{isOpen:A,onClose:()=>{F(!1),L(null)},transaction:T}),V&&Y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Split Transaction"}),s.jsx("button",{onClick:()=>{W(!1),q(null),Q([])},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:s.jsx(d,{size:24})})]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Original amount: ",S(Y.amount)]})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),s.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),s.jsx("th",{className:"text-right py-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount"}),s.jsx("th",{className:"w-10"})]})}),s.jsx("tbody",{children:G.map(e=>s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("td",{className:"py-2 pr-2",children:s.jsx("input",{type:"text",value:e.description,onChange:t=>ve(e.id,"description",t.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Description"})}),s.jsx("td",{className:"py-2 px-2",children:s.jsx(t,{value:e.category,onChange:t=>ve(e.id,"category",t),categories:w,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Select category"})}),s.jsx("td",{className:"py-2 pl-2",children:s.jsx("input",{type:"number",value:0===e.amount?"":e.amount,onChange:t=>ve(e.id,"amount",parseFloat(t.target.value)||0),onFocus:t=>{0===e.amount&&(t.target.value="")},className:"w-full px-2 py-1 text-sm text-right border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded focus:outline-none focus:ring-2 focus:ring-primary",step:"0.01",placeholder:"0.00"})}),s.jsx("td",{className:"py-2 pl-2",children:s.jsx("button",{onClick:()=>{return t=e.id,void(G.length>1&&Q(G.filter(e=>e.id!==t)));var t},className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",disabled:1===G.length,children:s.jsx(b,{size:16})})})]},e.id))})]}),s.jsxs("button",{onClick:()=>{const e=(Math.max(...G.map(e=>parseInt(e.id)))+1).toString();Q([...G,{id:e,description:"",category:"",amount:0}])},className:"mt-4 flex items-center gap-2 text-sm text-primary hover:text-secondary",children:[s.jsx(j,{size:16}),"Add line"]})]}),s.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total allocated: "}),s.jsx("span",{className:"font-medium "+(Ne()?"text-green-600":"text-gray-900 dark:text-gray-100"),children:S(G.reduce((e,t)=>e+parseFloat(t.amount.toString()||"0"),0))})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining to allocate: "}),s.jsx("span",{className:"font-medium "+(Math.abs(Y.amount-G.reduce((e,t)=>e+parseFloat(t.amount.toString()||"0"),0))<.01?"text-green-600":"text-red-600"),children:S(Y.amount-G.reduce((e,t)=>e+parseFloat(t.amount.toString()||"0"),0))})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{W(!1),q(null),Q([])},className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:()=>{Y&&(Ne()?(je(Y.id,"description","Various"),je(Y.id,"category","multiple"),fe(Y.id),G.forEach(()=>{}),W(!1),q(null),Q([])):alert("Split amounts must equal the original transaction amount"))},disabled:!Ne(),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Split"})]})]})})]})})]})}import{r,L as s,cz as l,bV as n}from"./chunk-Bcp2Zi4E.js";import{a0 as i,X as d,a as o,v as c,o as x,a1 as m,N as g,a2 as u,a3 as h,E as p,L as y,D as b,$ as j}from"./index-LbveD3Go.js";import{I as f}from"./chunk-C0I5QuPi.js";import v from"./EditTransactionModal-DPoL-VDj.js";import{u as N}from"./chunk-BlSolNAr.js";import"./chunk-oUGr0aFc.js";import"./chunk-a7oqB5tI.js";import"./chunk-B5pcS96K.js";import"./chunk-DvlxlOTC.js";import"./chunk-DvhQ4I67.js";import"./chunk-DCDlgwkd.js";const k=new Date;k.getMonth(),k.getFullYear();export{a as default};
