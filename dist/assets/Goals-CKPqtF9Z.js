function e({isOpen:e,onClose:t,goal:r}){const{addGoal:a,updateGoal:s,accounts:g}=n(),{formData:m,updateField:h,handleSubmit:u,setFormData:b}=d({name:"",type:"savings",targetAmount:"",currentAmount:"",targetDate:"",description:"",linkedAccountIds:[],isActive:!0},{onSubmit:e=>{const t={name:e.name,type:e.type,targetAmount:parseFloat(e.targetAmount)||0,currentAmount:parseFloat(e.currentAmount)||0,targetDate:new Date(e.targetDate),description:e.description||void 0,linkedAccountIds:e.linkedAccountIds.length>0?e.linkedAccountIds:void 0,isActive:e.isActive,createdAt:r?.createdAt||new Date};r?s(r.id,t):a(t)},onClose:t});return l.useEffect(()=>{if(r){let e="";r.targetDate&&(r.targetDate instanceof Date?e=r.targetDate.toISOString().split("T")[0]:"string"==typeof r.targetDate&&(e=r.targetDate.split("T")[0])),b({name:r.name,type:r.type,targetAmount:r.targetAmount.toString(),currentAmount:r.currentAmount.toString(),targetDate:e,description:r.description||"",linkedAccountIds:r.linkedAccountIds||[],isActive:r.isActive})}else b({name:"",type:"savings",targetAmount:"",currentAmount:"",targetDate:"",description:"",linkedAccountIds:[],isActive:!0})},[r,e,b]),i.jsx(c,{isOpen:e,onClose:t,title:r?"Edit Goal":"Create New Goal",size:"md",children:i.jsxs("form",{onSubmit:u,children:[i.jsxs(o,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Goal Name"}),i.jsx("input",{type:"text",required:!0,value:m.name,onChange:e=>h("name",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",placeholder:"e.g., Emergency Fund"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Goal Type"}),i.jsxs("select",{value:m.type,onChange:e=>h("type",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:[i.jsx("option",{value:"savings",children:"Savings Goal"}),i.jsx("option",{value:"debt-payoff",children:"Debt Payoff"}),i.jsx("option",{value:"investment",children:"Investment Target"}),i.jsx("option",{value:"custom",children:"Custom Goal"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Amount (\xa3)"}),i.jsx("input",{type:"number",step:"0.01",required:!0,value:m.currentAmount,onChange:e=>h("currentAmount",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Amount (\xa3)"}),i.jsx("input",{type:"number",step:"0.01",required:!0,value:m.targetAmount,onChange:e=>h("targetAmount",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",placeholder:"0.00"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Date"}),i.jsx("input",{type:"date",required:!0,value:m.targetDate,onChange:e=>h("targetDate",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),i.jsx("textarea",{value:m.description,onChange:e=>h("description",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",rows:3,placeholder:"What is this goal for?"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link to Accounts (Optional)"}),i.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:g.map(e=>i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:m.linkedAccountIds.includes(e.id),onChange:()=>{return t=e.id,void h("linkedAccountIds",m.linkedAccountIds.includes(t)?m.linkedAccountIds.filter(e=>e!==t):[...m.linkedAccountIds,t]);var t},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.name," (",e.type,")"]})]},e.id))})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:m.isActive,onChange:e=>h("isActive",e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active Goal"})]})})]}),i.jsx(x,{children:i.jsxs("div",{className:"flex justify-end space-x-3 w-full",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-2xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:r?"Update Goal":"Create Goal"})]})})]})})}function t({isActive:e,duration:t=3e3,onComplete:r}){const a=l.useRef(null),s=l.useRef(0),n=l.useRef([]),d=l.useRef(0),c=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#FFD93D","#6BCF7F"];return l.useEffect(()=>{if(!e)return;const l=a.current;if(!l)return;const i=l.getContext("2d");if(!i)return;l.width=window.innerWidth,l.height=window.innerHeight,n.current=[],d.current=Date.now();for(let e=0;e<150;e++)n.current.push({x:l.width/2,y:l.height/2,vx:15*(Math.random()-.5),vy:-15*Math.random()-5,color:c[Math.floor(Math.random()*c.length)],angle:360*Math.random(),angularVelocity:10*(Math.random()-.5),size:6*Math.random()+4,lifetime:1});const o=()=>{i.clearRect(0,0,l.width,l.height),n.current=n.current.filter(e=>(e.x+=e.vx,e.y+=e.vy,e.vy+=.5,e.angle+=e.angularVelocity,e.lifetime-=.02,!(e.lifetime<=0)&&(i.save(),i.translate(e.x,e.y),i.rotate(e.angle*Math.PI/180),i.globalAlpha=e.lifetime,i.fillStyle=e.color,i.fillRect(-e.size/2,-e.size/2,e.size,e.size),i.restore(),e.y<l.height&&e.lifetime>0))),Date.now()-d.current<t&&n.current.length>0?s.current=requestAnimationFrame(o):r?.()};return o(),()=>{s.current&&cancelAnimationFrame(s.current)}},[e,t,r]),e?i.jsx("canvas",{ref:a,className:"fixed inset-0 pointer-events-none z-50",style:{width:"100%",height:"100%"}}):null}function r({isOpen:e,onClose:t,goal:r,message:a}){const{formatCurrency:s}=A();return l.useEffect(()=>{if(e){const e=setTimeout(()=>{t()},5e3);return()=>clearTimeout(e)}},[e,t]),i.jsx(c,{isOpen:e,onClose:t,title:"",size:"sm",children:i.jsxs("div",{className:"text-center py-6",children:[i.jsxs("div",{className:"relative inline-block mb-6",children:[i.jsx("div",{className:"animate-bounce",children:i.jsx("span",{className:"text-6xl",children:"\ud83c\udfc6"})}),i.jsx("div",{className:"absolute -top-2 -right-2 animate-pulse",children:i.jsx(g,{size:32,className:"text-green-500"})})]}),i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("span",{className:"text-4xl",children:(e=>{switch(e){case"savings":return"\ud83d\udcb0";case"debt-payoff":return"\ud83d\udcb3";case"investment":return"\ud83d\udcc8";case"custom":return"\ud83c\udfaf"}})(r.type)}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.name})]}),i.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6",children:a}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Target Achieved"}),i.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:s(r.targetAmount)})]}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"}),i.jsxs("button",{onClick:()=>{t()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"Share Achievement"}),i.jsx("span",{children:"\ud83c\udf89"})]})]})]})})}function a(){const{formatCurrency:e}=A(),t=C.getAchievements(),r=C.getAchievementStats(),a=e=>{switch(e){case"savings":return"\ud83d\udcb0";case"debt-payoff":return"\ud83d\udcb3";case"investment":return"\ud83d\udcc8";default:return"\ud83c\udfaf"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Achieved"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.total})]}),i.jsx("span",{className:"text-2xl",children:"\ud83c\udfc6"})]})}),i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"This Month"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.thisMonth})]}),i.jsx("span",{className:"text-2xl",children:"\ud83d\udcc5"})]})}),i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"This Year"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.thisYear})]}),i.jsx("span",{className:"text-2xl",children:"\ud83c\udf8a"})]})}),i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Savings Goals"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.byType.savings||0})]}),i.jsx("span",{className:"text-2xl",children:"\ud83d\udcb0"})]})})]}),i.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Achievement Timeline"}),0===t.length?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(g,{size:48,className:"text-gray-300 dark:text-gray-600 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No achievements yet. Keep working towards your goals!"})]}):i.jsx("div",{className:"space-y-4",children:t.sort((e,t)=>new Date(t.achievedAt).getTime()-new Date(e.achievedAt).getTime()).map((t,r)=>{return i.jsxs("div",{className:"flex items-start gap-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-800/50 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xl",children:a(t.type)})})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.goalName}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mt-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(m,{size:14}),(s=t.achievedAt,new Date(s).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}))]}),i.jsx("span",{className:"capitalize",children:t.type.replace("-"," ")})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:e(t.targetAmount)})})]},`${t.goalId}-${r}`);var s})})]})]})}function s(){const{goals:s,deleteGoal:d,getDecimalGoals:c,getDecimalAccounts:o}=n(),{formatCurrency:x}=A(),{addNotification:g,checkGoalProgress:D}=h(),{enableGoalCelebrations:S}=u(),[E,T]=l.useState(!1),[G,I]=l.useState(),[M,Y]=l.useState(!1),[F,z]=l.useState(null),[O,B]=l.useState(""),[$,R]=l.useState(!1),[L,K]=l.useState([]);l.useEffect(()=>{s.length>0&&L.length>0&&D(s,L),K([...s])},[s,D]);const W=e=>{I(e),T(!0)},P=e=>{confirm("Are you sure you want to delete this goal?")&&d(e)},_=e=>{const t=c().find(t=>t.id===e.id);return t?w(t):0},J=e=>{switch(e){case"savings":return"\ud83d\udcb0";case"debt-payoff":return"\ud83d\udcb3";case"investment":return"\ud83d\udcc8";case"custom":return"\ud83c\udfaf"}},q=s.filter(e=>e.isActive),H=s.filter(e=>!e.isActive||_(e)>=100);l.useEffect(()=>{S&&q.forEach(e=>{const t=_(e);if(t>=100&&!C.hasBeenCelebrated(e.id)){C.recordAchievement(e),C.markAsCelebrated(e.id);const t=C.getCelebrationMessage(e);B(t),z(e),Y(!0),g({id:`goal-achieved-${e.id}`,type:"success",title:"Goal Achieved! \ud83c\udf89",message:`Congratulations! You've achieved your goal: ${e.name}`,timestamp:new Date,persistent:!0})}const r=C.getMilestoneMessage(t);r&&!sessionStorage.getItem(`milestone-${e.id}-${25*Math.floor(t/25)}`)&&(sessionStorage.setItem(`milestone-${e.id}-${25*Math.floor(t/25)}`,"true"),g({id:`goal-milestone-${e.id}-${Date.now()}`,type:"info",title:"Goal Progress",message:`${e.name}: ${r}`,timestamp:new Date}))})},[q,g,S]);const V=c().filter(e=>{const t=s.find(t=>t.id===e.id);return t?.isActive}),U=V.reduce((e,t)=>e.plus(t.targetAmount),b(0)),Q=V.reduce((e,t)=>e.plus(t.currentAmount),b(0)),X=U.greaterThan(0)?Q.dividedBy(U).times(100).toNumber():0;return i.jsxs(N,{title:"Goals",rightContent:i.jsx("div",{onClick:()=>T(!0),className:"cursor-pointer",title:"Add Goal",children:i.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"transition-all duration-200 hover:scale-110 drop-shadow-lg hover:drop-shadow-xl",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"},children:[i.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"#D9E1F2",className:"transition-all duration-200",onMouseEnter:e=>e.currentTarget.setAttribute("fill","#C5D3E8"),onMouseLeave:e=>e.currentTarget.setAttribute("fill","#D9E1F2")}),i.jsx("g",{transform:"translate(12, 12)",children:i.jsx("path",{d:"M12 5v14M5 12h14",stroke:"#1F2937",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),children:[i.jsxs("div",{className:"grid gap-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Active Goals"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:q.length})]}),i.jsx(p,{className:"h-8 w-8 text-blue-600"})]})}),i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Target"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x(U)})]}),i.jsx(y,{className:"h-8 w-8 text-green-600"})]})}),i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Saved"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x(Q)})]}),i.jsx("div",{className:"relative h-8 w-8",children:i.jsxs("svg",{className:"h-8 w-8 transform -rotate-90",children:[i.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"#e5e7eb",strokeWidth:"4",fill:"none"}),i.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"#3b82f6",strokeWidth:"4",fill:"none",strokeDasharray:.88*X+" 88"})]})})]})}),i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Completed"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:H.length})]}),i.jsx("div",{className:"text-2xl",children:"\ud83c\udfc6"})]})})]}),i.jsxs("div",{className:"pt-4",children:[q.length>0?i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-theme-heading dark:text-white mb-4",children:"Active Goals"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map(e=>{const t=_(e),r=(e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();return Math.ceil(r/864e5)})(e.targetDate),a=(e=>{if(!e||0===e.length)return b(0);const t=o();return e.reduce((e,r)=>{const a=t.find(e=>e.id===r);return a?e.plus(a.balance):e},b(0))})(e.linkedAccountIds);return i.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-2xl",children:J(e.type)}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:e.type.replace("-"," ")})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(k,{onClick:()=>W(e),icon:i.jsx(j,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"}),i.jsx(k,{onClick:()=>P(e.id),icon:i.jsx(v,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"})]})]}),e.description&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e.description}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress"}),i.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.toFixed(1),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(t>=100?"bg-green-600":t>=75?"bg-blue-600":t>=50?"bg-yellow-600":"bg-gray-400"),style:{width:`${t}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Current"}),i.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:x(e.currentAmount)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Target"}),i.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:x(e.targetAmount)})]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(m,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:r<30?"text-red-600":"text-gray-600 dark:text-gray-400",children:r>0?`${r} days left`:"Overdue"})]}),e.linkedAccountIds&&e.linkedAccountIds.length>0&&i.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:["Linked: ",x(a)]})]})]})]},e.id)})})]}):0===s.length?i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-12","data-testid":"empty-state",children:i.jsxs("div",{className:"text-center",children:[i.jsx(p,{className:"h-24 w-24 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No goals yet"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Set financial goals to track your progress towards savings targets, debt payoff, or investment milestones."}),i.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(f,{size:20}),i.jsx("span",{children:"Create Your First Goal"})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("div",{className:"text-2xl mb-2",children:"\ud83d\udcb0"}),i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Savings Goal"}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Build your emergency fund or save for a big purchase"})]}),i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[i.jsx("div",{className:"text-2xl mb-2",children:"\ud83d\udcb3"}),i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Debt Payoff"}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Track progress on paying down credit cards or loans"})]}),i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("div",{className:"text-2xl mb-2",children:"\ud83d\udcc8"}),i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Investment"}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Monitor your investment portfolio growth targets"})]})]})]})}):i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-12","data-testid":"empty-state",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-5xl mb-4",children:"\ud83c\udf89"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"All goals completed!"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Congratulations on achieving your goals! Ready to set new financial targets?"}),i.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(f,{size:20}),i.jsx("span",{children:"Set a New Goal"})]})]})}),H.length>0&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-theme-heading dark:text-white mb-4",children:"Completed Goals"}),i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50",children:i.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:H.map(e=>i.jsxs("div",{className:"p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xl opacity-50",children:J(e.type)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Completed \u2022 \xa3",e.targetAmount.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(k,{onClick:()=>W(e),icon:i.jsx(j,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"}),i.jsx(k,{onClick:()=>P(e.id),icon:i.jsx(v,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"})]})]},e.id))})})]}),s.length>0&&i.jsx("div",{className:"mt-6",children:i.jsxs("button",{onClick:()=>R(!$),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium flex items-center gap-2",children:[i.jsx("span",{children:"\ud83c\udfc6"}),$?"Hide":"View"," Achievement History"]})}),$&&i.jsx("div",{className:"mt-6",children:i.jsx(a,{})})]})]}),i.jsx(e,{isOpen:E,onClose:()=>{T(!1),I(void 0)},goal:G}),i.jsx(t,{isActive:M,duration:4e3,onComplete:()=>Y(!1)}),F&&i.jsx(r,{isOpen:!!F,onClose:()=>z(null),goal:F,message:O})]})}import{r as l,H as i}from"./chunk-DowOIOga.js";import{a as n,l as d,M as c,d as o,e as x,v as g,C as m,as as h,u,t as b,au as p,T as y,E as j,D as v,$ as f}from"./index-qHm2isZb.js";import{I as k}from"./chunk-EvPoNOTO.js";import{P as N}from"./chunk-r7IQz9KP.js";import{e as w}from"./chunk-BDkVMup3.js";import{u as A}from"./chunk-ByFoKVyi.js";import"./chunk-ddLY9KjI.js";import"./chunk-B5pcS96K.js";const C=new class{STORAGE_KEY="goalAchievements";CELEBRATED_KEY="celebratedGoals";getAchievements(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch{return[]}}recordAchievement(e){const t=this.getAchievements();t.some(t=>t.goalId===e.id)||(t.push({goalId:e.id,goalName:e.name,achievedAt:new Date,type:e.type,targetAmount:e.targetAmount}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)))}hasBeenCelebrated(e){try{const t=localStorage.getItem(this.CELEBRATED_KEY);return(t?JSON.parse(t):[]).includes(e)}catch{return!1}}markAsCelebrated(e){try{const t=localStorage.getItem(this.CELEBRATED_KEY),r=t?JSON.parse(t):[];r.includes(e)||(r.push(e),localStorage.setItem(this.CELEBRATED_KEY,JSON.stringify(r)))}catch{}}getCelebrationMessage(e){const t={savings:["Amazing! You've reached your savings goal! \ud83c\udf89","Congratulations! Your dedication to saving has paid off! \ud83d\udcb0","Well done! You've successfully hit your savings target! \ud83c\udf1f"],"debt-payoff":["Fantastic! You're one step closer to being debt-free! \ud83c\udf8a","Incredible achievement! Your debt reduction goal is complete! \ud83d\udcaa","Congratulations on paying off your debt! Freedom awaits! \ud83d\ude80"],investment:["Excellent! Your investment goal has been achieved! \ud83d\udcc8","Well done! Your portfolio has reached its target! \ud83d\udc8e","Success! Your investment strategy is paying off! \ud83c\udfc6"],custom:["Goal achieved! Your hard work has paid off! \ud83c\udfaf","Congratulations! You've successfully completed your goal! \u2b50","Amazing progress! Your custom goal is now complete! \ud83c\udf89"]}[e.type];return t[Math.floor(Math.random()*t.length)]}getAchievementStats(){const e=this.getAchievements();return{total:e.length,byType:e.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),thisMonth:e.filter(e=>{const t=new Date(e.achievedAt),r=new Date;return t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}).length,thisYear:e.filter(e=>{const t=new Date(e.achievedAt),r=new Date;return t.getFullYear()===r.getFullYear()}).length}}getMilestoneMessage(e){return e>=25&&e<30?"Great start! You're 25% of the way there! \ud83c\udfaf":e>=50&&e<55?"Halfway there! Keep up the momentum! \ud83d\udcaa":e>=75&&e<80?"Almost there! You're 75% complete! \ud83d\ude80":e>=90&&e<95?"So close! Just a little more to go! \ud83c\udf1f":null}};export{s as default};
