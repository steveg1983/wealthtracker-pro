function e({transactionId:e,accountId:t,onUploadComplete:g,onClose:m,compact:h=!1}){const[u,y]=k.useState([]),[p,b]=k.useState(!1),[j,f]=k.useState({}),[v,w]=k.useState([]),[C,D]=k.useState({}),[z,S]=k.useState("receipt"),[I,A]=k.useState([]),[T,U]=k.useState(""),[M,E]=k.useState(""),[B,O]=k.useState(!0),F=k.useRef(null),L=k.useCallback(e=>{const t=Array.from(e.target.files||[]);y(e=>[...e,...t]),e.target&&(e.target.value="")},[]),R=k.useCallback(e=>{e.preventDefault();const t=Array.from(e.dataTransfer.files);y(e=>[...e,...t])},[]),P=k.useCallback(e=>{e.preventDefault()},[]),$=()=>{T.trim()&&!I.includes(T.trim())&&(A([...I,T.trim()]),U(""))},W=e=>e.startsWith("image/")?a.jsx(x,{size:20,className:"text-blue-600"}):"application/pdf"===e?a.jsx(o,{size:20,className:"text-red-600"}):a.jsx(o,{size:20,className:"text-gray-600"});return h?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:F,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:L,className:"hidden"}),a.jsxs("button",{onClick:()=>F.current?.click(),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:[a.jsx(s,{size:16}),"Attach"]}),v.length>0&&a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[v.length," file",v.length>1?"s":""," attached"]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{onDrop:R,onDragOver:P,className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-gray-400 dark:hover:border-gray-500 transition-colors",children:[a.jsx(r,{size:48,className:"mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Drop files here or click to browse"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Supported: Images, PDFs, Word docs, Excel files (max 10MB)"}),a.jsxs("div",{className:"flex items-center justify-center gap-3",children:[a.jsx("input",{ref:F,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:L,className:"hidden"}),a.jsxs("button",{onClick:()=>F.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(r,{size:16}),"Select Files"]}),a.jsxs("button",{onClick:()=>{alert("Camera capture coming soon!")},className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:[a.jsx(l,{size:16}),"Take Photo"]})]})]}),u.length>0&&a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Document Type"}),a.jsxs("select",{value:z,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"receipt",children:"Receipt"}),a.jsx("option",{value:"invoice",children:"Invoice"}),a.jsx("option",{value:"statement",children:"Statement"}),a.jsx("option",{value:"contract",children:"Contract"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:I.map(e=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[a.jsx(d,{size:12}),e,a.jsx("button",{onClick:()=>(e=>{A(I.filter(t=>t!==e))})(e),className:"hover:text-red-600",children:a.jsx(n,{size:12})})]},e))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Add tag...",value:T,onChange:e=>U(e.target.value),onKeyPress:e=>"Enter"===e.key&&$(),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),a.jsx("button",{onClick:$,className:"px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500",children:"Add"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),a.jsx("textarea",{value:M,onChange:e=>E(e.target.value),placeholder:"Add any notes about these documents...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",rows:2})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:B,onChange:e=>O(e.target.checked),className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Extract data from documents (OCR)"})]})]}),u.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white",children:["Selected Files (",u.length,")"]}),u.map((e,t)=>{return a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[W(e.type),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.name}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:(s=e.size,s<1024?s+" B":s<1048576?Math.round(s/1024)+" KB":Math.round(s/1048576*10)/10+" MB")})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[void 0!==j[e.name]&&a.jsx("div",{className:"w-20",children:a.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${j[e.name]}%`}})})}),C[e.name]&&a.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:C[e.name]}),!p&&a.jsx("button",{onClick:()=>(e=>{y(t=>t.filter((t,a)=>a!==e));const t=u[e].name;D(e=>{const a={...e};return delete a[t],a})})(t),className:"text-gray-400 hover:text-red-600",children:a.jsx(n,{size:16})})]})]},t);var s})]}),v.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx(c,{size:16,className:"text-green-600"}),"Uploaded Documents (",v.length,")"]}),v.map(e=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[W(e.mimeType),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.fileName}),e.extractedData&&a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.extractedData.merchant&&`Merchant: ${e.extractedData.merchant}`,e.extractedData.totalAmount&&` \u2022 \xa3${e.extractedData.totalAmount}`]})]})]}),a.jsx(c,{size:20,className:"text-green-600"})]},e.id))]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{onClick:()=>{y([]),w([]),D({}),f({})},className:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Clear All"}),a.jsxs("div",{className:"flex gap-3",children:[m&&a.jsx("button",{onClick:m,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(0===u.length)return;b(!0),D({});const a=[];for(const r of u)try{f(e=>({...e,[r.name]:0}));const s=setInterval(()=>{f(e=>({...e,[r.name]:Math.min((e[r.name]||0)+10,90)}))},100),l={transactionId:e,accountId:t,type:z,tags:I,notes:M,extractData:B},d=await N.uploadDocument(r,l);clearInterval(s),f(e=>({...e,[r.name]:100})),a.push(d),g&&g(d)}catch(s){D(e=>({...e,[r.name]:s instanceof Error?s.message:"Upload failed"}))}w(e=>[...e,...a]),y([]),b(!1),setTimeout(()=>{f({})},1e3)},disabled:0===u.length||p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(i,{size:16,className:"animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(r,{size:16}),"Upload ",u.length," File",1!==u.length?"s":""]})})]})]})]})}function t({transactionId:t,accountId:l,compact:c=!1,onDocumentSelect:v}){const[w,C]=k.useState([]),[D,z]=k.useState([]),[S,I]=k.useState(null),[A,T]=k.useState(!1),[U,M]=k.useState(!1),[E,B]=k.useState(""),[O,F]=k.useState("all"),[L,R]=k.useState([]),[P,$]=k.useState(!1),[W,K]=k.useState(null),[V,X]=k.useState(null);k.useEffect(()=>{q(),G()},[t,l]),k.useEffect(()=>{Q()},[w,E,O,L]);const q=async()=>{$(!0);const e={};t&&(e.transactionId=t),l&&(e.accountId=l);const a=await N.getDocuments(e);C(a),$(!1)},G=()=>{const e=N.getStorageStats();X(e)},Q=()=>{let e=[...w];if("all"!==O&&(e=e.filter(e=>e.type===O)),L.length>0&&(e=e.filter(e=>L.some(t=>e.tags.includes(t)))),E){const t=E.toLowerCase();e=e.filter(e=>e.fileName.toLowerCase().includes(t)||e.notes?.toLowerCase().includes(t)||e.extractedData?.merchant?.toLowerCase().includes(t)||e.extractedData?.rawText?.toLowerCase().includes(t))}z(e)},Y=e=>{q(),G()},_=e=>new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),H=e=>e<1024?e+" B":e<1048576?Math.round(e/1024)+" KB":Math.round(e/1048576*10)/10+" MB",J=e=>e.startsWith("image/")?a.jsx(x,{size:20,className:"text-blue-600"}):"application/pdf"===e?a.jsx(o,{size:20,className:"text-red-600"}):a.jsx(o,{size:20,className:"text-gray-600"}),Z=e=>{switch(e){case"receipt":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"invoice":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"statement":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"contract":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}},ee=e=>{const t=window.document.createElement("a");t.href=e.fullUrl,t.download=e.fileName,t.click()},te=()=>{const e=new Set;return w.forEach(t=>t.tags.forEach(t=>e.add(t))),Array.from(e)};return c?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(s,{size:16,className:"text-gray-500"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Attachments (",w.length,")"]})]}),a.jsx(e,{transactionId:t,accountId:l,onUploadComplete:Y,compact:!0})]}),w.length>0&&a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.slice(0,4).map(e=>a.jsxs("button",{onClick:()=>{I(e),M(!0)},className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 text-left",children:[J(e.mimeType),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:e.fileName})]},e.id)),w.length>4&&a.jsxs("button",{onClick:()=>v?.(w[0]),className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 text-center text-sm text-gray-600 dark:text-gray-400",children:["+",w.length-4," more"]})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Document Manager"}),V&&a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[V.totalDocuments," documents \u2022 ",V.totalSizeMB," MB used"]})]}),a.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(r,{size:16}),"Upload Documents"]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(g,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search documents...",value:E,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),a.jsxs("select",{value:O,onChange:e=>F(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"receipt",children:"Receipts"}),a.jsx("option",{value:"invoice",children:"Invoices"}),a.jsx("option",{value:"statement",children:"Statements"}),a.jsx("option",{value:"contract",children:"Contracts"}),a.jsx("option",{value:"other",children:"Other"})]}),te().length>0&&a.jsxs("select",{value:"",onChange:e=>{e.target.value&&!L.includes(e.target.value)&&R([...L,e.target.value])},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"",children:"Filter by tag..."}),te().map(e=>a.jsx("option",{value:e,children:e},e))]})]}),L.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[L.map(e=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[a.jsx(d,{size:12}),e,a.jsx("button",{onClick:()=>R(L.filter(t=>t!==e)),className:"hover:text-red-600",children:a.jsx(n,{size:12})})]},e)),a.jsx("button",{onClick:()=>R([]),className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Clear all"})]})]}),P?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(i,{size:48,className:"animate-spin mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading documents..."})]}):0===D.length?a.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:[a.jsx(m,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:0===w.length?"No documents yet":"No documents match your filters"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:0===w.length?"Upload receipts, invoices, and other documents to keep them organized":"Try adjusting your search or filters"}),0===w.length&&a.jsx("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Upload Your First Document"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:D.map(e=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"h-40 bg-gray-100 dark:bg-gray-700 flex items-center justify-center cursor-pointer",onClick:()=>{I(e),M(!0)},children:e.thumbnailUrl?a.jsx("img",{src:e.thumbnailUrl,alt:e.fileName,className:"w-full h-full object-cover"}):J(e.mimeType)}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm truncate mb-2",children:e.fileName}),a.jsxs("div",{className:"space-y-1 mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:_(e.uploadDate)}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:H(e.fileSize)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${Z(e.type)}`,children:e.type}),e.extractedData&&a.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[a.jsx(h,{size:12}),"OCR"]})]}),e.extractedData?.merchant&&a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:e.extractedData.merchant}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,2).map(e=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded text-xs",children:[a.jsx(d,{size:10}),e]},e)),e.tags.length>2&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-2]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:()=>{I(e),M(!0)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>ee(e),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Download",children:a.jsx(u,{size:16})}),a.jsx("button",{onClick:()=>K(e),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Edit",children:a.jsx(y,{size:16})}),a.jsx("button",{onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this document?")&&(N.deleteDocument(t),q(),G(),S?.id===t&&(I(null),M(!1))));var t},className:"p-1 text-gray-400 hover:text-red-600",title:"Delete",children:a.jsx(p,{size:16})})]})]})]})]},e.id))}),a.jsx(b,{isOpen:A,onClose:()=>T(!1),title:"Upload Documents",size:"lg",children:a.jsx(j,{children:a.jsx(e,{transactionId:t,accountId:l,onUploadComplete:Y,onClose:()=>T(!1)})})}),S&&U&&a.jsxs(b,{isOpen:U,onClose:()=>{M(!1),I(null)},title:S.fileName,size:"xl",children:[a.jsx(j,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4 max-h-96 overflow-auto",children:S.mimeType.startsWith("image/")?a.jsx("img",{src:S.fullUrl,alt:S.fileName,className:"max-w-full h-auto mx-auto"}):"application/pdf"===S.mimeType?a.jsxs("div",{className:"text-center",children:[a.jsx(o,{size:64,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"PDF preview not available"})]}):a.jsxs("div",{className:"text-center",children:[a.jsx(o,{size:64,className:"mx-auto text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preview not available for this file type"})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Document Information"}),a.jsxs("dl",{className:"space-y-1 text-sm",children:[a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),a.jsx("dd",{className:"font-medium text-gray-900 dark:text-white capitalize",children:S.type})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Size:"}),a.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:H(S.fileSize)})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Uploaded:"}),a.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:_(S.uploadDate)})]}),S.expiryDate&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Expires:"}),a.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:_(S.expiryDate)})]})]})]}),S.extractedData&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Extracted Data"}),a.jsxs("dl",{className:"space-y-1 text-sm",children:[S.extractedData.merchant&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Merchant:"}),a.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:S.extractedData.merchant})]}),S.extractedData.totalAmount&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),a.jsxs("dd",{className:"font-medium text-gray-900 dark:text-white",children:["\xa3",S.extractedData.totalAmount]})]}),S.extractedData.date&&a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Date:"}),a.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:_(S.extractedData.date)})]}),a.jsxs("div",{children:[a.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Confidence:"}),a.jsxs("dd",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(100*S.extractedData.confidence),"%"]})]})]})]})]}),S.tags.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:S.tags.map(e=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:[a.jsx(d,{size:12}),e]},e))})]}),S.notes&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:S.notes})]})]})}),a.jsx(f,{children:a.jsxs("div",{className:"flex justify-between w-full",children:[a.jsxs("button",{onClick:()=>ee(S),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[a.jsx(u,{size:16}),"Download"]}),a.jsx("button",{onClick:()=>{M(!1),I(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})})]}),W&&a.jsxs(b,{isOpen:!0,onClose:()=>K(null),title:"Edit Document",size:"md",children:[a.jsx(j,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Document Type"}),a.jsxs("select",{value:W.type,onChange:e=>K({...W,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"receipt",children:"Receipt"}),a.jsx("option",{value:"invoice",children:"Invoice"}),a.jsx("option",{value:"statement",children:"Statement"}),a.jsx("option",{value:"contract",children:"Contract"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),a.jsx("textarea",{value:W.notes||"",onChange:e=>K({...W,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]})]})}),a.jsxs(f,{children:[a.jsx("button",{onClick:()=>K(null),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),a.jsx("button",{onClick:()=>{return e=W,t={type:W.type,notes:W.notes},N.updateDocument(e.id,t),q(),void K(null);var e,t},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]})}import{j as a,bX as s,bo as r,bT as l,A as d,X as n,_ as c,at as i,b$ as x,b2 as o,a3 as g,bn as m,O as h,aS as u,Q as y,V as p,M as b,m as j,q as f}from"./index-Pkjq0qn3.js";import{a as k}from"./chunk-BWx9oMeS.js";import{d as N}from"./chunk-qYdZW6fT.js";export{t as D};
