import{r as e,L as t,cZ as s,c_ as r,c$ as a,d0 as o}from"./chunk-Bcp2Zi4E.js";const n=e.memo(function({index:e,style:s,data:r}){const{items:a,renderItem:o}=r,n=a[e];return n?t.jsx(t.Fragment,{children:o(n,e,s)}):null}),i=e.memo(function({items:i,renderItem:c,getItemKey:d,itemHeight:l=80,onLoadMore:m,hasMore:h=!1,isLoading:g=!1,overscanCount:u=5,className:x="",estimatedItemSize:y=80,threshold:p=100,onItemsRendered:b}){const f=e.useRef(null),k=e.useRef(new Map),C="function"==typeof l,v=e.useMemo(()=>({items:i,renderItem:c,getItemKey:d}),[i,c,d]),w=e.useCallback(e=>!h||e<i.length,[h,i.length]),N=e.useCallback(()=>(g||!m||m(),Promise.resolve()),[g,m]),j=h?i.length+1:i.length,I=e.useCallback(e=>{if("function"==typeof l){const t=k.current.get(e);if(t)return t;const s=l(e);return k.current.set(e,s),s}return l},[l]);return e.useMemo(()=>{C&&k.current.clear()},[i,C]),i.length>p?t.jsx("div",{className:`flex-1 w-full h-full overflow-hidden ${x}`,children:t.jsx(s,{children:({height:e,width:s})=>t.jsx(r,{isItemLoaded:w,itemCount:j,loadMoreItems:N,children:({onItemsRendered:r,ref:i})=>C?t.jsx(a,{ref:e=>{e&&(f.current=e,"function"==typeof i?i(e):i&&(i.current=e))},height:e,itemCount:j,itemSize:I,itemData:v,onItemsRendered:e=>{r(e),b?.(e)},width:s,overscanCount:u,estimatedItemSize:y,itemKey:(e,t)=>{const s=t.items[e];return s?t.getItemKey(s,e):`loading-${e}`},children:n}):t.jsx(o,{ref:e=>{e&&(f.current=e,"function"==typeof i?i(e):i&&(i.current=e))},height:e,itemCount:j,itemSize:l,itemData:v,itemKey:(e,t)=>{const s=t.items[e];return s?t.getItemKey(s,e):`loading-${e}`},onItemsRendered:e=>{r(e),b?.(e)},overscanCount:u,width:s,children:n})})})}):t.jsx("div",{className:x,children:i.map((e,s)=>t.jsx("div",{children:c(e,s,{})},d(e,s)))})});i.displayName="VirtualizedList";const c=e.memo(function({columns:s,headerClassName:r,showCheckbox:a,selectedItems:o,items:n,getItemKey:i,onSelectionChange:c,onSort:d,sortColumn:l,sortDirection:m}){const h=e.useMemo(()=>!(!o||0===n.length)&&n.every((e,t)=>o.has(i(e,t))),[o,n,i]),g=e.useCallback(e=>{if(c)if(e.target.checked){const e=new Set;n.forEach((t,s)=>{e.add(i(t,s))}),c(e)}else c(new Set)},[n,i,c]),u=e.useCallback(e=>{d&&d(e,l===e&&"asc"===m?"desc":"asc")},[d,l,m]);return t.jsxs("div",{className:`flex items-center border-b border-gray-200 dark:border-gray-700 ${r||"bg-gray-50 dark:bg-gray-800"}`,children:[a&&t.jsx("div",{className:"px-4 py-3 w-12",children:t.jsx("input",{type:"checkbox",checked:h,onChange:g,className:"rounded"})}),s.map(e=>t.jsx("div",{className:`px-4 py-3 font-medium text-sm ${r?"":"text-gray-700 dark:text-gray-300"} ${e.headerClassName||""}`,style:{width:e.width},children:e.sortable&&d?t.jsxs("button",{onClick:()=>u(e.key),className:"flex items-center gap-1 "+(r?"hover:text-gray-100":"hover:text-gray-900 dark:hover:text-gray-100"),children:[e.header,l===e.key&&t.jsx("span",{className:"text-xs",children:"asc"===m?"\u2191":"\u2193"})]}):e.header},e.key))]})});c.displayName="TableHeader";const d=e.memo(function({items:s,columns:r,getItemKey:a,onRowClick:o,rowHeight:n=60,className:d="",headerClassName:l,rowClassName:m,selectedItems:h,onSelectionChange:g,showCheckbox:u=!1,onSort:x,sortColumn:y,sortDirection:p,emptyMessage:b="No data available",isLoading:f=!1,onLoadMore:k,hasMore:C=!1,threshold:v=100}){const w=e.useCallback((e,s,n)=>{const i=a(e,s),c=h?.has(i)||!1,d="function"==typeof m?m(e,s):m||"",l=o?"cursor-pointer select-none":"",x=o&&!c?"hover:shadow-[0_-6px_10px_-2px_rgba(0,0,0,0.15),0_6px_10px_-2px_rgba(0,0,0,0.15)] hover:z-10 hover:transform hover:scale-[1.01] hover:bg-gray-50 dark:hover:bg-gray-800":"",y=c||s%2!=1?c?"":"bg-white dark:bg-gray-900":"bg-gray-100 dark:bg-gray-800/50";return t.jsxs("div",{style:{...n,overflow:"visible"},className:`flex items-center border-b border-gray-200 dark:border-gray-700 transition-colors duration-150 ${y} ${l} ${c?"":x} ${d}`,onClick:()=>{o&&o(e,s)},children:[u&&t.jsx("div",{className:"px-4 py-3 w-12",children:t.jsx("input",{type:"checkbox",checked:c,onChange:e=>{if(e.stopPropagation(),g&&h){const t=new Set(h);e.target.checked?t.add(i):t.delete(i),g(t)}},className:"rounded",onClick:e=>e.stopPropagation()})}),r.map(s=>t.jsx("div",{className:`px-4 py-3 ${s.className||""}`,style:{width:s.width},children:s.accessor(e)},s.key))]})},[r,a,o,m,h,g,u]);return 0!==s.length||f?t.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-2xl shadow-lg overflow-hidden ${d}`,children:[t.jsx(c,{columns:r,headerClassName:l,showCheckbox:u,selectedItems:h,items:s,getItemKey:a,onSelectionChange:g,onSort:x,sortColumn:y,sortDirection:p}),t.jsx(i,{items:s,renderItem:w,getItemKey:a,itemHeight:n,onLoadMore:k,hasMore:C,isLoading:f,threshold:v})]}):t.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-lg shadow ${d}`,children:[t.jsx(c,{columns:r,headerClassName:l,showCheckbox:u,selectedItems:h,items:s,getItemKey:a,onSelectionChange:g,onSort:x,sortColumn:y,sortDirection:p}),t.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:b})]})});d.displayName="VirtualizedTable";export{d as V};
