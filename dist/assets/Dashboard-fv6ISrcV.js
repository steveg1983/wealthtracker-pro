const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TestDataWarningModal-CeHFayuO.js","assets/index-Pkjq0qn3.js","assets/chunk-BWx9oMeS.js","assets/chunk-BN8kgYrt.js","assets/chunk-Drd-K-oK.js","assets/index-Bkln43Xj.css","assets/chunk-C-w4A_49.js","assets/chunk-B7HJJKUW.js","assets/OnboardingModal-DV7z1yhA.js","assets/ImprovedDashboard-BTvFJH7W.js","assets/chunk-BYFRQ0Wn.js"])))=>i.map(i=>d[i]);
function e(){const{accounts:e,hasTestData:t,clearAllData:a}=o(),{firstName:r,setFirstName:f,setCurrency:x}=n(),{user:j}=i(),[b,y]=d.useState(!1),[S,_]=d.useState(!1),[k,D]=d.useState(!1);d.useEffect(()=>{(async()=>{if(c&&j)try{const{error:e}=await c.from("user_profiles").select("id").limit(1);y(!e)}catch(e){y(!1)}else y(!1)})()},[j,e.length,S,k]),d.useEffect(()=>{t&&"true"!==localStorage.getItem("testDataWarningDismissed")&&_(!0)},[t,e.length]),d.useEffect(()=>{localStorage.getItem("onboardingCompleted")||r||S||D(!0)},[r,S]);const N=()=>{_(!1),localStorage.getItem("onboardingCompleted")||r||D(!0)};return s.jsxs(m,{title:"Dashboard",children:[s.jsx(h,{componentName:"Dashboard",children:s.jsx(d.Suspense,{fallback:s.jsx(l,{className:"h-96"}),children:s.jsx(g,{})})}),s.jsx(h,{componentName:"Test Data Warning",children:s.jsx(d.Suspense,{fallback:null,children:s.jsx(p,{isOpen:S,onClose:N,onClearData:()=>{a(),N()}})})}),s.jsx(h,{componentName:"Onboarding",children:s.jsx(d.Suspense,{fallback:null,children:s.jsx(u,{isOpen:k,onComplete:(e,t)=>{f(e),x(t),localStorage.setItem("onboardingCompleted","true"),D(!1)}})})})]})}import{_ as t}from"./chunk-Drd-K-oK.js";import{j as s,C as a,R as r,g as o,d as n,h as i,k as l,s as c}from"./index-Pkjq0qn3.js";import{a as d}from"./chunk-BWx9oMeS.js";import{P as m}from"./chunk-BnYLBI7x.js";import"./chunk-BN8kgYrt.js";class h extends d.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){"undefined"!=typeof window&&"Sentry"in window&&window.Sentry?.captureException(e,{contexts:{react:{componentStack:t.componentStack,componentName:this.props.componentName}}})}handleRetry=()=>{this.setState({hasError:!1,error:void 0})};render(){return this.state.hasError?this.props.fallback?s.jsx(s.Fragment,{children:this.props.fallback}):s.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[s.jsx(a,{className:"w-12 h-12 text-red-500 mb-4","aria-hidden":"true"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-4",children:this.props.componentName?`Failed to load ${this.props.componentName}`:"Failed to load this component"}),s.jsxs("button",{onClick:this.handleRetry,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Retry loading component",children:[s.jsx(r,{className:"w-4 h-4","aria-hidden":"true"}),"Try Again"]}),!1]}):this.props.children}}const p=d.lazy(()=>t(()=>import("./TestDataWarningModal-CeHFayuO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),u=d.lazy(()=>t(()=>import("./OnboardingModal-DV7z1yhA.js"),__vite__mapDeps([8,1,2,3,4,5]))),g=d.lazy(()=>t(()=>import("./ImprovedDashboard-BTvFJH7W.js"),__vite__mapDeps([9,1,2,3,4,5,10])).then(e=>({default:e.ImprovedDashboard})));export{e as default};
