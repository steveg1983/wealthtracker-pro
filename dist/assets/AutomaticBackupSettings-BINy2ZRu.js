function e(){const{addNotification:e}=a(),[p,y]=g.useState(t.getBackupConfig()),[h,k]=g.useState([]),[j,f]=g.useState([]),[N,v]=g.useState(!1);g.useEffect(()=>{w()},[]);const w=async()=>{try{const e=JSON.parse(localStorage.getItem("money_management_backup_history")||"[]");k(e.slice(0,10));const a=await t.getStoredBackups();f(a)}catch(e){console.error("Failed to load backup data:",e)}},B=a=>{const s={...p,...a};y(s),t.updateBackupConfig(a),void 0!==a.enabled&&e({type:"success",title:a.enabled?"Automatic Backups Enabled":"Automatic Backups Disabled",message:a.enabled?`Backups will run ${s.frequency} at ${s.time}`:"Automatic backups have been disabled"})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(r,{size:24,className:"text-primary"}),s.jsx("h2",{className:"text-xl font-semibold text-theme-heading dark:text-white",children:"Automatic Backups"})]}),s.jsxs("div",{className:"flex items-center justify-between mb-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Enable Automatic Backups"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Automatically backup your data at scheduled intervals"})]}),s.jsx("button",{onClick:()=>B({enabled:!p.enabled}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(p.enabled?"bg-primary":"bg-gray-300 dark:bg-gray-600"),children:s.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(p.enabled?"translate-x-6":"translate-x-1")})})]}),p.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Backup Frequency"}),s.jsxs("select",{value:p.frequency,onChange:e=>B({frequency:e.target.value}),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[s.jsx("option",{value:"daily",children:"Daily"}),s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"monthly",children:"Monthly"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Backup Time"}),s.jsx("input",{type:"time",value:p.time,onChange:e=>B({time:e.target.value}),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Backup Format"}),s.jsxs("select",{value:p.format,onChange:e=>B({format:e.target.value}),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[s.jsx("option",{value:"json",children:"JSON (Recommended)"}),s.jsx("option",{value:"csv",children:"CSV (Excel compatible)"}),s.jsx("option",{value:"all",children:"Both JSON and CSV"})]})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(l,{size:16}),"Encrypt Backups"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Protect your backup files with encryption"})]}),s.jsx("button",{onClick:()=>B({encryptionEnabled:!p.encryptionEnabled}),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(p.encryptionEnabled?"bg-primary":"bg-gray-300 dark:bg-gray-600"),children:s.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(p.encryptionEnabled?"translate-x-6":"translate-x-1")})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Retention Period"}),s.jsxs("select",{value:p.retentionDays,onChange:e=>B({retentionDays:parseInt(e.target.value)}),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[s.jsx("option",{value:"7",children:"7 days"}),s.jsx("option",{value:"30",children:"30 days"}),s.jsx("option",{value:"60",children:"60 days"}),s.jsx("option",{value:"90",children:"90 days"}),s.jsx("option",{value:"365",children:"1 year"})]})]})]}),s.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg mb-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(d,{size:20,className:"text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Cloud Storage Integration Coming Soon"}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Future updates will include automatic sync to Google Drive, Dropbox, and OneDrive"})]})]})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:async()=>{v(!0);try{await t.performBackup(),await w(),e({type:"success",title:"Test Backup Completed",message:"Your data has been backed up successfully"})}catch(a){e({type:"error",title:"Backup Failed",message:a instanceof Error?a.message:"Failed to create backup"})}finally{v(!1)}},disabled:N,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:N?s.jsxs(s.Fragment,{children:[s.jsx(i,{size:16,className:"animate-spin"}),"Creating Backup..."]}):s.jsxs(s.Fragment,{children:[s.jsx(c,{size:16}),"Test Backup Now"]})})})]}),s.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(n,{size:24,className:"text-primary"}),s.jsx("h2",{className:"text-xl font-semibold text-theme-heading dark:text-white",children:"Backup History"})]}),0===h.length?s.jsx("div",{className:"text-center py-8 text-gray-600 dark:text-gray-400",children:"No backup history available"}):s.jsx("div",{className:"space-y-2",children:h.map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[e.success?s.jsx(o,{size:20,className:"text-green-600 dark:text-green-400"}):s.jsx(x,{size:20,className:"text-red-600 dark:text-red-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.success?"Backup Successful":"Backup Failed"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()})]})]}),e.filesCreated&&s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.filesCreated," file",e.filesCreated>1?"s":""]})]},a))})]}),s.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(c,{size:24,className:"text-primary"}),s.jsx("h2",{className:"text-xl font-semibold text-theme-heading dark:text-white",children:"Stored Backups"})]}),0===j.length?s.jsx("div",{className:"text-center py-8 text-gray-600 dark:text-gray-400",children:"No stored backups available"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filename"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Size"}),s.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Format"}),s.jsx("th",{className:"text-right py-2 px-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Actions"})]})}),s.jsx("tbody",{children:j.map(a=>{return s.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[s.jsx("td",{className:"py-3 px-3",children:s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.filename})}),s.jsx("td",{className:"py-3 px-3",children:s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:new Date(a.timestamp).toLocaleDateString()})}),s.jsx("td",{className:"py-3 px-3",children:s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:(r=a.size,r<1024?`${r} B`:r<1048576?`${(r/1024).toFixed(1)} KB`:`${(r/1048576).toFixed(1)} MB`)})}),s.jsx("td",{className:"py-3 px-3",children:s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:a.format.toUpperCase()})}),s.jsx("td",{className:"py-3 px-3",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>(async a=>{try{await t.downloadBackup(a),e({type:"success",title:"Backup Downloaded",message:"The backup file has been downloaded"})}catch{e({type:"error",title:"Download Failed",message:"Failed to download backup file"})}})(a.id),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-primary dark:hover:text-primary",title:"Download",children:s.jsx(m,{size:16})}),s.jsx("button",{onClick:()=>(async a=>{if(confirm("Are you sure you want to delete this backup?"))try{await t.deleteBackup(a),await w(),e({type:"success",title:"Backup Deleted",message:"The backup has been deleted"})}catch{e({type:"error",title:"Delete Failed",message:"Failed to delete backup"})}})(a.id),className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400",title:"Delete",children:s.jsx(u,{size:16})})]})})]},a.id);var r})})]})})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(b,{size:20,className:"text-blue-600 dark:text-blue-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"About Automatic Backups"}),s.jsxs("ul",{className:"space-y-1 text-sm text-blue-700 dark:text-blue-300",children:[s.jsx("li",{children:"\u2022 Backups run automatically at your scheduled time"}),s.jsx("li",{children:"\u2022 Your data is stored locally in your browser's storage"}),s.jsx("li",{children:"\u2022 Encrypted backups add an extra layer of security"}),s.jsx("li",{children:"\u2022 Old backups are automatically cleaned up based on retention settings"}),s.jsx("li",{children:"\u2022 Download backups regularly for external storage"})]})]})]})})]})}import{aJ as a,cq as t,j as s,e as r,bx as l,bd as d,at as i,b1 as c,aZ as n,O as o,bs as x,aS as m,aF as u,ar as b}from"./index-CgJz7Gw0.js";import{a as g}from"./chunk-BWx9oMeS.js";import"./chunk-BN8kgYrt.js";import"./chunk-C1eKK5Oc.js";export{e as default};
