function e({isOpen:e,onClose:a}){const{addAccount:t}=d(),{currency:r}=o(),[s,n]=P.useState(!1),[l,g]=P.useState(null),[u,m]=P.useState({name:"",type:"current",balance:"",currency:r,institution:""});P.useEffect(()=>{e&&(m({name:"",type:"current",balance:"",currency:r,institution:""}),g(null),n(!1))},[e,r]);const h=(e,a)=>{m(t=>({...t,[e]:a})),l&&g(null)},y=Y.find(e=>e.value===u.type),k=Z.find(e=>e.value===u.currency);return i.jsx(c,{isOpen:e,onClose:a,title:"Add New Account",size:"lg",children:i.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!s){n(!0),g(null);try{if(console.log("[AddAccountModal] Submitting account:",u),!u.name.trim())throw new Error("Account name is required");const e=parseFloat(u.balance);if(isNaN(e))throw new Error("Please enter a valid balance");const r=await t({name:u.name.trim(),type:"checking"===u.type?"current":u.type,balance:e,initialBalance:e,currency:u.currency,institution:u.institution.trim()||"",isActive:!0});console.log("[AddAccountModal] Account added successfully:",r),m({name:"",type:"current",balance:"",currency:u.currency,institution:""}),n(!1),setTimeout(()=>{a()},100)}catch(r){console.error("[AddAccountModal] Failed to add account:",r),g(r instanceof Error?r.message:"Failed to add account. Please try again."),n(!1)}}},children:[i.jsx(x,{children:i.jsxs("div",{className:"space-y-6",children:[l&&i.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(b,{size:20,className:"text-red-600 dark:text-red-400 mt-0.5"}),i.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Account Name *"}),i.jsx("input",{type:"text",value:u.name,onChange:e=>h("name",e.target.value),className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-3 focus:ring-primary/20 focus:border-primary dark:text-white transition-all duration-200",placeholder:"e.g., Main Checking Account",required:!0,autoFocus:!0,disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Account Type *"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:Y.map(e=>{const a=e.icon,t=u.type===e.value;return i.jsx("button",{type:"button",onClick:()=>h("type",e.value),disabled:s,className:`p-3 rounded-xl border-2 transition-all duration-200 ${t?"border-primary bg-primary/10 dark:bg-primary/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"} ${s?"opacity-50 cursor-not-allowed":""}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(a,{size:20,className:t?"text-primary":"text-gray-500 dark:text-gray-400"}),i.jsxs("div",{className:"text-left flex-1",children:[i.jsx("div",{className:"text-sm font-medium "+(t?"text-primary":"text-gray-700 dark:text-gray-200"),children:e.label}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e.description})]})]})},e.value)})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Current Balance *"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 font-medium",children:k?.symbol}),i.jsx("input",{type:"number",step:"0.01",value:u.balance,onChange:e=>h("balance",e.target.value),className:"w-full pl-8 pr-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-3 focus:ring-primary/20 focus:border-primary dark:text-white transition-all duration-200",placeholder:"0.00",required:!0,disabled:s})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Currency *"}),i.jsx("select",{value:u.currency,onChange:e=>h("currency",e.target.value),disabled:s,className:"w-full px-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-3 focus:ring-primary/20 focus:border-primary dark:text-white transition-all duration-200 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\")",backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:Z.map(e=>i.jsxs("option",{value:e.value,children:[e.symbol," ",e.label]},e.value))})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:["Financial Institution",i.jsx("span",{className:"text-xs font-normal text-gray-500 dark:text-gray-400 ml-2",children:"(Optional)"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(K,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),i.jsx("input",{type:"text",value:u.institution,onChange:e=>h("institution",e.target.value),className:"w-full pl-11 pr-4 py-3 bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-3 focus:ring-primary/20 focus:border-primary dark:text-white transition-all duration-200",placeholder:"e.g., Barclays, HSBC, NatWest",disabled:s})]})]}),y&&i.jsx("div",{className:"p-4 bg-primary/5 dark:bg-primary/10 rounded-xl border border-primary/20",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx(y.icon,{size:20,className:"text-primary mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:y.label}),i.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:y.description})]})]})})]})}),i.jsx(p,{children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:a,disabled:s,className:"flex-1 px-6 py-3 border-2 border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:s,className:"flex-1 px-6 py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-xl hover:shadow-lg hover:scale-[1.02] font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:s?"Adding...":"Add Account"})]})})]})})}function a({isOpen:e,onClose:a,accountId:t}){const{accounts:r,transactions:s,addTransaction:n,categories:l,getSubCategories:o,getDetailCategories:c}=d(),x=r.find(e=>e.id===t),[g,u]=P.useState((new Date).toISOString().split("T")[0]),[m,b]=P.useState(""),[p,N]=P.useState("cat-blank"),[C,S]=P.useState("sub-other-expense"),[A,B]=P.useState(""),[D,M]=P.useState(!1);if(!e||!x)return null;const z=(()=>{const e=new Date(g);e.setHours(23,59,59,999);let a=x.openingBalance||0;return s.filter(a=>a.accountId===t&&new Date(a.date)<=e).sort((e,a)=>new Date(e.date).getTime()-new Date(a.date).getTime()).forEach(e=>{"income"===e.type||"transfer"===e.type&&e.amount>0?a+=Math.abs(e.amount):a-=Math.abs(e.amount)}),a})(),F=parseFloat(m)||0,I=F-z,O=I>0?"income":"expense",T=o(`type-${O}`);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg sm:rounded-lg shadow-xl w-full sm:max-w-lg max-h-[90vh] sm:max-h-[85vh] overflow-y-auto",children:[i.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 sm:px-6 py-3 sm:py-4",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:["Reconcile ",x.name]}),i.jsx("button",{onClick:a,className:"p-1 -m-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(h,{size:24})})]})}),i.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),Math.abs(I)<.01)return void a();const r={date:new Date(g),description:"Balance Adjustment - Account Reconciliation",amount:Math.abs(I),type:I>0?"income":"expense",category:p,accountId:t,notes:A||`Reconciliation adjustment to match statement balance of ${v(F,x.currency)}`,cleared:!0,tags:["reconciliation","adjustment"]};n(r),a()},className:"p-4 sm:p-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[i.jsx(y,{size:16}),"Statement Date"]}),i.jsx("input",{type:"date",value:g,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[i.jsx(k,{size:16}),"System Balance (as of ",new Date(g).toLocaleDateString(),")"]}),i.jsx("div",{className:"px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:i.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:v(z,x.currency)})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[i.jsx(f,{size:16}),"Statement Balance (",j(x.currency),")"]}),i.jsx("input",{type:"number",step:"0.01",value:m,onChange:e=>b(e.target.value),placeholder:"Enter balance from your bank statement",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",required:!0})]}),m&&i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Difference"}),i.jsx("p",{className:"text-xl font-bold "+(Math.abs(I)<.01?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"),children:v(I,x.currency)}),Math.abs(I)>=.01&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["A ",I>0?"positive":"negative"," adjustment of ",v(Math.abs(I),x.currency)," will be added to reconcile."]})]}),Math.abs(I)>=.01&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category for Adjustment"}),i.jsx("button",{type:"button",onClick:()=>M(!0),className:"text-sm text-primary hover:text-secondary",children:"Create new"})]}),i.jsxs("select",{value:C,onChange:e=>{S(e.target.value),N("")},className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"",children:"Select category (optional)"}),T.map(e=>i.jsx("option",{value:e.id,children:e.name},e.id))]})]}),C&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-category"}),i.jsxs("select",{value:p,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"cat-blank",children:"Blank (No category)"}),c(C).map(e=>i.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional)"}),i.jsx("textarea",{value:A,onChange:e=>B(e.target.value),rows:3,placeholder:"Add any notes about this reconciliation...",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white"})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-sm sm:text-base bg-primary text-white rounded-lg hover:bg-secondary",children:Math.abs(I)<.01?"Close":"Reconcile & Adjust"})]})]}),i.jsx(w,{isOpen:D,onClose:()=>M(!1),initialType:O,onCategoryCreated:e=>{const a=l.find(a=>a.id===e);a&&("detail"===a.level?(S(a.parentId||""),N(e)):(S(e),N(""))),M(!1)}})]})})}function t({isOpen:e,onClose:a,accountId:t,currentBalance:r,newBalance:s}){const{accounts:n,addTransaction:l,categories:o,getSubCategories:c,getDetailCategories:x}=d(),g=n.find(e=>e.id===t),[u,m]=P.useState((new Date).toISOString().split("T")[0]),[b,p]=P.useState("cat-blank"),[k,j]=P.useState("sub-other-expense"),[f,C]=P.useState("Balance Adjustment"),[S,A]=P.useState(""),[B,D]=P.useState(!1);if(!e||!g)return null;const M=parseFloat(s)||0,z=M-r,F=z>0,I=F?"income":"expense",O=c(`type-${I}`);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-2xl sm:rounded-2xl shadow-xl w-full sm:max-w-lg max-h-[90vh] sm:max-h-[85vh] overflow-y-auto",children:[i.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 sm:px-6 py-3 sm:py-4",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:"Balance Adjustment Required"}),i.jsx("button",{onClick:a,className:"p-1 -m-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:i.jsx(h,{size:24})})]})}),i.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),Math.abs(z)<.01)return void a();const s={date:new Date(u),description:f,amount:Math.abs(z),type:F?"income":"expense",category:b,accountId:t,notes:S||`Manual balance adjustment from ${v(r,g.currency)} to ${v(M,g.currency)}`,cleared:!0,tags:["balance-adjustment"]};l(s),a()},className:"p-4 sm:p-6",children:[i.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Changing the balance requires creating a transaction to maintain accurate records. This adjustment will be recorded in your transaction history."})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Current Balance"}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:v(r,g.currency)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"New Balance"}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:v(M,g.currency)})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Adjustment Amount"}),i.jsxs("p",{className:"text-lg font-bold "+(F?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[F?"+":"-",v(Math.abs(z),g.currency)]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adjustment-date",className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[i.jsx(y,{size:16}),"Date"]}),i.jsx("input",{id:"adjustment-date",type:"date",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"adjustment-description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),i.jsx("input",{id:"adjustment-description",type:"text",value:f,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",required:!0})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsxs("label",{htmlFor:"adjustment-category",className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:[i.jsx(N,{size:16}),"Category"]}),i.jsx("button",{type:"button",onClick:()=>D(!0),className:"text-sm text-primary hover:text-secondary",children:"Create new"})]}),i.jsxs("select",{id:"adjustment-category",value:k,onChange:e=>{j(e.target.value),p("")},className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"",children:"Select category"}),O.map(e=>i.jsx("option",{value:e.id,children:e.name},e.id))]})]}),k&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"adjustment-subcategory",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sub-category"}),i.jsxs("select",{id:"adjustment-subcategory",value:b,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"cat-blank",children:"Blank (No category)"}),x(k).map(e=>i.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"adjustment-notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes (optional)"}),i.jsx("textarea",{id:"adjustment-notes",value:S,onChange:e=>A(e.target.value),rows:3,placeholder:"Add any notes about this adjustment...",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:text-white"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 text-sm sm:text-base bg-primary text-white rounded-lg hover:bg-secondary",children:"Create Adjustment"})]})]}),i.jsx(w,{isOpen:B,onClose:()=>D(!1),initialType:I,onCategoryCreated:e=>{const a=o.find(a=>a.id===e);a&&("detail"===a.level?(j(a.parentId||""),p(e)):(j(e),p(""))),D(!1)}})]})})}function r({isOpen:e,onClose:a,account:t,onSave:r}){const{formData:s,updateField:n,handleSubmit:l,setFormData:d}=C({type:"current",openingBalance:"",openingBalanceDate:"",sortCode:"",accountNumber:"",institution:"",notes:""},{onSubmit:e=>{if(!t)return;const a={type:e.type,institution:e.institution||void 0,notes:e.notes||void 0,sortCode:e.sortCode||void 0,accountNumber:e.accountNumber||void 0};e.openingBalance&&(a.openingBalance=parseFloat(e.openingBalance),a.openingBalanceDate=new Date(e.openingBalanceDate)),r(t.id,a)},onClose:a});return P.useEffect(()=>{t&&d({type:t.type||"current",openingBalance:t.openingBalance?.toString()||"",openingBalanceDate:t.openingBalanceDate?new Date(t.openingBalanceDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],sortCode:t.sortCode||"",accountNumber:t.accountNumber||"",institution:t.institution||"",notes:t.notes||""})},[t,d]),t?i.jsx(c,{isOpen:e,onClose:a,title:"Account Settings",size:"md",children:i.jsxs("form",{onSubmit:l,children:[i.jsxs(x,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 -mt-2 mb-4",children:t.name}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Type"}),i.jsx("select",{value:s.type,onChange:e=>n("type",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:_.map(e=>i.jsx("option",{value:e.value,children:e.label},e.value))}),i.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Changing the type will relocate this account to the appropriate section"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"opening-balance",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Opening Balance"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{id:"opening-balance",type:"number",step:"0.01",value:s.openingBalance,onChange:e=>n("openingBalance",e.target.value),placeholder:"0.00",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white","aria-label":"Opening balance amount"}),i.jsx("input",{id:"opening-balance-date",type:"date",value:s.openingBalanceDate,onChange:e=>n("openingBalanceDate",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white","aria-label":"Opening balance date"})]})]}),("current"===s.type||"savings"===s.type)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"sort-code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sort Code"}),i.jsx("input",{id:"sort-code",type:"text",value:s.sortCode,onChange:e=>{const a=(e=>{const a=e.replace(/\D/g,"");return a.length<=2?a:a.length<=4?`${a.slice(0,2)}-${a.slice(2)}`:`${a.slice(0,2)}-${a.slice(2,4)}-${a.slice(4,6)}`})(e.target.value);n("sortCode",a)},placeholder:"XX-XX-XX",maxLength:8,className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white","aria-label":"Bank sort code"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"account-number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Account Number"}),i.jsx("input",{id:"account-number",type:"text",value:s.accountNumber,onChange:e=>n("accountNumber",e.target.value.replace(/\D/g,"")),placeholder:"12345678","aria-label":"Bank account number",maxLength:8,className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Institution"}),i.jsx("input",{type:"text",value:s.institution,onChange:e=>n("institution",e.target.value),placeholder:"Bank or financial institution name",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),i.jsx("textarea",{value:s.notes,onChange:e=>n("notes",e.target.value),rows:3,placeholder:"Additional information about this account",className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white resize-none"})]})]}),i.jsx(p,{children:i.jsxs("div",{className:"flex gap-3 w-full",children:[i.jsx("button",{type:"submit",className:"flex-1 bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition-colors",children:"Save Changes"}),i.jsx("button",{type:"button",onClick:a,className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"})]})})]})}):null}function s({accountId:e,accountName:a,holdings:t,currency:r,onClose:s}){const n=R(),[l,d]=P.useState("value"),o=t.reduce((e,a)=>e+a.value,0),c=[...t].sort((e,a)=>{switch(l){case"value":return a.value-e.value;case"shares":return a.shares-e.shares;case"name":return e.name.localeCompare(a.name);default:return 0}}),x=e=>(e/o*100).toFixed(1),g=e=>e.shares>0?e.value/e.shares:0;return i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("button",{onClick:s,className:"p-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:i.jsx(S,{size:24})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:[a," Portfolio"]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Total Portfolio Value: ",v(o,r)]})]})]}),i.jsx("div",{className:"flex gap-4 mb-4",children:i.jsx("button",{onClick:()=>n(`/transactions?account=${e}`),className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"View Transactions"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Holdings"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.length})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Portfolio Value"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v(o,r)})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Largest Position"}),i.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:c[0]?.name||"N/A"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c[0]?`${x(c[0].value)}%`:""})]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Holdings"})}),0===t.length?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No holdings in this portfolio yet."}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300 mt-2",children:"Add holdings to track your investments."})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),i.jsx("button",{onClick:()=>d("value"),className:"text-sm px-3 py-1 rounded "+("value"===l?"bg-primary text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Value"}),i.jsx("button",{onClick:()=>d("shares"),className:"text-sm px-3 py-1 rounded "+("shares"===l?"bg-primary text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Shares"}),i.jsx("button",{onClick:()=>d("name"),className:"text-sm px-3 py-1 rounded "+("name"===l?"bg-primary text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"Name"})]})}),i.jsx("div",{className:"hidden md:block overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ticker"}),i.jsx("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Shares/Units"}),i.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Price per Share"}),i.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Value"}),i.jsx("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"% of Portfolio"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c.map((e,a)=>i.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.ticker}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 dark:text-gray-100",children:e.shares.toLocaleString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 dark:text-gray-100",children:v(g(e),r)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900 dark:text-white",children:v(e.value,r)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:i.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${x(e.value)}%`}})}),i.jsxs("span",{className:"text-gray-600 dark:text-gray-400 w-12 text-right",children:[x(e.value),"%"]})]})})]},`${e.ticker}-${a}`))})]})}),i.jsx("div",{className:"md:hidden",children:c.map((e,a)=>i.jsxs("div",{className:"px-4 py-4 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.ticker}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.name})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:v(e.value,r)}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[x(e.value),"%"]})]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.shares.toLocaleString()," shares"]}),i.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["@ ",v(g(e),r)]})]})]},`${e.ticker}-${a}`))})]})]})]})}function n({onAccountClick:n}){const{accounts:l,updateAccount:o,deleteAccount:c}=d(),{formatCurrency:x}=X(),g=R(),u=H(),[m,b]=P.useState(!1),[p,h]=P.useState(null),[y,k]=P.useState(""),[v,j]=P.useState(null),[f,w]=P.useState(null),[N,C]=P.useState(null),[S,J]=P.useState(null),[K,Q]=P.useState(!0),Y=P.useMemo(()=>l.map(e=>({...e,balance:A(e.balance),initialBalance:e.openingBalance?A(e.openingBalance):void 0})),[l]),Z=P.useMemo(()=>l.reduce((e,a)=>{const t=a.type;return e[t]||(e[t]=[]),e[t].push(a),e},{}),[l]);P.useEffect(()=>{void 0!==l&&Q(!1)},[l]);const _=P.useMemo(()=>Y.reduce((e,a)=>{const t=a.type;return e[t]||(e[t]=[]),e[t].push(a),e},{}),[Y]),ee=[{type:"current",title:"Current Accounts",icon:B,color:"text-blue-600 dark:text-blue-400",bgColor:"bg-blue-200 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800"},{type:"savings",title:"Savings Accounts",icon:D,color:"text-green-600 dark:text-green-400",bgColor:"bg-green-200 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800"},{type:"credit",title:"Credit Cards",icon:M,color:"text-orange-600 dark:text-orange-400",bgColor:"bg-orange-200 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800"},{type:"loan",title:"Loans",icon:z,color:"text-red-600 dark:text-red-400",bgColor:"bg-red-200 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800"},{type:"investment",title:"Investments",icon:F,color:"text-purple-600 dark:text-purple-400",bgColor:"bg-purple-200 dark:bg-purple-900/20",borderColor:"border-purple-200 dark:border-purple-800"},{type:"asset",title:"Assets",icon:I,color:"text-indigo-600 dark:text-indigo-400",bgColor:"bg-indigo-200 dark:bg-indigo-900/20",borderColor:"border-indigo-200 dark:border-indigo-800"},{type:"liability",title:"Liabilities",icon:z,color:"text-gray-600 dark:text-gray-400",bgColor:"bg-gray-200 dark:bg-gray-900/20",borderColor:"border-gray-200 dark:border-gray-800"}];return i.jsxs(W,{title:"Accounts",rightContent:i.jsx("div",{onClick:()=>b(!0),className:"cursor-pointer",title:"Add Account",children:i.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"transition-all duration-200 hover:scale-110 drop-shadow-lg hover:drop-shadow-xl",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"},children:[i.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"#D9E1F2",className:"transition-all duration-200",onMouseEnter:e=>e.currentTarget.setAttribute("fill","#C5D3E8"),onMouseLeave:e=>e.currentTarget.setAttribute("fill","#D9E1F2")}),i.jsx("g",{transform:"translate(12, 12)",children:i.jsx("path",{d:"M12 5v14M5 12h14",stroke:"#1F2937",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),children:[i.jsx("div",{className:"grid gap-6",children:K?i.jsxs(i.Fragment,{children:[i.jsx(O,{className:"h-48"}),i.jsx(O,{className:"h-48"}),i.jsx(O,{className:"h-48"})]}):ee.map(({type:e,title:a,icon:t,color:r})=>{const s=Z[e]||[];if(0===s.length)return null;const d=_[e]||[],o=G(d);return i.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-gray-800/50 dark:to-gray-700/50 backdrop-blur-sm border-b border-blue-200/50 dark:border-gray-600/50 px-4 sm:px-6 py-3 sm:py-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[i.jsx(t,{className:r,size:20}),i.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900 dark:text-white",children:a}),i.jsxs("span",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:["(",s.length," ",1===s.length?"account":"accounts",")"]})]}),i.jsx("p",{className:"text-base md:text-lg font-semibold "+(o.greaterThanOrEqualTo(0),"text-gray-900 dark:text-white"),children:x(o)})]})}),i.jsx("div",{className:"p-3 sm:p-4 space-y-3",children:s.map(e=>i.jsx("div",{className:"p-3 sm:p-4 bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 hover:shadow-xl hover:border-blue-200/50 transition-all duration-300 cursor-pointer",onClick:a=>{a.target.closest("button, input")||(n?n(e.id):g(q(`/accounts/${e.id}`,u.search)))},children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-base md:text-lg font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:e.name}),i.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:e.institution||"Unknown Institution"}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:["Last updated: ",new Date(e.lastUpdated).toLocaleDateString()]}),void 0!==e.openingBalance&&i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-300 mt-1",children:["Opening balance: ",x(e.openingBalance,e.currency),e.openingBalanceDate&&` on ${new Date(e.openingBalanceDate).toLocaleDateString()}`]}),"investment"===e.type&&e.holdings&&e.holdings.length>0&&i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-300 mt-1 space-y-1",children:[i.jsxs("p",{children:["Cash Balance: ",x(e.balance-e.holdings.reduce((e,a)=>e+(a.marketValue||a.value||0),0),e.currency)]}),i.jsxs("p",{children:["Holdings Value: ",x(e.holdings.reduce((e,a)=>e+(a.marketValue||a.value||0),0),e.currency)," (",e.holdings.length," positions)"]}),i.jsxs("p",{className:"font-medium",children:["Total Value: ",x(e.balance,e.currency)]})]})]}),i.jsx("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-2 sm:gap-3",children:p===e.id?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",step:"0.01",value:y,onChange:e=>k(e.target.value),className:"w-24 sm:w-32 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded",autoFocus:!0}),i.jsx("button",{onClick:()=>(e=>{const a=l.find(a=>a.id===e);a&&w({accountId:e,currentBalance:a.balance,newBalance:y}),h(null),k("")})(e.id),className:"text-sm text-green-600 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300",children:"Save"}),i.jsx("button",{onClick:()=>h(null),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Cancel"})]}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("p",{className:"text-lg md:text-xl font-semibold tabular-nums whitespace-nowrap "+(e.balance,"text-gray-900 dark:text-white"),children:x(e.balance,e.currency)}),i.jsx("div",{className:"flex items-center gap-1",children:"investment"===e.type&&e.holdings&&e.holdings.length>0&&i.jsxs("button",{onClick:()=>C(e.id),className:"p-3 min-w-[44px] min-h-[44px] flex items-center justify-center text-purple-500 hover:text-purple-700 dark:text-purple-400 dark:hover:text-purple-200 hover:bg-purple-100/50 dark:hover:bg-purple-900/30 rounded-lg transition-all duration-200 relative group backdrop-blur-sm",title:"View Portfolio",children:[i.jsx(T,{size:16}),i.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"View Portfolio"})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative group",children:[i.jsx(U,{onClick:()=>J(e.id),icon:i.jsx($,{size:20}),variant:"ghost",size:"md",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 min-w-[48px] min-h-[48px]",title:"Account Settings"}),i.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"Settings"})]}),i.jsxs("button",{onClick:()=>j(e.id),className:"p-3 min-w-[48px] min-h-[48px] flex items-center justify-center text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-200 hover:bg-blue-100/50 dark:hover:bg-blue-900/30 rounded-lg transition-all duration-200 relative group backdrop-blur-sm",title:"Reconcile transactions",children:[i.jsx(L,{size:20}),i.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"Reconcile"})]}),i.jsxs("div",{className:"relative group",children:[i.jsx(U,{onClick:()=>{return a=e.id,t=e.balance,h(a),void k(t.toString());var a,t},icon:i.jsx(E,{size:20}),variant:"ghost",size:"md",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 min-w-[48px] min-h-[48px]",title:"Adjust balance"}),i.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"Adjust"})]}),i.jsxs("div",{className:"relative group",children:[i.jsx(U,{onClick:()=>{return a=e.id,void(window.confirm("Are you sure you want to delete this account? All related transactions will also be deleted.")&&c(a));var a},icon:i.jsx(V,{size:20}),variant:"ghost",size:"md",className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100/50 dark:hover:bg-red-900/30 min-w-[48px] min-h-[48px]",title:"Delete account"}),i.jsx("span",{className:"absolute bottom-full right-0 mb-2 px-3 py-1.5 text-xs text-white bg-gray-900/90 dark:bg-gray-700/90 backdrop-blur-sm rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200 whitespace-nowrap pointer-events-none shadow-lg border border-white/10",children:"Delete"})]})]})]})})})]})},e.id))})]},e)})}),0===l.length&&i.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-8 text-center",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:'No accounts yet. Click "Add Account" to get started!'})}),i.jsx(e,{isOpen:m,onClose:()=>b(!1)}),v&&i.jsx(a,{isOpen:!0,onClose:()=>j(null),accountId:v}),f&&i.jsx(t,{isOpen:!0,onClose:()=>{if(w(null),f.accountId){const e=parseFloat(f.newBalance)||0;o(f.accountId,{balance:e,lastUpdated:new Date})}},accountId:f.accountId,currentBalance:f.currentBalance,newBalance:f.newBalance}),N&&(()=>{const e=l.find(e=>e.id===N);return e&&e.holdings?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:i.jsx("div",{className:"p-6",children:i.jsx(s,{accountId:N,accountName:e.name,holdings:e.holdings,currency:e.currency,onClose:()=>C(null)})})})}):null})(),i.jsx(r,{isOpen:!!S,onClose:()=>J(null),account:l.find(e=>e.id===S)||null,onSave:(e,a)=>{o(e,a),J(null)}})]})}import{l,g as d,d as o,j as i,M as c,m as x,n as g,o as u,p as m,C as b,q as p,X as h,r as y,t as k,v,x as j,y as f,z as w,A as N,D as C,E as S,F as A,G as B,H as D,I as M,J as z,T as F,K as I,k as O,L as T,N as $,O as L,Q as E,V,Y as q}from"./index-Pkjq0qn3.js";import{a as P,w as R,v as H}from"./chunk-BWx9oMeS.js";import{I as U}from"./chunk-B2-J6WC6.js";import{u as X}from"./chunk-BYFRQ0Wn.js";import{P as W}from"./chunk-BnYLBI7x.js";import{c as G}from"./chunk-Cr6lPFsU.js";import"./chunk-BN8kgYrt.js";import"./chunk-Drd-K-oK.js";const J=l("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),K=l("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Q=l("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Y=[{value:"current",label:"Current Account",icon:l("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),description:"Everyday spending account"},{value:"savings",label:"Savings Account",icon:g,description:"Long-term savings"},{value:"credit",label:"Credit Card",icon:u,description:"Credit line account"},{value:"loan",label:"Loan",icon:J,description:"Mortgages, personal loans"},{value:"investment",label:"Investment",icon:m,description:"Stocks, bonds, funds"},{value:"assets",label:"Other Assets",icon:Q,description:"Property, valuables"}],Z=[{value:"GBP",label:"British Pound",symbol:"\xa3"},{value:"USD",label:"US Dollar",symbol:"$"},{value:"EUR",label:"Euro",symbol:"\u20ac"}],_=[{value:"current",label:"Current Account"},{value:"savings",label:"Savings Account"},{value:"loan",label:"Loan Account"},{value:"credit",label:"Credit Card"},{value:"investment",label:"Investments"},{value:"assets",label:"Other Asset"},{value:"other",label:"Other Liability"}];export{n as default};
