function e({isOpen:e,onClose:t,goal:r}){const{addGoal:a,updateGoal:s,accounts:x}=l(),{formData:g,updateField:m,handleSubmit:h,setFormData:u}=i({name:"",type:"savings",targetAmount:"",currentAmount:"",targetDate:"",description:"",linkedAccountIds:[],isActive:!0},{onSubmit:e=>{const t={name:e.name,type:e.type,targetAmount:parseFloat(e.targetAmount)||0,currentAmount:parseFloat(e.currentAmount)||0,targetDate:new Date(e.targetDate),description:e.description||void 0,linkedAccountIds:e.linkedAccountIds.length>0?e.linkedAccountIds:void 0,isActive:e.isActive,createdAt:r?.createdAt||new Date};r?s(r.id,t):a(t)},onClose:t});return v.useEffect(()=>{if(r){let e="";r.targetDate&&(r.targetDate instanceof Date?e=r.targetDate.toISOString().split("T")[0]:"string"==typeof r.targetDate&&(e=r.targetDate.split("T")[0])),u({name:r.name,type:r.type,targetAmount:r.targetAmount.toString(),currentAmount:r.currentAmount.toString(),targetDate:e,description:r.description||"",linkedAccountIds:r.linkedAccountIds||[],isActive:r.isActive})}else u({name:"",type:"savings",targetAmount:"",currentAmount:"",targetDate:"",description:"",linkedAccountIds:[],isActive:!0})},[r,e,u]),n.jsx(d,{isOpen:e,onClose:t,title:r?"Edit Goal":"Create New Goal",size:"md",children:n.jsxs("form",{onSubmit:h,children:[n.jsxs(c,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Goal Name"}),n.jsx("input",{type:"text",required:!0,value:g.name,onChange:e=>m("name",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",placeholder:"e.g., Emergency Fund"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Goal Type"}),n.jsxs("select",{value:g.type,onChange:e=>m("type",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",children:[n.jsx("option",{value:"savings",children:"Savings Goal"}),n.jsx("option",{value:"debt-payoff",children:"Debt Payoff"}),n.jsx("option",{value:"investment",children:"Investment Target"}),n.jsx("option",{value:"custom",children:"Custom Goal"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Current Amount (\xa3)"}),n.jsx("input",{type:"number",step:"0.01",required:!0,value:g.currentAmount,onChange:e=>m("currentAmount",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",placeholder:"0.00"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Amount (\xa3)"}),n.jsx("input",{type:"number",step:"0.01",required:!0,value:g.targetAmount,onChange:e=>m("targetAmount",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",placeholder:"0.00"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Date"}),n.jsx("input",{type:"date",required:!0,value:g.targetDate,onChange:e=>m("targetDate",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),n.jsx("textarea",{value:g.description,onChange:e=>m("description",e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white",rows:3,placeholder:"What is this goal for?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Link to Accounts (Optional)"}),n.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:x.map(e=>n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.linkedAccountIds.includes(e.id),onChange:()=>{return t=e.id,void m("linkedAccountIds",g.linkedAccountIds.includes(t)?g.linkedAccountIds.filter(e=>e!==t):[...g.linkedAccountIds,t]);var t},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.name," (",e.type,")"]})]},e.id))})]}),n.jsx("div",{children:n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:g.isActive,onChange:e=>m("isActive",e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Active Goal"})]})})]}),n.jsx(o,{children:n.jsxs("div",{className:"flex justify-end space-x-3 w-full",children:[n.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-2xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:r?"Update Goal":"Create Goal"})]})})]})})}function t({isActive:e,duration:t=3e3,onComplete:r}){const a=v.useRef(null),s=v.useRef(0),l=v.useRef([]),i=v.useRef(0),d=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#FFD93D","#6BCF7F"];return v.useEffect(()=>{if(!e)return;const n=a.current;if(!n)return;const c=n.getContext("2d");if(!c)return;n.width=window.innerWidth,n.height=window.innerHeight,l.current=[],i.current=Date.now();for(let e=0;e<150;e++)l.current.push({x:n.width/2,y:n.height/2,vx:15*(Math.random()-.5),vy:-15*Math.random()-5,color:d[Math.floor(Math.random()*d.length)],angle:360*Math.random(),angularVelocity:10*(Math.random()-.5),size:6*Math.random()+4,lifetime:1});const o=()=>{c.clearRect(0,0,n.width,n.height),l.current=l.current.filter(e=>(e.x+=e.vx,e.y+=e.vy,e.vy+=.5,e.angle+=e.angularVelocity,e.lifetime-=.02,!(e.lifetime<=0)&&(c.save(),c.translate(e.x,e.y),c.rotate(e.angle*Math.PI/180),c.globalAlpha=e.lifetime,c.fillStyle=e.color,c.fillRect(-e.size/2,-e.size/2,e.size,e.size),c.restore(),e.y<n.height&&e.lifetime>0))),Date.now()-i.current<t&&l.current.length>0?s.current=requestAnimationFrame(o):r?.()};return o(),()=>{s.current&&cancelAnimationFrame(s.current)}},[e,t,r]),e?n.jsx("canvas",{ref:a,className:"fixed inset-0 pointer-events-none z-50",style:{width:"100%",height:"100%"}}):null}function r({isOpen:e,onClose:t,goal:r,message:a}){const{formatCurrency:s}=A();return v.useEffect(()=>{if(e){const e=setTimeout(()=>{t()},5e3);return()=>clearTimeout(e)}},[e,t]),n.jsx(d,{isOpen:e,onClose:t,title:"",size:"sm",children:n.jsxs("div",{className:"text-center py-6",children:[n.jsxs("div",{className:"relative inline-block mb-6",children:[n.jsx("div",{className:"animate-bounce",children:n.jsx("span",{className:"text-6xl",children:"\ud83c\udfc6"})}),n.jsx("div",{className:"absolute -top-2 -right-2 animate-pulse",children:n.jsx(x,{size:32,className:"text-green-500"})})]}),n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("span",{className:"text-4xl",children:(e=>{switch(e){case"savings":return"\ud83d\udcb0";case"debt-payoff":return"\ud83d\udcb3";case"investment":return"\ud83d\udcc8";case"custom":return"\ud83c\udfaf"}})(r.type)}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.name})]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6",children:a}),n.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 mb-6",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Target Achieved"}),n.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:s(r.targetAmount)})]}),n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Close"}),n.jsxs("button",{onClick:()=>{t()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx("span",{children:"Share Achievement"}),n.jsx("span",{children:"\ud83c\udf89"})]})]})]})})}function a(){const{formatCurrency:e}=A(),t=C.getAchievements(),r=C.getAchievementStats(),a=e=>{switch(e){case"savings":return"\ud83d\udcb0";case"debt-payoff":return"\ud83d\udcb3";case"investment":return"\ud83d\udcc8";default:return"\ud83c\udfaf"}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Achieved"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.total})]}),n.jsx("span",{className:"text-2xl",children:"\ud83c\udfc6"})]})}),n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"This Month"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.thisMonth})]}),n.jsx("span",{className:"text-2xl",children:"\ud83d\udcc5"})]})}),n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"This Year"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.thisYear})]}),n.jsx("span",{className:"text-2xl",children:"\ud83c\udf8a"})]})}),n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Savings Goals"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.byType.savings||0})]}),n.jsx("span",{className:"text-2xl",children:"\ud83d\udcb0"})]})})]}),n.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Achievement Timeline"}),0===t.length?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(x,{size:48,className:"text-gray-300 dark:text-gray-600 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No achievements yet. Keep working towards your goals!"})]}):n.jsx("div",{className:"space-y-4",children:t.sort((e,t)=>new Date(t.achievedAt).getTime()-new Date(e.achievedAt).getTime()).map((t,r)=>{return n.jsxs("div",{className:"flex items-start gap-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-800/50 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:a(t.type)})})}),n.jsxs("div",{className:"flex-grow",children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:t.goalName}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400 mt-1",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(g,{size:14}),(s=t.achievedAt,new Date(s).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}))]}),n.jsx("span",{className:"capitalize",children:t.type.replace("-"," ")})]})]}),n.jsx("div",{className:"text-right",children:n.jsx("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:e(t.targetAmount)})})]},`${t.goalId}-${r}`);var s})})]})]})}function s(){const{goals:s,deleteGoal:i,getDecimalGoals:d,getDecimalAccounts:c}=l(),{formatCurrency:o}=A(),{addNotification:x,checkGoalProgress:D}=m(),{enableGoalCelebrations:S}=h(),[E,T]=v.useState(!1),[G,I]=v.useState(),[M,F]=v.useState(!1),[Y,z]=v.useState(null),[O,B]=v.useState(""),[R,$]=v.useState(!1),[L,K]=v.useState([]);v.useEffect(()=>{s.length>0&&L.length>0&&D(s,L),K([...s])},[s,D]);const W=e=>{I(e),T(!0)},J=e=>{confirm("Are you sure you want to delete this goal?")&&i(e)},P=e=>{const t=d().find(t=>t.id===e.id);return t?w(t):0},_=e=>{switch(e){case"savings":return"\ud83d\udcb0";case"debt-payoff":return"\ud83d\udcb3";case"investment":return"\ud83d\udcc8";case"custom":return"\ud83c\udfaf"}},q=s.filter(e=>e.isActive),V=s.filter(e=>!e.isActive||P(e)>=100);v.useEffect(()=>{S&&q.forEach(e=>{const t=P(e);if(t>=100&&!C.hasBeenCelebrated(e.id)){C.recordAchievement(e),C.markAsCelebrated(e.id);const t=C.getCelebrationMessage(e);B(t),z(e),F(!0),x({id:`goal-achieved-${e.id}`,type:"success",title:"Goal Achieved! \ud83c\udf89",message:`Congratulations! You've achieved your goal: ${e.name}`,timestamp:new Date,persistent:!0})}const r=C.getMilestoneMessage(t);r&&!sessionStorage.getItem(`milestone-${e.id}-${25*Math.floor(t/25)}`)&&(sessionStorage.setItem(`milestone-${e.id}-${25*Math.floor(t/25)}`,"true"),x({id:`goal-milestone-${e.id}-${Date.now()}`,type:"info",title:"Goal Progress",message:`${e.name}: ${r}`,timestamp:new Date}))})},[q,x,S]);const H=d().filter(e=>{const t=s.find(t=>t.id===e.id);return t?.isActive}),U=H.reduce((e,t)=>e.plus(t.targetAmount),u(0)),Q=H.reduce((e,t)=>e.plus(t.currentAmount),u(0)),X=U.greaterThan(0)?Q.dividedBy(U).times(100).toNumber():0;return n.jsxs(N,{title:"Goals",rightContent:n.jsx("div",{onClick:()=>T(!0),className:"cursor-pointer",title:"Add Goal",children:n.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"transition-all duration-200 hover:scale-110 drop-shadow-lg hover:drop-shadow-xl",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"},children:[n.jsx("circle",{cx:"24",cy:"24",r:"24",fill:"#D9E1F2",className:"transition-all duration-200",onMouseEnter:e=>e.currentTarget.setAttribute("fill","#C5D3E8"),onMouseLeave:e=>e.currentTarget.setAttribute("fill","#D9E1F2")}),n.jsx("g",{transform:"translate(12, 12)",children:n.jsx("path",{d:"M12 5v14M5 12h14",stroke:"#1F2937",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})}),children:[n.jsxs("div",{className:"grid gap-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Active Goals"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:q.length})]}),n.jsx(b,{className:"h-8 w-8 text-blue-600"})]})}),n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Target"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o(U)})]}),n.jsx(p,{className:"h-8 w-8 text-green-600"})]})}),n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Saved"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o(Q)})]}),n.jsx("div",{className:"relative h-8 w-8",children:n.jsxs("svg",{className:"h-8 w-8 transform -rotate-90",children:[n.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"#e5e7eb",strokeWidth:"4",fill:"none"}),n.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"#3b82f6",strokeWidth:"4",fill:"none",strokeDasharray:.88*X+" 88"})]})})]})}),n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Completed"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:V.length})]}),n.jsx("div",{className:"text-2xl",children:"\ud83c\udfc6"})]})})]}),n.jsxs("div",{className:"pt-4",children:[q.length>0?n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-theme-heading dark:text-white mb-4",children:"Active Goals"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map(e=>{const t=P(e),r=(e=>{const t=new Date,r=new Date(e).getTime()-t.getTime();return Math.ceil(r/864e5)})(e.targetDate),a=(e=>{if(!e||0===e.length)return u(0);const t=c();return e.reduce((e,r)=>{const a=t.find(e=>e.id===r);return a?e.plus(a.balance):e},u(0))})(e.linkedAccountIds);return n.jsxs("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-2xl",children:_(e.type)}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:e.type.replace("-"," ")})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(k,{onClick:()=>W(e),icon:n.jsx(y,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"}),n.jsx(k,{onClick:()=>J(e.id),icon:n.jsx(j,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"})]})]}),e.description&&n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e.description}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Progress"}),n.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.toFixed(1),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(t>=100?"bg-green-600":t>=75?"bg-blue-600":t>=50?"bg-yellow-600":"bg-gray-400"),style:{width:`${t}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Current"}),n.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:o(e.currentAmount)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Target"}),n.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:o(e.targetAmount)})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(g,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:r<30?"text-red-600":"text-gray-600 dark:text-gray-400",children:r>0?`${r} days left`:"Overdue"})]}),e.linkedAccountIds&&e.linkedAccountIds.length>0&&n.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:["Linked: ",o(a)]})]})]})]},e.id)})})]}):0===s.length?n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-12","data-testid":"empty-state",children:n.jsxs("div",{className:"text-center",children:[n.jsx(b,{className:"h-24 w-24 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No goals yet"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Set financial goals to track your progress towards savings targets, debt payoff, or investment milestones."}),n.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(f,{size:20}),n.jsx("span",{children:"Create Your First Goal"})]}),n.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-2xl mx-auto",children:[n.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl mb-2",children:"\ud83d\udcb0"}),n.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Savings Goal"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Build your emergency fund or save for a big purchase"})]}),n.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl mb-2",children:"\ud83d\udcb3"}),n.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Debt Payoff"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Track progress on paying down credit cards or loans"})]}),n.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[n.jsx("div",{className:"text-2xl mb-2",children:"\ud83d\udcc8"}),n.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:"Investment"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Monitor your investment portfolio growth targets"})]})]})]})}):n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-12","data-testid":"empty-state",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-5xl mb-4",children:"\ud83c\udf89"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"All goals completed!"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"Congratulations on achieving your goals! Ready to set new financial targets?"}),n.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(f,{size:20}),n.jsx("span",{children:"Set a New Goal"})]})]})}),V.length>0&&n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-theme-heading dark:text-white mb-4",children:"Completed Goals"}),n.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50",children:n.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:V.map(e=>n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-xl opacity-50",children:_(e.type)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Completed \u2022 \xa3",e.targetAmount.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(k,{onClick:()=>W(e),icon:n.jsx(y,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"}),n.jsx(k,{onClick:()=>J(e.id),icon:n.jsx(j,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"})]})]},e.id))})})]}),s.length>0&&n.jsx("div",{className:"mt-6",children:n.jsxs("button",{onClick:()=>$(!R),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium flex items-center gap-2",children:[n.jsx("span",{children:"\ud83c\udfc6"}),R?"Hide":"View"," Achievement History"]})}),R&&n.jsx("div",{className:"mt-6",children:n.jsx(a,{})})]})]}),n.jsx(e,{isOpen:E,onClose:()=>{T(!1),I(void 0)},goal:G}),n.jsx(t,{isActive:M,duration:4e3,onComplete:()=>F(!1)}),Y&&n.jsx(r,{isOpen:!!Y,onClose:()=>z(null),goal:Y,message:O})]})}import{g as l,D as i,j as n,M as d,m as c,q as o,O as x,r as g,aJ as m,d as h,F as u,aL as b,T as p,Q as y,V as j,ag as f}from"./index-CgJz7Gw0.js";import{a as v}from"./chunk-BWx9oMeS.js";import{I as k}from"./chunk-BHc6RLfP.js";import{P as N}from"./chunk-DLeAFLQD.js";import{e as w}from"./chunk-CbGkNdL_.js";import{u as A}from"./chunk-tt7ooTmr.js";import"./chunk-BN8kgYrt.js";import"./chunk-C1eKK5Oc.js";const C=new class{STORAGE_KEY="goalAchievements";CELEBRATED_KEY="celebratedGoals";getAchievements(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch{return[]}}recordAchievement(e){const t=this.getAchievements();t.some(t=>t.goalId===e.id)||(t.push({goalId:e.id,goalName:e.name,achievedAt:new Date,type:e.type,targetAmount:e.targetAmount}),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)))}hasBeenCelebrated(e){try{const t=localStorage.getItem(this.CELEBRATED_KEY);return(t?JSON.parse(t):[]).includes(e)}catch{return!1}}markAsCelebrated(e){try{const t=localStorage.getItem(this.CELEBRATED_KEY),r=t?JSON.parse(t):[];r.includes(e)||(r.push(e),localStorage.setItem(this.CELEBRATED_KEY,JSON.stringify(r)))}catch{}}getCelebrationMessage(e){const t={savings:["Amazing! You've reached your savings goal! \ud83c\udf89","Congratulations! Your dedication to saving has paid off! \ud83d\udcb0","Well done! You've successfully hit your savings target! \ud83c\udf1f"],"debt-payoff":["Fantastic! You're one step closer to being debt-free! \ud83c\udf8a","Incredible achievement! Your debt reduction goal is complete! \ud83d\udcaa","Congratulations on paying off your debt! Freedom awaits! \ud83d\ude80"],investment:["Excellent! Your investment goal has been achieved! \ud83d\udcc8","Well done! Your portfolio has reached its target! \ud83d\udc8e","Success! Your investment strategy is paying off! \ud83c\udfc6"],custom:["Goal achieved! Your hard work has paid off! \ud83c\udfaf","Congratulations! You've successfully completed your goal! \u2b50","Amazing progress! Your custom goal is now complete! \ud83c\udf89"]}[e.type];return t[Math.floor(Math.random()*t.length)]}getAchievementStats(){const e=this.getAchievements();return{total:e.length,byType:e.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),thisMonth:e.filter(e=>{const t=new Date(e.achievedAt),r=new Date;return t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}).length,thisYear:e.filter(e=>{const t=new Date(e.achievedAt),r=new Date;return t.getFullYear()===r.getFullYear()}).length}}getMilestoneMessage(e){return e>=25&&e<30?"Great start! You're 25% of the way there! \ud83c\udfaf":e>=50&&e<55?"Halfway there! Keep up the momentum! \ud83d\udcaa":e>=75&&e<80?"Almost there! You're 75% complete! \ud83d\ude80":e>=90&&e<95?"So close! Just a little more to go! \ud83c\udf1f":null}};export{s as default};
