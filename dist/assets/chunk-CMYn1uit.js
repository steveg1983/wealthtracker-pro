import{j as e}from"./index-Pkjq0qn3.js";import{a as t}from"./chunk-BWx9oMeS.js";import{A as s,I as r,V as a,F as o}from"./chunk-B4Yu4FH1.js";const n=t.memo(function({index:t,style:s,data:r}){const{items:a,renderItem:o}=r,n=a[t];return n?e.jsx(e.Fragment,{children:o(n,t,s)}):null}),i=t.memo(function({items:i,renderItem:d,getItemKey:c,itemHeight:l=80,onLoadMore:m,hasMore:h=!1,isLoading:g=!1,overscanCount:u=5,className:x="",estimatedItemSize:y=80,threshold:p=100,onItemsRendered:b}){const f=t.useRef(null),k=t.useRef(new Map),C="function"==typeof l,v=t.useMemo(()=>({items:i,renderItem:d,getItemKey:c}),[i,d,c]),w=t.useCallback(e=>!h||e<i.length,[h,i.length]),j=t.useCallback(()=>(g||!m||m(),Promise.resolve()),[g,m]),N=h?i.length+1:i.length,I=t.useCallback(e=>{if("function"==typeof l){const t=k.current.get(e);if(t)return t;const s=l(e);return k.current.set(e,s),s}return l},[l]);return t.useMemo(()=>{C&&k.current.clear()},[i,C]),i.length>p?e.jsx("div",{className:`flex-1 w-full h-full overflow-hidden ${x}`,children:e.jsx(s,{children:({height:t,width:s})=>e.jsx(r,{isItemLoaded:w,itemCount:N,loadMoreItems:j,children:({onItemsRendered:r,ref:i})=>C?e.jsx(a,{ref:e=>{e&&(f.current=e,"function"==typeof i?i(e):i&&(i.current=e))},height:t,itemCount:N,itemSize:I,itemData:v,onItemsRendered:e=>{r(e),b?.(e)},width:s,overscanCount:u,estimatedItemSize:y,itemKey:(e,t)=>{const s=t.items[e];return s?t.getItemKey(s,e):`loading-${e}`},children:n}):e.jsx(o,{ref:e=>{e&&(f.current=e,"function"==typeof i?i(e):i&&(i.current=e))},height:t,itemCount:N,itemSize:l,itemData:v,itemKey:(e,t)=>{const s=t.items[e];return s?t.getItemKey(s,e):`loading-${e}`},onItemsRendered:e=>{r(e),b?.(e)},overscanCount:u,width:s,children:n})})})}):e.jsx("div",{className:x,children:i.map((t,s)=>e.jsx("div",{children:d(t,s,{})},c(t,s)))})});i.displayName="VirtualizedList";const d=t.memo(function({columns:s,headerClassName:r,showCheckbox:a,selectedItems:o,items:n,getItemKey:i,onSelectionChange:d,onSort:c,sortColumn:l,sortDirection:m}){const h=t.useMemo(()=>!(!o||0===n.length)&&n.every((e,t)=>o.has(i(e,t))),[o,n,i]),g=t.useCallback(e=>{if(d)if(e.target.checked){const e=new Set;n.forEach((t,s)=>{e.add(i(t,s))}),d(e)}else d(new Set)},[n,i,d]),u=t.useCallback(e=>{c&&c(e,l===e&&"asc"===m?"desc":"asc")},[c,l,m]);return e.jsxs("div",{className:`flex items-center border-b border-gray-200 dark:border-gray-700 ${r||"bg-gray-50 dark:bg-gray-800"}`,children:[a&&e.jsx("div",{className:"px-4 py-3 w-12",children:e.jsx("input",{type:"checkbox",checked:h,onChange:g,className:"rounded"})}),s.map(t=>e.jsx("div",{className:`px-4 py-3 font-medium text-sm ${r?"":"text-gray-700 dark:text-gray-300"} ${t.headerClassName||""}`,style:{width:t.width},children:t.sortable&&c?e.jsxs("button",{onClick:()=>u(t.key),className:"flex items-center gap-1 "+(r?"hover:text-gray-100":"hover:text-gray-900 dark:hover:text-gray-100"),children:[t.header,l===t.key&&e.jsx("span",{className:"text-xs",children:"asc"===m?"\u2191":"\u2193"})]}):t.header},t.key))]})});d.displayName="TableHeader";const c=t.memo(function({items:s,columns:r,getItemKey:a,onRowClick:o,rowHeight:n=60,className:c="",headerClassName:l,rowClassName:m,selectedItems:h,onSelectionChange:g,showCheckbox:u=!1,onSort:x,sortColumn:y,sortDirection:p,emptyMessage:b="No data available",isLoading:f=!1,onLoadMore:k,hasMore:C=!1,threshold:v=100}){const w=t.useCallback((t,s,n)=>{const i=a(t,s),d=h?.has(i)||!1,c="function"==typeof m?m(t,s):m||"",l=o?"cursor-pointer select-none":"",x=o&&!d?"hover:shadow-[0_-6px_10px_-2px_rgba(0,0,0,0.15),0_6px_10px_-2px_rgba(0,0,0,0.15)] hover:z-10 hover:transform hover:scale-[1.01] hover:bg-gray-50 dark:hover:bg-gray-800":"",y=d||s%2!=1?d?"":"bg-white dark:bg-gray-900":"bg-gray-100 dark:bg-gray-800/50";return e.jsxs("div",{style:{...n,overflow:"visible"},className:`flex items-center border-b border-gray-200 dark:border-gray-700 transition-colors duration-150 ${y} ${l} ${d?"":x} ${c}`,onClick:()=>{o&&o(t,s)},children:[u&&e.jsx("div",{className:"px-4 py-3 w-12",children:e.jsx("input",{type:"checkbox",checked:d,onChange:e=>{if(e.stopPropagation(),g&&h){const t=new Set(h);e.target.checked?t.add(i):t.delete(i),g(t)}},className:"rounded",onClick:e=>e.stopPropagation()})}),r.map(s=>e.jsx("div",{className:`px-4 py-3 ${s.className||""}`,style:{width:s.width},children:s.accessor(t)},s.key))]})},[r,a,o,m,h,g,u]);return 0!==s.length||f?e.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-2xl shadow-lg overflow-hidden ${c}`,children:[e.jsx(d,{columns:r,headerClassName:l,showCheckbox:u,selectedItems:h,items:s,getItemKey:a,onSelectionChange:g,onSort:x,sortColumn:y,sortDirection:p}),e.jsx(i,{items:s,renderItem:w,getItemKey:a,itemHeight:n,onLoadMore:k,hasMore:C,isLoading:f,threshold:v})]}):e.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-lg shadow ${c}`,children:[e.jsx(d,{columns:r,headerClassName:l,showCheckbox:u,selectedItems:h,items:s,getItemKey:a,onSelectionChange:g,onSort:x,sortColumn:y,sortDirection:p}),e.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:b})]})});c.displayName="VirtualizedTable";export{c as V};
