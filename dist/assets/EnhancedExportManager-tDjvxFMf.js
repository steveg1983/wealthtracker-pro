const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunk-ddLY9KjI.js","assets/chunk-DowOIOga.js","assets/vendor-B-C1h4S3.css"])))=>i.map(i=>d[i]);
function e(){const{accounts:e,transactions:o,budgets:l}=x(),[d,i]=a.useState(!1),[p,M]=a.useState(null),[C,T]=a.useState(!1),[S,D]=a.useState(!1),[_,R]=a.useState({format:"pdf",reportType:"transactions",dateRange:"thisMonth",accounts:e.map(e=>e.id),categories:[],includeCharts:!0,includeNotes:!1,groupBy:"none",paperSize:"a4",orientation:"portrait"}),z=()=>{const e=new Date;switch(_.dateRange){case"thisMonth":return{start:k(e),end:j(e)};case"lastMonth":const t=f(e,1);return{start:k(t),end:j(t)};case"thisYear":return{start:b(e),end:h(e)};case"lastYear":const a=new Date(e.getFullYear()-1,0,1);return{start:b(a),end:h(a)};case"custom":return{start:_.startDate?new Date(_.startDate):e,end:_.endDate?new Date(_.endDate):e};default:return{start:new Date(2e3,0,1),end:e}}},A=()=>{switch(_.reportType){case"transactions":return"Transaction Report";case"summary":return"Financial Summary";case"budget":return"Budget Analysis Report";case"tax":return"Tax Summary Report";case"investment":return"Investment Performance Report";case"networth":return"Net Worth Statement";default:return"Financial Report"}},$=()=>{const e=y(new Date,"yyyy-MM-dd");return`wealthtracker-${_.reportType}-${e}`};return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[r.jsx(s,{size:20}),"Advanced Export"]}),d&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Export Manager"}),r.jsx("button",{onClick:()=>i(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:r.jsx(n,{size:20})})]})}),r.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 140px)"},children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Quick Templates"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:F.map(e=>{const t=e.icon;return r.jsx("button",{onClick:()=>(e=>{const t=F.find(t=>t.id===e);t&&(M(e),R(e=>({...e,reportType:t.reportType,...t.defaults})))})(e.id),className:"p-4 rounded-lg border-2 transition-all text-left "+(p===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:r.jsx(t,{size:20,className:"text-gray-600 dark:text-gray-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.name}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:e.description})]})]})},e.id)})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Export Format"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>R(e=>({...e,format:"pdf"})),className:"flex-1 p-3 rounded-lg border-2 transition-all "+("pdf"===_.format?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"),children:[r.jsx(c,{size:24,className:"mx-auto mb-2 text-red-500"}),r.jsx("p",{className:"text-sm font-medium",children:"PDF"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Professional reports"})]}),r.jsxs("button",{onClick:()=>R(e=>({...e,format:"excel"})),className:"flex-1 p-3 rounded-lg border-2 transition-all "+("excel"===_.format?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"),children:[r.jsx(u,{size:24,className:"mx-auto mb-2 text-green-500"}),r.jsx("p",{className:"text-sm font-medium",children:"Excel"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Advanced analysis"})]}),r.jsxs("button",{onClick:()=>R(e=>({...e,format:"csv"})),className:"flex-1 p-3 rounded-lg border-2 transition-all "+("csv"===_.format?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700"),children:[r.jsx(m,{size:24,className:"mx-auto mb-2 text-blue-500"}),r.jsx("p",{className:"text-sm font-medium",children:"CSV"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Universal format"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Date Range"}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:["thisMonth","lastMonth","thisYear","lastYear","all","custom"].map(e=>r.jsxs("button",{onClick:()=>R(t=>({...t,dateRange:e})),className:"px-4 py-2 rounded-lg border transition-all "+(_.dateRange===e?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-600":"border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300"),children:["thisMonth"===e&&"This Month","lastMonth"===e&&"Last Month","thisYear"===e&&"This Year","lastYear"===e&&"Last Year","all"===e&&"All Time","custom"===e&&"Custom"]},e))}),"custom"===_.dateRange&&r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[r.jsx("input",{type:"date",value:_.startDate,onChange:e=>R(t=>({...t,startDate:e.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"}),r.jsx("input",{type:"date",value:_.endDate,onChange:e=>R(t=>({...t,endDate:e.target.value})),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Options"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",checked:_.includeCharts,onChange:e=>R(t=>({...t,includeCharts:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include charts and visualizations (PDF only)"})]}),r.jsxs("label",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",checked:_.includeNotes,onChange:e=>R(t=>({...t,includeNotes:e.target.checked})),className:"w-4 h-4 text-blue-600 rounded"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include transaction notes"})]})]}),"pdf"===_.format&&r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Paper Size"}),r.jsxs("select",{value:_.paperSize,onChange:e=>R(t=>({...t,paperSize:e.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[r.jsx("option",{value:"a4",children:"A4"}),r.jsx("option",{value:"letter",children:"Letter"}),r.jsx("option",{value:"legal",children:"Legal"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Orientation"}),r.jsxs("select",{value:_.orientation,onChange:e=>R(t=>({...t,orientation:e.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[r.jsx("option",{value:"portrait",children:"Portrait"}),r.jsx("option",{value:"landscape",children:"Landscape"})]})]})]})]})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[r.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[r.jsx(g,{size:16}),"Preview"]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:async()=>{T(!0);try{if("pdf"===_.format)(await(async()=>{if(!v){const e=await t(()=>import("./chunk-ddLY9KjI.js").then(e=>e.j),__vite__mapDeps([0,1,2]));v=e.jsPDF}if(!N){const e=await t(()=>import("./chunk-ddLY9KjI.js").then(e=>e.a),__vite__mapDeps([0,1,2]));N=e.default}const a=new v({orientation:_.orientation,unit:"mm",format:_.paperSize});a.setFontSize(20),a.text(_.customTitle||A(),20,20),a.setFontSize(10),a.setTextColor(100);const r=z();a.text(`Period: ${y(r.start,"MMM d, yyyy")} - ${y(r.end,"MMM d, yyyy")}`,20,30);const s=o.filter(e=>{const t=new Date(e.date);return t>=r.start&&t<=r.end&&(0===_.accounts.length||_.accounts.includes(e.accountId))&&(0===_.categories.length||_.categories.includes(e.category))});a.setFontSize(12),a.setTextColor(0),a.text("Summary",20,45);const n=s.filter(e=>parseFloat(e.amount)>0).reduce((e,t)=>e+parseFloat(t.amount),0),d=Math.abs(s.filter(e=>parseFloat(e.amount)<0).reduce((e,t)=>e+parseFloat(t.amount),0));if(a.setFontSize(10),a.text(`Total Income: \xa3${n.toFixed(2)}`,20,55),a.text(`Total Expenses: \xa3${d.toFixed(2)}`,20,62),a.text(`Net: \xa3${(n-d).toFixed(2)}`,20,69),a.text(`Transactions: ${s.length}`,20,76),"transactions"===_.reportType||"custom"===_.reportType){const t=s.map(t=>[y(new Date(t.date),"MMM d, yyyy"),t.description,t.category,e.find(e=>e.id===t.accountId)?.name||"Unknown",`\xa3${Math.abs(parseFloat(t.amount)).toFixed(2)}`,parseFloat(t.amount)>0?"Income":"Expense"]);N(a,{head:[["Date","Description","Category","Account","Amount","Type"]],body:t,startY:85,styles:{fontSize:8},headStyles:{fillColor:[41,128,185]},alternateRowStyles:{fillColor:[245,245,245]}})}if("budget"===_.reportType&&l.length>0){a.addPage(),a.setFontSize(16),a.text("Budget Analysis",20,20);const e=l.map(e=>{const t=Math.abs(s.filter(t=>t.category===e.category&&parseFloat(t.amount)<0).reduce((e,t)=>e+parseFloat(t.amount),0)),a=t/parseFloat(e.amount)*100;return[e.category,`\xa3${parseFloat(e.amount).toFixed(2)}`,`\xa3${t.toFixed(2)}`,`\xa3${(parseFloat(e.amount)-t).toFixed(2)}`,`${a.toFixed(1)}%`]});N(a,{head:[["Category","Budgeted","Spent","Remaining","% Used"]],body:e,startY:30,styles:{fontSize:9},headStyles:{fillColor:[41,128,185]}})}const i=a.getNumberOfPages();for(let e=1;e<=i;e++)a.setPage(e),a.setFontSize(8),a.setTextColor(150),a.text(`Page ${e} of ${i} | Generated by WealthTracker on ${y(new Date,"MMM d, yyyy")}`,a.internal.pageSize.width/2,a.internal.pageSize.height-10,{align:"center"});return a})()).save(`${$()}.pdf`);else if("excel"===_.format){const a=await(async()=>{w||(w=await t(()=>import("./xlsx-CngQiIXK.js"),[]));const a=w.utils.book_new(),r=z(),s=o.filter(e=>{const t=new Date(e.date);return t>=r.start&&t<=r.end&&(0===_.accounts.length||_.accounts.includes(e.accountId))&&(0===_.categories.length||_.categories.includes(e.category))}),n=[["WealthTracker Export Report"],[""],["Report Type:",A()],["Date Range:",`${y(r.start,"MMM d, yyyy")} - ${y(r.end,"MMM d, yyyy")}`],["Generated:",y(new Date,"MMM d, yyyy HH:mm")],[""],["Summary Statistics"],["Total Income:",s.filter(e=>parseFloat(e.amount)>0).reduce((e,t)=>e+parseFloat(t.amount),0)],["Total Expenses:",Math.abs(s.filter(e=>parseFloat(e.amount)<0).reduce((e,t)=>e+parseFloat(t.amount),0))],["Net Amount:",s.reduce((e,t)=>e+parseFloat(t.amount),0)],["Transaction Count:",s.length]],d=w.utils.aoa_to_sheet(n);if(w.utils.book_append_sheet(a,d,"Summary"),s.length>0){const t=[["Date","Description","Category","Account","Amount","Type","Balance"],...s.map(t=>[y(new Date(t.date),"yyyy-MM-dd"),t.description,t.category,e.find(e=>e.id===t.accountId)?.name||"Unknown",parseFloat(t.amount),parseFloat(t.amount)>0?"Income":"Expense",0])],r=w.utils.aoa_to_sheet(t),n=w.utils.decode_range(r["!ref"]||"A1");for(let e=n.s.c;e<=n.e.c;++e){const t=w.utils.encode_col(e)+"1";r[t]&&(r[t].s={font:{bold:!0},fill:{fgColor:{rgb:"2980B9"}},alignment:{horizontal:"center"}})}w.utils.book_append_sheet(a,r,"Transactions")}if("budget"===_.reportType&&l.length>0){const e=[["Category","Budgeted","Spent","Remaining","% Used","Status"],...l.map(e=>{const t=Math.abs(s.filter(t=>t.category===e.category&&parseFloat(t.amount)<0).reduce((e,t)=>e+parseFloat(t.amount),0)),a=parseFloat(e.amount)-t,r=t/parseFloat(e.amount)*100;return[e.category,parseFloat(e.amount),t,a,r,r>100?"Over Budget":r>80?"Warning":"On Track"]})],t=w.utils.aoa_to_sheet(e);w.utils.book_append_sheet(a,t,"Budget Analysis")}const i=new Map;s.forEach(e=>{const t=i.get(e.category)||0;i.set(e.category,t+parseFloat(e.amount))});const c=[["Category","Total Amount","Transaction Count","Average"],...Array.from(i.entries()).map(([e,t])=>{const a=s.filter(t=>t.category===e).length;return[e,t,a,t/a]})],u=w.utils.aoa_to_sheet(c);return w.utils.book_append_sheet(a,u,"Category Summary"),a})();w.writeFile(a,`${$()}.xlsx`)}else if("csv"===_.format){const t=(()=>{const t=z(),a=o.filter(e=>{const a=new Date(e.date);return a>=t.start&&a<=t.end&&(0===_.accounts.length||_.accounts.includes(e.accountId))&&(0===_.categories.length||_.categories.includes(e.category))}).map(t=>[y(new Date(t.date),"yyyy-MM-dd"),`"${t.description.replace(/"/g,'""')}"`,t.category,e.find(e=>e.id===t.accountId)?.name||"Unknown",t.amount,parseFloat(t.amount)>0?"Income":"Expense"]);return[["Date","Description","Category","Account","Amount","Type"].join(","),...a.map(e=>e.join(","))].join("\n")})(),a=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download=`${$()}.csv`,s.click(),URL.revokeObjectURL(r)}i(!1)}catch(a){console.error("Export failed:",a)}finally{T(!1)}},disabled:C,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:C?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(s,{size:16}),"Export"]})})]})]})]})})]})}import{_ as t}from"./chunk-ddLY9KjI.js";import{r as a,H as r,da as s,bZ as n,db as o,dc as l,c3 as d,dd as i,d5 as c,de as u,df as m,dg as g}from"./chunk-DowOIOga.js";import{a as x}from"./index-qHm2isZb.js";import{N as p}from"./chunk-DoYVaa8Y.js";import{f as y,j as h,k as b,s as f,e as j,h as k}from"./chunk-B5pcS96K.js";let v=null,N=null,w=null;const F=[{id:"monthly-statement",name:"Monthly Statement",icon:o,description:"Professional bank-style monthly statement",reportType:"transactions",defaults:{dateRange:"lastMonth",groupBy:"account",includeCharts:!0}},{id:"tax-summary",name:"Tax Summary",icon:l,description:"Annual tax-deductible expenses report",reportType:"tax",defaults:{dateRange:"lastYear",groupBy:"category",includeCharts:!1}},{id:"investment-performance",name:"Investment Performance",icon:d,description:"Portfolio performance and holdings report",reportType:"investment",defaults:{dateRange:"thisYear",includeCharts:!0}},{id:"budget-analysis",name:"Budget Analysis",icon:p,description:"Budget vs actual spending analysis",reportType:"budget",defaults:{dateRange:"thisMonth",groupBy:"category",includeCharts:!0}},{id:"net-worth",name:"Net Worth Statement",icon:i,description:"Complete assets and liabilities statement",reportType:"networth",defaults:{dateRange:"all",includeCharts:!0}}];export{e as default};
