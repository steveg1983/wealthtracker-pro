function e({dashboard:e,onSave:r,onClose:y,readOnly:b=!1}){const{showNotification:f}=s();i();const[p,w]=a.useState(e?.widgets||[]),[j,v]=a.useState({}),[k,C]=a.useState(!1),[N,S]=a.useState("All"),[z,A]=a.useState(null),[D,T]=a.useState(e?.name||"New Dashboard"),[W]=a.useState(e?.description||""),[L,R]=a.useState(!b),[M,B]=a.useState(!1),E=a.useMemo(()=>{const e=new Set(["All"]);return u.forEach(a=>e.add(a.category)),Array.from(e)},[]),H=a.useMemo(()=>"All"===N?u:u.filter(e=>e.category===N),[N]),O=a.useCallback((e,a)=>{v(a);const t=p.map(a=>{const t=e.find(e=>e.i===a.id);return t?{...a,layout:{x:t.x,y:t.y,w:t.w,h:t.h}}:a});w(t)},[p]),P=a.useCallback(e=>{const a={id:`widget-${Date.now()}`,type:e.id,title:e.name,config:{},layout:{x:0,y:0,w:e.defaultSize.w,h:e.defaultSize.h,minW:1,minH:1}};w([...p,a]),C(!1),f("success",`Added ${e.name} widget`)},[p,f]),F=a.useCallback(e=>{w(p.filter(a=>a.id!==e)),f("info","Widget removed")},[p,f]),G=a.useCallback(e=>{w(p.map(a=>a.id===e?{...a,locked:!a.locked}:a))},[p]),U=a.useCallback(()=>{const a={id:e?.id||`dashboard-${Date.now()}`,name:D,description:W,widgets:p,settings:{columns:12,rowHeight:60,theme:"auto",autoRefresh:!1},createdAt:e?.createdAt||new Date,updatedAt:new Date,tags:[]};r?.(a),f("success","Dashboard saved successfully")},[e,D,W,p,r,f]),$=a.useCallback(()=>{const e=JSON.stringify({name:D,description:W,widgets:p,exportedAt:(new Date).toISOString()},null,2),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=`${D.replace(/\s+/g,"-").toLowerCase()}-dashboard.json`,r.click(),URL.revokeObjectURL(t),f("success","Dashboard exported")},[D,W,p,f]);return t.jsxs("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(o,{size:24,className:"text-primary"}),t.jsxs("div",{children:[L?t.jsx("input",{type:"text",value:D,onChange:e=>T(e.target.value),className:"text-xl font-bold bg-transparent border-b border-gray-300 dark:border-gray-600 focus:border-primary focus:outline-none",placeholder:"Dashboard Name"}):t.jsx("h1",{className:"text-xl font-bold",children:D}),W&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:W})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[!b&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>R(!L),className:"px-3 py-1.5 rounded-lg flex items-center gap-2 transition-colors "+(L?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[L?t.jsx(n,{size:16}):t.jsx(l,{size:16}),L?"Editing":"View Only"]}),L&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>C(!0),className:"px-3 py-1.5 bg-green-600 text-white rounded-lg flex items-center gap-2 hover:bg-green-700 transition-colors",children:[t.jsx(d,{size:16}),"Add Widget"]}),t.jsxs("button",{onClick:U,className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg flex items-center gap-2 hover:bg-blue-700 transition-colors",children:[t.jsx(c,{size:16}),"Save"]})]}),t.jsxs("button",{onClick:$,className:"px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center gap-2 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[t.jsx(g,{size:16}),"Export"]}),t.jsx("button",{onClick:()=>B(!0),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:t.jsx(h,{size:20})})]}),y&&t.jsx("button",{onClick:y,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:t.jsx(m,{size:20})})]})]})}),t.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[t.jsx(x,{className:"layout",layouts:j,onLayoutChange:O,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:60,isDraggable:L,isResizable:L,compactType:"vertical",preventCollision:!1,children:p.map(e=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden","data-grid":{x:e.layout.x,y:e.layout.y,w:e.layout.w,h:e.layout.h,minW:e.layout.minW,minH:e.layout.minH,static:e.locked||!L},children:[t.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsx("h3",{className:"font-medium text-sm",children:e.title}),L&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>A(e.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:t.jsx(h,{size:14})}),t.jsx("button",{onClick:()=>G(e.id),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors",children:e.locked?t.jsx(n,{size:14}):t.jsx(l,{size:14})}),t.jsx("button",{onClick:()=>F(e.id),className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/20 text-red-600 rounded transition-colors",children:t.jsx(m,{size:14})})]})]}),t.jsx("div",{className:"p-4 h-full",children:t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-4xl mb-2",children:u.find(a=>a.id===e.type)?.icon}),t.jsx("p",{className:"text-sm",children:e.title}),t.jsx("p",{className:"text-xs mt-1",children:"Widget Placeholder"})]})})})]},e.id))}),0===p.length&&t.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[t.jsx(o,{size:64,className:"text-gray-300 dark:text-gray-600 mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"No widgets yet"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-500 mb-4",children:"Start building your dashboard by adding widgets"}),!b&&t.jsxs("button",{onClick:()=>C(!0),className:"px-4 py-2 bg-primary text-white rounded-lg flex items-center gap-2 hover:bg-primary-dark transition-colors",children:[t.jsx(d,{size:20}),"Add Your First Widget"]})]})]}),k&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Add Widget"}),t.jsx("button",{onClick:()=>C(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.jsx(m,{size:20})})]}),t.jsx("div",{className:"flex gap-2 mt-4",children:E.map(e=>t.jsx("button",{onClick:()=>S(e),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors "+(N===e?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e},e))})]}),t.jsx("div",{className:"p-6 overflow-auto max-h-[60vh]",children:t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:H.map(e=>t.jsxs("button",{onClick:()=>P(e),className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-center group",children:[t.jsx("div",{className:"text-3xl mb-2 group-hover:scale-110 transition-transform",children:e.icon}),t.jsx("h3",{className:"font-medium text-sm",children:e.name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.category})]},e.id))})})]})})]})}import{r as a,L as t,df as r}from"./chunk-Bcp2Zi4E.js";import{as as s,a as i,aw as o,b5 as n,bK as l,$ as d,aG as c,ay as g,r as h,X as m}from"./index-LbveD3Go.js";import"./chunk-oUGr0aFc.js";import"./chunk-a7oqB5tI.js";import"./chunk-B5pcS96K.js";const x=r.WidthProvider(r.Responsive),u=[{id:"net-worth",name:"Net Worth",category:"Core Metrics",icon:"\ud83d\udcb0",defaultSize:{w:2,h:2}},{id:"income-expense",name:"Income vs Expenses",category:"Core Metrics",icon:"\ud83d\udcca",defaultSize:{w:4,h:3}},{id:"savings-rate",name:"Savings Rate",category:"Core Metrics",icon:"\ud83d\udcb9",defaultSize:{w:2,h:2}},{id:"cash-flow",name:"Cash Flow",category:"Core Metrics",icon:"\ud83d\udcb5",defaultSize:{w:4,h:3}},{id:"line-chart",name:"Line Chart",category:"Charts",icon:"\ud83d\udcc8",defaultSize:{w:4,h:3}},{id:"bar-chart",name:"Bar Chart",category:"Charts",icon:"\ud83d\udcca",defaultSize:{w:4,h:3}},{id:"pie-chart",name:"Pie Chart",category:"Charts",icon:"\ud83e\udd67",defaultSize:{w:3,h:3}},{id:"area-chart",name:"Area Chart",category:"Charts",icon:"\ud83d\udcc9",defaultSize:{w:4,h:3}},{id:"scatter-plot",name:"Scatter Plot",category:"Charts",icon:"\u26ab",defaultSize:{w:3,h:3}},{id:"heatmap",name:"Heatmap",category:"Charts",icon:"\ud83d\uddd3\ufe0f",defaultSize:{w:4,h:4}},{id:"treemap",name:"Treemap",category:"Charts",icon:"\ud83c\udf33",defaultSize:{w:4,h:4}},{id:"sankey",name:"Sankey Diagram",category:"Charts",icon:"\ud83d\udd00",defaultSize:{w:6,h:4}},{id:"waterfall",name:"Waterfall Chart",category:"Charts",icon:"\ud83d\udca7",defaultSize:{w:4,h:3}},{id:"radar",name:"Radar Chart",category:"Charts",icon:"\ud83c\udfaf",defaultSize:{w:3,h:3}},{id:"bubble",name:"Bubble Chart",category:"Charts",icon:"\ud83e\udee7",defaultSize:{w:4,h:3}},{id:"candlestick",name:"Candlestick Chart",category:"Charts",icon:"\ud83d\udd6f\ufe0f",defaultSize:{w:4,h:3}},{id:"trend-analysis",name:"Trend Analysis",category:"Analytics",icon:"\ud83d\udcc8",defaultSize:{w:4,h:3}},{id:"forecast",name:"Forecast",category:"Analytics",icon:"\ud83d\udd2e",defaultSize:{w:4,h:3}},{id:"anomalies",name:"Anomaly Detection",category:"Analytics",icon:"\u26a0\ufe0f",defaultSize:{w:3,h:3}},{id:"correlations",name:"Correlations",category:"Analytics",icon:"\ud83d\udd17",defaultSize:{w:3,h:3}},{id:"seasonality",name:"Seasonal Patterns",category:"Analytics",icon:"\ud83c\udf42",defaultSize:{w:4,h:3}},{id:"cohort",name:"Cohort Analysis",category:"Analytics",icon:"\ud83d\udc65",defaultSize:{w:4,h:4}},{id:"data-table",name:"Data Table",category:"Tables",icon:"\ud83d\udccb",defaultSize:{w:6,h:4}},{id:"transaction-list",name:"Transaction List",category:"Tables",icon:"\ud83d\udcdd",defaultSize:{w:4,h:4}},{id:"top-expenses",name:"Top Expenses",category:"Tables",icon:"\ud83d\udcb8",defaultSize:{w:3,h:3}},{id:"upcoming-bills",name:"Upcoming Bills",category:"Tables",icon:"\ud83d\udcc5",defaultSize:{w:3,h:3}},{id:"goal-progress",name:"Goal Progress",category:"Goals",icon:"\ud83c\udfaf",defaultSize:{w:3,h:2}},{id:"budget-status",name:"Budget Status",category:"Goals",icon:"\ud83d\udcb0",defaultSize:{w:4,h:3}},{id:"budget-variance",name:"Budget Variance",category:"Goals",icon:"\ud83d\udcca",defaultSize:{w:4,h:3}},{id:"custom-metric",name:"Custom Metric",category:"Custom",icon:"\ud83d\udd27",defaultSize:{w:2,h:2}},{id:"custom-query",name:"Custom Query",category:"Custom",icon:"\ud83d\udd0d",defaultSize:{w:4,h:3}},{id:"text-note",name:"Text Note",category:"Custom",icon:"\ud83d\udcdd",defaultSize:{w:2,h:2}}];export{e as default};
