function e({transactionId:e,accountId:t,onUploadComplete:h,onClose:u,compact:y=!1}){const[p,j]=a.useState([]),[b,k]=a.useState(!1),[f,v]=a.useState({}),[N,w]=a.useState([]),[C,D]=a.useState({}),[z,S]=a.useState("receipt"),[I,A]=a.useState([]),[T,U]=a.useState(""),[M,E]=a.useState(""),[B,F]=a.useState(!0),O=a.useRef(null),L=a.useCallback(e=>{const t=Array.from(e.target.files||[]);j(e=>[...e,...t]),e.target&&(e.target.value="")},[]),R=a.useCallback(e=>{e.preventDefault();const t=Array.from(e.dataTransfer.files);j(e=>[...e,...t])},[]),P=a.useCallback(e=>{e.preventDefault()},[]),W=()=>{T.trim()&&!I.includes(T.trim())&&(A([...I,T.trim()]),U(""))},$=e=>e.startsWith("image/")?s.jsx(g,{size:20,className:"text-blue-600"}):"application/pdf"===e?s.jsx(m,{size:20,className:"text-red-600"}):s.jsx(m,{size:20,className:"text-gray-600"});return y?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{ref:O,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:L,className:"hidden"}),s.jsxs("button",{onClick:()=>O.current?.click(),className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:[s.jsx(l,{size:16}),"Attach"]}),N.length>0&&s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[N.length," file",N.length>1?"s":""," attached"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{onDrop:R,onDragOver:P,className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-gray-400 dark:hover:border-gray-500 transition-colors",children:[s.jsx(d,{size:48,className:"mx-auto mb-4 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Drop files here or click to browse"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Supported: Images, PDFs, Word docs, Excel files (max 10MB)"}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("input",{ref:O,type:"file",multiple:!0,accept:"image/*,application/pdf,.doc,.docx,.xls,.xlsx",onChange:L,className:"hidden"}),s.jsxs("button",{onClick:()=>O.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(d,{size:16}),"Select Files"]}),s.jsxs("button",{onClick:()=>{alert("Camera capture coming soon!")},className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:[s.jsx(n,{size:16}),"Take Photo"]})]})]}),p.length>0&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Document Type"}),s.jsxs("select",{value:z,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"receipt",children:"Receipt"}),s.jsx("option",{value:"invoice",children:"Invoice"}),s.jsx("option",{value:"statement",children:"Statement"}),s.jsx("option",{value:"contract",children:"Contract"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:I.map(e=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[s.jsx(c,{size:12}),e,s.jsx("button",{onClick:()=>(e=>{A(I.filter(t=>t!==e))})(e),className:"hover:text-red-600",children:s.jsx(i,{size:12})})]},e))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"Add tag...",value:T,onChange:e=>U(e.target.value),onKeyPress:e=>"Enter"===e.key&&W(),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"}),s.jsx("button",{onClick:W,className:"px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500",children:"Add"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),s.jsx("textarea",{value:M,onChange:e=>E(e.target.value),placeholder:"Add any notes about these documents...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",rows:2})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:B,onChange:e=>F(e.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Extract data from documents (OCR)"})]})]}),p.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white",children:["Selected Files (",p.length,")"]}),p.map((e,t)=>{return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[$(e.type),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.name}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:(a=e.size,a<1024?a+" B":a<1048576?Math.round(a/1024)+" KB":Math.round(a/1048576*10)/10+" MB")})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[void 0!==f[e.name]&&s.jsx("div",{className:"w-20",children:s.jsx("div",{className:"h-1 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${f[e.name]}%`}})})}),C[e.name]&&s.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:C[e.name]}),!b&&s.jsx("button",{onClick:()=>(e=>{j(t=>t.filter((t,a)=>a!==e));const t=p[e].name;D(e=>{const a={...e};return delete a[t],a})})(t),className:"text-gray-400 hover:text-red-600",children:s.jsx(i,{size:16})})]})]},t);var a})]}),N.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(x,{size:16,className:"text-green-600"}),"Uploaded Documents (",N.length,")"]}),N.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[$(e.mimeType),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.fileName}),e.extractedData&&s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.extractedData.merchant&&`Merchant: ${e.extractedData.merchant}`,e.extractedData.totalAmount&&` \u2022 \xa3${e.extractedData.totalAmount}`]})]})]}),s.jsx(x,{size:20,className:"text-green-600"})]},e.id))]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:()=>{j([]),w([]),D({}),v({})},className:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Clear All"}),s.jsxs("div",{className:"flex gap-3",children:[u&&s.jsx("button",{onClick:u,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),s.jsx("button",{onClick:async()=>{if(0===p.length)return;k(!0),D({});const a=[];for(const l of p)try{v(e=>({...e,[l.name]:0}));const s=setInterval(()=>{v(e=>({...e,[l.name]:Math.min((e[l.name]||0)+10,90)}))},100),d={transactionId:e,accountId:t,type:z,tags:I,notes:M,extractData:B},n=await r.uploadDocument(l,d);clearInterval(s),v(e=>({...e,[l.name]:100})),a.push(n),h&&h(n)}catch(s){D(e=>({...e,[l.name]:s instanceof Error?s.message:"Upload failed"}))}w(e=>[...e,...a]),j([]),k(!1),setTimeout(()=>{v({})},1e3)},disabled:0===p.length||b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:b?s.jsxs(s.Fragment,{children:[s.jsx(o,{size:16,className:"animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(d,{size:16}),"Upload ",p.length," File",1!==p.length?"s":""]})})]})]})]})}function t({transactionId:t,accountId:n,compact:x=!1,onDocumentSelect:N}){const[w,C]=a.useState([]),[D,z]=a.useState([]),[S,I]=a.useState(null),[A,T]=a.useState(!1),[U,M]=a.useState(!1),[E,B]=a.useState(""),[F,O]=a.useState("all"),[L,R]=a.useState([]),[P,W]=a.useState(!1),[$,K]=a.useState(null),[H,X]=a.useState(null);a.useEffect(()=>{Y(),G()},[t,n]),a.useEffect(()=>{V()},[w,E,F,L]);const Y=async()=>{W(!0);const e={};t&&(e.transactionId=t),n&&(e.accountId=n);const a=await r.getDocuments(e);C(a),W(!1)},G=()=>{const e=r.getStorageStats();X(e)},V=()=>{let e=[...w];if("all"!==F&&(e=e.filter(e=>e.type===F)),L.length>0&&(e=e.filter(e=>L.some(t=>e.tags.includes(t)))),E){const t=E.toLowerCase();e=e.filter(e=>e.fileName.toLowerCase().includes(t)||e.notes?.toLowerCase().includes(t)||e.extractedData?.merchant?.toLowerCase().includes(t)||e.extractedData?.rawText?.toLowerCase().includes(t))}z(e)},q=e=>{Y(),G()},J=e=>new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),Q=e=>e<1024?e+" B":e<1048576?Math.round(e/1024)+" KB":Math.round(e/1048576*10)/10+" MB",Z=e=>e.startsWith("image/")?s.jsx(g,{size:20,className:"text-blue-600"}):"application/pdf"===e?s.jsx(m,{size:20,className:"text-red-600"}):s.jsx(m,{size:20,className:"text-gray-600"}),_=e=>{switch(e){case"receipt":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"invoice":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"statement":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";case"contract":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}},ee=e=>{const t=window.document.createElement("a");t.href=e.fullUrl,t.download=e.fileName,t.click()},te=()=>{const e=new Set;return w.forEach(t=>t.tags.forEach(t=>e.add(t))),Array.from(e)};return x?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(l,{size:16,className:"text-gray-500"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Attachments (",w.length,")"]})]}),s.jsx(e,{transactionId:t,accountId:n,onUploadComplete:q,compact:!0})]}),w.length>0&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.slice(0,4).map(e=>s.jsxs("button",{onClick:()=>{I(e),M(!0)},className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 text-left",children:[Z(e.mimeType),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:e.fileName})]},e.id)),w.length>4&&s.jsxs("button",{onClick:()=>N?.(w[0]),className:"p-2 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 text-center text-sm text-gray-600 dark:text-gray-400",children:["+",w.length-4," more"]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Document Manager"}),H&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[H.totalDocuments," documents \u2022 ",H.totalSizeMB," MB used"]})]}),s.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(d,{size:16}),"Upload Documents"]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(h,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search documents...",value:E,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),s.jsxs("select",{value:F,onChange:e=>O(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"receipt",children:"Receipts"}),s.jsx("option",{value:"invoice",children:"Invoices"}),s.jsx("option",{value:"statement",children:"Statements"}),s.jsx("option",{value:"contract",children:"Contracts"}),s.jsx("option",{value:"other",children:"Other"})]}),te().length>0&&s.jsxs("select",{value:"",onChange:e=>{e.target.value&&!L.includes(e.target.value)&&R([...L,e.target.value])},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"",children:"Filter by tag..."}),te().map(e=>s.jsx("option",{value:e,children:e},e))]})]}),L.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[L.map(e=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-full text-sm",children:[s.jsx(c,{size:12}),e,s.jsx("button",{onClick:()=>R(L.filter(t=>t!==e)),className:"hover:text-red-600",children:s.jsx(i,{size:12})})]},e)),s.jsx("button",{onClick:()=>R([]),className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Clear all"})]})]}),P?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(o,{size:48,className:"animate-spin mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading documents..."})]}):0===D.length?s.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:[s.jsx(u,{size:48,className:"mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:0===w.length?"No documents yet":"No documents match your filters"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:0===w.length?"Upload receipts, invoices, and other documents to keep them organized":"Try adjusting your search or filters"}),0===w.length&&s.jsx("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Upload Your First Document"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:D.map(e=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"h-40 bg-gray-100 dark:bg-gray-700 flex items-center justify-center cursor-pointer",onClick:()=>{I(e),M(!0)},children:e.thumbnailUrl?s.jsx("img",{src:e.thumbnailUrl,alt:e.fileName,className:"w-full h-full object-cover"}):Z(e.mimeType)}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm truncate mb-2",children:e.fileName}),s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:J(e.uploadDate)}),s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Q(e.fileSize)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${_(e.type)}`,children:e.type}),e.extractedData&&s.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[s.jsx(y,{size:12}),"OCR"]})]}),e.extractedData?.merchant&&s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:e.extractedData.merchant}),e.tags.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,2).map(e=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded text-xs",children:[s.jsx(c,{size:10}),e]},e)),e.tags.length>2&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-2]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>{I(e),M(!0)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>ee(e),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Download",children:s.jsx(p,{size:16})}),s.jsx("button",{onClick:()=>K(e),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Edit",children:s.jsx(j,{size:16})}),s.jsx("button",{onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this document?")&&(r.deleteDocument(t),Y(),G(),S?.id===t&&(I(null),M(!1))));var t},className:"p-1 text-gray-400 hover:text-red-600",title:"Delete",children:s.jsx(b,{size:16})})]})]})]})]},e.id))}),s.jsx(k,{isOpen:A,onClose:()=>T(!1),title:"Upload Documents",size:"lg",children:s.jsx(f,{children:s.jsx(e,{transactionId:t,accountId:n,onUploadComplete:q,onClose:()=>T(!1)})})}),S&&U&&s.jsxs(k,{isOpen:U,onClose:()=>{M(!1),I(null)},title:S.fileName,size:"xl",children:[s.jsx(f,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4 max-h-96 overflow-auto",children:S.mimeType.startsWith("image/")?s.jsx("img",{src:S.fullUrl,alt:S.fileName,className:"max-w-full h-auto mx-auto"}):"application/pdf"===S.mimeType?s.jsxs("div",{className:"text-center",children:[s.jsx(m,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"PDF preview not available"})]}):s.jsxs("div",{className:"text-center",children:[s.jsx(m,{size:64,className:"mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Preview not available for this file type"})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Document Information"}),s.jsxs("dl",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),s.jsx("dd",{className:"font-medium text-gray-900 dark:text-white capitalize",children:S.type})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Size:"}),s.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:Q(S.fileSize)})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Uploaded:"}),s.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:J(S.uploadDate)})]}),S.expiryDate&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Expires:"}),s.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:J(S.expiryDate)})]})]})]}),S.extractedData&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Extracted Data"}),s.jsxs("dl",{className:"space-y-1 text-sm",children:[S.extractedData.merchant&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Merchant:"}),s.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:S.extractedData.merchant})]}),S.extractedData.totalAmount&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),s.jsxs("dd",{className:"font-medium text-gray-900 dark:text-white",children:["\xa3",S.extractedData.totalAmount]})]}),S.extractedData.date&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Date:"}),s.jsx("dd",{className:"font-medium text-gray-900 dark:text-white",children:J(S.extractedData.date)})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-gray-600 dark:text-gray-400",children:"Confidence:"}),s.jsxs("dd",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(100*S.extractedData.confidence),"%"]})]})]})]})]}),S.tags.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:S.tags.map(e=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm",children:[s.jsx(c,{size:12}),e]},e))})]}),S.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Notes"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:S.notes})]})]})}),s.jsx(v,{children:s.jsxs("div",{className:"flex justify-between w-full",children:[s.jsxs("button",{onClick:()=>ee(S),className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[s.jsx(p,{size:16}),"Download"]}),s.jsx("button",{onClick:()=>{M(!1),I(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})})]}),$&&s.jsxs(k,{isOpen:!0,onClose:()=>K(null),title:"Edit Document",size:"md",children:[s.jsx(f,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Document Type"}),s.jsxs("select",{value:$.type,onChange:e=>K({...$,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"receipt",children:"Receipt"}),s.jsx("option",{value:"invoice",children:"Invoice"}),s.jsx("option",{value:"statement",children:"Statement"}),s.jsx("option",{value:"contract",children:"Contract"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),s.jsx("textarea",{value:$.notes||"",onChange:e=>K({...$,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]})]})}),s.jsxs(v,{children:[s.jsx("button",{onClick:()=>K(null),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),s.jsx("button",{onClick:()=>{return e=$,t={type:$.type,notes:$.notes},r.updateDocument(e.id,t),Y(),void K(null);var e,t},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]})]})]})}import{r as a,H as s}from"./chunk-DowOIOga.js";import{d as r}from"./chunk-DUFDJ-wW.js";import{bt as l,aY as d,bp as n,k as c,X as i,x,ac as o,bw as g,aH as m,I as h,aX as u,v as y,ay as p,E as j,D as b,M as k,d as f,e as v}from"./index-qHm2isZb.js";export{t as D};
