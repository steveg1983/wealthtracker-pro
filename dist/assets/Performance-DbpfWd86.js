function e({children:e,className:s="",padding:t="md",variant:r="surface",...n}){return a.jsx("div",{className:`\n        rounded-[var(--radius-lg)]\n        ${{surface:"\n      bg-[var(--color-surface-primary)]\n      border border-[var(--color-border-primary)]\n    ",elevated:"\n      bg-[var(--color-surface-elevated)]\n      shadow-[var(--shadow-md)]\n    ",bordered:"\n      bg-[var(--color-background-secondary)]\n      border-2 border-[var(--color-border-secondary)]\n    "}[r]}\n        ${{none:"",sm:"p-[var(--spacing-4)]",md:"p-[var(--spacing-6)]",lg:"p-[var(--spacing-8)]"}[t]}\n        ${s}\n      `,...n,children:e})}function s({size:e=24,className:s="",strokeWidth:t=2}){return a.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round",className:s,children:a.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}import{r as t,H as a,bN as r,d1 as n,c2 as l}from"./chunk-DowOIOga.js";import{P as i}from"./chunk-r7IQz9KP.js";import"./chunk-ddLY9KjI.js";const c=()=>{const{getNavigationTiming:i,getResourceTiming:c,getMemoryUsage:d,getBundleSize:o}=(()=>{const e=t.useCallback(()=>{const e={},s=new PerformanceObserver(s=>{const t=s.getEntries(),a=t[t.length-1];e.lcp=a.renderTime||a.loadTime}),t=new PerformanceObserver(s=>{s.getEntries().forEach(s=>{e.fid=s.processingStart-s.startTime})}),a=new PerformanceObserver(s=>{let t=0;s.getEntries().forEach(e=>{e.hadRecentInput||(t+=e.value)}),e.cls=t}),r=new PerformanceObserver(s=>{s.getEntries().forEach(s=>{e.inp=s.duration})});try{s.observe({type:"largest-contentful-paint",buffered:!0}),t.observe({type:"first-input",buffered:!0}),a.observe({type:"layout-shift",buffered:!0}),r.observe({type:"event",buffered:!0,durationThreshold:40})}catch(l){}performance.getEntriesByType("paint").forEach(s=>{"first-contentful-paint"===s.name&&(e.fcp=s.startTime)});const n=performance.getEntriesByType("navigation");if(n.length>0){const s=n[0];e.ttfb=s.responseStart-s.requestStart}return e},[]),s=t.useCallback(()=>{const e=performance.getEntriesByType("navigation")[0];return e?{loadTime:e.loadEventEnd-e.fetchStart,domContentLoaded:e.domContentLoadedEventEnd-e.domContentLoadedEventStart,domInteractive:e.domInteractive-e.fetchStart}:null},[]),a=t.useCallback(()=>performance.getEntriesByType("resource").map(e=>({name:e.name,duration:e.duration,size:e.transferSize||0,type:e.initiatorType})),[]),r=t.useCallback((e,s)=>{performance.measure(e,{start:0,duration:s})},[]),n=t.useCallback(e=>{const s=`${e}-render-start`,t=`${e}-render-end`,a=`${e}-render`;return{start:()=>performance.mark(s),end:()=>(performance.mark(t),performance.measure(a,s,t),performance.getEntriesByName(a)[0].duration)}},[]),l=t.useCallback(()=>{if("PerformanceObserver"in window){const s=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{})});try{s.observe({entryTypes:["longtask"]})}catch(e){}}},[]),i=t.useCallback(()=>{if("memory"in performance){const e=performance.memory;return{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,percentUsed:e.usedJSHeapSize/e.jsHeapSizeLimit*100}}return null},[]),c=t.useCallback(()=>{const e=performance.getEntriesByType("resource").filter(e=>e.name.endsWith(".js")),s=e.reduce((e,s)=>e+(s.transferSize||0),0),t=e.reduce((e,s)=>(s.transferSize||0)>(e.transferSize||0)?s:e);return{totalSize:s,scriptCount:e.length,largestBundle:{name:t.name.split("/").pop()||"",size:t.transferSize||0}}},[]),d=t.useCallback(e=>{"undefined"!=typeof gtag&&gtag("event","performance",{event_category:"Web Vitals",...e})},[]);return t.useEffect(()=>{"undefined"!=typeof window&&("complete"===document.readyState?(e(),l()):window.addEventListener("load",()=>{e(),l(),s(),c(),i()}))},[e,l,s,c,i]),{trackCustomMetric:r,measureComponentRender:n,getNavigationTiming:s,getResourceTiming:a,getMemoryUsage:i,getBundleSize:c,sendMetrics:d}})(),[m,x]=t.useState(null),[g,p]=t.useState(null),[u,h]=t.useState(null),[f,j]=t.useState(null),[b,v]=t.useState([]);t.useEffect(()=>{const e=()=>{x(i());const e=c(),s=e.filter(e=>"script"===e.type),t=e.filter(e=>"link"===e.type);p({totalResources:e.length,jsCount:s.length,cssCount:t.length,avgJsLoad:s.reduce((e,s)=>e+s.duration,0)/s.length||0,avgCssLoad:t.reduce((e,s)=>e+s.duration,0)/t.length||0}),h(d()),j(o())};"complete"===document.readyState?e():window.addEventListener("load",e);const s=new PerformanceObserver(e=>{const s=e.getEntries(),t=[];s.forEach(e=>{"first-contentful-paint"===e.name&&t.push({metric:"FCP",value:e.startTime,rating:e.startTime<=1800?"good":e.startTime<=3e3?"needs-improvement":"poor",threshold:{good:1800,poor:3e3}})}),t.length>0&&v(e=>[...e,...t])});try{s.observe({type:"paint",buffered:!0})}catch(t){}return()=>{window.removeEventListener("load",e)}},[i,c,d,o]);const y=e=>{switch(e){case"good":return a.jsx(l,{className:"w-5 h-5 text-green-500"});case"needs-improvement":return a.jsx(r,{className:"w-5 h-5 text-yellow-500"});case"poor":return a.jsx(n,{className:"w-5 h-5 text-red-500"});default:return null}},N=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},S=e=>e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(2)}s`;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(s,{className:"w-8 h-8 text-blue-600"}),a.jsx("h2",{className:"text-2xl font-bold",children:"Performance Dashboard"})]}),a.jsxs(e,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Core Web Vitals"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:b.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:e.metric}),a.jsx("p",{className:"text-xl font-semibold",children:S(e.value)})]}),y(e.rating)]},s))})]}),m&&a.jsxs(e,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Page Load Metrics"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Load Time"}),a.jsx("p",{className:"text-xl font-semibold",children:S(m.loadTime)})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"DOM Content Loaded"}),a.jsx("p",{className:"text-xl font-semibold",children:S(m.domContentLoaded)})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"DOM Interactive"}),a.jsx("p",{className:"text-xl font-semibold",children:S(m.domInteractive)})]})]})]}),f&&a.jsxs(e,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bundle Analysis"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total JS Size"}),a.jsx("p",{className:"text-xl font-semibold",children:N(f.totalSize)})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Script Count"}),a.jsx("p",{className:"text-xl font-semibold",children:f.scriptCount})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Largest Bundle"}),a.jsx("p",{className:"text-xl font-semibold",children:N(f.largestBundle.size)}),a.jsx("p",{className:"text-xs text-gray-500",children:f.largestBundle.name})]})]})]}),g&&a.jsxs(e,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Resource Loading"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"JavaScript Files"}),a.jsx("p",{className:"text-xl font-semibold",children:g.jsCount}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Avg load time: ",S(g.avgJsLoad)]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"CSS Files"}),a.jsx("p",{className:"text-xl font-semibold",children:g.cssCount}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Avg load time: ",S(g.avgCssLoad)]})]})]})]}),u&&a.jsxs(e,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Memory Usage"}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"JS Heap Usage"}),a.jsxs("span",{className:"text-sm font-medium",children:[u.percentUsed.toFixed(1),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${Math.min(u.percentUsed,100)}%`}})}),a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:N(u.usedJSHeapSize)}),a.jsx("span",{className:"text-xs text-gray-500",children:N(u.jsHeapSizeLimit)})]})]})})]}),a.jsxs(e,{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance Recommendations"}),a.jsxs("ul",{className:"space-y-2",children:[f&&f.totalSize>1e6&&a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(r,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),a.jsx("span",{className:"text-sm",children:"Consider code splitting - total bundle size exceeds 1MB"})]}),g&&g.jsCount>20&&a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(r,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),a.jsxs("span",{className:"text-sm",children:["High number of JavaScript files (",g.jsCount,") - consider bundling"]})]}),u&&u.percentUsed>70&&a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(r,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),a.jsx("span",{className:"text-sm",children:"High memory usage detected - check for memory leaks"})]}),m&&m.loadTime>3e3&&a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx(r,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),a.jsx("span",{className:"text-sm",children:"Page load time exceeds 3 seconds - optimize critical rendering path"})]})]})]})]})},d=()=>a.jsx(i,{title:"Performance",children:a.jsx(c,{})});export{d as default};
