function e({isOpen:e,onClose:t,categoryId:r,categoryName:n}){const{transactions:i,accounts:d}=f(),{formatCurrency:l}=z(),[o,c]=s.useState(""),[x,g]=s.useState(""),[m,h]=s.useState(""),[y,u]=s.useState(""),[p,b]=s.useState("all"),j=s.useMemo(()=>i.filter(e=>e.category===r),[i,r]),k=s.useMemo(()=>{let e=j;if("income"===p?e=e.filter(e=>"income"===e.type||"transfer"===e.type&&e.amount>0):"expense"===p&&(e=e.filter(e=>"expense"===e.type||"transfer"===e.type&&e.amount<0)),o){const t=new Date(o);t.setHours(0,0,0,0),e=e.filter(e=>new Date(e.date)>=t)}if(x){const t=new Date(x);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.date)<=t)}if(y.trim()){const t=y.toLowerCase().trim().split(/\s+/);e=e.filter(e=>{const r=d.find(t=>t.id===e.accountId),a=e.description.toLowerCase();if(t.every(e=>a.includes(e)))return!0;const s=[e.description,e.amount.toString(),Math.abs(e.amount).toString(),l(Math.abs(e.amount)),r?.name||"",r?.institution||"",e.type,e.categoryName||n,new Date(e.date).toLocaleDateString(),new Date(e.date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),e.notes||"",e.tags?.join(" ")||""].join(" ").toLowerCase();return t.every(e=>s.includes(e))})}return e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())},[j,o,x,y,p,d,l,n]);s.useEffect(()=>{const e=setTimeout(()=>{u(m)},150);return()=>clearTimeout(e)},[m]);const v=s.useMemo(()=>{let e=0,t=0;return k.forEach(r=>{"income"===r.type||"transfer"===r.type&&r.amount>0?e+=r.amount:("expense"===r.type||"transfer"===r.type&&r.amount<0)&&(t+=Math.abs(r.amount))}),{income:e,expense:t,net:e-t}},[k]);return s.useEffect(()=>{if(e&&j.length>0){const e=j.map(e=>new Date(e.date).getTime()),t=new Date(Math.min(...e)),r=new Date(Math.max(...e));o||c(t.toISOString().split("T")[0]),x||g(r.toISOString().split("T")[0])}},[e,j,o,x]),s.useEffect(()=>{e||(h(""),b("all"),c(""),g(""))},[e]),e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg sm:rounded-lg shadow-xl w-full sm:max-w-4xl max-h-[90vh] sm:max-h-[85vh] flex flex-col",children:[a.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-white",children:['Transactions in "',n,'"']}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1",children:[j.length," total transactions"]})]}),a.jsx("button",{onClick:t,className:"p-1 -m-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx(E,{size:24})})]})}),a.jsxs("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700 space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{onClick:()=>b("all"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors "+("all"===p?"bg-primary text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"All Transactions"}),a.jsx("button",{onClick:()=>b("income"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors "+("income"===p?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"All Income"}),a.jsx("button",{onClick:()=>b("expense"),className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors "+("expense"===p?"bg-red-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"All Outgoings"})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsx(L,{className:"text-gray-400 hidden sm:block",size:18}),a.jsxs("div",{className:"flex flex-wrap gap-2 items-center flex-1",children:[a.jsx("input",{type:"date",value:o,onChange:e=>c(e.target.value),className:"flex-1 min-w-[130px] px-2 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm"}),a.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"to"}),a.jsx("input",{type:"date",value:x,onChange:e=>g(e.target.value),className:"flex-1 min-w-[130px] px-2 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),a.jsx("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"Search transactions...",className:"w-full pl-9 pr-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm"}),m&&a.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",title:"Clear search",children:a.jsx($,{size:18})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:n.toLowerCase().includes("transfer")?"Money In:":"Income:"}),a.jsx("span",{className:"ml-2 font-medium text-green-600 dark:text-green-400",children:l(v.income)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:n.toLowerCase().includes("transfer")?"Money Out:":"Expense:"}),a.jsx("span",{className:"ml-2 font-medium text-red-600 dark:text-red-400",children:l(v.expense)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Net:"}),a.jsxs("span",{className:"ml-2 font-medium "+(n.toLowerCase().includes("transfer")&&Math.abs(v.net)<.01||v.net>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[l(v.net),n.toLowerCase().includes("transfer")&&Math.abs(v.net)<.01&&" \u2713"]})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:0===k.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:m?`No transactions matching "${m}"`:o||x||"all"!==p?"No matching transactions found":"No transactions in this category"}),m&&a.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Try searching for partial words, amounts, or account names"}),(o||x||"all"!==p)&&!m&&a.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"Try adjusting your filters or date range"})]}):a.jsxs(a.Fragment,{children:[m&&a.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Found ",k.length," transaction",1!==k.length?"s":"",' matching "',m,'"']}),a.jsx("div",{className:"space-y-2",children:k.map(e=>{const t=d.find(t=>t.id===e.accountId);return a.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:e.description}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[new Date(e.date).toLocaleDateString()," \u2022 ",t?.name||"Unknown Account"]})]}),a.jsxs("div",{className:"text-right ml-4",children:[a.jsxs("p",{className:"font-medium "+("income"===e.type||"transfer"===e.type&&e.amount>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e.amount>=0?"+":"-",l(Math.abs(e.amount))]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"transfer"===e.type?`transfer (${e.amount>0?"in":"out"})`:e.type})]})]})})},e.id)})})]})}),a.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",k.length," of ",j.length," transactions"]}),a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"Close"})]})})]})}):null}function t({category:e,isEditMode:t,isDeleteMode:r,isEditing:s,editingName:n,onEdit:i,onDelete:d,onNameChange:l,onSave:o,onCancel:c,onClick:x,children:g,isDraggable:m=!0}){const{attributes:h,listeners:y,setNodeRef:b,transform:f,transition:j,isDragging:k}=u({id:e.id,disabled:!t||!m||r}),v={transform:p.Transform.toString(f),transition:j};return a.jsx("div",{ref:b,style:v,children:a.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${k?"opacity-50":""} ${t?"hover:bg-gray-100 dark:hover:bg-gray-700":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t&&m&&a.jsx("div",{...h,...y,className:"cursor-move text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300",children:a.jsx(S,{size:16})}),!t&&!m&&a.jsx("span",{className:"w-4"}),s?a.jsx("input",{type:"text",value:n,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"===e.key?o():"Escape"===e.key&&c()},className:"px-2 py-1 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white flex-1",autoFocus:!0,onClick:e=>e.stopPropagation()}):a.jsx("div",{className:"flex items-center gap-2 flex-1 "+(t||r||!x?"":"cursor-pointer"),onClick:e=>{e.stopPropagation(),r?d():t?i():x&&x()},children:a.jsx("span",{className:`${"sub"===e.level?"font-medium":""} text-gray-900 dark:text-white ${r?"hover:text-red-600 dark:hover:text-red-400":t?"hover:text-primary dark:hover:text-primary":t||r?"":"hover:text-primary dark:hover:text-primary"}`,children:e.name})})]}),a.jsx("div",{className:"flex items-center gap-2",children:s?a.jsxs(a.Fragment,{children:[a.jsx(T,{onClick:o,icon:a.jsx(I,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"}),a.jsx(T,{onClick:c,icon:a.jsx(M,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"})]}):a.jsx(a.Fragment,{children:g})})]})})}function r(){const{transactions:r,categories:u,updateCategory:p,deleteCategory:b,updateTransaction:S,getSubCategories:I,getDetailCategories:M}=f(),E=e=>{const t=u.find(t=>t.id===e);if(!t)return e;if("detail"===t.level&&t.parentId){const e=u.find(e=>e.id===t.parentId);return e?`${e.name} > ${t.name}`:t.name}return t.name},[z,L]=s.useState(!1),[W,$]=s.useState(!1),[A,F]=s.useState(null),[P,V]=s.useState(""),[H,U]=s.useState(!1),[G,R]=s.useState(null),[X,B]=s.useState(""),[K,Q]=s.useState(new Set),[q,J]=s.useState(null),[Y,Z]=s.useState({}),[_,ee]=s.useState(null),[te,re]=s.useState(""),[ae,se]=s.useState(!1);s.useState(()=>{const e={};return[...new Set(u.map(e=>e.parentId).filter(Boolean))].forEach(t=>{t&&(e[t]=u.filter(e=>e.parentId===t).map(e=>e.id))}),Z(e),null});const ne=n(i(y,{activationConstraint:{distance:8}}),i(h,{coordinateGetter:m})),ie=(e,t)=>{F(e),V(t)},de=()=>{A&&P.trim()&&(p(A,{name:P.trim()}),F(null),V(""))},le=()=>{F(null),V("")},oe=e=>{const t=u.find(t=>t.id===e);if(!t)return;const a=r.filter(t=>t.category===e).length;u.filter(t=>t.parentId===e).length>0?alert("Cannot delete category with subcategories. Delete subcategories first."):a>0?(R(e),B("")):confirm(`Are you sure you want to delete "${t.name}"?`)&&b(e)},ce=(e,t)=>{z||W||(ee(e),re(t))},xe=(e,s)=>{const n=[...I(s)].sort((e,t)=>{const r=Y[s]||[],a=r.indexOf(e.id),n=r.indexOf(t.id);return-1!==a&&-1!==n?a-n:-1!==a?-1:-1!==n?1:0}),i=n.flatMap(e=>M(e.id).map(e=>e.id));return a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-3",children:e}),a.jsx(x,{items:[...n.map(e=>e.id),...i],strategy:g,children:a.jsx("div",{className:"space-y-1",children:n.map(e=>{const s=K.has(e.id),n=[...M(e.id)].sort((t,r)=>{const a=Y[e.id]||[],s=a.indexOf(t.id),n=a.indexOf(r.id);return-1!==s&&-1!==n?s-n:-1!==s?-1:-1!==n?1:0}),i=r.filter(t=>{const r=u.find(e=>e.id===t.category);return r&&(r.id===e.id||r.parentId===e.id)}).length;return a.jsxs("div",{children:[a.jsx(t,{category:e,isEditMode:z,isDeleteMode:W,isEditing:A===e.id,editingName:P,onEdit:()=>ie(e.id,e.name),onDelete:()=>oe(e.id),onNameChange:V,onSave:de,onCancel:le,onClick:()=>ce(e.id,e.name),isDraggable:!0,children:a.jsxs("div",{className:"flex items-center gap-2",children:[n.length>0&&a.jsx(T,{onClick:t=>{t?.stopPropagation(),(e=>{const t=new Set(K);t.has(e)?t.delete(e):t.add(e),Q(t)})(e.id)},icon:s?a.jsx(C,{size:16}):a.jsx(D,{size:16}),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700"}),!z&&a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",i,")"]})]})}),s&&n.length>0&&a.jsx("div",{className:"ml-8 space-y-1",children:n.map(e=>{const s=r.filter(t=>t.category===e.id).length;return a.jsx(t,{category:e,isEditMode:z,isDeleteMode:W,isEditing:A===e.id,editingName:P,onEdit:()=>ie(e.id,e.name),onDelete:()=>oe(e.id),onNameChange:V,onSave:de,onCancel:le,onClick:()=>ce(e.id,e.name),isDraggable:!0,children:!z&&a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",s,")"]})},e.id)})})]},e.id)})})})]})};return a.jsxs(O,{title:"Categories",rightContent:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{L(!z),W&&$(!1),F(null)},className:"w-8 h-8 flex items-center justify-center transition-colors "+(z?"text-white bg-gray-600 hover:bg-gray-700":"text-gray-500 hover:text-gray-700"),title:z?"Done Editing":"Edit Categories",children:a.jsx(v,{size:16})}),z&&a.jsx(T,{onClick:()=>$(!W),icon:a.jsx(N,{size:16}),variant:W?"danger":"ghost",size:"sm",className:W?"":"text-gray-500 hover:text-gray-700",title:W?"Cancel Delete":"Delete Categories"}),a.jsx(T,{onClick:()=>U(!0),icon:a.jsx(w,{size:16}),variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",title:"Add Category"})]}),children:[z||W?a.jsx("div",{className:"border rounded-2xl p-4 mb-6 "+(W?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"),children:a.jsxs("div",{className:"text-sm space-y-2 "+(W?"text-red-800 dark:text-red-200":"text-blue-800 dark:text-blue-200"),children:[a.jsx("p",{children:a.jsx("strong",{children:W?"Delete Mode Active:":"Edit Mode Active:"})}),a.jsx("ul",{className:"list-disc list-inside space-y-1 ml-2",children:W?a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"Click on any category to delete it"}),a.jsx("li",{children:"Categories with transactions will prompt for reassignment"}),a.jsx("li",{children:"Categories with subcategories must have subcategories deleted first"})]}):a.jsxs(a.Fragment,{children:[a.jsx("li",{children:"Click on any category name to rename it"}),a.jsx("li",{children:"Drag detail categories to different subcategories to reorganize them"}),a.jsx("li",{children:"Toggle Delete Mode to remove categories"}),a.jsx("li",{children:"Default categories can be edited just like custom ones"})]})})]})}):a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 mb-6",children:a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("p",{className:"mb-2",children:["\ud83d\udca1 ",a.jsx("strong",{children:"Tip:"})]}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[a.jsx("li",{children:"Click on any category name to view its transactions"}),a.jsx("li",{children:"Click the arrow buttons to expand/collapse subcategories"}),a.jsx("li",{children:"Use Edit Mode to rename or reorganize categories"}),a.jsx("li",{children:"The number in parentheses shows how many transactions are in each category"})]})]})}),a.jsx("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 p-6",children:a.jsxs(d,{sensors:ne,collisionDetection:l,onDragStart:e=>{J(e.active.id)},onDragEnd:e=>{const{active:t,over:r}=e;if(J(null),!r||t.id===r.id)return;const a=u.find(e=>e.id===t.id),s=u.find(e=>e.id===r.id);if(a&&s){if(a.parentId===s.parentId&&a.level===s.level){const e=a.parentId||"",s=Y[e]||[],n=s.indexOf(t.id),i=s.indexOf(r.id);if(-1!==n&&-1!==i){const t=c(s,n,i);Z(r=>({...r,[e]:t}))}return}if("detail"!==a.level||"sub"!==s.level){if("detail"===a.level&&"detail"===s.level&&a.parentId!==s.parentId){p(t.id,{parentId:s.parentId});const e=a.parentId||"",n=s.parentId||"";Y[e]&&Z(r=>({...r,[e]:r[e].filter(e=>e!==t.id)}));const i=Y[n]?.indexOf(r.id)||0;return void Z(e=>({...e,[n]:[...(e[n]||[]).slice(0,i+1),t.id,...(e[n]||[]).slice(i+1).filter(e=>e!==t.id)]}))}if("sub"===a.level&&"sub"===s.level){const e=u.find(e=>e.id===a.parentId),n=u.find(e=>e.id===s.parentId);if(e&&n&&e.id!==n.id){p(t.id,{parentId:n.id,type:"type-income"===n.id?"income":"type-expense"===n.id?"expense":"both"});const e=a.parentId||"",s=n.id;Y[e]&&Z(r=>({...r,[e]:r[e].filter(e=>e!==t.id)}));const i=Y[s]?.indexOf(r.id)||0;Z(e=>({...e,[s]:[...(e[s]||[]).slice(0,i+1),t.id,...(e[s]||[]).slice(i+1).filter(e=>e!==t.id)]}))}else if(e&&n&&e.id===n.id){const a=e.id,s=Y[a]||[],n=s.indexOf(t.id),i=s.indexOf(r.id);if(-1!==n&&-1!==i){const e=c(s,n,i);Z(t=>({...t,[a]:e}))}}return}}else if(a.type===s.type||"both"===a.type||"both"===s.type){p(t.id,{parentId:r.id});const e=a.parentId||"",s=r.id;Y[e]&&Z(r=>({...r,[e]:r[e].filter(e=>e!==t.id)})),Z(e=>({...e,[s]:[...e[s]||[],t.id]}))}}},children:[a.jsxs("div",{className:"space-y-6",children:[xe("Income Categories","type-income"),xe("Expense Categories","type-expense"),xe("Transfer Categories","type-transfer"),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Other Categories"}),a.jsx("div",{className:"space-y-1",children:u.filter(e=>"both"===e.type&&"detail"===e.level&&!e.parentId).map(e=>{const s=r.filter(t=>t.category===e.id).length;return a.jsx("div",{className:"ml-4",children:a.jsx(t,{category:e,isEditMode:z,isDeleteMode:W,isEditing:A===e.id,editingName:P,onEdit:()=>ie(e.id,e.name),onDelete:()=>oe(e.id),onNameChange:V,onSave:de,onCancel:le,onClick:()=>ce(e.id,e.name),isDraggable:!1,children:!z&&a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",s,")"]})})},e.id)})})]})]}),a.jsx(o,{children:q?a.jsx("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl p-2 rounded-2xl shadow-lg border border-white/20 dark:border-gray-700/50 opacity-90",children:u.find(e=>e.id===q)?.name}):null})]})}),G&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(j,{className:"text-orange-500",size:24}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Category"})]}),(()=>{const e=u.find(e=>e.id===G),t=r.filter(e=>e.category===G).length;return a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:['The category "',e?.name,'" has ',t," transaction",1!==t?"s":""," associated with it."]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Please select a category to reassign these transactions to:"}),a.jsxs("select",{value:X,onChange:e=>B(e.target.value),className:"w-full px-3 py-2 bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm border border-gray-300/50 dark:border-gray-600/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent dark:text-white mb-6",children:[a.jsx("option",{value:"",children:"Select a category..."}),u.filter(t=>t.id!==G&&"detail"===t.level&&("both"===e?.type||"both"===t.type||t.type===e?.type)).map(e=>a.jsx("option",{value:e.id,children:E(e.id)},e.id))]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{R(null),B("")},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),a.jsx("button",{onClick:()=>{X&&(r.filter(e=>e.category===G).forEach(e=>{S(e.id,{category:X})}),b(G),R(null),B(""))},className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50",disabled:!X,children:"Delete & Reassign"})]})]})})()]})}),a.jsx(k,{isOpen:H,onClose:()=>U(!1)}),_&&!ae&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"View Transactions"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Would you like to see all transactions in the "',te,'" category?']}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{ee(null),re("")},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),a.jsx("button",{onClick:()=>{se(!0)},className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary",children:"View Transactions"})]})]})}),ae&&_&&a.jsx(e,{isOpen:!0,onClose:()=>{se(!1),ee(null),re("")},categoryId:_,categoryName:te})]})}import{H as a,r as s,cL as n,cM as i,cN as d,cO as l,cP as o,cQ as c,cR as x,cS as g,cT as m,cU as h,cV as y,cW as u,cX as p}from"./chunk-DowOIOga.js";import{b1 as b,a as f,aa as j,j as k,aO as v,D as N,$ as w,G as C,N as D,b2 as S,x as I,X as M}from"./index-qHm2isZb.js";import{X as E}from"./chunk-DBtIkPjn.js";import{u as z}from"./chunk-ByFoKVyi.js";import{I as T}from"./chunk-EvPoNOTO.js";import{P as O}from"./chunk-r7IQz9KP.js";import"./chunk-ddLY9KjI.js";import"./chunk-B5pcS96K.js";const L=e=>a.jsxs(b,{...e,children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2",fill:"none"}),a.jsx("path",{d:"M16 2V6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("path",{d:"M8 2V6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("path",{d:"M3 10H21",stroke:"currentColor",strokeWidth:"2"})]}),W=e=>a.jsxs(b,{...e,children:[a.jsx("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor",strokeWidth:"2",fill:"none"}),a.jsx("path",{d:"M21 21L16.65 16.65",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),$=e=>a.jsxs(b,{...e,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none"}),a.jsx("path",{d:"M15 9L9 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),a.jsx("path",{d:"M9 9L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]});export{r as default};
